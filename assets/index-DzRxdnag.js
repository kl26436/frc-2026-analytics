(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function sA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qp={exports:{}},Pc={};var n1;function rA(){if(n1)return Pc;n1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,c){var d=null;if(c!==void 0&&(d=""+c),i.key!==void 0&&(d=""+i.key),"key"in i){c={};for(var m in i)m!=="key"&&(c[m]=i[m])}else c=i;return i=c.ref,{$$typeof:t,type:r,key:d,ref:i!==void 0?i:null,props:c}}return Pc.Fragment=e,Pc.jsx=n,Pc.jsxs=n,Pc}var s1;function aA(){return s1||(s1=1,Qp.exports=rA()),Qp.exports}var l=aA(),Xp={exports:{}},Ue={};var r1;function iA(){if(r1)return Ue;r1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function k(V){return V===null||typeof V!="object"?null:(V=N&&V[N]||V["@@iterator"],typeof V=="function"?V:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function B(V,Z,oe){this.props=V,this.context=Z,this.refs=I,this.updater=oe||L}B.prototype.isReactComponent={},B.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function U(){}U.prototype=B.prototype;function K(V,Z,oe){this.props=V,this.context=Z,this.refs=I,this.updater=oe||L}var Y=K.prototype=new U;Y.constructor=K,M(Y,B.prototype),Y.isPureReactComponent=!0;var Q=Array.isArray;function $(){}var C={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A(V,Z,oe){var xe=oe.ref;return{$$typeof:t,type:V,key:Z,ref:xe!==void 0?xe:null,props:oe}}function P(V,Z){return A(V.type,Z,V.props)}function w(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function j(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(oe){return Z[oe]})}var D=/\/+/g;function F(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?j(""+V.key):Z.toString(36)}function ue(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then($,$):(V.status="pending",V.then(function(Z){V.status==="pending"&&(V.status="fulfilled",V.value=Z)},function(Z){V.status==="pending"&&(V.status="rejected",V.reason=Z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function z(V,Z,oe,xe,Ae){var we=typeof V;(we==="undefined"||we==="boolean")&&(V=null);var De=!1;if(V===null)De=!0;else switch(we){case"bigint":case"string":case"number":De=!0;break;case"object":switch(V.$$typeof){case t:case e:De=!0;break;case y:return De=V._init,z(De(V._payload),Z,oe,xe,Ae)}}if(De)return Ae=Ae(V),De=xe===""?"."+F(V,0):xe,Q(Ae)?(oe="",De!=null&&(oe=De.replace(D,"$&/")+"/"),z(Ae,Z,oe,"",function(ye){return ye})):Ae!=null&&(w(Ae)&&(Ae=P(Ae,oe+(Ae.key==null||V&&V.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+De)),Z.push(Ae)),1;De=0;var J=xe===""?".":xe+":";if(Q(V))for(var X=0;X<V.length;X++)xe=V[X],we=J+F(xe,X),De+=z(xe,Z,oe,we,Ae);else if(X=k(V),typeof X=="function")for(V=X.call(V),X=0;!(xe=V.next()).done;)xe=xe.value,we=J+F(xe,X++),De+=z(xe,Z,oe,we,Ae);else if(we==="object"){if(typeof V.then=="function")return z(ue(V),Z,oe,xe,Ae);throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return De}function ee(V,Z,oe){if(V==null)return V;var xe=[],Ae=0;return z(V,xe,"","",function(we){return Z.call(oe,we,Ae++)}),xe}function pe(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(oe){(V._status===0||V._status===-1)&&(V._status=1,V._result=oe)},function(oe){(V._status===0||V._status===-1)&&(V._status=2,V._result=oe)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var H=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ge={map:ee,forEach:function(V,Z,oe){ee(V,function(){Z.apply(this,arguments)},oe)},count:function(V){var Z=0;return ee(V,function(){Z++}),Z},toArray:function(V){return ee(V,function(Z){return Z})||[]},only:function(V){if(!w(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ue.Activity=b,Ue.Children=ge,Ue.Component=B,Ue.Fragment=n,Ue.Profiler=i,Ue.PureComponent=K,Ue.StrictMode=r,Ue.Suspense=p,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(V){return C.H.useMemoCache(V)}},Ue.cache=function(V){return function(){return V.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(V,Z,oe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var xe=M({},V.props),Ae=V.key;if(Z!=null)for(we in Z.key!==void 0&&(Ae=""+Z.key),Z)!E.call(Z,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Z.ref===void 0||(xe[we]=Z[we]);var we=arguments.length-2;if(we===1)xe.children=oe;else if(1<we){for(var De=Array(we),J=0;J<we;J++)De[J]=arguments[J+2];xe.children=De}return A(V.type,Ae,xe)},Ue.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Ue.createElement=function(V,Z,oe){var xe,Ae={},we=null;if(Z!=null)for(xe in Z.key!==void 0&&(we=""+Z.key),Z)E.call(Z,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(Ae[xe]=Z[xe]);var De=arguments.length-2;if(De===1)Ae.children=oe;else if(1<De){for(var J=Array(De),X=0;X<De;X++)J[X]=arguments[X+2];Ae.children=J}if(V&&V.defaultProps)for(xe in De=V.defaultProps,De)Ae[xe]===void 0&&(Ae[xe]=De[xe]);return A(V,we,Ae)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(V){return{$$typeof:m,render:V}},Ue.isValidElement=w,Ue.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:pe}},Ue.memo=function(V,Z){return{$$typeof:g,type:V,compare:Z===void 0?null:Z}},Ue.startTransition=function(V){var Z=C.T,oe={};C.T=oe;try{var xe=V(),Ae=C.S;Ae!==null&&Ae(oe,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then($,H)}catch(we){H(we)}finally{Z!==null&&oe.types!==null&&(Z.types=oe.types),C.T=Z}},Ue.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ue.use=function(V){return C.H.use(V)},Ue.useActionState=function(V,Z,oe){return C.H.useActionState(V,Z,oe)},Ue.useCallback=function(V,Z){return C.H.useCallback(V,Z)},Ue.useContext=function(V){return C.H.useContext(V)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(V,Z){return C.H.useDeferredValue(V,Z)},Ue.useEffect=function(V,Z){return C.H.useEffect(V,Z)},Ue.useEffectEvent=function(V){return C.H.useEffectEvent(V)},Ue.useId=function(){return C.H.useId()},Ue.useImperativeHandle=function(V,Z,oe){return C.H.useImperativeHandle(V,Z,oe)},Ue.useInsertionEffect=function(V,Z){return C.H.useInsertionEffect(V,Z)},Ue.useLayoutEffect=function(V,Z){return C.H.useLayoutEffect(V,Z)},Ue.useMemo=function(V,Z){return C.H.useMemo(V,Z)},Ue.useOptimistic=function(V,Z){return C.H.useOptimistic(V,Z)},Ue.useReducer=function(V,Z,oe){return C.H.useReducer(V,Z,oe)},Ue.useRef=function(V){return C.H.useRef(V)},Ue.useState=function(V){return C.H.useState(V)},Ue.useSyncExternalStore=function(V,Z,oe){return C.H.useSyncExternalStore(V,Z,oe)},Ue.useTransition=function(){return C.H.useTransition()},Ue.version="19.2.3",Ue}var a1;function px(){return a1||(a1=1,Xp.exports=iA()),Xp.exports}var T=px();const At=sA(T);var Wp={exports:{}},Oc={},Jp={exports:{}},Zp={};var i1;function lA(){return i1||(i1=1,(function(t){function e(z,ee){var pe=z.length;z.push(ee);e:for(;0<pe;){var H=pe-1>>>1,ge=z[H];if(0<i(ge,ee))z[H]=ee,z[pe]=ge,pe=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var ee=z[0],pe=z.pop();if(pe!==ee){z[0]=pe;e:for(var H=0,ge=z.length,V=ge>>>1;H<V;){var Z=2*(H+1)-1,oe=z[Z],xe=Z+1,Ae=z[xe];if(0>i(oe,pe))xe<ge&&0>i(Ae,oe)?(z[H]=Ae,z[xe]=pe,H=xe):(z[H]=oe,z[Z]=pe,H=Z);else if(xe<ge&&0>i(Ae,pe))z[H]=Ae,z[xe]=pe,H=xe;else break e}}return ee}function i(z,ee){var pe=z.sortIndex-ee.sortIndex;return pe!==0?pe:z.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var p=[],g=[],y=1,b=null,N=3,k=!1,L=!1,M=!1,I=!1,B=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function Y(z){for(var ee=n(g);ee!==null;){if(ee.callback===null)r(g);else if(ee.startTime<=z)r(g),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(g)}}function Q(z){if(M=!1,Y(z),!L)if(n(p)!==null)L=!0,$||($=!0,j());else{var ee=n(g);ee!==null&&ue(Q,ee.startTime-z)}}var $=!1,C=-1,E=5,A=-1;function P(){return I?!0:!(t.unstable_now()-A<E)}function w(){if(I=!1,$){var z=t.unstable_now();A=z;var ee=!0;try{e:{L=!1,M&&(M=!1,U(C),C=-1),k=!0;var pe=N;try{t:{for(Y(z),b=n(p);b!==null&&!(b.expirationTime>z&&P());){var H=b.callback;if(typeof H=="function"){b.callback=null,N=b.priorityLevel;var ge=H(b.expirationTime<=z);if(z=t.unstable_now(),typeof ge=="function"){b.callback=ge,Y(z),ee=!0;break t}b===n(p)&&r(p),Y(z)}else r(p);b=n(p)}if(b!==null)ee=!0;else{var V=n(g);V!==null&&ue(Q,V.startTime-z),ee=!1}}break e}finally{b=null,N=pe,k=!1}ee=void 0}}finally{ee?j():$=!1}}}var j;if(typeof K=="function")j=function(){K(w)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=w,j=function(){F.postMessage(null)}}else j=function(){B(w,0)};function ue(z,ee){C=B(function(){z(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_next=function(z){switch(N){case 1:case 2:case 3:var ee=3;break;default:ee=N}var pe=N;N=ee;try{return z()}finally{N=pe}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var pe=N;N=z;try{return ee()}finally{N=pe}},t.unstable_scheduleCallback=function(z,ee,pe){var H=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?H+pe:H):pe=H,z){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=pe+ge,z={id:y++,callback:ee,priorityLevel:z,startTime:pe,expirationTime:ge,sortIndex:-1},pe>H?(z.sortIndex=pe,e(g,z),n(p)===null&&z===n(g)&&(M?(U(C),C=-1):M=!0,ue(Q,pe-H))):(z.sortIndex=ge,e(p,z),L||k||(L=!0,$||($=!0,j()))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var ee=N;return function(){var pe=N;N=ee;try{return z.apply(this,arguments)}finally{N=pe}}}})(Zp)),Zp}var l1;function oA(){return l1||(l1=1,Jp.exports=lA()),Jp.exports}var eg={exports:{}},Bn={};var o1;function cA(){if(o1)return Bn;o1=1;var t=px();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(p,g,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:p,containerInfo:g,implementation:y}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Bn.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(p,g,null,y)},Bn.flushSync=function(p){var g=d.T,y=r.p;try{if(d.T=null,r.p=2,p)return p()}finally{d.T=g,r.p=y,r.d.f()}},Bn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},Bn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Bn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,b=m(y,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:k}):y==="script"&&r.d.X(p,{crossOrigin:b,integrity:N,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Bn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},Bn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,b=m(y,g.crossOrigin);r.d.L(p,y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Bn.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},Bn.requestFormReset=function(p){r.d.r(p)},Bn.unstable_batchedUpdates=function(p,g){return p(g)},Bn.useFormState=function(p,g,y){return d.H.useFormState(p,g,y)},Bn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Bn.version="19.2.3",Bn}var c1;function IN(){if(c1)return eg.exports;c1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eg.exports=cA(),eg.exports}var u1;function uA(){if(u1)return Oc;u1=1;var t=oA(),e=px(),n=IN();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var a=s,o=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(o=a.return),s=a.return;while(s)}return a.tag===3?o:null}function d(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function m(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function p(s){if(c(s)!==s)throw Error(r(188))}function g(s){var a=s.alternate;if(!a){if(a=c(s),a===null)throw Error(r(188));return a!==s?null:s}for(var o=s,u=a;;){var f=o.return;if(f===null)break;var x=f.alternate;if(x===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===x.child){for(x=f.child;x;){if(x===o)return p(f),s;if(x===u)return p(f),a;x=x.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=x;else{for(var _=!1,R=f.child;R;){if(R===o){_=!0,o=f,u=x;break}if(R===u){_=!0,u=f,o=x;break}R=R.sibling}if(!_){for(R=x.child;R;){if(R===o){_=!0,o=x,u=f;break}if(R===u){_=!0,u=x,o=f;break}R=R.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:a}function y(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=y(s),a!==null)return a;s=s.sibling}return null}var b=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function j(s){return s===null||typeof s!="object"?null:(s=w&&s[w]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function F(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case B:return"Profiler";case I:return"StrictMode";case Q:return"Suspense";case $:return"SuspenseList";case A:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case K:return s.displayName||"Context";case U:return(s._context.displayName||"Context")+".Consumer";case Y:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return a=s.displayName||null,a!==null?a:F(s.type)||"Memo";case E:a=s._payload,s=s._init;try{return F(s(a))}catch{}}return null}var ue=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},H=[],ge=-1;function V(s){return{current:s}}function Z(s){0>ge||(s.current=H[ge],H[ge]=null,ge--)}function oe(s,a){ge++,H[ge]=s.current,s.current=a}var xe=V(null),Ae=V(null),we=V(null),De=V(null);function J(s,a){switch(oe(we,a),oe(Ae,s),oe(xe,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?T0(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=T0(a),s=w0(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(xe),oe(xe,s)}function X(){Z(xe),Z(Ae),Z(we)}function ye(s){s.memoizedState!==null&&oe(De,s);var a=xe.current,o=w0(a,s.type);a!==o&&(oe(Ae,s),oe(xe,o))}function qe(s){Ae.current===s&&(Z(xe),Z(Ae)),De.current===s&&(Z(De),kc._currentValue=pe)}var Se,jt;function ht(s){if(Se===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Se=a&&a[1]||"",jt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+s+jt}var _t=!1;function Ze(s,a){if(!s||_t)return"";_t=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(le){var ae=le}Reflect.construct(s,[],he)}else{try{he.call()}catch(le){ae=le}s.call(he.prototype)}}else{try{throw Error()}catch(le){ae=le}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),_=x[0],R=x[1];if(_&&R){var q=_.split(`
`),re=R.split(`
`);for(f=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;f<re.length&&!re[f].includes("DetermineComponentFrameRoot");)f++;if(u===q.length||f===re.length)for(u=q.length-1,f=re.length-1;1<=u&&0<=f&&q[u]!==re[f];)f--;for(;1<=u&&0<=f;u--,f--)if(q[u]!==re[f]){if(u!==1||f!==1)do if(u--,f--,0>f||q[u]!==re[f]){var ce=`
`+q[u].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=u&&0<=f);break}}}finally{_t=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?ht(o):""}function Kn(s,a){switch(s.tag){case 26:case 27:case 5:return ht(s.type);case 16:return ht("Lazy");case 13:return s.child!==a&&a!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return Ze(s.type,!1);case 11:return Ze(s.type.render,!1);case 1:return Ze(s.type,!0);case 31:return ht("Activity");default:return""}}function ms(s){try{var a="",o=null;do a+=Kn(s,o),o=s,s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var kt=Object.prototype.hasOwnProperty,at=t.unstable_scheduleCallback,Yn=t.unstable_cancelCallback,ks=t.unstable_shouldYield,Hr=t.unstable_requestPaint,Zt=t.unstable_now,Qs=t.unstable_getCurrentPriorityLevel,Is=t.unstable_ImmediatePriority,ss=t.unstable_UserBlockingPriority,Tn=t.unstable_NormalPriority,Xs=t.unstable_LowPriority,$r=t.unstable_IdlePriority,Ln=t.log,pr=t.unstable_setDisableYieldValue,Vn=null,Ot=null;function te(s){if(typeof Ln=="function"&&pr(s),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Vn,s)}catch{}}var be=Math.clz32?Math.clz32:Nt,Ce=Math.log,Re=Math.LN2;function Nt(s){return s>>>=0,s===0?32:31-(Ce(s)/Re|0)|0}var it=256,Ds=262144,Le=4194304;function ft(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function nt(s,a,o){var u=s.pendingLanes;if(u===0)return 0;var f=0,x=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var R=u&134217727;return R!==0?(u=R&~x,u!==0?f=ft(u):(_&=R,_!==0?f=ft(_):o||(o=R&~s,o!==0&&(f=ft(o))))):(R=u&~x,R!==0?f=ft(R):_!==0?f=ft(_):o||(o=u&~s,o!==0&&(f=ft(o)))),f===0?0:a!==0&&a!==f&&(a&x)===0&&(x=f&-f,o=a&-a,x>=o||x===32&&(o&4194048)!==0)?a:f}function lt(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function bn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function en(){var s=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),s}function gt(s){for(var a=[],o=0;31>o;o++)a.push(s);return a}function Un(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Yt(s,a,o,u,f,x){var _=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var R=s.entanglements,q=s.expirationTimes,re=s.hiddenUpdates;for(o=_&~o;0<o;){var ce=31-be(o),he=1<<ce;R[ce]=0,q[ce]=-1;var ae=re[ce];if(ae!==null)for(re[ce]=null,ce=0;ce<ae.length;ce++){var le=ae[ce];le!==null&&(le.lane&=-536870913)}o&=~he}u!==0&&zn(s,u,0),x!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=x&~(_&~a))}function zn(s,a,o){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-be(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function Fn(s,a){var o=s.entangledLanes|=a;for(s=s.entanglements;o;){var u=31-be(o),f=1<<u;f&a|s[u]&a&&(s[u]|=a),o&=~f}}function Qn(s,a){var o=a&-a;return o=(o&42)!==0?1:ps(o),(o&(s.suspendedLanes|a))!==0?0:o}function ps(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function gs(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:Q0(s.type))}function wn(s,a){var o=ee.p;try{return ee.p=s,a()}finally{ee.p=o}}var Wn=Math.random().toString(36).slice(2),tn="__reactFiber$"+Wn,vn="__reactProps$"+Wn,gr="__reactContainer$"+Wn,vl="__reactEvents$"+Wn,tm="__reactListeners$"+Wn,Fu="__reactHandles$"+Wn,Bu="__reactResources$"+Wn,xr="__reactMarker$"+Wn;function _l(s){delete s[tn],delete s[vn],delete s[vl],delete s[tm],delete s[Fu]}function yr(s){var a=s[tn];if(a)return a;for(var o=s.parentNode;o;){if(a=o[gr]||o[tn]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(s=D0(s);s!==null;){if(o=s[tn])return o;s=D0(s)}return a}s=o,o=s.parentNode}return null}function Ms(s){if(s=s[tn]||s[gr]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function xs(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function br(s){var a=s[Bu];return a||(a=s[Bu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function nn(s){s[xr]=!0}var Vo=new Set,Uo={};function vr(s,a){_r(s,a),_r(s+"Capture",a)}function _r(s,a){for(Uo[s]=a,s=0;s<a.length;s++)Vo.add(a[s])}var zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fo={},Bo={};function qu(s){return kt.call(Bo,s)?!0:kt.call(Fo,s)?!1:zo.test(s)?Bo[s]=!0:(Fo[s]=!0,!1)}function Nl(s,a,o){if(qu(a))if(o===null)s.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+o)}}function ys(s,a,o){if(o===null)s.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+o)}}function sn(s,a,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(a,o,""+u)}}function _n(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qo(s,a,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,x=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,x.call(this,_)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function xt(s){if(!s._valueTracker){var a=Ta(s)?"checked":"value";s._valueTracker=qo(s,a,""+s[a])}}function Ci(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return s&&(u=Ta(s)?s.checked?"true":"false":s.value),s=u,s!==o?(a.setValue(s),!0):!1}function Nr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ri=/[\n"\\]/g;function rs(s){return s.replace(Ri,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Sl(s,a,o,u,f,x,_,R){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),a!=null?_==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+_n(a)):s.value!==""+_n(a)&&(s.value=""+_n(a)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),a!=null?Ho(s,_,_n(a)):o!=null?Ho(s,_,_n(o)):u!=null&&s.removeAttribute("value"),f==null&&x!=null&&(s.defaultChecked=!!x),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+_n(R):s.removeAttribute("name")}function Hu(s,a,o,u,f,x,_,R){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),a!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){xt(s);return}o=o!=null?""+_n(o):"",a=a!=null?""+_n(a):o,R||a===s.value||(s.value=a),s.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=R?s.checked:!!u,s.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),xt(s)}function Ho(s,a,o){a==="number"&&Nr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function wa(s,a,o,u){if(s=s.options,a){a={};for(var f=0;f<o.length;f++)a["$"+o[f]]=!0;for(o=0;o<s.length;o++)f=a.hasOwnProperty("$"+s[o].value),s[o].selected!==f&&(s[o].selected=f),f&&u&&(s[o].defaultSelected=!0)}else{for(o=""+_n(o),a=null,f=0;f<s.length;f++){if(s[f].value===o){s[f].selected=!0,u&&(s[f].defaultSelected=!0);return}a!==null||s[f].disabled||(a=s[f])}a!==null&&(a.selected=!0)}}function $u(s,a,o){if(a!=null&&(a=""+_n(a),a!==s.value&&(s.value=a),o==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=o!=null?""+_n(o):""}function Aa(s,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(r(92));if(ue(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=_n(a),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),xt(s)}function as(s,a){if(a){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=a;return}}s.textContent=a}var Gu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(s,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,o):typeof o!="number"||o===0||Gu.has(a)?a==="float"?s.cssFloat=o:s[a]=(""+o).trim():s[a]=o+"px"}function Go(s,a,o){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&o[f]!==u&&$o(s,f,u)}else for(var x in a)a.hasOwnProperty(x)&&$o(s,x,a[x])}function El(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ja=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tl(s){return ja.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ws(){}var Ko=null;function Ps(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ca=null,Sr=null;function ki(s){var a=Ms(s);if(a&&(s=a.stateNode)){var o=s[vn]||null;e:switch(s=a.stateNode,a.type){case"input":if(Sl(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+rs(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==s&&u.form===s.form){var f=u[vn]||null;if(!f)throw Error(r(90));Sl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===s.form&&Ci(u)}break e;case"textarea":$u(s,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&wa(s,!!o.multiple,a,!1)}}}var wl=!1;function Ra(s,a,o){if(wl)return s(a,o);wl=!0;try{var u=s(a);return u}finally{if(wl=!1,(Ca!==null||Sr!==null)&&(zd(),Ca&&(a=Ca,s=Sr,Sr=Ca=null,ki(a),s)))for(a=0;a<s.length;a++)ki(s[a])}}function Js(s,a){var o=s.stateNode;if(o===null)return null;var u=o[vn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,a,typeof o));return o}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ii=!1;if(Os)try{var St={};Object.defineProperty(St,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{Ii=!1}var Er=null,Yo=null,Di=null;function Qo(){if(Di)return Di;var s,a=Yo,o=a.length,u,f="value"in Er?Er.value:Er.textContent,x=f.length;for(s=0;s<o&&a[s]===f[s];s++);var _=o-s;for(u=1;u<=_&&a[o-u]===f[x-u];u++);return Di=f.slice(s,1<u?1-u:void 0)}function Mi(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Gr(){return!0}function Zs(){return!1}function An(s){function a(o,u,f,x,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(o=s[R],this[R]=o?o(x):x[R]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Gr:Zs,this.isPropagationStopped=Zs,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),a}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tr=An(Kr),ka=b({},Kr,{view:0,detail:0}),Xo=An(ka),Ia,Al,wr,jl=b({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==wr&&(wr&&s.type==="mousemove"?(Ia=s.screenX-wr.screenX,Al=s.screenY-wr.screenY):Al=Ia=0,wr=s),Ia)},movementY:function(s){return"movementY"in s?s.movementY:Al}}),Wo=An(jl),Pi=b({},jl,{dataTransfer:0}),Yu=An(Pi),Qu=b({},ka,{relatedTarget:0}),Oi=An(Qu),Jo=b({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=An(Jo),Cl=b({},Kr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Wu=An(Cl),Ju=b({},Kr,{data:0}),Ar=An(Ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=td[s])?!!a[s]:!1}function Da(){return nd}var Jn=b({},ka,{key:function(s){if(s.key){var a=Zu[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Mi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ed[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(s){return s.type==="keypress"?Mi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Mi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sd=An(Jn),rd=b({},jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yr=An(rd),h=b({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),v=An(h),S=b({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=An(S),ne=b({},jl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=An(ne),ve=b({},Kr,{newState:0,oldState:0}),Fe=An(ve),Qt=[9,13,27,32],ot=Os&&"CompositionEvent"in window,Lt=null;Os&&"documentMode"in document&&(Lt=document.documentMode);var Ls=Os&&"TextEvent"in window&&!Lt,jr=Os&&(!ot||Lt&&8<Lt&&11>=Lt),er=" ",tr=!1;function Li(s,a){switch(s){case"keyup":return Qt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var kl=!1;function A2(s,a){switch(s){case"compositionend":return Rl(a);case"keypress":return a.which!==32?null:(tr=!0,er);case"textInput":return s=a.data,s===er&&tr?null:s;default:return null}}function j2(s,a){if(kl)return s==="compositionend"||!ot&&Li(s,a)?(s=Qo(),Di=Yo=Er=null,kl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return jr&&a.locale!=="ko"?null:a.data;default:return null}}var C2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!C2[s.type]:a==="textarea"}function Ly(s,a,o,u){Ca?Sr?Sr.push(u):Sr=[u]:Ca=u,a=Kd(a,"onChange"),0<a.length&&(o=new Tr("onChange","change",null,o,u),s.push({event:o,listeners:a}))}var Zo=null,ec=null;function R2(s){b0(s,0)}function ad(s){var a=xs(s);if(Ci(a))return s}function Vy(s,a){if(s==="change")return a}var Uy=!1;if(Os){var nm;if(Os){var sm="oninput"in document;if(!sm){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),sm=typeof zy.oninput=="function"}nm=sm}else nm=!1;Uy=nm&&(!document.documentMode||9<document.documentMode)}function Fy(){Zo&&(Zo.detachEvent("onpropertychange",By),ec=Zo=null)}function By(s){if(s.propertyName==="value"&&ad(ec)){var a=[];Ly(a,ec,s,Ps(s)),Ra(R2,a)}}function k2(s,a,o){s==="focusin"?(Fy(),Zo=a,ec=o,Zo.attachEvent("onpropertychange",By)):s==="focusout"&&Fy()}function I2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ad(ec)}function D2(s,a){if(s==="click")return ad(a)}function M2(s,a){if(s==="input"||s==="change")return ad(a)}function P2(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var bs=typeof Object.is=="function"?Object.is:P2;function tc(s,a){if(bs(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var o=Object.keys(s),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!kt.call(a,f)||!bs(s[f],a[f]))return!1}return!0}function qy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Hy(s,a){var o=qy(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=a&&u>=a)return{node:o,offset:a-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qy(o)}}function $y(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?$y(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Gy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Nr(s.document);a instanceof s.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)s=a.contentWindow;else break;a=Nr(s.document)}return a}function rm(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var O2=Os&&"documentMode"in document&&11>=document.documentMode,Il=null,am=null,nc=null,im=!1;function Ky(s,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;im||Il==null||Il!==Nr(u)||(u=Il,"selectionStart"in u&&rm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),nc&&tc(nc,u)||(nc=u,u=Kd(am,"onSelect"),0<u.length&&(a=new Tr("onSelect","select",null,a,o),s.push({event:a,listeners:u}),a.target=Il)))}function Vi(s,a){var o={};return o[s.toLowerCase()]=a.toLowerCase(),o["Webkit"+s]="webkit"+a,o["Moz"+s]="moz"+a,o}var Dl={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},lm={},Yy={};Os&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function Ui(s){if(lm[s])return lm[s];if(!Dl[s])return s;var a=Dl[s],o;for(o in a)if(a.hasOwnProperty(o)&&o in Yy)return lm[s]=a[o];return s}var Qy=Ui("animationend"),Xy=Ui("animationiteration"),Wy=Ui("animationstart"),L2=Ui("transitionrun"),V2=Ui("transitionstart"),U2=Ui("transitioncancel"),Jy=Ui("transitionend"),Zy=new Map,om="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");om.push("scrollEnd");function nr(s,a){Zy.set(s,a),vr(a,[s])}var id=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Vs=[],Ml=0,cm=0;function ld(){for(var s=Ml,a=cm=Ml=0;a<s;){var o=Vs[a];Vs[a++]=null;var u=Vs[a];Vs[a++]=null;var f=Vs[a];Vs[a++]=null;var x=Vs[a];if(Vs[a++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}x!==0&&eb(o,f,x)}}function od(s,a,o,u){Vs[Ml++]=s,Vs[Ml++]=a,Vs[Ml++]=o,Vs[Ml++]=u,cm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function um(s,a,o,u){return od(s,a,o,u),cd(s)}function zi(s,a){return od(s,null,null,a),cd(s)}function eb(s,a,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var f=!1,x=s.return;x!==null;)x.childLanes|=o,u=x.alternate,u!==null&&(u.childLanes|=o),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(f=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,f&&a!==null&&(f=31-be(o),s=x.hiddenUpdates,u=s[f],u===null?s[f]=[a]:u.push(a),a.lane=o|536870912),x):null}function cd(s){if(50<Ec)throw Ec=0,bp=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Pl={};function z2(s,a,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(s,a,o,u){return new z2(s,a,o,u)}function dm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qr(s,a){var o=s.alternate;return o===null?(o=vs(s.tag,a,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=a,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,a=s.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function tb(s,a){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,a=o.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function ud(s,a,o,u,f,x){var _=0;if(u=s,typeof s=="function")dm(s)&&(_=1);else if(typeof s=="string")_=$w(s,o,xe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case A:return s=vs(31,o,a,f),s.elementType=A,s.lanes=x,s;case M:return Fi(o.children,f,x,a);case I:_=8,f|=24;break;case B:return s=vs(12,o,a,f|2),s.elementType=B,s.lanes=x,s;case Q:return s=vs(13,o,a,f),s.elementType=Q,s.lanes=x,s;case $:return s=vs(19,o,a,f),s.elementType=$,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:_=10;break e;case U:_=9;break e;case Y:_=11;break e;case C:_=14;break e;case E:_=16,u=null;break e}_=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return a=vs(_,o,a,f),a.elementType=s,a.type=u,a.lanes=x,a}function Fi(s,a,o,u){return s=vs(7,s,u,a),s.lanes=o,s}function hm(s,a,o){return s=vs(6,s,null,a),s.lanes=o,s}function nb(s){var a=vs(18,null,null,0);return a.stateNode=s,a}function fm(s,a,o){return a=vs(4,s.children!==null?s.children:[],s.key,a),a.lanes=o,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var sb=new WeakMap;function Us(s,a){if(typeof s=="object"&&s!==null){var o=sb.get(s);return o!==void 0?o:(a={value:s,source:a,stack:ms(a)},sb.set(s,a),a)}return{value:s,source:a,stack:ms(a)}}var Ol=[],Ll=0,dd=null,sc=0,zs=[],Fs=0,Ma=null,Cr=1,Rr="";function Xr(s,a){Ol[Ll++]=sc,Ol[Ll++]=dd,dd=s,sc=a}function rb(s,a,o){zs[Fs++]=Cr,zs[Fs++]=Rr,zs[Fs++]=Ma,Ma=s;var u=Cr;s=Rr;var f=32-be(u)-1;u&=~(1<<f),o+=1;var x=32-be(a)+f;if(30<x){var _=f-f%5;x=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Cr=1<<32-be(a)+f|o<<f|u,Rr=x+s}else Cr=1<<x|o<<f|u,Rr=s}function mm(s){s.return!==null&&(Xr(s,1),rb(s,1,0))}function pm(s){for(;s===dd;)dd=Ol[--Ll],Ol[Ll]=null,sc=Ol[--Ll],Ol[Ll]=null;for(;s===Ma;)Ma=zs[--Fs],zs[Fs]=null,Rr=zs[--Fs],zs[Fs]=null,Cr=zs[--Fs],zs[Fs]=null}function ab(s,a){zs[Fs++]=Cr,zs[Fs++]=Rr,zs[Fs++]=Ma,Cr=a.id,Rr=a.overflow,Ma=s}var jn=null,Mt=null,et=!1,Pa=null,Bs=!1,gm=Error(r(519));function Oa(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rc(Us(a,s)),gm}function ib(s){var a=s.stateNode,o=s.type,u=s.memoizedProps;switch(a[tn]=s,a[vn]=u,o){case"dialog":Ke("cancel",a),Ke("close",a);break;case"iframe":case"object":case"embed":Ke("load",a);break;case"video":case"audio":for(o=0;o<wc.length;o++)Ke(wc[o],a);break;case"source":Ke("error",a);break;case"img":case"image":case"link":Ke("error",a),Ke("load",a);break;case"details":Ke("toggle",a);break;case"input":Ke("invalid",a),Hu(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ke("invalid",a);break;case"textarea":Ke("invalid",a),Aa(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||S0(a.textContent,o)?(u.popover!=null&&(Ke("beforetoggle",a),Ke("toggle",a)),u.onScroll!=null&&Ke("scroll",a),u.onScrollEnd!=null&&Ke("scrollend",a),u.onClick!=null&&(a.onclick=Ws),a=!0):a=!1,a||Oa(s,!0)}function lb(s){for(jn=s.return;jn;)switch(jn.tag){case 5:case 31:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:jn=jn.return}}function Vl(s){if(s!==jn)return!1;if(!et)return lb(s),et=!0,!1;var a=s.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Mp(s.type,s.memoizedProps)),o=!o),o&&Mt&&Oa(s),lb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=I0(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=I0(s)}else a===27?(a=Mt,Xa(s.type)?(s=Up,Up=null,Mt=s):Mt=a):Mt=jn?Hs(s.stateNode.nextSibling):null;return!0}function Bi(){Mt=jn=null,et=!1}function xm(){var s=Pa;return s!==null&&(cs===null?cs=s:cs.push.apply(cs,s),Pa=null),s}function rc(s){Pa===null?Pa=[s]:Pa.push(s)}var ym=V(null),qi=null,Wr=null;function La(s,a,o){oe(ym,a._currentValue),a._currentValue=o}function Jr(s){s._currentValue=ym.current,Z(ym)}function bm(s,a,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===o)break;s=s.return}}function vm(s,a,o,u){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var x=f.dependencies;if(x!==null){var _=f.child;x=x.firstContext;e:for(;x!==null;){var R=x;x=f;for(var q=0;q<a.length;q++)if(R.context===a[q]){x.lanes|=o,R=x.alternate,R!==null&&(R.lanes|=o),bm(x.return,o,s),u||(_=null);break e}x=R.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=o,x=_.alternate,x!==null&&(x.lanes|=o),bm(_,o,s),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===s){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ul(s,a,o,u){s=null;for(var f=a,x=!1;f!==null;){if(!x){if((f.flags&524288)!==0)x=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var R=f.type;bs(f.pendingProps.value,_.value)||(s!==null?s.push(R):s=[R])}}else if(f===De.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(kc):s=[kc])}f=f.return}s!==null&&vm(a,s,o,u),a.flags|=262144}function hd(s){for(s=s.firstContext;s!==null;){if(!bs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Hi(s){qi=s,Wr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Cn(s){return ob(qi,s)}function fd(s,a){return qi===null&&Hi(s),ob(s,a)}function ob(s,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Wr===null){if(s===null)throw Error(r(308));Wr=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Wr=Wr.next=a;return o}var F2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(o){return o()})}},B2=t.unstable_scheduleCallback,q2=t.unstable_NormalPriority,rn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _m(){return{controller:new F2,data:new Map,refCount:0}}function ac(s){s.refCount--,s.refCount===0&&B2(q2,function(){s.controller.abort()})}var ic=null,Nm=0,zl=0,Fl=null;function H2(s,a){if(ic===null){var o=ic=[];Nm=0,zl=Tp(),Fl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Nm++,a.then(cb,cb),a}function cb(){if(--Nm===0&&ic!==null){Fl!==null&&(Fl.status="fulfilled");var s=ic;ic=null,zl=0,Fl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function $2(s,a){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<o.length;f++)(0,o[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var ub=z.S;z.S=function(s,a){Kv=Zt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&H2(s,a),ub!==null&&ub(s,a)};var $i=V(null);function Sm(){var s=$i.current;return s!==null?s:Ct.pooledCache}function md(s,a){a===null?oe($i,$i.current):oe($i,a.pool)}function db(){var s=Sm();return s===null?null:{parent:rn._currentValue,pool:s}}var Bl=Error(r(460)),Em=Error(r(474)),pd=Error(r(542)),gd={then:function(){}};function hb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function fb(s,a,o){switch(o=s[o],o===void 0?s.push(a):o!==a&&(a.then(Ws,Ws),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,pb(s),s;default:if(typeof a.status=="string")a.then(Ws,Ws);else{if(s=Ct,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,pb(s),s}throw Ki=a,Bl}}function Gi(s){try{var a=s._init;return a(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ki=o,Bl):o}}var Ki=null;function mb(){if(Ki===null)throw Error(r(459));var s=Ki;return Ki=null,s}function pb(s){if(s===Bl||s===pd)throw Error(r(483))}var ql=null,lc=0;function xd(s){var a=lc;return lc+=1,ql===null&&(ql=[]),fb(ql,s,a)}function oc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function yd(s,a){throw a.$$typeof===N?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function gb(s){function a(W,G){if(s){var se=W.deletions;se===null?(W.deletions=[G],W.flags|=16):se.push(G)}}function o(W,G){if(!s)return null;for(;G!==null;)a(W,G),G=G.sibling;return null}function u(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function f(W,G){return W=Qr(W,G),W.index=0,W.sibling=null,W}function x(W,G,se){return W.index=se,s?(se=W.alternate,se!==null?(se=se.index,se<G?(W.flags|=67108866,G):se):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function _(W){return s&&W.alternate===null&&(W.flags|=67108866),W}function R(W,G,se,de){return G===null||G.tag!==6?(G=hm(se,W.mode,de),G.return=W,G):(G=f(G,se),G.return=W,G)}function q(W,G,se,de){var ke=se.type;return ke===M?ce(W,G,se.props.children,de,se.key):G!==null&&(G.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===E&&Gi(ke)===G.type)?(G=f(G,se.props),oc(G,se),G.return=W,G):(G=ud(se.type,se.key,se.props,null,W.mode,de),oc(G,se),G.return=W,G)}function re(W,G,se,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==se.containerInfo||G.stateNode.implementation!==se.implementation?(G=fm(se,W.mode,de),G.return=W,G):(G=f(G,se.children||[]),G.return=W,G)}function ce(W,G,se,de,ke){return G===null||G.tag!==7?(G=Fi(se,W.mode,de,ke),G.return=W,G):(G=f(G,se),G.return=W,G)}function he(W,G,se){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=hm(""+G,W.mode,se),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case k:return se=ud(G.type,G.key,G.props,null,W.mode,se),oc(se,G),se.return=W,se;case L:return G=fm(G,W.mode,se),G.return=W,G;case E:return G=Gi(G),he(W,G,se)}if(ue(G)||j(G))return G=Fi(G,W.mode,se,null),G.return=W,G;if(typeof G.then=="function")return he(W,xd(G),se);if(G.$$typeof===K)return he(W,fd(W,G),se);yd(W,G)}return null}function ae(W,G,se,de){var ke=G!==null?G.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return ke!==null?null:R(W,G,""+se,de);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case k:return se.key===ke?q(W,G,se,de):null;case L:return se.key===ke?re(W,G,se,de):null;case E:return se=Gi(se),ae(W,G,se,de)}if(ue(se)||j(se))return ke!==null?null:ce(W,G,se,de,null);if(typeof se.then=="function")return ae(W,G,xd(se),de);if(se.$$typeof===K)return ae(W,G,fd(W,se),de);yd(W,se)}return null}function le(W,G,se,de,ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return W=W.get(se)||null,R(G,W,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case k:return W=W.get(de.key===null?se:de.key)||null,q(G,W,de,ke);case L:return W=W.get(de.key===null?se:de.key)||null,re(G,W,de,ke);case E:return de=Gi(de),le(W,G,se,de,ke)}if(ue(de)||j(de))return W=W.get(se)||null,ce(G,W,de,ke,null);if(typeof de.then=="function")return le(W,G,se,xd(de),ke);if(de.$$typeof===K)return le(W,G,se,fd(G,de),ke);yd(G,de)}return null}function Te(W,G,se,de){for(var ke=null,st=null,je=G,He=G=0,Qe=null;je!==null&&He<se.length;He++){je.index>He?(Qe=je,je=null):Qe=je.sibling;var rt=ae(W,je,se[He],de);if(rt===null){je===null&&(je=Qe);break}s&&je&&rt.alternate===null&&a(W,je),G=x(rt,G,He),st===null?ke=rt:st.sibling=rt,st=rt,je=Qe}if(He===se.length)return o(W,je),et&&Xr(W,He),ke;if(je===null){for(;He<se.length;He++)je=he(W,se[He],de),je!==null&&(G=x(je,G,He),st===null?ke=je:st.sibling=je,st=je);return et&&Xr(W,He),ke}for(je=u(je);He<se.length;He++)Qe=le(je,W,He,se[He],de),Qe!==null&&(s&&Qe.alternate!==null&&je.delete(Qe.key===null?He:Qe.key),G=x(Qe,G,He),st===null?ke=Qe:st.sibling=Qe,st=Qe);return s&&je.forEach(function(ti){return a(W,ti)}),et&&Xr(W,He),ke}function Me(W,G,se,de){if(se==null)throw Error(r(151));for(var ke=null,st=null,je=G,He=G=0,Qe=null,rt=se.next();je!==null&&!rt.done;He++,rt=se.next()){je.index>He?(Qe=je,je=null):Qe=je.sibling;var ti=ae(W,je,rt.value,de);if(ti===null){je===null&&(je=Qe);break}s&&je&&ti.alternate===null&&a(W,je),G=x(ti,G,He),st===null?ke=ti:st.sibling=ti,st=ti,je=Qe}if(rt.done)return o(W,je),et&&Xr(W,He),ke;if(je===null){for(;!rt.done;He++,rt=se.next())rt=he(W,rt.value,de),rt!==null&&(G=x(rt,G,He),st===null?ke=rt:st.sibling=rt,st=rt);return et&&Xr(W,He),ke}for(je=u(je);!rt.done;He++,rt=se.next())rt=le(je,W,He,rt.value,de),rt!==null&&(s&&rt.alternate!==null&&je.delete(rt.key===null?He:rt.key),G=x(rt,G,He),st===null?ke=rt:st.sibling=rt,st=rt);return s&&je.forEach(function(nA){return a(W,nA)}),et&&Xr(W,He),ke}function wt(W,G,se,de){if(typeof se=="object"&&se!==null&&se.type===M&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case k:e:{for(var ke=se.key;G!==null;){if(G.key===ke){if(ke=se.type,ke===M){if(G.tag===7){o(W,G.sibling),de=f(G,se.props.children),de.return=W,W=de;break e}}else if(G.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===E&&Gi(ke)===G.type){o(W,G.sibling),de=f(G,se.props),oc(de,se),de.return=W,W=de;break e}o(W,G);break}else a(W,G);G=G.sibling}se.type===M?(de=Fi(se.props.children,W.mode,de,se.key),de.return=W,W=de):(de=ud(se.type,se.key,se.props,null,W.mode,de),oc(de,se),de.return=W,W=de)}return _(W);case L:e:{for(ke=se.key;G!==null;){if(G.key===ke)if(G.tag===4&&G.stateNode.containerInfo===se.containerInfo&&G.stateNode.implementation===se.implementation){o(W,G.sibling),de=f(G,se.children||[]),de.return=W,W=de;break e}else{o(W,G);break}else a(W,G);G=G.sibling}de=fm(se,W.mode,de),de.return=W,W=de}return _(W);case E:return se=Gi(se),wt(W,G,se,de)}if(ue(se))return Te(W,G,se,de);if(j(se)){if(ke=j(se),typeof ke!="function")throw Error(r(150));return se=ke.call(se),Me(W,G,se,de)}if(typeof se.then=="function")return wt(W,G,xd(se),de);if(se.$$typeof===K)return wt(W,G,fd(W,se),de);yd(W,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,G!==null&&G.tag===6?(o(W,G.sibling),de=f(G,se),de.return=W,W=de):(o(W,G),de=hm(se,W.mode,de),de.return=W,W=de),_(W)):o(W,G)}return function(W,G,se,de){try{lc=0;var ke=wt(W,G,se,de);return ql=null,ke}catch(je){if(je===Bl||je===pd)throw je;var st=vs(29,je,null,W.mode);return st.lanes=de,st.return=W,st}}}var Yi=gb(!0),xb=gb(!1),Va=!1;function Tm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wm(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ua(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function za(s,a,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=cd(s),eb(s,null,o),a}return od(s,u,a,o),cd(s)}function cc(s,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,o|=u,a.lanes=o,Fn(s,o)}}function Am(s,a){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?f=x=_:x=x.next=_,o=o.next}while(o!==null);x===null?f=x=a:x=x.next=a}else f=x=a;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=a:s.next=a,o.lastBaseUpdate=a}var jm=!1;function uc(){if(jm){var s=Fl;if(s!==null)throw s}}function dc(s,a,o,u){jm=!1;var f=s.updateQueue;Va=!1;var x=f.firstBaseUpdate,_=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var q=R,re=q.next;q.next=null,_===null?x=re:_.next=re,_=q;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,R=ce.lastBaseUpdate,R!==_&&(R===null?ce.firstBaseUpdate=re:R.next=re,ce.lastBaseUpdate=q))}if(x!==null){var he=f.baseState;_=0,ce=re=q=null,R=x;do{var ae=R.lane&-536870913,le=ae!==R.lane;if(le?(Ye&ae)===ae:(u&ae)===ae){ae!==0&&ae===zl&&(jm=!0),ce!==null&&(ce=ce.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Te=s,Me=R;ae=a;var wt=o;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){he=Te.call(wt,he,ae);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,ae=typeof Te=="function"?Te.call(wt,he,ae):Te,ae==null)break e;he=b({},he,ae);break e;case 2:Va=!0}}ae=R.callback,ae!==null&&(s.flags|=64,le&&(s.flags|=8192),le=f.callbacks,le===null?f.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ce===null?(re=ce=le,q=he):ce=ce.next=le,_|=ae;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;le=R,R=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);ce===null&&(q=he),f.baseState=q,f.firstBaseUpdate=re,f.lastBaseUpdate=ce,x===null&&(f.shared.lanes=0),$a|=_,s.lanes=_,s.memoizedState=he}}function yb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function bb(s,a){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)yb(o[s],a)}var Hl=V(null),bd=V(0);function vb(s,a){s=la,oe(bd,s),oe(Hl,a),la=s|a.baseLanes}function Cm(){oe(bd,la),oe(Hl,Hl.current)}function Rm(){la=bd.current,Z(Hl),Z(bd)}var _s=V(null),qs=null;function Fa(s){var a=s.alternate;oe(Xt,Xt.current&1),oe(_s,s),qs===null&&(a===null||Hl.current!==null||a.memoizedState!==null)&&(qs=s)}function km(s){oe(Xt,Xt.current),oe(_s,s),qs===null&&(qs=s)}function _b(s){s.tag===22?(oe(Xt,Xt.current),oe(_s,s),qs===null&&(qs=s)):Ba()}function Ba(){oe(Xt,Xt.current),oe(_s,_s.current)}function Ns(s){Z(_s),qs===s&&(qs=null),Z(Xt)}var Xt=V(0);function vd(s){for(var a=s;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Lp(o)||Vp(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zr=0,Be=null,Et=null,an=null,_d=!1,$l=!1,Qi=!1,Nd=0,hc=0,Gl=null,G2=0;function qt(){throw Error(r(321))}function Im(s,a){if(a===null)return!1;for(var o=0;o<a.length&&o<s.length;o++)if(!bs(s[o],a[o]))return!1;return!0}function Dm(s,a,o,u,f,x){return Zr=x,Be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=s===null||s.memoizedState===null?rv:Ym,Qi=!1,x=o(u,f),Qi=!1,$l&&(x=Sb(a,o,u,f)),Nb(s),x}function Nb(s){z.H=pc;var a=Et!==null&&Et.next!==null;if(Zr=0,an=Et=Be=null,_d=!1,hc=0,Gl=null,a)throw Error(r(300));s===null||ln||(s=s.dependencies,s!==null&&hd(s)&&(ln=!0))}function Sb(s,a,o,u){Be=s;var f=0;do{if($l&&(Gl=null),hc=0,$l=!1,25<=f)throw Error(r(301));if(f+=1,an=Et=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}z.H=av,x=a(o,u)}while($l);return x}function K2(){var s=z.H,a=s.useState()[0];return a=typeof a.then=="function"?fc(a):a,s=s.useState()[0],(Et!==null?Et.memoizedState:null)!==s&&(Be.flags|=1024),a}function Mm(){var s=Nd!==0;return Nd=0,s}function Pm(s,a,o){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~o}function Om(s){if(_d){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}_d=!1}Zr=0,an=Et=Be=null,$l=!1,hc=Nd=0,Gl=null}function Zn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Be.memoizedState=an=s:an=an.next=s,an}function Wt(){if(Et===null){var s=Be.alternate;s=s!==null?s.memoizedState:null}else s=Et.next;var a=an===null?Be.memoizedState:an.next;if(a!==null)an=a,Et=s;else{if(s===null)throw Be.alternate===null?Error(r(467)):Error(r(310));Et=s,s={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},an===null?Be.memoizedState=an=s:an=an.next=s}return an}function Sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fc(s){var a=hc;return hc+=1,Gl===null&&(Gl=[]),s=fb(Gl,s,a),a=Be,(an===null?a.memoizedState:an.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?rv:Ym),s}function Ed(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return fc(s);if(s.$$typeof===K)return Cn(s)}throw Error(r(438,String(s)))}function Lm(s){var a=null,o=Be.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=Be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Sd(),Be.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(s),u=0;u<s;u++)o[u]=P;return a.index++,o}function ea(s,a){return typeof a=="function"?a(s):a}function Td(s){var a=Wt();return Vm(a,Et,s)}function Vm(s,a,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=s.baseQueue,x=u.pending;if(x!==null){if(f!==null){var _=f.next;f.next=x.next,x.next=_}a.baseQueue=f=x,u.pending=null}if(x=s.baseState,f===null)s.memoizedState=x;else{a=f.next;var R=_=null,q=null,re=a,ce=!1;do{var he=re.lane&-536870913;if(he!==re.lane?(Ye&he)===he:(Zr&he)===he){var ae=re.revertLane;if(ae===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),he===zl&&(ce=!0);else if((Zr&ae)===ae){re=re.next,ae===zl&&(ce=!0);continue}else he={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},q===null?(R=q=he,_=x):q=q.next=he,Be.lanes|=ae,$a|=ae;he=re.action,Qi&&o(x,he),x=re.hasEagerState?re.eagerState:o(x,he)}else ae={lane:he,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},q===null?(R=q=ae,_=x):q=q.next=ae,Be.lanes|=he,$a|=he;re=re.next}while(re!==null&&re!==a);if(q===null?_=x:q.next=R,!bs(x,s.memoizedState)&&(ln=!0,ce&&(o=Fl,o!==null)))throw o;s.memoizedState=x,s.baseState=_,s.baseQueue=q,u.lastRenderedState=x}return f===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Um(s){var a=Wt(),o=a.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,f=o.pending,x=a.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do x=s(x,_.action),_=_.next;while(_!==f);bs(x,a.memoizedState)||(ln=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),o.lastRenderedState=x}return[x,u]}function Eb(s,a,o){var u=Be,f=Wt(),x=et;if(x){if(o===void 0)throw Error(r(407));o=o()}else o=a();var _=!bs((Et||f).memoizedState,o);if(_&&(f.memoizedState=o,ln=!0),f=f.queue,Bm(Ab.bind(null,u,f,s),[s]),f.getSnapshot!==a||_||an!==null&&an.memoizedState.tag&1){if(u.flags|=2048,Kl(9,{destroy:void 0},wb.bind(null,u,f,o,a),null),Ct===null)throw Error(r(349));x||(Zr&127)!==0||Tb(u,a,o)}return o}function Tb(s,a,o){s.flags|=16384,s={getSnapshot:a,value:o},a=Be.updateQueue,a===null?(a=Sd(),Be.updateQueue=a,a.stores=[s]):(o=a.stores,o===null?a.stores=[s]:o.push(s))}function wb(s,a,o,u){a.value=o,a.getSnapshot=u,jb(a)&&Cb(s)}function Ab(s,a,o){return o(function(){jb(a)&&Cb(s)})}function jb(s){var a=s.getSnapshot;s=s.value;try{var o=a();return!bs(s,o)}catch{return!0}}function Cb(s){var a=zi(s,2);a!==null&&us(a,s,2)}function zm(s){var a=Zn();if(typeof s=="function"){var o=s;if(s=o(),Qi){te(!0);try{o()}finally{te(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:s},a}function Rb(s,a,o,u){return s.baseState=o,Vm(s,Et,typeof u=="function"?u:ea)}function Y2(s,a,o,u,f){if(jd(s))throw Error(r(485));if(s=a.action,s!==null){var x={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};z.T!==null?o(!0):x.isTransition=!1,u(x),o=a.pending,o===null?(x.next=a.pending=x,kb(a,x)):(x.next=o.next,a.pending=o.next=x)}}function kb(s,a){var o=a.action,u=a.payload,f=s.state;if(a.isTransition){var x=z.T,_={};z.T=_;try{var R=o(f,u),q=z.S;q!==null&&q(_,R),Ib(s,a,R)}catch(re){Fm(s,a,re)}finally{x!==null&&_.types!==null&&(x.types=_.types),z.T=x}}else try{x=o(f,u),Ib(s,a,x)}catch(re){Fm(s,a,re)}}function Ib(s,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Db(s,a,u)},function(u){return Fm(s,a,u)}):Db(s,a,o)}function Db(s,a,o){a.status="fulfilled",a.value=o,Mb(a),s.state=o,a=s.pending,a!==null&&(o=a.next,o===a?s.pending=null:(o=o.next,a.next=o,kb(s,o)))}function Fm(s,a,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Mb(a),a=a.next;while(a!==u)}s.action=null}function Mb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Pb(s,a){return a}function Ob(s,a){if(et){var o=Ct.formState;if(o!==null){e:{var u=Be;if(et){if(Mt){t:{for(var f=Mt,x=Bs;f.nodeType!==8;){if(!x){f=null;break t}if(f=Hs(f.nextSibling),f===null){f=null;break t}}x=f.data,f=x==="F!"||x==="F"?f:null}if(f){Mt=Hs(f.nextSibling),u=f.data==="F!";break e}}Oa(u)}u=!1}u&&(a=o[0])}}return o=Zn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pb,lastRenderedState:a},o.queue=u,o=tv.bind(null,Be,u),u.dispatch=o,u=zm(!1),x=Km.bind(null,Be,!1,u.queue),u=Zn(),f={state:a,dispatch:null,action:s,pending:null},u.queue=f,o=Y2.bind(null,Be,f,x,o),f.dispatch=o,u.memoizedState=s,[a,o,!1]}function Lb(s){var a=Wt();return Vb(a,Et,s)}function Vb(s,a,o){if(a=Vm(s,a,Pb)[0],s=Td(ea)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=fc(a)}catch(_){throw _===Bl?pd:_}else u=a;a=Wt();var f=a.queue,x=f.dispatch;return o!==a.memoizedState&&(Be.flags|=2048,Kl(9,{destroy:void 0},Q2.bind(null,f,o),null)),[u,x,s]}function Q2(s,a){s.action=a}function Ub(s){var a=Wt(),o=Et;if(o!==null)return Vb(a,o,s);Wt(),a=a.memoizedState,o=Wt();var u=o.queue.dispatch;return o.memoizedState=s,[a,u,!1]}function Kl(s,a,o,u){return s={tag:s,create:o,deps:u,inst:a,next:null},a=Be.updateQueue,a===null&&(a=Sd(),Be.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,a.lastEffect=s),s}function zb(){return Wt().memoizedState}function wd(s,a,o,u){var f=Zn();Be.flags|=s,f.memoizedState=Kl(1|a,{destroy:void 0},o,u===void 0?null:u)}function Ad(s,a,o,u){var f=Wt();u=u===void 0?null:u;var x=f.memoizedState.inst;Et!==null&&u!==null&&Im(u,Et.memoizedState.deps)?f.memoizedState=Kl(a,x,o,u):(Be.flags|=s,f.memoizedState=Kl(1|a,x,o,u))}function Fb(s,a){wd(8390656,8,s,a)}function Bm(s,a){Ad(2048,8,s,a)}function X2(s){Be.flags|=4;var a=Be.updateQueue;if(a===null)a=Sd(),Be.updateQueue=a,a.events=[s];else{var o=a.events;o===null?a.events=[s]:o.push(s)}}function Bb(s){var a=Wt().memoizedState;return X2({ref:a,nextImpl:s}),function(){if((ct&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function qb(s,a){return Ad(4,2,s,a)}function Hb(s,a){return Ad(4,4,s,a)}function $b(s,a){if(typeof a=="function"){s=s();var o=a(s);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Gb(s,a,o){o=o!=null?o.concat([s]):null,Ad(4,4,$b.bind(null,a,s),o)}function qm(){}function Kb(s,a){var o=Wt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&Im(a,u[1])?u[0]:(o.memoizedState=[s,a],s)}function Yb(s,a){var o=Wt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&Im(a,u[1]))return u[0];if(u=s(),Qi){te(!0);try{s()}finally{te(!1)}}return o.memoizedState=[u,a],u}function Hm(s,a,o){return o===void 0||(Zr&1073741824)!==0&&(Ye&261930)===0?s.memoizedState=a:(s.memoizedState=o,s=Qv(),Be.lanes|=s,$a|=s,o)}function Qb(s,a,o,u){return bs(o,a)?o:Hl.current!==null?(s=Hm(s,o,u),bs(s,a)||(ln=!0),s):(Zr&42)===0||(Zr&1073741824)!==0&&(Ye&261930)===0?(ln=!0,s.memoizedState=o):(s=Qv(),Be.lanes|=s,$a|=s,a)}function Xb(s,a,o,u,f){var x=ee.p;ee.p=x!==0&&8>x?x:8;var _=z.T,R={};z.T=R,Km(s,!1,a,o);try{var q=f(),re=z.S;if(re!==null&&re(R,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ce=$2(q,u);mc(s,a,ce,Ts(s))}else mc(s,a,u,Ts(s))}catch(he){mc(s,a,{then:function(){},status:"rejected",reason:he},Ts())}finally{ee.p=x,_!==null&&R.types!==null&&(_.types=R.types),z.T=_}}function W2(){}function $m(s,a,o,u){if(s.tag!==5)throw Error(r(476));var f=Wb(s).queue;Xb(s,f,a,pe,o===null?W2:function(){return Jb(s),o(u)})}function Wb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:pe},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:o},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Jb(s){var a=Wb(s);a.next===null&&(a=s.alternate.memoizedState),mc(s,a.next.queue,{},Ts())}function Gm(){return Cn(kc)}function Zb(){return Wt().memoizedState}function ev(){return Wt().memoizedState}function J2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var o=Ts();s=Ua(o);var u=za(a,s,o);u!==null&&(us(u,a,o),cc(u,a,o)),a={cache:_m()},s.payload=a;return}a=a.return}}function Z2(s,a,o){var u=Ts();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},jd(s)?nv(a,o):(o=um(s,a,o,u),o!==null&&(us(o,s,u),sv(o,a,u)))}function tv(s,a,o){var u=Ts();mc(s,a,o,u)}function mc(s,a,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(jd(s))nv(a,f);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var _=a.lastRenderedState,R=x(_,o);if(f.hasEagerState=!0,f.eagerState=R,bs(R,_))return od(s,a,f,0),Ct===null&&ld(),!1}catch{}if(o=um(s,a,f,u),o!==null)return us(o,s,u),sv(o,a,u),!0}return!1}function Km(s,a,o,u){if(u={lane:2,revertLane:Tp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},jd(s)){if(a)throw Error(r(479))}else a=um(s,o,u,2),a!==null&&us(a,s,2)}function jd(s){var a=s.alternate;return s===Be||a!==null&&a===Be}function nv(s,a){$l=_d=!0;var o=s.pending;o===null?a.next=a:(a.next=o.next,o.next=a),s.pending=a}function sv(s,a,o){if((o&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,o|=u,a.lanes=o,Fn(s,o)}}var pc={readContext:Cn,use:Ed,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};pc.useEffectEvent=qt;var rv={readContext:Cn,use:Ed,useCallback:function(s,a){return Zn().memoizedState=[s,a===void 0?null:a],s},useContext:Cn,useEffect:Fb,useImperativeHandle:function(s,a,o){o=o!=null?o.concat([s]):null,wd(4194308,4,$b.bind(null,a,s),o)},useLayoutEffect:function(s,a){return wd(4194308,4,s,a)},useInsertionEffect:function(s,a){wd(4,2,s,a)},useMemo:function(s,a){var o=Zn();a=a===void 0?null:a;var u=s();if(Qi){te(!0);try{s()}finally{te(!1)}}return o.memoizedState=[u,a],u},useReducer:function(s,a,o){var u=Zn();if(o!==void 0){var f=o(a);if(Qi){te(!0);try{o(a)}finally{te(!1)}}}else f=a;return u.memoizedState=u.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},u.queue=s,s=s.dispatch=Z2.bind(null,Be,s),[u.memoizedState,s]},useRef:function(s){var a=Zn();return s={current:s},a.memoizedState=s},useState:function(s){s=zm(s);var a=s.queue,o=tv.bind(null,Be,a);return a.dispatch=o,[s.memoizedState,o]},useDebugValue:qm,useDeferredValue:function(s,a){var o=Zn();return Hm(o,s,a)},useTransition:function(){var s=zm(!1);return s=Xb.bind(null,Be,s.queue,!0,!1),Zn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,o){var u=Be,f=Zn();if(et){if(o===void 0)throw Error(r(407));o=o()}else{if(o=a(),Ct===null)throw Error(r(349));(Ye&127)!==0||Tb(u,a,o)}f.memoizedState=o;var x={value:o,getSnapshot:a};return f.queue=x,Fb(Ab.bind(null,u,x,s),[s]),u.flags|=2048,Kl(9,{destroy:void 0},wb.bind(null,u,x,o,a),null),o},useId:function(){var s=Zn(),a=Ct.identifierPrefix;if(et){var o=Rr,u=Cr;o=(u&~(1<<32-be(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=Nd++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=G2++,a="_"+a+"r_"+o.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Gm,useFormState:Ob,useActionState:Ob,useOptimistic:function(s){var a=Zn();a.memoizedState=a.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=Km.bind(null,Be,!0,o),o.dispatch=a,[s,a]},useMemoCache:Lm,useCacheRefresh:function(){return Zn().memoizedState=J2.bind(null,Be)},useEffectEvent:function(s){var a=Zn(),o={impl:s};return a.memoizedState=o,function(){if((ct&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Ym={readContext:Cn,use:Ed,useCallback:Kb,useContext:Cn,useEffect:Bm,useImperativeHandle:Gb,useInsertionEffect:qb,useLayoutEffect:Hb,useMemo:Yb,useReducer:Td,useRef:zb,useState:function(){return Td(ea)},useDebugValue:qm,useDeferredValue:function(s,a){var o=Wt();return Qb(o,Et.memoizedState,s,a)},useTransition:function(){var s=Td(ea)[0],a=Wt().memoizedState;return[typeof s=="boolean"?s:fc(s),a]},useSyncExternalStore:Eb,useId:Zb,useHostTransitionStatus:Gm,useFormState:Lb,useActionState:Lb,useOptimistic:function(s,a){var o=Wt();return Rb(o,Et,s,a)},useMemoCache:Lm,useCacheRefresh:ev};Ym.useEffectEvent=Bb;var av={readContext:Cn,use:Ed,useCallback:Kb,useContext:Cn,useEffect:Bm,useImperativeHandle:Gb,useInsertionEffect:qb,useLayoutEffect:Hb,useMemo:Yb,useReducer:Um,useRef:zb,useState:function(){return Um(ea)},useDebugValue:qm,useDeferredValue:function(s,a){var o=Wt();return Et===null?Hm(o,s,a):Qb(o,Et.memoizedState,s,a)},useTransition:function(){var s=Um(ea)[0],a=Wt().memoizedState;return[typeof s=="boolean"?s:fc(s),a]},useSyncExternalStore:Eb,useId:Zb,useHostTransitionStatus:Gm,useFormState:Ub,useActionState:Ub,useOptimistic:function(s,a){var o=Wt();return Et!==null?Rb(o,Et,s,a):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Lm,useCacheRefresh:ev};av.useEffectEvent=Bb;function Qm(s,a,o,u){a=s.memoizedState,o=o(u,a),o=o==null?a:b({},a,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Xm={enqueueSetState:function(s,a,o){s=s._reactInternals;var u=Ts(),f=Ua(u);f.payload=a,o!=null&&(f.callback=o),a=za(s,f,u),a!==null&&(us(a,s,u),cc(a,s,u))},enqueueReplaceState:function(s,a,o){s=s._reactInternals;var u=Ts(),f=Ua(u);f.tag=1,f.payload=a,o!=null&&(f.callback=o),a=za(s,f,u),a!==null&&(us(a,s,u),cc(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var o=Ts(),u=Ua(o);u.tag=2,a!=null&&(u.callback=a),a=za(s,u,o),a!==null&&(us(a,s,o),cc(a,s,o))}};function iv(s,a,o,u,f,x,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,x,_):a.prototype&&a.prototype.isPureReactComponent?!tc(o,u)||!tc(f,x):!0}function lv(s,a,o,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==s&&Xm.enqueueReplaceState(a,a.state,null)}function Xi(s,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(s=s.defaultProps){o===a&&(o=b({},o));for(var f in s)o[f]===void 0&&(o[f]=s[f])}return o}function ov(s){id(s)}function cv(s){console.error(s)}function uv(s){id(s)}function Cd(s,a){try{var o=s.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function dv(s,a,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Wm(s,a,o){return o=Ua(o),o.tag=3,o.payload={element:null},o.callback=function(){Cd(s,a)},o}function hv(s){return s=Ua(s),s.tag=3,s}function fv(s,a,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var x=u.value;s.payload=function(){return f(x)},s.callback=function(){dv(a,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){dv(a,o,u),typeof f!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function ew(s,a,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&Ul(a,o,f,!0),o=_s.current,o!==null){switch(o.tag){case 31:case 13:return qs===null?Fd():o.alternate===null&&Ht===0&&(Ht=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===gd?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),Np(s,u,f)),!1;case 22:return o.flags|=65536,u===gd?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),Np(s,u,f)),!1}throw Error(r(435,o.tag))}return Np(s,u,f),Fd(),!1}if(et)return a=_s.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==gm&&(s=Error(r(422),{cause:u}),rc(Us(s,o)))):(u!==gm&&(a=Error(r(423),{cause:u}),rc(Us(a,o))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,u=Us(u,o),f=Wm(s.stateNode,u,f),Am(s,f),Ht!==4&&(Ht=2)),!1;var x=Error(r(520),{cause:u});if(x=Us(x,o),Sc===null?Sc=[x]:Sc.push(x),Ht!==4&&(Ht=2),a===null)return!0;u=Us(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,s=f&-f,o.lanes|=s,s=Wm(o.stateNode,u,s),Am(o,s),!1;case 1:if(a=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ga===null||!Ga.has(x))))return o.flags|=65536,f&=-f,o.lanes|=f,f=hv(f),fv(f,s,o,u),Am(o,f),!1}o=o.return}while(o!==null);return!1}var Jm=Error(r(461)),ln=!1;function Rn(s,a,o,u){a.child=s===null?xb(a,null,o,u):Yi(a,s.child,o,u)}function mv(s,a,o,u,f){o=o.render;var x=a.ref;if("ref"in u){var _={};for(var R in u)R!=="ref"&&(_[R]=u[R])}else _=u;return Hi(a),u=Dm(s,a,o,_,x,f),R=Mm(),s!==null&&!ln?(Pm(s,a,f),ta(s,a,f)):(et&&R&&mm(a),a.flags|=1,Rn(s,a,u,f),a.child)}function pv(s,a,o,u,f){if(s===null){var x=o.type;return typeof x=="function"&&!dm(x)&&x.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=x,gv(s,a,x,u,f)):(s=ud(o.type,null,u,a,a.mode,f),s.ref=a.ref,s.return=a,a.child=s)}if(x=s.child,!ip(s,f)){var _=x.memoizedProps;if(o=o.compare,o=o!==null?o:tc,o(_,u)&&s.ref===a.ref)return ta(s,a,f)}return a.flags|=1,s=Qr(x,u),s.ref=a.ref,s.return=a,a.child=s}function gv(s,a,o,u,f){if(s!==null){var x=s.memoizedProps;if(tc(x,u)&&s.ref===a.ref)if(ln=!1,a.pendingProps=u=x,ip(s,f))(s.flags&131072)!==0&&(ln=!0);else return a.lanes=s.lanes,ta(s,a,f)}return Zm(s,a,o,u,f)}function xv(s,a,o,u){var f=u.children,x=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|o:o,s!==null){for(u=a.child=s.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~x}else u=0,a.child=null;return yv(s,a,x,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&md(a,x!==null?x.cachePool:null),x!==null?vb(a,x):Cm(),_b(a);else return u=a.lanes=536870912,yv(s,a,x!==null?x.baseLanes|o:o,o,u)}else x!==null?(md(a,x.cachePool),vb(a,x),Ba(),a.memoizedState=null):(s!==null&&md(a,null),Cm(),Ba());return Rn(s,a,f,o),a.child}function gc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function yv(s,a,o,u,f){var x=Sm();return x=x===null?null:{parent:rn._currentValue,pool:x},a.memoizedState={baseLanes:o,cachePool:x},s!==null&&md(a,null),Cm(),_b(a),s!==null&&Ul(s,a,u,!0),a.childLanes=f,null}function Rd(s,a){return a=Id({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function bv(s,a,o){return Yi(a,s.child,null,o),s=Rd(a,a.pendingProps),s.flags|=2,Ns(a),a.memoizedState=null,s}function tw(s,a,o){var u=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(et){if(u.mode==="hidden")return s=Rd(a,u),a.lanes=536870912,gc(null,s);if(km(a),(s=Mt)?(s=k0(s,Bs),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Ma!==null?{id:Cr,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},o=nb(s),o.return=a,a.child=o,jn=a,Mt=null)):s=null,s===null)throw Oa(a);return a.lanes=536870912,null}return Rd(a,u)}var x=s.memoizedState;if(x!==null){var _=x.dehydrated;if(km(a),f)if(a.flags&256)a.flags&=-257,a=bv(s,a,o);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(ln||Ul(s,a,o,!1),f=(o&s.childLanes)!==0,ln||f){if(u=Ct,u!==null&&(_=Qn(u,o),_!==0&&_!==x.retryLane))throw x.retryLane=_,zi(s,_),us(u,s,_),Jm;Fd(),a=bv(s,a,o)}else s=x.treeContext,Mt=Hs(_.nextSibling),jn=a,et=!0,Pa=null,Bs=!1,s!==null&&ab(a,s),a=Rd(a,u),a.flags|=4096;return a}return s=Qr(s.child,{mode:u.mode,children:u.children}),s.ref=a.ref,a.child=s,s.return=a,s}function kd(s,a){var o=a.ref;if(o===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(a.flags|=4194816)}}function Zm(s,a,o,u,f){return Hi(a),o=Dm(s,a,o,u,void 0,f),u=Mm(),s!==null&&!ln?(Pm(s,a,f),ta(s,a,f)):(et&&u&&mm(a),a.flags|=1,Rn(s,a,o,f),a.child)}function vv(s,a,o,u,f,x){return Hi(a),a.updateQueue=null,o=Sb(a,u,o,f),Nb(s),u=Mm(),s!==null&&!ln?(Pm(s,a,x),ta(s,a,x)):(et&&u&&mm(a),a.flags|=1,Rn(s,a,o,x),a.child)}function _v(s,a,o,u,f){if(Hi(a),a.stateNode===null){var x=Pl,_=o.contextType;typeof _=="object"&&_!==null&&(x=Cn(_)),x=new o(u,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Xm,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=u,x.state=a.memoizedState,x.refs={},Tm(a),_=o.contextType,x.context=typeof _=="object"&&_!==null?Cn(_):Pl,x.state=a.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Qm(a,o,_,u),x.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&Xm.enqueueReplaceState(x,x.state,null),dc(a,u,x,f),uc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){x=a.stateNode;var R=a.memoizedProps,q=Xi(o,R);x.props=q;var re=x.context,ce=o.contextType;_=Pl,typeof ce=="object"&&ce!==null&&(_=Cn(ce));var he=o.getDerivedStateFromProps;ce=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R||re!==_)&&lv(a,x,u,_),Va=!1;var ae=a.memoizedState;x.state=ae,dc(a,u,x,f),uc(),re=a.memoizedState,R||ae!==re||Va?(typeof he=="function"&&(Qm(a,o,he,u),re=a.memoizedState),(q=Va||iv(a,o,q,u,ae,re,_))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=re),x.props=u,x.state=re,x.context=_,u=q):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{x=a.stateNode,wm(s,a),_=a.memoizedProps,ce=Xi(o,_),x.props=ce,he=a.pendingProps,ae=x.context,re=o.contextType,q=Pl,typeof re=="object"&&re!==null&&(q=Cn(re)),R=o.getDerivedStateFromProps,(re=typeof R=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==he||ae!==q)&&lv(a,x,u,q),Va=!1,ae=a.memoizedState,x.state=ae,dc(a,u,x,f),uc();var le=a.memoizedState;_!==he||ae!==le||Va||s!==null&&s.dependencies!==null&&hd(s.dependencies)?(typeof R=="function"&&(Qm(a,o,R,u),le=a.memoizedState),(ce=Va||iv(a,o,ce,u,ae,le,q)||s!==null&&s.dependencies!==null&&hd(s.dependencies))?(re||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,le,q),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,le,q)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=le),x.props=u,x.state=le,x.context=q,u=ce):(typeof x.componentDidUpdate!="function"||_===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),u=!1)}return x=u,kd(s,a),u=(a.flags&128)!==0,x||u?(x=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,s!==null&&u?(a.child=Yi(a,s.child,null,f),a.child=Yi(a,null,o,f)):Rn(s,a,o,f),a.memoizedState=x.state,s=a.child):s=ta(s,a,f),s}function Nv(s,a,o,u){return Bi(),a.flags|=256,Rn(s,a,o,u),a.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(s){return{baseLanes:s,cachePool:db()}}function np(s,a,o){return s=s!==null?s.childLanes&~o:0,a&&(s|=Es),s}function Sv(s,a,o){var u=a.pendingProps,f=!1,x=(a.flags&128)!==0,_;if((_=x)||(_=s!==null&&s.memoizedState===null?!1:(Xt.current&2)!==0),_&&(f=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,s===null){if(et){if(f?Fa(a):Ba(),(s=Mt)?(s=k0(s,Bs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Ma!==null?{id:Cr,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},o=nb(s),o.return=a,a.child=o,jn=a,Mt=null)):s=null,s===null)throw Oa(a);return Vp(s)?a.lanes=32:a.lanes=536870912,null}var R=u.children;return u=u.fallback,f?(Ba(),f=a.mode,R=Id({mode:"hidden",children:R},f),u=Fi(u,f,o,null),R.return=a,u.return=a,R.sibling=u,a.child=R,u=a.child,u.memoizedState=tp(o),u.childLanes=np(s,_,o),a.memoizedState=ep,gc(null,u)):(Fa(a),sp(a,R))}var q=s.memoizedState;if(q!==null&&(R=q.dehydrated,R!==null)){if(x)a.flags&256?(Fa(a),a.flags&=-257,a=rp(s,a,o)):a.memoizedState!==null?(Ba(),a.child=s.child,a.flags|=128,a=null):(Ba(),R=u.fallback,f=a.mode,u=Id({mode:"visible",children:u.children},f),R=Fi(R,f,o,null),R.flags|=2,u.return=a,R.return=a,u.sibling=R,a.child=u,Yi(a,s.child,null,o),u=a.child,u.memoizedState=tp(o),u.childLanes=np(s,_,o),a.memoizedState=ep,a=gc(null,u));else if(Fa(a),Vp(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var re=_.dgst;_=re,u=Error(r(419)),u.stack="",u.digest=_,rc({value:u,source:null,stack:null}),a=rp(s,a,o)}else if(ln||Ul(s,a,o,!1),_=(o&s.childLanes)!==0,ln||_){if(_=Ct,_!==null&&(u=Qn(_,o),u!==0&&u!==q.retryLane))throw q.retryLane=u,zi(s,u),us(_,s,u),Jm;Lp(R)||Fd(),a=rp(s,a,o)}else Lp(R)?(a.flags|=192,a.child=s.child,a=null):(s=q.treeContext,Mt=Hs(R.nextSibling),jn=a,et=!0,Pa=null,Bs=!1,s!==null&&ab(a,s),a=sp(a,u.children),a.flags|=4096);return a}return f?(Ba(),R=u.fallback,f=a.mode,q=s.child,re=q.sibling,u=Qr(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,re!==null?R=Qr(re,R):(R=Fi(R,f,o,null),R.flags|=2),R.return=a,u.return=a,u.sibling=R,a.child=u,gc(null,u),u=a.child,R=s.child.memoizedState,R===null?R=tp(o):(f=R.cachePool,f!==null?(q=rn._currentValue,f=f.parent!==q?{parent:q,pool:q}:f):f=db(),R={baseLanes:R.baseLanes|o,cachePool:f}),u.memoizedState=R,u.childLanes=np(s,_,o),a.memoizedState=ep,gc(s.child,u)):(Fa(a),o=s.child,s=o.sibling,o=Qr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,s!==null&&(_=a.deletions,_===null?(a.deletions=[s],a.flags|=16):_.push(s)),a.child=o,a.memoizedState=null,o)}function sp(s,a){return a=Id({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Id(s,a){return s=vs(22,s,null,a),s.lanes=0,s}function rp(s,a,o){return Yi(a,s.child,null,o),s=sp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Ev(s,a,o){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),bm(s.return,a,o)}function ap(s,a,o,u,f,x){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:x}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=x)}function Tv(s,a,o){var u=a.pendingProps,f=u.revealOrder,x=u.tail;u=u.children;var _=Xt.current,R=(_&2)!==0;if(R?(_=_&1|2,a.flags|=128):_&=1,oe(Xt,_),Rn(s,a,u,o),u=et?sc:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ev(s,o,a);else if(s.tag===19)Ev(s,o,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(f){case"forwards":for(o=a.child,f=null;o!==null;)s=o.alternate,s!==null&&vd(s)===null&&(f=o),o=o.sibling;o=f,o===null?(f=a.child,a.child=null):(f=o.sibling,o.sibling=null),ap(a,!1,f,o,x,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=a.child,a.child=null;f!==null;){if(s=f.alternate,s!==null&&vd(s)===null){a.child=f;break}s=f.sibling,f.sibling=o,o=f,f=s}ap(a,!0,o,null,x,u);break;case"together":ap(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function ta(s,a,o){if(s!==null&&(a.dependencies=s.dependencies),$a|=a.lanes,(o&a.childLanes)===0)if(s!==null){if(Ul(s,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,o=Qr(s,s.pendingProps),a.child=o,o.return=a;s.sibling!==null;)s=s.sibling,o=o.sibling=Qr(s,s.pendingProps),o.return=a;o.sibling=null}return a.child}function ip(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&hd(s)))}function nw(s,a,o){switch(a.tag){case 3:J(a,a.stateNode.containerInfo),La(a,rn,s.memoizedState.cache),Bi();break;case 27:case 5:ye(a);break;case 4:J(a,a.stateNode.containerInfo);break;case 10:La(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,km(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Fa(a),a.flags|=128,null):(o&a.child.childLanes)!==0?Sv(s,a,o):(Fa(a),s=ta(s,a,o),s!==null?s.sibling:null);Fa(a);break;case 19:var f=(s.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(Ul(s,a,o,!1),u=(o&a.childLanes)!==0),f){if(u)return Tv(s,a,o);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Xt,Xt.current),u)break;return null;case 22:return a.lanes=0,xv(s,a,o,a.pendingProps);case 24:La(a,rn,s.memoizedState.cache)}return ta(s,a,o)}function wv(s,a,o){if(s!==null)if(s.memoizedProps!==a.pendingProps)ln=!0;else{if(!ip(s,o)&&(a.flags&128)===0)return ln=!1,nw(s,a,o);ln=(s.flags&131072)!==0}else ln=!1,et&&(a.flags&1048576)!==0&&rb(a,sc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(s=Gi(a.elementType),a.type=s,typeof s=="function")dm(s)?(u=Xi(s,u),a.tag=1,a=_v(null,a,s,u,o)):(a.tag=0,a=Zm(null,a,s,u,o));else{if(s!=null){var f=s.$$typeof;if(f===Y){a.tag=11,a=mv(null,a,s,u,o);break e}else if(f===C){a.tag=14,a=pv(null,a,s,u,o);break e}}throw a=F(s)||s,Error(r(306,a,""))}}return a;case 0:return Zm(s,a,a.type,a.pendingProps,o);case 1:return u=a.type,f=Xi(u,a.pendingProps),_v(s,a,u,f,o);case 3:e:{if(J(a,a.stateNode.containerInfo),s===null)throw Error(r(387));u=a.pendingProps;var x=a.memoizedState;f=x.element,wm(s,a),dc(a,u,null,o);var _=a.memoizedState;if(u=_.cache,La(a,rn,u),u!==x.cache&&vm(a,[rn],o,!0),uc(),u=_.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=Nv(s,a,u,o);break e}else if(u!==f){f=Us(Error(r(424)),a),rc(f),a=Nv(s,a,u,o);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Mt=Hs(s.firstChild),jn=a,et=!0,Pa=null,Bs=!0,o=xb(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Bi(),u===f){a=ta(s,a,o);break e}Rn(s,a,u,o)}a=a.child}return a;case 26:return kd(s,a),s===null?(o=L0(a.type,null,a.pendingProps,null))?a.memoizedState=o:et||(o=a.type,s=a.pendingProps,u=Yd(we.current).createElement(o),u[tn]=a,u[vn]=s,kn(u,o,s),nn(u),a.stateNode=u):a.memoizedState=L0(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return ye(a),s===null&&et&&(u=a.stateNode=M0(a.type,a.pendingProps,we.current),jn=a,Bs=!0,f=Mt,Xa(a.type)?(Up=f,Mt=Hs(u.firstChild)):Mt=f),Rn(s,a,a.pendingProps.children,o),kd(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&et&&((f=u=Mt)&&(u=Iw(u,a.type,a.pendingProps,Bs),u!==null?(a.stateNode=u,jn=a,Mt=Hs(u.firstChild),Bs=!1,f=!0):f=!1),f||Oa(a)),ye(a),f=a.type,x=a.pendingProps,_=s!==null?s.memoizedProps:null,u=x.children,Mp(f,x)?u=null:_!==null&&Mp(f,_)&&(a.flags|=32),a.memoizedState!==null&&(f=Dm(s,a,K2,null,null,o),kc._currentValue=f),kd(s,a),Rn(s,a,u,o),a.child;case 6:return s===null&&et&&((s=o=Mt)&&(o=Dw(o,a.pendingProps,Bs),o!==null?(a.stateNode=o,jn=a,Mt=null,s=!0):s=!1),s||Oa(a)),null;case 13:return Sv(s,a,o);case 4:return J(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=Yi(a,null,u,o):Rn(s,a,u,o),a.child;case 11:return mv(s,a,a.type,a.pendingProps,o);case 7:return Rn(s,a,a.pendingProps,o),a.child;case 8:return Rn(s,a,a.pendingProps.children,o),a.child;case 12:return Rn(s,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,La(a,a.type,u.value),Rn(s,a,u.children,o),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,Hi(a),f=Cn(f),u=u(f),a.flags|=1,Rn(s,a,u,o),a.child;case 14:return pv(s,a,a.type,a.pendingProps,o);case 15:return gv(s,a,a.type,a.pendingProps,o);case 19:return Tv(s,a,o);case 31:return tw(s,a,o);case 22:return xv(s,a,o,a.pendingProps);case 24:return Hi(a),u=Cn(rn),s===null?(f=Sm(),f===null&&(f=Ct,x=_m(),f.pooledCache=x,x.refCount++,x!==null&&(f.pooledCacheLanes|=o),f=x),a.memoizedState={parent:u,cache:f},Tm(a),La(a,rn,f)):((s.lanes&o)!==0&&(wm(s,a),dc(a,null,null,o),uc()),f=s.memoizedState,x=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),La(a,rn,u)):(u=x.cache,La(a,rn,u),u!==f.cache&&vm(a,[rn],o,!0))),Rn(s,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function na(s){s.flags|=4}function lp(s,a,o,u,f){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(f&335544128)===f)if(s.stateNode.complete)s.flags|=8192;else if(Zv())s.flags|=8192;else throw Ki=gd,Em}else s.flags&=-16777217}function Av(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!B0(a))if(Zv())s.flags|=8192;else throw Ki=gd,Em}function Dd(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?en():536870912,s.lanes|=a,Wl|=a)}function xc(s,a){if(!et)switch(s.tailMode){case"hidden":a=s.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Pt(s){var a=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(a)for(var f=s.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=u,s.childLanes=o,a}function sw(s,a,o){var u=a.pendingProps;switch(pm(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return o=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Jr(rn),X(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Vl(a)?na(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,xm())),Pt(a),null;case 26:var f=a.type,x=a.memoizedState;return s===null?(na(a),x!==null?(Pt(a),Av(a,x)):(Pt(a),lp(a,f,null,u,o))):x?x!==s.memoizedState?(na(a),Pt(a),Av(a,x)):(Pt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==u&&na(a),Pt(a),lp(a,f,s,u,o)),null;case 27:if(qe(a),o=we.current,f=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&na(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Pt(a),null}s=xe.current,Vl(a)?ib(a):(s=M0(f,u,o),a.stateNode=s,na(a))}return Pt(a),null;case 5:if(qe(a),f=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&na(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Pt(a),null}if(x=xe.current,Vl(a))ib(a);else{var _=Yd(we.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}x[tn]=a,x[vn]=u;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=x;e:switch(kn(x,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&na(a)}}return Pt(a),lp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,o),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&na(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(s=we.current,Vl(a)){if(s=a.stateNode,o=a.memoizedProps,u=null,f=jn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}s[tn]=a,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||S0(s.nodeValue,o)),s||Oa(a,!0)}else s=Yd(s).createTextNode(u),s[tn]=a,a.stateNode=s}return Pt(a),null;case 31:if(o=a.memoizedState,s===null||s.memoizedState!==null){if(u=Vl(a),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[tn]=a}else Bi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),s=!1}else o=xm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return a.flags&256?(Ns(a),a):(Ns(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Pt(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=Vl(a),u!==null&&u.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[tn]=a}else Bi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),f=!1}else f=xm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Ns(a),a):(Ns(a),null)}return Ns(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==f&&(u.flags|=2048)),o!==s&&o&&(a.child.flags|=8192),Dd(a,a.updateQueue),Pt(a),null);case 4:return X(),s===null&&Cp(a.stateNode.containerInfo),Pt(a),null;case 10:return Jr(a.type),Pt(a),null;case 19:if(Z(Xt),u=a.memoizedState,u===null)return Pt(a),null;if(f=(a.flags&128)!==0,x=u.rendering,x===null)if(f)xc(u,!1);else{if(Ht!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(x=vd(s),x!==null){for(a.flags|=128,xc(u,!1),s=x.updateQueue,a.updateQueue=s,Dd(a,s),a.subtreeFlags=0,s=o,o=a.child;o!==null;)tb(o,s),o=o.sibling;return oe(Xt,Xt.current&1|2),et&&Xr(a,u.treeForkCount),a.child}s=s.sibling}u.tail!==null&&Zt()>Vd&&(a.flags|=128,f=!0,xc(u,!1),a.lanes=4194304)}else{if(!f)if(s=vd(x),s!==null){if(a.flags|=128,f=!0,s=s.updateQueue,a.updateQueue=s,Dd(a,s),xc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!et)return Pt(a),null}else 2*Zt()-u.renderingStartTime>Vd&&o!==536870912&&(a.flags|=128,f=!0,xc(u,!1),a.lanes=4194304);u.isBackwards?(x.sibling=a.child,a.child=x):(s=u.last,s!==null?s.sibling=x:a.child=x,u.last=x)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Zt(),s.sibling=null,o=Xt.current,oe(Xt,f?o&1|2:o&1),et&&Xr(a,u.treeForkCount),s):(Pt(a),null);case 22:case 23:return Ns(a),Rm(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),o=a.updateQueue,o!==null&&Dd(a,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),s!==null&&Z($i),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Jr(rn),Pt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function rw(s,a){switch(pm(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Jr(rn),X(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return qe(a),null;case 31:if(a.memoizedState!==null){if(Ns(a),a.alternate===null)throw Error(r(340));Bi()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Ns(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Bi()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Z(Xt),null;case 4:return X(),null;case 10:return Jr(a.type),null;case 22:case 23:return Ns(a),Rm(),s!==null&&Z($i),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Jr(rn),null;case 25:return null;default:return null}}function jv(s,a){switch(pm(a),a.tag){case 3:Jr(rn),X();break;case 26:case 27:case 5:qe(a);break;case 4:X();break;case 31:a.memoizedState!==null&&Ns(a);break;case 13:Ns(a);break;case 19:Z(Xt);break;case 10:Jr(a.type);break;case 22:case 23:Ns(a),Rm(),s!==null&&Z($i);break;case 24:Jr(rn)}}function yc(s,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&s)===s){u=void 0;var x=o.create,_=o.inst;u=x(),_.destroy=u}o=o.next}while(o!==f)}}catch(R){bt(a,a.return,R)}}function qa(s,a,o){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var x=f.next;u=x;do{if((u.tag&s)===s){var _=u.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,f=a;var q=o,re=R;try{re()}catch(ce){bt(f,q,ce)}}}u=u.next}while(u!==x)}}catch(ce){bt(a,a.return,ce)}}function Cv(s){var a=s.updateQueue;if(a!==null){var o=s.stateNode;try{bb(a,o)}catch(u){bt(s,s.return,u)}}}function Rv(s,a,o){o.props=Xi(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){bt(s,a,u)}}function bc(s,a){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(f){bt(s,a,f)}}function kr(s,a){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){bt(s,a,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){bt(s,a,f)}else o.current=null}function kv(s){var a=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){bt(s,s.return,f)}}function op(s,a,o){try{var u=s.stateNode;ww(u,s.type,o,a),u[vn]=a}catch(f){bt(s,s.return,f)}}function Iv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Xa(s.type)||s.tag===4}function cp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Iv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Xa(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function up(s,a,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(s),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Ws));else if(u!==4&&(u===27&&Xa(s.type)&&(o=s.stateNode,a=null),s=s.child,s!==null))for(up(s,a,o),s=s.sibling;s!==null;)up(s,a,o),s=s.sibling}function Md(s,a,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?o.insertBefore(s,a):o.appendChild(s);else if(u!==4&&(u===27&&Xa(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Md(s,a,o),s=s.sibling;s!==null;)Md(s,a,o),s=s.sibling}function Dv(s){var a=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);kn(a,u,o),a[tn]=s,a[vn]=o}catch(x){bt(s,s.return,x)}}var sa=!1,on=!1,dp=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function aw(s,a){if(s=s.containerInfo,Ip=th,s=Gy(s),rm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var _=0,R=-1,q=-1,re=0,ce=0,he=s,ae=null;t:for(;;){for(var le;he!==o||f!==0&&he.nodeType!==3||(R=_+f),he!==x||u!==0&&he.nodeType!==3||(q=_+u),he.nodeType===3&&(_+=he.nodeValue.length),(le=he.firstChild)!==null;)ae=he,he=le;for(;;){if(he===s)break t;if(ae===o&&++re===f&&(R=_),ae===x&&++ce===u&&(q=_),(le=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=le}o=R===-1||q===-1?null:{start:R,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dp={focusedElem:s,selectionRange:o},th=!1,Nn=a;Nn!==null;)if(a=Nn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Nn=s;else for(;Nn!==null;){switch(a=Nn,x=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)f=s[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,o=a,f=x.memoizedProps,x=x.memoizedState,u=o.stateNode;try{var Te=Xi(o.type,f);s=u.getSnapshotBeforeUpdate(Te,x),u.__reactInternalSnapshotBeforeUpdate=s}catch(Me){bt(o,o.return,Me)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,o=s.nodeType,o===9)Op(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Op(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Nn=s;break}Nn=a.return}}function Pv(s,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:aa(s,o),u&4&&yc(5,o);break;case 1:if(aa(s,o),u&4)if(s=o.stateNode,a===null)try{s.componentDidMount()}catch(_){bt(o,o.return,_)}else{var f=Xi(o.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(f,a,s.__reactInternalSnapshotBeforeUpdate)}catch(_){bt(o,o.return,_)}}u&64&&Cv(o),u&512&&bc(o,o.return);break;case 3:if(aa(s,o),u&64&&(s=o.updateQueue,s!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{bb(s,a)}catch(_){bt(o,o.return,_)}}break;case 27:a===null&&u&4&&Dv(o);case 26:case 5:aa(s,o),a===null&&u&4&&kv(o),u&512&&bc(o,o.return);break;case 12:aa(s,o);break;case 31:aa(s,o),u&4&&Vv(s,o);break;case 13:aa(s,o),u&4&&Uv(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=mw.bind(null,o),Mw(s,o))));break;case 22:if(u=o.memoizedState!==null||sa,!u){a=a!==null&&a.memoizedState!==null||on,f=sa;var x=on;sa=u,(on=a)&&!x?ia(s,o,(o.subtreeFlags&8772)!==0):aa(s,o),sa=f,on=x}break;case 30:break;default:aa(s,o)}}function Ov(s){var a=s.alternate;a!==null&&(s.alternate=null,Ov(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&_l(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Vt=null,is=!1;function ra(s,a,o){for(o=o.child;o!==null;)Lv(s,a,o),o=o.sibling}function Lv(s,a,o){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Vn,o)}catch{}switch(o.tag){case 26:on||kr(o,a),ra(s,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:on||kr(o,a);var u=Vt,f=is;Xa(o.type)&&(Vt=o.stateNode,is=!1),ra(s,a,o),jc(o.stateNode),Vt=u,is=f;break;case 5:on||kr(o,a);case 6:if(u=Vt,f=is,Vt=null,ra(s,a,o),Vt=u,is=f,Vt!==null)if(is)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(o.stateNode)}catch(x){bt(o,a,x)}else try{Vt.removeChild(o.stateNode)}catch(x){bt(o,a,x)}break;case 18:Vt!==null&&(is?(s=Vt,C0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),ao(s)):C0(Vt,o.stateNode));break;case 4:u=Vt,f=is,Vt=o.stateNode.containerInfo,is=!0,ra(s,a,o),Vt=u,is=f;break;case 0:case 11:case 14:case 15:qa(2,o,a),on||qa(4,o,a),ra(s,a,o);break;case 1:on||(kr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Rv(o,a,u)),ra(s,a,o);break;case 21:ra(s,a,o);break;case 22:on=(u=on)||o.memoizedState!==null,ra(s,a,o),on=u;break;default:ra(s,a,o)}}function Vv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ao(s)}catch(o){bt(a,a.return,o)}}}function Uv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ao(s)}catch(o){bt(a,a.return,o)}}function iw(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Mv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Mv),a;default:throw Error(r(435,s.tag))}}function Pd(s,a){var o=iw(s);a.forEach(function(u){if(!o.has(u)){o.add(u);var f=pw.bind(null,s,u);u.then(f,f)}})}function ls(s,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],x=s,_=a,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(Xa(R.type)){Vt=R.stateNode,is=!1;break e}break;case 5:Vt=R.stateNode,is=!1;break e;case 3:case 4:Vt=R.stateNode.containerInfo,is=!0;break e}R=R.return}if(Vt===null)throw Error(r(160));Lv(x,_,f),Vt=null,is=!1,x=f.alternate,x!==null&&(x.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)zv(a,s),a=a.sibling}var sr=null;function zv(s,a){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ls(a,s),os(s),u&4&&(qa(3,s,s.return),yc(3,s),qa(5,s,s.return));break;case 1:ls(a,s),os(s),u&512&&(on||o===null||kr(o,o.return)),u&64&&sa&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=sr;if(ls(a,s),os(s),u&512&&(on||o===null||kr(o,o.return)),u&4){var x=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":x=f.getElementsByTagName("title")[0],(!x||x[xr]||x[tn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=f.createElement(u),f.head.insertBefore(x,f.querySelector("head > title"))),kn(x,u,o),x[tn]=s,nn(x),u=x;break e;case"link":var _=z0("link","href",f).get(u+(o.href||""));if(_){for(var R=0;R<_.length;R++)if(x=_[R],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(R,1);break t}}x=f.createElement(u),kn(x,u,o),f.head.appendChild(x);break;case"meta":if(_=z0("meta","content",f).get(u+(o.content||""))){for(R=0;R<_.length;R++)if(x=_[R],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(R,1);break t}}x=f.createElement(u),kn(x,u,o),f.head.appendChild(x);break;default:throw Error(r(468,u))}x[tn]=s,nn(x),u=x}s.stateNode=u}else F0(f,s.type,s.stateNode);else s.stateNode=U0(f,u,s.memoizedProps);else x!==u?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,u===null?F0(f,s.type,s.stateNode):U0(f,u,s.memoizedProps)):u===null&&s.stateNode!==null&&op(s,s.memoizedProps,o.memoizedProps)}break;case 27:ls(a,s),os(s),u&512&&(on||o===null||kr(o,o.return)),o!==null&&u&4&&op(s,s.memoizedProps,o.memoizedProps);break;case 5:if(ls(a,s),os(s),u&512&&(on||o===null||kr(o,o.return)),s.flags&32){f=s.stateNode;try{as(f,"")}catch(Te){bt(s,s.return,Te)}}u&4&&s.stateNode!=null&&(f=s.memoizedProps,op(s,f,o!==null?o.memoizedProps:f)),u&1024&&(dp=!0);break;case 6:if(ls(a,s),os(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Te){bt(s,s.return,Te)}}break;case 3:if(Wd=null,f=sr,sr=Qd(a.containerInfo),ls(a,s),sr=f,os(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ao(a.containerInfo)}catch(Te){bt(s,s.return,Te)}dp&&(dp=!1,Fv(s));break;case 4:u=sr,sr=Qd(s.stateNode.containerInfo),ls(a,s),os(s),sr=u;break;case 12:ls(a,s),os(s);break;case 31:ls(a,s),os(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Pd(s,u)));break;case 13:ls(a,s),os(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ld=Zt()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Pd(s,u)));break;case 22:f=s.memoizedState!==null;var q=o!==null&&o.memoizedState!==null,re=sa,ce=on;if(sa=re||f,on=ce||q,ls(a,s),on=ce,sa=re,os(s),u&8192)e:for(a=s.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(o===null||q||sa||on||Wi(s)),o=null,a=s;;){if(a.tag===5||a.tag===26){if(o===null){q=o=a;try{if(x=q.stateNode,f)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=q.stateNode;var he=q.memoizedProps.style,ae=he!=null&&he.hasOwnProperty("display")?he.display:null;R.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Te){bt(q,q.return,Te)}}}else if(a.tag===6){if(o===null){q=a;try{q.stateNode.nodeValue=f?"":q.memoizedProps}catch(Te){bt(q,q.return,Te)}}}else if(a.tag===18){if(o===null){q=a;try{var le=q.stateNode;f?R0(le,!0):R0(q.stateNode,!1)}catch(Te){bt(q,q.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Pd(s,o))));break;case 19:ls(a,s),os(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Pd(s,u)));break;case 30:break;case 21:break;default:ls(a,s),os(s)}}function os(s){var a=s.flags;if(a&2){try{for(var o,u=s.return;u!==null;){if(Iv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,x=cp(s);Md(s,x,f);break;case 5:var _=o.stateNode;o.flags&32&&(as(_,""),o.flags&=-33);var R=cp(s);Md(s,R,_);break;case 3:case 4:var q=o.stateNode.containerInfo,re=cp(s);up(s,re,q);break;default:throw Error(r(161))}}catch(ce){bt(s,s.return,ce)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Fv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Fv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function aa(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Pv(s,a.alternate,a),a=a.sibling}function Wi(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:qa(4,a,a.return),Wi(a);break;case 1:kr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&Rv(a,a.return,o),Wi(a);break;case 27:jc(a.stateNode);case 26:case 5:kr(a,a.return),Wi(a);break;case 22:a.memoizedState===null&&Wi(a);break;case 30:Wi(a);break;default:Wi(a)}s=s.sibling}}function ia(s,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=s,x=a,_=x.flags;switch(x.tag){case 0:case 11:case 15:ia(f,x,o),yc(4,x);break;case 1:if(ia(f,x,o),u=x,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(re){bt(u,u.return,re)}if(u=x,f=u.updateQueue,f!==null){var R=u.stateNode;try{var q=f.shared.hiddenCallbacks;if(q!==null)for(f.shared.hiddenCallbacks=null,f=0;f<q.length;f++)yb(q[f],R)}catch(re){bt(u,u.return,re)}}o&&_&64&&Cv(x),bc(x,x.return);break;case 27:Dv(x);case 26:case 5:ia(f,x,o),o&&u===null&&_&4&&kv(x),bc(x,x.return);break;case 12:ia(f,x,o);break;case 31:ia(f,x,o),o&&_&4&&Vv(f,x);break;case 13:ia(f,x,o),o&&_&4&&Uv(f,x);break;case 22:x.memoizedState===null&&ia(f,x,o),bc(x,x.return);break;case 30:break;default:ia(f,x,o)}a=a.sibling}}function hp(s,a){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&ac(o))}function fp(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ac(s))}function rr(s,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bv(s,a,o,u),a=a.sibling}function Bv(s,a,o,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:rr(s,a,o,u),f&2048&&yc(9,a);break;case 1:rr(s,a,o,u);break;case 3:rr(s,a,o,u),f&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ac(s)));break;case 12:if(f&2048){rr(s,a,o,u),s=a.stateNode;try{var x=a.memoizedProps,_=x.id,R=x.onPostCommit;typeof R=="function"&&R(_,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){bt(a,a.return,q)}}else rr(s,a,o,u);break;case 31:rr(s,a,o,u);break;case 13:rr(s,a,o,u);break;case 23:break;case 22:x=a.stateNode,_=a.alternate,a.memoizedState!==null?x._visibility&2?rr(s,a,o,u):vc(s,a):x._visibility&2?rr(s,a,o,u):(x._visibility|=2,Yl(s,a,o,u,(a.subtreeFlags&10256)!==0||!1)),f&2048&&hp(_,a);break;case 24:rr(s,a,o,u),f&2048&&fp(a.alternate,a);break;default:rr(s,a,o,u)}}function Yl(s,a,o,u,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=s,_=a,R=o,q=u,re=_.flags;switch(_.tag){case 0:case 11:case 15:Yl(x,_,R,q,f),yc(8,_);break;case 23:break;case 22:var ce=_.stateNode;_.memoizedState!==null?ce._visibility&2?Yl(x,_,R,q,f):vc(x,_):(ce._visibility|=2,Yl(x,_,R,q,f)),f&&re&2048&&hp(_.alternate,_);break;case 24:Yl(x,_,R,q,f),f&&re&2048&&fp(_.alternate,_);break;default:Yl(x,_,R,q,f)}a=a.sibling}}function vc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=s,u=a,f=u.flags;switch(u.tag){case 22:vc(o,u),f&2048&&hp(u.alternate,u);break;case 24:vc(o,u),f&2048&&fp(u.alternate,u);break;default:vc(o,u)}a=a.sibling}}var _c=8192;function Ql(s,a,o){if(s.subtreeFlags&_c)for(s=s.child;s!==null;)qv(s,a,o),s=s.sibling}function qv(s,a,o){switch(s.tag){case 26:Ql(s,a,o),s.flags&_c&&s.memoizedState!==null&&Gw(o,sr,s.memoizedState,s.memoizedProps);break;case 5:Ql(s,a,o);break;case 3:case 4:var u=sr;sr=Qd(s.stateNode.containerInfo),Ql(s,a,o),sr=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=_c,_c=16777216,Ql(s,a,o),_c=u):Ql(s,a,o));break;default:Ql(s,a,o)}}function Hv(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Nc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Nn=u,Gv(u,s)}Hv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$v(s),s=s.sibling}function $v(s){switch(s.tag){case 0:case 11:case 15:Nc(s),s.flags&2048&&qa(9,s,s.return);break;case 3:Nc(s);break;case 12:Nc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Od(s)):Nc(s);break;default:Nc(s)}}function Od(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Nn=u,Gv(u,s)}Hv(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:qa(8,a,a.return),Od(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Od(a));break;default:Od(a)}s=s.sibling}}function Gv(s,a){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:qa(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ac(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Nn=u;else e:for(o=s;Nn!==null;){u=Nn;var f=u.sibling,x=u.return;if(Ov(u),u===o){Nn=null;break e}if(f!==null){f.return=x,Nn=f;break e}Nn=x}}}var lw={getCacheForType:function(s){var a=Cn(rn),o=a.data.get(s);return o===void 0&&(o=s(),a.data.set(s,o)),o},cacheSignal:function(){return Cn(rn).controller.signal}},ow=typeof WeakMap=="function"?WeakMap:Map,ct=0,Ct=null,Ge=null,Ye=0,yt=0,Ss=null,Ha=!1,Xl=!1,mp=!1,la=0,Ht=0,$a=0,Ji=0,pp=0,Es=0,Wl=0,Sc=null,cs=null,gp=!1,Ld=0,Kv=0,Vd=1/0,Ud=null,Ga=null,mn=0,Ka=null,Jl=null,oa=0,xp=0,yp=null,Yv=null,Ec=0,bp=null;function Ts(){return(ct&2)!==0&&Ye!==0?Ye&-Ye:z.T!==null?Tp():gs()}function Qv(){if(Es===0)if((Ye&536870912)===0||et){var s=Ds;Ds<<=1,(Ds&3932160)===0&&(Ds=262144),Es=s}else Es=536870912;return s=_s.current,s!==null&&(s.flags|=32),Es}function us(s,a,o){(s===Ct&&(yt===2||yt===9)||s.cancelPendingCommit!==null)&&(Zl(s,0),Ya(s,Ye,Es,!1)),Un(s,o),((ct&2)===0||s!==Ct)&&(s===Ct&&((ct&2)===0&&(Ji|=o),Ht===4&&Ya(s,Ye,Es,!1)),Ir(s))}function Xv(s,a,o){if((ct&6)!==0)throw Error(r(327));var u=!o&&(a&127)===0&&(a&s.expiredLanes)===0||lt(s,a),f=u?dw(s,a):_p(s,a,!0),x=u;do{if(f===0){Xl&&!u&&Ya(s,a,0,!1);break}else{if(o=s.current.alternate,x&&!cw(o)){f=_p(s,a,!1),x=!1;continue}if(f===2){if(x=a,s.errorRecoveryDisabledLanes&x)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var R=s;f=Sc;var q=R.current.memoizedState.isDehydrated;if(q&&(Zl(R,_).flags|=256),_=_p(R,_,!1),_!==2){if(mp&&!q){R.errorRecoveryDisabledLanes|=x,Ji|=x,f=4;break e}x=cs,cs=f,x!==null&&(cs===null?cs=x:cs.push.apply(cs,x))}f=_}if(x=!1,f!==2)continue}}if(f===1){Zl(s,0),Ya(s,a,0,!0);break}e:{switch(u=s,x=f,x){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ya(u,a,Es,!Ha);break e;case 2:cs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=Ld+300-Zt(),10<f)){if(Ya(u,a,Es,!Ha),nt(u,0,!0)!==0)break e;oa=a,u.timeoutHandle=A0(Wv.bind(null,u,o,cs,Ud,gp,a,Es,Ji,Wl,Ha,x,"Throttled",-0,0),f);break e}Wv(u,o,cs,Ud,gp,a,Es,Ji,Wl,Ha,x,null,-0,0)}}break}while(!0);Ir(s)}function Wv(s,a,o,u,f,x,_,R,q,re,ce,he,ae,le){if(s.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ws},qv(a,x,he);var Te=(x&62914560)===x?Ld-Zt():(x&4194048)===x?Kv-Zt():0;if(Te=Kw(he,Te),Te!==null){oa=x,s.cancelPendingCommit=Te(a0.bind(null,s,a,x,o,u,f,_,R,q,ce,he,null,ae,le)),Ya(s,x,_,!re);return}}a0(s,a,x,o,u,f,_,R,q)}function cw(s){for(var a=s;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],x=f.getSnapshot;f=f.value;try{if(!bs(x(),f))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ya(s,a,o,u){a&=~pp,a&=~Ji,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var f=a;0<f;){var x=31-be(f),_=1<<x;u[x]=-1,f&=~_}o!==0&&zn(s,o,a)}function zd(){return(ct&6)===0?(Tc(0),!1):!0}function vp(){if(Ge!==null){if(yt===0)var s=Ge.return;else s=Ge,Wr=qi=null,Om(s),ql=null,lc=0,s=Ge;for(;s!==null;)jv(s.alternate,s),s=s.return;Ge=null}}function Zl(s,a){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,Cw(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),oa=0,vp(),Ct=s,Ge=o=Qr(s.current,null),Ye=a,yt=0,Ss=null,Ha=!1,Xl=lt(s,a),mp=!1,Wl=Es=pp=Ji=$a=Ht=0,cs=Sc=null,gp=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var f=31-be(u),x=1<<f;a|=s[f],u&=~x}return la=a,ld(),o}function Jv(s,a){Be=null,z.H=pc,a===Bl||a===pd?(a=mb(),yt=3):a===Em?(a=mb(),yt=4):yt=a===Jm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ss=a,Ge===null&&(Ht=1,Cd(s,Us(a,s.current)))}function Zv(){var s=_s.current;return s===null?!0:(Ye&4194048)===Ye?qs===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?s===qs:!1}function e0(){var s=z.H;return z.H=pc,s===null?pc:s}function t0(){var s=z.A;return z.A=lw,s}function Fd(){Ht=4,Ha||(Ye&4194048)!==Ye&&_s.current!==null||(Xl=!0),($a&134217727)===0&&(Ji&134217727)===0||Ct===null||Ya(Ct,Ye,Es,!1)}function _p(s,a,o){var u=ct;ct|=2;var f=e0(),x=t0();(Ct!==s||Ye!==a)&&(Ud=null,Zl(s,a)),a=!1;var _=Ht;e:do try{if(yt!==0&&Ge!==null){var R=Ge,q=Ss;switch(yt){case 8:vp(),_=6;break e;case 3:case 2:case 9:case 6:_s.current===null&&(a=!0);var re=yt;if(yt=0,Ss=null,eo(s,R,q,re),o&&Xl){_=0;break e}break;default:re=yt,yt=0,Ss=null,eo(s,R,q,re)}}uw(),_=Ht;break}catch(ce){Jv(s,ce)}while(!0);return a&&s.shellSuspendCounter++,Wr=qi=null,ct=u,z.H=f,z.A=x,Ge===null&&(Ct=null,Ye=0,ld()),_}function uw(){for(;Ge!==null;)n0(Ge)}function dw(s,a){var o=ct;ct|=2;var u=e0(),f=t0();Ct!==s||Ye!==a?(Ud=null,Vd=Zt()+500,Zl(s,a)):Xl=lt(s,a);e:do try{if(yt!==0&&Ge!==null){a=Ge;var x=Ss;t:switch(yt){case 1:yt=0,Ss=null,eo(s,a,x,1);break;case 2:case 9:if(hb(x)){yt=0,Ss=null,s0(a);break}a=function(){yt!==2&&yt!==9||Ct!==s||(yt=7),Ir(s)},x.then(a,a);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:hb(x)?(yt=0,Ss=null,s0(a)):(yt=0,Ss=null,eo(s,a,x,7));break;case 5:var _=null;switch(Ge.tag){case 26:_=Ge.memoizedState;case 5:case 27:var R=Ge;if(_?B0(_):R.stateNode.complete){yt=0,Ss=null;var q=R.sibling;if(q!==null)Ge=q;else{var re=R.return;re!==null?(Ge=re,Bd(re)):Ge=null}break t}}yt=0,Ss=null,eo(s,a,x,5);break;case 6:yt=0,Ss=null,eo(s,a,x,6);break;case 8:vp(),Ht=6;break e;default:throw Error(r(462))}}hw();break}catch(ce){Jv(s,ce)}while(!0);return Wr=qi=null,z.H=u,z.A=f,ct=o,Ge!==null?0:(Ct=null,Ye=0,ld(),Ht)}function hw(){for(;Ge!==null&&!ks();)n0(Ge)}function n0(s){var a=wv(s.alternate,s,la);s.memoizedProps=s.pendingProps,a===null?Bd(s):Ge=a}function s0(s){var a=s,o=a.alternate;switch(a.tag){case 15:case 0:a=vv(o,a,a.pendingProps,a.type,void 0,Ye);break;case 11:a=vv(o,a,a.pendingProps,a.type.render,a.ref,Ye);break;case 5:Om(a);default:jv(o,a),a=Ge=tb(a,la),a=wv(o,a,la)}s.memoizedProps=s.pendingProps,a===null?Bd(s):Ge=a}function eo(s,a,o,u){Wr=qi=null,Om(a),ql=null,lc=0;var f=a.return;try{if(ew(s,f,a,o,Ye)){Ht=1,Cd(s,Us(o,s.current)),Ge=null;return}}catch(x){if(f!==null)throw Ge=f,x;Ht=1,Cd(s,Us(o,s.current)),Ge=null;return}a.flags&32768?(et||u===1?s=!0:Xl||(Ye&536870912)!==0?s=!1:(Ha=s=!0,(u===2||u===9||u===3||u===6)&&(u=_s.current,u!==null&&u.tag===13&&(u.flags|=16384))),r0(a,s)):Bd(a)}function Bd(s){var a=s;do{if((a.flags&32768)!==0){r0(a,Ha);return}s=a.return;var o=sw(a.alternate,a,la);if(o!==null){Ge=o;return}if(a=a.sibling,a!==null){Ge=a;return}Ge=a=s}while(a!==null);Ht===0&&(Ht=5)}function r0(s,a){do{var o=rw(s.alternate,s);if(o!==null){o.flags&=32767,Ge=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(s=s.sibling,s!==null)){Ge=s;return}Ge=s=o}while(s!==null);Ht=6,Ge=null}function a0(s,a,o,u,f,x,_,R,q){s.cancelPendingCommit=null;do qd();while(mn!==0);if((ct&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(x=a.lanes|a.childLanes,x|=cm,Yt(s,o,x,_,R,q),s===Ct&&(Ge=Ct=null,Ye=0),Jl=a,Ka=s,oa=o,xp=x,yp=f,Yv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,gw(Tn,function(){return u0(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,f=ee.p,ee.p=2,_=ct,ct|=4;try{aw(s,a,o)}finally{ct=_,ee.p=f,z.T=u}}mn=1,i0(),l0(),o0()}}function i0(){if(mn===1){mn=0;var s=Ka,a=Jl,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var u=ee.p;ee.p=2;var f=ct;ct|=4;try{zv(a,s);var x=Dp,_=Gy(s.containerInfo),R=x.focusedElem,q=x.selectionRange;if(_!==R&&R&&R.ownerDocument&&$y(R.ownerDocument.documentElement,R)){if(q!==null&&rm(R)){var re=q.start,ce=q.end;if(ce===void 0&&(ce=re),"selectionStart"in R)R.selectionStart=re,R.selectionEnd=Math.min(ce,R.value.length);else{var he=R.ownerDocument||document,ae=he&&he.defaultView||window;if(ae.getSelection){var le=ae.getSelection(),Te=R.textContent.length,Me=Math.min(q.start,Te),wt=q.end===void 0?Me:Math.min(q.end,Te);!le.extend&&Me>wt&&(_=wt,wt=Me,Me=_);var W=Hy(R,Me),G=Hy(R,wt);if(W&&G&&(le.rangeCount!==1||le.anchorNode!==W.node||le.anchorOffset!==W.offset||le.focusNode!==G.node||le.focusOffset!==G.offset)){var se=he.createRange();se.setStart(W.node,W.offset),le.removeAllRanges(),Me>wt?(le.addRange(se),le.extend(G.node,G.offset)):(se.setEnd(G.node,G.offset),le.addRange(se))}}}}for(he=[],le=R;le=le.parentNode;)le.nodeType===1&&he.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<he.length;R++){var de=he[R];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}th=!!Ip,Dp=Ip=null}finally{ct=f,ee.p=u,z.T=o}}s.current=a,mn=2}}function l0(){if(mn===2){mn=0;var s=Ka,a=Jl,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var u=ee.p;ee.p=2;var f=ct;ct|=4;try{Pv(s,a.alternate,a)}finally{ct=f,ee.p=u,z.T=o}}mn=3}}function o0(){if(mn===4||mn===3){mn=0,Hr();var s=Ka,a=Jl,o=oa,u=Yv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?mn=5:(mn=0,Jl=Ka=null,c0(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(Ga=null),Xn(o),a=a.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Vn,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=z.T,f=ee.p,ee.p=2,z.T=null;try{for(var x=s.onRecoverableError,_=0;_<u.length;_++){var R=u[_];x(R.value,{componentStack:R.stack})}}finally{z.T=a,ee.p=f}}(oa&3)!==0&&qd(),Ir(s),f=s.pendingLanes,(o&261930)!==0&&(f&42)!==0?s===bp?Ec++:(Ec=0,bp=s):Ec=0,Tc(0)}}function c0(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,ac(a)))}function qd(){return i0(),l0(),o0(),u0()}function u0(){if(mn!==5)return!1;var s=Ka,a=xp;xp=0;var o=Xn(oa),u=z.T,f=ee.p;try{ee.p=32>o?32:o,z.T=null,o=yp,yp=null;var x=Ka,_=oa;if(mn=0,Jl=Ka=null,oa=0,(ct&6)!==0)throw Error(r(331));var R=ct;if(ct|=4,$v(x.current),Bv(x,x.current,_,o),ct=R,Tc(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Vn,x)}catch{}return!0}finally{ee.p=f,z.T=u,c0(s,a)}}function d0(s,a,o){a=Us(o,a),a=Wm(s.stateNode,a,2),s=za(s,a,2),s!==null&&(Un(s,2),Ir(s))}function bt(s,a,o){if(s.tag===3)d0(s,s,o);else for(;a!==null;){if(a.tag===3){d0(a,s,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ga===null||!Ga.has(u))){s=Us(o,s),o=hv(2),u=za(a,o,2),u!==null&&(fv(o,u,a,s),Un(u,2),Ir(u));break}}a=a.return}}function Np(s,a,o){var u=s.pingCache;if(u===null){u=s.pingCache=new ow;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(o)||(mp=!0,f.add(o),s=fw.bind(null,s,a,o),a.then(s,s))}function fw(s,a,o){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Ct===s&&(Ye&o)===o&&(Ht===4||Ht===3&&(Ye&62914560)===Ye&&300>Zt()-Ld?(ct&2)===0&&Zl(s,0):pp|=o,Wl===Ye&&(Wl=0)),Ir(s)}function h0(s,a){a===0&&(a=en()),s=zi(s,a),s!==null&&(Un(s,a),Ir(s))}function mw(s){var a=s.memoizedState,o=0;a!==null&&(o=a.retryLane),h0(s,o)}function pw(s,a){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,f=s.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),h0(s,o)}function gw(s,a){return at(s,a)}var Hd=null,to=null,Sp=!1,$d=!1,Ep=!1,Qa=0;function Ir(s){s!==to&&s.next===null&&(to===null?Hd=to=s:to=to.next=s),$d=!0,Sp||(Sp=!0,yw())}function Tc(s,a){if(!Ep&&$d){Ep=!0;do for(var o=!1,u=Hd;u!==null;){if(s!==0){var f=u.pendingLanes;if(f===0)var x=0;else{var _=u.suspendedLanes,R=u.pingedLanes;x=(1<<31-be(42|s)+1)-1,x&=f&~(_&~R),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,g0(u,x))}else x=Ye,x=nt(u,u===Ct?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||lt(u,x)||(o=!0,g0(u,x));u=u.next}while(o);Ep=!1}}function xw(){f0()}function f0(){$d=Sp=!1;var s=0;Qa!==0&&jw()&&(s=Qa);for(var a=Zt(),o=null,u=Hd;u!==null;){var f=u.next,x=m0(u,a);x===0?(u.next=null,o===null?Hd=f:o.next=f,f===null&&(to=o)):(o=u,(s!==0||(x&3)!==0)&&($d=!0)),u=f}mn!==0&&mn!==5||Tc(s),Qa!==0&&(Qa=0)}function m0(s,a){for(var o=s.suspendedLanes,u=s.pingedLanes,f=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var _=31-be(x),R=1<<_,q=f[_];q===-1?((R&o)===0||(R&u)!==0)&&(f[_]=bn(R,a)):q<=a&&(s.expiredLanes|=R),x&=~R}if(a=Ct,o=Ye,o=nt(s,s===a?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===a&&(yt===2||yt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Yn(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||lt(s,o)){if(a=o&-o,a===s.callbackPriority)return a;switch(u!==null&&Yn(u),Xn(o)){case 2:case 8:o=ss;break;case 32:o=Tn;break;case 268435456:o=$r;break;default:o=Tn}return u=p0.bind(null,s),o=at(o,u),s.callbackPriority=a,s.callbackNode=o,a}return u!==null&&u!==null&&Yn(u),s.callbackPriority=2,s.callbackNode=null,2}function p0(s,a){if(mn!==0&&mn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(qd()&&s.callbackNode!==o)return null;var u=Ye;return u=nt(s,s===Ct?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Xv(s,u,a),m0(s,Zt()),s.callbackNode!=null&&s.callbackNode===o?p0.bind(null,s):null)}function g0(s,a){if(qd())return null;Xv(s,a,!0)}function yw(){Rw(function(){(ct&6)!==0?at(Is,xw):f0()})}function Tp(){if(Qa===0){var s=zl;s===0&&(s=it,it<<=1,(it&261888)===0&&(it=256)),Qa=s}return Qa}function x0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Tl(""+s)}function y0(s,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,s.id&&o.setAttribute("form",s.id),a.parentNode.insertBefore(o,a),s=new FormData(s),o.parentNode.removeChild(o),s}function bw(s,a,o,u,f){if(a==="submit"&&o&&o.stateNode===f){var x=x0((f[vn]||null).action),_=u.submitter;_&&(a=(a=_[vn]||null)?x0(a.formAction):_.getAttribute("formAction"),a!==null&&(x=a,_=null));var R=new Tr("action","action",null,u,f);s.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qa!==0){var q=_?y0(f,_):new FormData(f);$m(o,{pending:!0,data:q,method:f.method,action:x},null,q)}}else typeof x=="function"&&(R.preventDefault(),q=_?y0(f,_):new FormData(f),$m(o,{pending:!0,data:q,method:f.method,action:x},x,q))},currentTarget:f}]})}}for(var wp=0;wp<om.length;wp++){var Ap=om[wp],vw=Ap.toLowerCase(),_w=Ap[0].toUpperCase()+Ap.slice(1);nr(vw,"on"+_w)}nr(Qy,"onAnimationEnd"),nr(Xy,"onAnimationIteration"),nr(Wy,"onAnimationStart"),nr("dblclick","onDoubleClick"),nr("focusin","onFocus"),nr("focusout","onBlur"),nr(L2,"onTransitionRun"),nr(V2,"onTransitionStart"),nr(U2,"onTransitionCancel"),nr(Jy,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wc));function b0(s,a){a=(a&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],f=u.event;u=u.listeners;e:{var x=void 0;if(a)for(var _=u.length-1;0<=_;_--){var R=u[_],q=R.instance,re=R.currentTarget;if(R=R.listener,q!==x&&f.isPropagationStopped())break e;x=R,f.currentTarget=re;try{x(f)}catch(ce){id(ce)}f.currentTarget=null,x=q}else for(_=0;_<u.length;_++){if(R=u[_],q=R.instance,re=R.currentTarget,R=R.listener,q!==x&&f.isPropagationStopped())break e;x=R,f.currentTarget=re;try{x(f)}catch(ce){id(ce)}f.currentTarget=null,x=q}}}}function Ke(s,a){var o=a[vl];o===void 0&&(o=a[vl]=new Set);var u=s+"__bubble";o.has(u)||(v0(a,s,2,!1),o.add(u))}function jp(s,a,o){var u=0;a&&(u|=4),v0(o,s,u,a)}var Gd="_reactListening"+Math.random().toString(36).slice(2);function Cp(s){if(!s[Gd]){s[Gd]=!0,Vo.forEach(function(o){o!=="selectionchange"&&(Nw.has(o)||jp(o,!1,s),jp(o,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Gd]||(a[Gd]=!0,jp("selectionchange",!1,a))}}function v0(s,a,o,u){switch(Q0(a)){case 2:var f=Xw;break;case 8:f=Ww;break;default:f=Hp}o=f.bind(null,a,o,s),f=void 0,!Ii||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?s.addEventListener(a,o,{capture:!0,passive:f}):s.addEventListener(a,o,!0):f!==void 0?s.addEventListener(a,o,{passive:f}):s.addEventListener(a,o,!1)}function Rp(s,a,o,u,f){var x=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===f)break;if(_===4)for(_=u.return;_!==null;){var q=_.tag;if((q===3||q===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;R!==null;){if(_=yr(R),_===null)return;if(q=_.tag,q===5||q===6||q===26||q===27){u=x=_;continue e}R=R.parentNode}}u=u.return}Ra(function(){var re=x,ce=Ps(o),he=[];e:{var ae=Zy.get(s);if(ae!==void 0){var le=Tr,Te=s;switch(s){case"keypress":if(Mi(o)===0)break e;case"keydown":case"keyup":le=sd;break;case"focusin":Te="focus",le=Oi;break;case"focusout":Te="blur",le=Oi;break;case"beforeblur":case"afterblur":le=Oi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=v;break;case Qy:case Xy:case Wy:le=Xu;break;case Jy:le=O;break;case"scroll":case"scrollend":le=Xo;break;case"wheel":le=ie;break;case"copy":case"cut":case"paste":le=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Yr;break;case"toggle":case"beforetoggle":le=Fe}var Me=(a&4)!==0,wt=!Me&&(s==="scroll"||s==="scrollend"),W=Me?ae!==null?ae+"Capture":null:ae;Me=[];for(var G=re,se;G!==null;){var de=G;if(se=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||se===null||W===null||(de=Js(G,W),de!=null&&Me.push(Ac(G,de,se))),wt)break;G=G.return}0<Me.length&&(ae=new le(ae,Te,null,o,ce),he.push({event:ae,listeners:Me}))}}if((a&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",ae&&o!==Ko&&(Te=o.relatedTarget||o.fromElement)&&(yr(Te)||Te[gr]))break e;if((le||ae)&&(ae=ce.window===ce?ce:(ae=ce.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(Te=o.relatedTarget||o.toElement,le=re,Te=Te?yr(Te):null,Te!==null&&(wt=c(Te),Me=Te.tag,Te!==wt||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(le=null,Te=re),le!==Te)){if(Me=Wo,de="onMouseLeave",W="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Me=Yr,de="onPointerLeave",W="onPointerEnter",G="pointer"),wt=le==null?ae:xs(le),se=Te==null?ae:xs(Te),ae=new Me(de,G+"leave",le,o,ce),ae.target=wt,ae.relatedTarget=se,de=null,yr(ce)===re&&(Me=new Me(W,G+"enter",Te,o,ce),Me.target=se,Me.relatedTarget=wt,de=Me),wt=de,le&&Te)t:{for(Me=Sw,W=le,G=Te,se=0,de=W;de;de=Me(de))se++;de=0;for(var ke=G;ke;ke=Me(ke))de++;for(;0<se-de;)W=Me(W),se--;for(;0<de-se;)G=Me(G),de--;for(;se--;){if(W===G||G!==null&&W===G.alternate){Me=W;break t}W=Me(W),G=Me(G)}Me=null}else Me=null;le!==null&&_0(he,ae,le,Me,!1),Te!==null&&wt!==null&&_0(he,wt,Te,Me,!0)}}e:{if(ae=re?xs(re):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var st=Vy;else if(Oy(ae))if(Uy)st=M2;else{st=I2;var je=k2}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?re&&El(re.elementType)&&(st=Vy):st=D2;if(st&&(st=st(s,re))){Ly(he,st,o,ce);break e}je&&je(s,ae,re),s==="focusout"&&re&&ae.type==="number"&&re.memoizedProps.value!=null&&Ho(ae,"number",ae.value)}switch(je=re?xs(re):window,s){case"focusin":(Oy(je)||je.contentEditable==="true")&&(Il=je,am=re,nc=null);break;case"focusout":nc=am=Il=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,Ky(he,o,ce);break;case"selectionchange":if(O2)break;case"keydown":case"keyup":Ky(he,o,ce)}var He;if(ot)e:{switch(s){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else kl?Li(s,o)&&(Qe="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Qe="onCompositionStart");Qe&&(jr&&o.locale!=="ko"&&(kl||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&kl&&(He=Qo()):(Er=ce,Yo="value"in Er?Er.value:Er.textContent,kl=!0)),je=Kd(re,Qe),0<je.length&&(Qe=new Ar(Qe,s,null,o,ce),he.push({event:Qe,listeners:je}),He?Qe.data=He:(He=Rl(o),He!==null&&(Qe.data=He)))),(He=Ls?A2(s,o):j2(s,o))&&(Qe=Kd(re,"onBeforeInput"),0<Qe.length&&(je=new Ar("onBeforeInput","beforeinput",null,o,ce),he.push({event:je,listeners:Qe}),je.data=He)),bw(he,s,re,o,ce)}b0(he,a)})}function Ac(s,a,o){return{instance:s,listener:a,currentTarget:o}}function Kd(s,a){for(var o=a+"Capture",u=[];s!==null;){var f=s,x=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||x===null||(f=Js(s,o),f!=null&&u.unshift(Ac(s,f,x)),f=Js(s,a),f!=null&&u.push(Ac(s,f,x))),s.tag===3)return u;s=s.return}return[]}function Sw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function _0(s,a,o,u,f){for(var x=a._reactName,_=[];o!==null&&o!==u;){var R=o,q=R.alternate,re=R.stateNode;if(R=R.tag,q!==null&&q===u)break;R!==5&&R!==26&&R!==27||re===null||(q=re,f?(re=Js(o,x),re!=null&&_.unshift(Ac(o,re,q))):f||(re=Js(o,x),re!=null&&_.push(Ac(o,re,q)))),o=o.return}_.length!==0&&s.push({event:a,listeners:_})}var Ew=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function N0(s){return(typeof s=="string"?s:""+s).replace(Ew,`
`).replace(Tw,"")}function S0(s,a){return a=N0(a),N0(s)===a}function Tt(s,a,o,u,f,x){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||as(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&as(s,""+u);break;case"className":ys(s,"class",u);break;case"tabIndex":ys(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ys(s,o,u);break;case"style":Go(s,u,x);break;case"data":if(a!=="object"){ys(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Tl(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(a!=="input"&&Tt(s,a,"name",f.name,f,null),Tt(s,a,"formEncType",f.formEncType,f,null),Tt(s,a,"formMethod",f.formMethod,f,null),Tt(s,a,"formTarget",f.formTarget,f,null)):(Tt(s,a,"encType",f.encType,f,null),Tt(s,a,"method",f.method,f,null),Tt(s,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Tl(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Ws);break;case"onScroll":u!=null&&Ke("scroll",s);break;case"onScrollEnd":u!=null&&Ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=Tl(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":Ke("beforetoggle",s),Ke("toggle",s),Nl(s,"popover",u);break;case"xlinkActuate":sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":sn(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":sn(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":sn(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":sn(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Nl(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ku.get(o)||o,Nl(s,o,u))}}function kp(s,a,o,u,f,x){switch(o){case"style":Go(s,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?as(s,u):(typeof u=="number"||typeof u=="bigint")&&as(s,""+u);break;case"onScroll":u!=null&&Ke("scroll",s);break;case"onScrollEnd":u!=null&&Ke("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Ws);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),a=o.slice(2,f?o.length-7:void 0),x=s[vn]||null,x=x!=null?x[o]:null,typeof x=="function"&&s.removeEventListener(a,x,f),typeof u=="function")){typeof x!="function"&&x!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(a,u,f);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Nl(s,o,u)}}}function kn(s,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",s),Ke("load",s);var u=!1,f=!1,x;for(x in o)if(o.hasOwnProperty(x)){var _=o[x];if(_!=null)switch(x){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(s,a,x,_,o,null)}}f&&Tt(s,a,"srcSet",o.srcSet,o,null),u&&Tt(s,a,"src",o.src,o,null);return;case"input":Ke("invalid",s);var R=x=_=f=null,q=null,re=null;for(u in o)if(o.hasOwnProperty(u)){var ce=o[u];if(ce!=null)switch(u){case"name":f=ce;break;case"type":_=ce;break;case"checked":q=ce;break;case"defaultChecked":re=ce;break;case"value":x=ce;break;case"defaultValue":R=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,a));break;default:Tt(s,a,u,ce,o,null)}}Hu(s,x,R,q,re,_,f,!1);return;case"select":Ke("invalid",s),u=_=x=null;for(f in o)if(o.hasOwnProperty(f)&&(R=o[f],R!=null))switch(f){case"value":x=R;break;case"defaultValue":_=R;break;case"multiple":u=R;default:Tt(s,a,f,R,o,null)}a=x,o=_,s.multiple=!!u,a!=null?wa(s,!!u,a,!1):o!=null&&wa(s,!!u,o,!0);return;case"textarea":Ke("invalid",s),x=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(R=o[_],R!=null))switch(_){case"value":u=R;break;case"defaultValue":f=R;break;case"children":x=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:Tt(s,a,_,R,o,null)}Aa(s,u,f,x);return;case"option":for(q in o)o.hasOwnProperty(q)&&(u=o[q],u!=null)&&(q==="selected"?s.selected=u&&typeof u!="function"&&typeof u!="symbol":Tt(s,a,q,u,o,null));return;case"dialog":Ke("beforetoggle",s),Ke("toggle",s),Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":Ke("load",s);break;case"video":case"audio":for(u=0;u<wc.length;u++)Ke(wc[u],s);break;case"image":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"embed":case"source":case"link":Ke("error",s),Ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in o)if(o.hasOwnProperty(re)&&(u=o[re],u!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(s,a,re,u,o,null)}return;default:if(El(a)){for(ce in o)o.hasOwnProperty(ce)&&(u=o[ce],u!==void 0&&kp(s,a,ce,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&Tt(s,a,R,u,o,null))}function ww(s,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,x=null,_=null,R=null,q=null,re=null,ce=null;for(le in o){var he=o[le];if(o.hasOwnProperty(le)&&he!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":q=he;default:u.hasOwnProperty(le)||Tt(s,a,le,null,u,he)}}for(var ae in u){var le=u[ae];if(he=o[ae],u.hasOwnProperty(ae)&&(le!=null||he!=null))switch(ae){case"type":x=le;break;case"name":f=le;break;case"checked":re=le;break;case"defaultChecked":ce=le;break;case"value":_=le;break;case"defaultValue":R=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:le!==he&&Tt(s,a,ae,le,u,he)}}Sl(s,_,R,q,re,ce,x,f);return;case"select":le=_=R=ae=null;for(x in o)if(q=o[x],o.hasOwnProperty(x)&&q!=null)switch(x){case"value":break;case"multiple":le=q;default:u.hasOwnProperty(x)||Tt(s,a,x,null,u,q)}for(f in u)if(x=u[f],q=o[f],u.hasOwnProperty(f)&&(x!=null||q!=null))switch(f){case"value":ae=x;break;case"defaultValue":R=x;break;case"multiple":_=x;default:x!==q&&Tt(s,a,f,x,u,q)}a=R,o=_,u=le,ae!=null?wa(s,!!o,ae,!1):!!u!=!!o&&(a!=null?wa(s,!!o,a,!0):wa(s,!!o,o?[]:"",!1));return;case"textarea":le=ae=null;for(R in o)if(f=o[R],o.hasOwnProperty(R)&&f!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Tt(s,a,R,null,u,f)}for(_ in u)if(f=u[_],x=o[_],u.hasOwnProperty(_)&&(f!=null||x!=null))switch(_){case"value":ae=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==x&&Tt(s,a,_,f,u,x)}$u(s,ae,le);return;case"option":for(var Te in o)ae=o[Te],o.hasOwnProperty(Te)&&ae!=null&&!u.hasOwnProperty(Te)&&(Te==="selected"?s.selected=!1:Tt(s,a,Te,null,u,ae));for(q in u)ae=u[q],le=o[q],u.hasOwnProperty(q)&&ae!==le&&(ae!=null||le!=null)&&(q==="selected"?s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol":Tt(s,a,q,ae,u,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)ae=o[Me],o.hasOwnProperty(Me)&&ae!=null&&!u.hasOwnProperty(Me)&&Tt(s,a,Me,null,u,ae);for(re in u)if(ae=u[re],le=o[re],u.hasOwnProperty(re)&&ae!==le&&(ae!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,a));break;default:Tt(s,a,re,ae,u,le)}return;default:if(El(a)){for(var wt in o)ae=o[wt],o.hasOwnProperty(wt)&&ae!==void 0&&!u.hasOwnProperty(wt)&&kp(s,a,wt,void 0,u,ae);for(ce in u)ae=u[ce],le=o[ce],!u.hasOwnProperty(ce)||ae===le||ae===void 0&&le===void 0||kp(s,a,ce,ae,u,le);return}}for(var W in o)ae=o[W],o.hasOwnProperty(W)&&ae!=null&&!u.hasOwnProperty(W)&&Tt(s,a,W,null,u,ae);for(he in u)ae=u[he],le=o[he],!u.hasOwnProperty(he)||ae===le||ae==null&&le==null||Tt(s,a,he,ae,u,le)}function E0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Aw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],x=f.transferSize,_=f.initiatorType,R=f.duration;if(x&&R&&E0(_)){for(_=0,R=f.responseEnd,u+=1;u<o.length;u++){var q=o[u],re=q.startTime;if(re>R)break;var ce=q.transferSize,he=q.initiatorType;ce&&E0(he)&&(q=q.responseEnd,_+=ce*(q<R?1:(R-re)/(q-re)))}if(--u,a+=8*(x+_)/(f.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Ip=null,Dp=null;function Yd(s){return s.nodeType===9?s:s.ownerDocument}function T0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w0(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Mp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Pp=null;function jw(){var s=window.event;return s&&s.type==="popstate"?s===Pp?!1:(Pp=s,!0):(Pp=null,!1)}var A0=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,Rw=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(s){return j0.resolve(null).then(s).catch(kw)}:A0;function kw(s){setTimeout(function(){throw s})}function Xa(s){return s==="head"}function C0(s,a){var o=a,u=0;do{var f=o.nextSibling;if(s.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(f),ao(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")jc(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,jc(o);for(var x=o.firstChild;x;){var _=x.nextSibling,R=x.nodeName;x[xr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=_}}else o==="body"&&jc(s.ownerDocument.body);o=f}while(o);ao(a)}function R0(s,a){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function Op(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Op(o),_l(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function Iw(s,a,o,u){for(;s.nodeType===1;){var f=o;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[xr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var x=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=Hs(s.nextSibling),s===null)break}return null}function Dw(s,a,o){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Hs(s.nextSibling),s===null))return null;return s}function k0(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Hs(s.nextSibling),s===null))return null;return s}function Lp(s){return s.data==="$?"||s.data==="$~"}function Vp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Mw(s,a){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Hs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Up=null;function I0(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(a===0)return Hs(s.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}s=s.nextSibling}return null}function D0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return s;a--}else o!=="/$"&&o!=="/&"||a++}s=s.previousSibling}return null}function M0(s,a,o){switch(a=Yd(o),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function jc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);_l(s)}var $s=new Map,P0=new Set;function Qd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ca=ee.d;ee.d={f:Pw,r:Ow,D:Lw,C:Vw,L:Uw,m:zw,X:Bw,S:Fw,M:qw};function Pw(){var s=ca.f(),a=zd();return s||a}function Ow(s){var a=Ms(s);a!==null&&a.tag===5&&a.type==="form"?Jb(a):ca.r(s)}var no=typeof document>"u"?null:document;function O0(s,a,o){var u=no;if(u&&typeof a=="string"&&a){var f=rs(a);f='link[rel="'+s+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),P0.has(f)||(P0.add(f),s={rel:s,crossOrigin:o,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),kn(a,"link",s),nn(a),u.head.appendChild(a)))}}function Lw(s){ca.D(s),O0("dns-prefetch",s,null)}function Vw(s,a){ca.C(s,a),O0("preconnect",s,a)}function Uw(s,a,o){ca.L(s,a,o);var u=no;if(u&&s&&a){var f='link[rel="preload"][as="'+rs(a)+'"]';a==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+rs(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+rs(o.imageSizes)+'"]')):f+='[href="'+rs(s)+'"]';var x=f;switch(a){case"style":x=so(s);break;case"script":x=ro(s)}$s.has(x)||(s=b({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:s,as:a},o),$s.set(x,s),u.querySelector(f)!==null||a==="style"&&u.querySelector(Cc(x))||a==="script"&&u.querySelector(Rc(x))||(a=u.createElement("link"),kn(a,"link",s),nn(a),u.head.appendChild(a)))}}function zw(s,a){ca.m(s,a);var o=no;if(o&&s){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+rs(u)+'"][href="'+rs(s)+'"]',x=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=ro(s)}if(!$s.has(x)&&(s=b({rel:"modulepreload",href:s},a),$s.set(x,s),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Rc(x)))return}u=o.createElement("link"),kn(u,"link",s),nn(u),o.head.appendChild(u)}}}function Fw(s,a,o){ca.S(s,a,o);var u=no;if(u&&s){var f=br(u).hoistableStyles,x=so(s);a=a||"default";var _=f.get(x);if(!_){var R={loading:0,preload:null};if(_=u.querySelector(Cc(x)))R.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":a},o),(o=$s.get(x))&&zp(s,o);var q=_=u.createElement("link");nn(q),kn(q,"link",s),q._p=new Promise(function(re,ce){q.onload=re,q.onerror=ce}),q.addEventListener("load",function(){R.loading|=1}),q.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Xd(_,a,u)}_={type:"stylesheet",instance:_,count:1,state:R},f.set(x,_)}}}function Bw(s,a){ca.X(s,a);var o=no;if(o&&s){var u=br(o).hoistableScripts,f=ro(s),x=u.get(f);x||(x=o.querySelector(Rc(f)),x||(s=b({src:s,async:!0},a),(a=$s.get(f))&&Fp(s,a),x=o.createElement("script"),nn(x),kn(x,"link",s),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(f,x))}}function qw(s,a){ca.M(s,a);var o=no;if(o&&s){var u=br(o).hoistableScripts,f=ro(s),x=u.get(f);x||(x=o.querySelector(Rc(f)),x||(s=b({src:s,async:!0,type:"module"},a),(a=$s.get(f))&&Fp(s,a),x=o.createElement("script"),nn(x),kn(x,"link",s),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(f,x))}}function L0(s,a,o,u){var f=(f=we.current)?Qd(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=so(o.href),o=br(f).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=so(o.href);var x=br(f).hoistableStyles,_=x.get(s);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,_),(x=f.querySelector(Cc(s)))&&!x._p&&(_.instance=x,_.state.loading=5),$s.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$s.set(s,o),x||Hw(f,s,o,_.state))),a&&u===null)throw Error(r(528,""));return _}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ro(o),o=br(f).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function so(s){return'href="'+rs(s)+'"'}function Cc(s){return'link[rel="stylesheet"]['+s+"]"}function V0(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function Hw(s,a,o,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),kn(a,"link",o),nn(a),s.head.appendChild(a))}function ro(s){return'[src="'+rs(s)+'"]'}function Rc(s){return"script[async]"+s}function U0(s,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+rs(o.href)+'"]');if(u)return a.instance=u,nn(u),u;var f=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),nn(u),kn(u,"style",f),Xd(u,o.precedence,s),a.instance=u;case"stylesheet":f=so(o.href);var x=s.querySelector(Cc(f));if(x)return a.state.loading|=4,a.instance=x,nn(x),x;u=V0(o),(f=$s.get(f))&&zp(u,f),x=(s.ownerDocument||s).createElement("link"),nn(x);var _=x;return _._p=new Promise(function(R,q){_.onload=R,_.onerror=q}),kn(x,"link",u),a.state.loading|=4,Xd(x,o.precedence,s),a.instance=x;case"script":return x=ro(o.src),(f=s.querySelector(Rc(x)))?(a.instance=f,nn(f),f):(u=o,(f=$s.get(x))&&(u=b({},o),Fp(u,f)),s=s.ownerDocument||s,f=s.createElement("script"),nn(f),kn(f,"link",u),s.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Xd(u,o.precedence,s));return a.instance}function Xd(s,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,x=f,_=0;_<u.length;_++){var R=u[_];if(R.dataset.precedence===a)x=R;else if(x!==f)break}x?x.parentNode.insertBefore(s,x.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(s,a.firstChild))}function zp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Fp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Wd=null;function z0(s,a,o){if(Wd===null){var u=new Map,f=Wd=new Map;f.set(o,u)}else f=Wd,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),f=0;f<o.length;f++){var x=o[f];if(!(x[xr]||x[tn]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(a)||"";_=s+_;var R=u.get(_);R?R.push(x):u.set(_,[x])}}return u}function F0(s,a,o){s=s.ownerDocument||s,s.head.insertBefore(o,a==="title"?s.querySelector("head > title"):null)}function $w(s,a,o){if(o===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function B0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Gw(s,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=so(u.href),x=a.querySelector(Cc(f));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Jd.bind(s),a.then(s,s)),o.state.loading|=4,o.instance=x,nn(x);return}x=a.ownerDocument||a,u=V0(u),(f=$s.get(f))&&zp(u,f),x=x.createElement("link"),nn(x);var _=x;_._p=new Promise(function(R,q){_.onload=R,_.onerror=q}),kn(x,"link",u),o.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Jd.bind(s),a.addEventListener("load",o),a.addEventListener("error",o))}}var Bp=0;function Kw(s,a){return s.stylesheets&&s.count===0&&eh(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&eh(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+a);0<s.imgBytes&&Bp===0&&(Bp=62500*Aw());var f=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&eh(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>Bp?50:800)+a);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Jd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)eh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zd=null;function eh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zd=new Map,a.forEach(Yw,s),Zd=null,Jd.call(s))}function Yw(s,a){if(!(a.state.loading&4)){var o=Zd.get(s);if(o)var u=o.get(null);else{o=new Map,Zd.set(s,o);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<f.length;x++){var _=f[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=a.instance,_=f.getAttribute("data-precedence"),x=o.get(_)||u,x===u&&o.set(null,f),o.set(_,f),this.count++,u=Jd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),x?x.parentNode.insertBefore(f,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),a.state.loading|=4}}var kc={$$typeof:K,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Qw(s,a,o,u,f,x,_,R,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.hiddenUpdates=gt(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function q0(s,a,o,u,f,x,_,R,q,re,ce,he){return s=new Qw(s,a,o,_,q,re,ce,he,R),a=1,x===!0&&(a|=24),x=vs(3,null,null,a),s.current=x,x.stateNode=s,a=_m(),a.refCount++,s.pooledCache=a,a.refCount++,x.memoizedState={element:u,isDehydrated:o,cache:a},Tm(x),s}function H0(s){return s?(s=Pl,s):Pl}function $0(s,a,o,u,f,x){f=H0(f),u.context===null?u.context=f:u.pendingContext=f,u=Ua(a),u.payload={element:o},x=x===void 0?null:x,x!==null&&(u.callback=x),o=za(s,u,a),o!==null&&(us(o,s,a),cc(o,s,a))}function G0(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<a?o:a}}function qp(s,a){G0(s,a),(s=s.alternate)&&G0(s,a)}function K0(s){if(s.tag===13||s.tag===31){var a=zi(s,67108864);a!==null&&us(a,s,67108864),qp(s,67108864)}}function Y0(s){if(s.tag===13||s.tag===31){var a=Ts();a=ps(a);var o=zi(s,a);o!==null&&us(o,s,a),qp(s,a)}}var th=!0;function Xw(s,a,o,u){var f=z.T;z.T=null;var x=ee.p;try{ee.p=2,Hp(s,a,o,u)}finally{ee.p=x,z.T=f}}function Ww(s,a,o,u){var f=z.T;z.T=null;var x=ee.p;try{ee.p=8,Hp(s,a,o,u)}finally{ee.p=x,z.T=f}}function Hp(s,a,o,u){if(th){var f=$p(u);if(f===null)Rp(s,a,u,nh,o),X0(s,u);else if(Zw(f,s,a,o,u))u.stopPropagation();else if(X0(s,u),a&4&&-1<Jw.indexOf(s)){for(;f!==null;){var x=Ms(f);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=ft(x.pendingLanes);if(_!==0){var R=x;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var q=1<<31-be(_);R.entanglements[1]|=q,_&=~q}Ir(x),(ct&6)===0&&(Vd=Zt()+500,Tc(0))}}break;case 31:case 13:R=zi(x,2),R!==null&&us(R,x,2),zd(),qp(x,2)}if(x=$p(u),x===null&&Rp(s,a,u,nh,o),x===f)break;f=x}f!==null&&u.stopPropagation()}else Rp(s,a,u,null,o)}}function $p(s){return s=Ps(s),Gp(s)}var nh=null;function Gp(s){if(nh=null,s=yr(s),s!==null){var a=c(s);if(a===null)s=null;else{var o=a.tag;if(o===13){if(s=d(a),s!==null)return s;s=null}else if(o===31){if(s=m(a),s!==null)return s;s=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return nh=s,null}function Q0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qs()){case Is:return 2;case ss:return 8;case Tn:case Xs:return 32;case $r:return 268435456;default:return 32}default:return 32}}var Kp=!1,Wa=null,Ja=null,Za=null,Ic=new Map,Dc=new Map,ei=[],Jw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X0(s,a){switch(s){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Ic.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(a.pointerId)}}function Mc(s,a,o,u,f,x){return s===null||s.nativeEvent!==x?(s={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:x,targetContainers:[f]},a!==null&&(a=Ms(a),a!==null&&K0(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),s)}function Zw(s,a,o,u,f){switch(a){case"focusin":return Wa=Mc(Wa,s,a,o,u,f),!0;case"dragenter":return Ja=Mc(Ja,s,a,o,u,f),!0;case"mouseover":return Za=Mc(Za,s,a,o,u,f),!0;case"pointerover":var x=f.pointerId;return Ic.set(x,Mc(Ic.get(x)||null,s,a,o,u,f)),!0;case"gotpointercapture":return x=f.pointerId,Dc.set(x,Mc(Dc.get(x)||null,s,a,o,u,f)),!0}return!1}function W0(s){var a=yr(s.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){s.blockedOn=a,wn(s.priority,function(){Y0(o)});return}}else if(a===31){if(a=m(o),a!==null){s.blockedOn=a,wn(s.priority,function(){Y0(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var o=$p(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);Ko=u,o.target.dispatchEvent(u),Ko=null}else return a=Ms(o),a!==null&&K0(a),s.blockedOn=o,!1;a.shift()}return!0}function J0(s,a,o){sh(s)&&o.delete(a)}function eA(){Kp=!1,Wa!==null&&sh(Wa)&&(Wa=null),Ja!==null&&sh(Ja)&&(Ja=null),Za!==null&&sh(Za)&&(Za=null),Ic.forEach(J0),Dc.forEach(J0)}function rh(s,a){s.blockedOn===a&&(s.blockedOn=null,Kp||(Kp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,eA)))}var ah=null;function Z0(s){ah!==s&&(ah=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ah===s&&(ah=null);for(var a=0;a<s.length;a+=3){var o=s[a],u=s[a+1],f=s[a+2];if(typeof u!="function"){if(Gp(u||o)===null)continue;break}var x=Ms(o);x!==null&&(s.splice(a,3),a-=3,$m(x,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function ao(s){function a(q){return rh(q,s)}Wa!==null&&rh(Wa,s),Ja!==null&&rh(Ja,s),Za!==null&&rh(Za,s),Ic.forEach(a),Dc.forEach(a);for(var o=0;o<ei.length;o++){var u=ei[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<ei.length&&(o=ei[0],o.blockedOn===null);)W0(o),o.blockedOn===null&&ei.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],x=o[u+1],_=f[vn]||null;if(typeof x=="function")_||Z0(o);else if(_){var R=null;if(x&&x.hasAttribute("formAction")){if(f=x,_=x[vn]||null)R=_.formAction;else if(Gp(f)!==null)continue}else R=_.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),Z0(o)}}}function e1(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Yp(s){this._internalRoot=s}ih.prototype.render=Yp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var o=a.current,u=Ts();$0(o,u,s,a,null,null)},ih.prototype.unmount=Yp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;$0(s.current,2,null,s,null,null),zd(),a[gr]=null}};function ih(s){this._internalRoot=s}ih.prototype.unstable_scheduleHydration=function(s){if(s){var a=gs();s={blockedOn:null,target:s,priority:a};for(var o=0;o<ei.length&&a!==0&&a<ei[o].priority;o++);ei.splice(o,0,s),o===0&&W0(s)}};var t1=e.version;if(t1!=="19.2.3")throw Error(r(527,t1,"19.2.3"));ee.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(a),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var tA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{Vn=lh.inject(tA),Ot=lh}catch{}}return Oc.createRoot=function(s,a){if(!i(s))throw Error(r(299));var o=!1,u="",f=ov,x=cv,_=uv;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=q0(s,1,!1,null,null,o,u,null,f,x,_,e1),s[gr]=a.current,Cp(s),new Yp(a)},Oc.hydrateRoot=function(s,a,o){if(!i(s))throw Error(r(299));var u=!1,f="",x=ov,_=cv,R=uv,q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(q=o.formState)),a=q0(s,1,!0,a,o??null,u,f,q,x,_,R,e1),a.context=H0(null),o=a.current,u=Ts(),u=ps(u),f=Ua(u),f.callback=null,za(o,f,u),o=u,a.current.lanes=o,Un(a,o),Ir(a),s[gr]=a.current,Cp(s),new ih(a)},Oc.version="19.2.3",Oc}var d1;function dA(){if(d1)return Wp.exports;d1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wp.exports=uA(),Wp.exports}var hA=dA();var h1="popstate";function fA(t={}){function e(r,i){let{pathname:c,search:d,hash:m}=r.location;return wg("",{pathname:c,search:d,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:su(i)}return pA(e,n,null,t)}function zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ur(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mA(){return Math.random().toString(36).substring(2,10)}function f1(t,e){return{usr:t.state,key:t.key,idx:e}}function wg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?To(e):e,state:n,key:e&&e.key||r||mA()}}function su({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function To(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function pA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:c=!1}=r,d=i.history,m="POP",p=null,g=y();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function y(){return(d.state||{idx:null}).idx}function b(){m="POP";let I=y(),B=I==null?null:I-g;g=I,p&&p({action:m,location:M.location,delta:B})}function N(I,B){m="PUSH";let U=wg(M.location,I,B);g=y()+1;let K=f1(U,g),Y=M.createHref(U);try{d.pushState(K,"",Y)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(Y)}c&&p&&p({action:m,location:M.location,delta:1})}function k(I,B){m="REPLACE";let U=wg(M.location,I,B);g=y();let K=f1(U,g),Y=M.createHref(U);d.replaceState(K,"",Y),c&&p&&p({action:m,location:M.location,delta:0})}function L(I){return gA(I)}let M={get action(){return m},get location(){return t(i,d)},listen(I){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(h1,b),p=I,()=>{i.removeEventListener(h1,b),p=null}},createHref(I){return e(i,I)},createURL:L,encodeLocation(I){let B=L(I);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:N,replace:k,go(I){return d.go(I)}};return M}function gA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:su(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function DN(t,e,n="/"){return xA(t,e,n,!1)}function xA(t,e,n,r){let i=typeof e=="string"?To(e):e,c=va(i.pathname||"/",n);if(c==null)return null;let d=MN(t);yA(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=CA(c);m=AA(d[p],g,r)}return m}function MN(t,e=[],n=[],r="",i=!1){let c=(d,m,p=i,g)=>{let y={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&p)return;zt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let b=ya([r,y.relativePath]),N=n.concat(y);d.children&&d.children.length>0&&(zt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),MN(d.children,e,N,b,p)),!(d.path==null&&!d.index)&&e.push({path:b,score:TA(b,d.index),routesMeta:N})};return t.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let p of PN(d.path))c(d,m,!0,p)}),e}function PN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return i?[c,""]:[c];let d=PN(r.join("/")),m=[];return m.push(...d.map(p=>p===""?c:[c,p].join("/"))),i&&m.push(...d),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function yA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var bA=/^:[\w-]+$/,vA=3,_A=2,NA=1,SA=10,EA=-2,m1=t=>t==="*";function TA(t,e){let n=t.split("/"),r=n.length;return n.some(m1)&&(r+=EA),e&&(r+=_A),n.filter(i=>!m1(i)).reduce((i,c)=>i+(bA.test(c)?vA:c===""?NA:SA),r)}function wA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function AA(t,e,n=!1){let{routesMeta:r}=t,i={},c="/",d=[];for(let m=0;m<r.length;++m){let p=r[m],g=m===r.length-1,y=c==="/"?e:e.slice(c.length)||"/",b=Uh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),N=p.route;if(!b&&g&&n&&!r[r.length-1].route.index&&(b=Uh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!b)return null;Object.assign(i,b.params),d.push({params:i,pathname:ya([c,b.pathname]),pathnameBase:DA(ya([c,b.pathnameBase])),route:N}),b.pathnameBase!=="/"&&(c=ya([c,b.pathnameBase]))}return d}function Uh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let c=i[0],d=c.replace(/(.)\/+$/,"$1"),m=i.slice(1);return{params:r.reduce((g,{paramName:y,isOptional:b},N)=>{if(y==="*"){let L=m[N]||"";d=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const k=m[N];return b&&!k?g[y]=void 0:g[y]=(k||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:t}}function jA(t,e=!1,n=!0){ur(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(r.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function CA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ur(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var ON=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RA=t=>ON.test(t);function kA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?To(t):t,c;if(n)if(RA(n))c=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),ur(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?c=p1(n.substring(1),"/"):c=p1(n,e)}else c=e;return{pathname:c,search:MA(r),hash:PA(i)}}function p1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function LN(t){let e=IA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function VN(t,e,n,r=!1){let i;typeof t=="string"?i=To(t):(i={...t},zt(!i.pathname||!i.pathname.includes("?"),tg("?","pathname","search",i)),zt(!i.pathname||!i.pathname.includes("#"),tg("#","pathname","hash",i)),zt(!i.search||!i.search.includes("#"),tg("#","search","hash",i)));let c=t===""||i.pathname==="",d=c?"/":i.pathname,m;if(d==null)m=n;else{let b=e.length-1;if(!r&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),b-=1;i.pathname=N.join("/")}m=b>=0?e[b]:"/"}let p=kA(i,m),g=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var ya=t=>t.join("/").replace(/\/\/+/g,"/"),DA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,OA=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function LA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function VA(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var UN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zN(t,e){let n=t;if(typeof n!="string"||!ON.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(UN)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),m=va(d.pathname,e);d.origin===c.origin&&m!=null?n=m+d.search+d.hash:i=!0}catch{ur(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var FN=["POST","PUT","PATCH","DELETE"];new Set(FN);var UA=["GET",...FN];new Set(UA);var wo=T.createContext(null);wo.displayName="DataRouter";var Nf=T.createContext(null);Nf.displayName="DataRouterState";var zA=T.createContext(!1),BN=T.createContext({isTransitioning:!1});BN.displayName="ViewTransition";var FA=T.createContext(new Map);FA.displayName="Fetchers";var BA=T.createContext(null);BA.displayName="Await";var Ys=T.createContext(null);Ys.displayName="Navigation";var yu=T.createContext(null);yu.displayName="Location";var mr=T.createContext({outlet:null,matches:[],isDataRoute:!1});mr.displayName="Route";var gx=T.createContext(null);gx.displayName="RouteError";var qN="REACT_ROUTER_ERROR",qA="REDIRECT",HA="ROUTE_ERROR_RESPONSE";function $A(t){if(t.startsWith(`${qN}:${qA}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function GA(t){if(t.startsWith(`${qN}:${HA}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new OA(e.status,e.statusText,e.data)}catch{}}function KA(t,{relative:e}={}){zt(bu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(Ys),{hash:i,pathname:c,search:d}=_u(t,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:ya([n,c])),r.createHref({pathname:m,search:d,hash:i})}function bu(){return T.useContext(yu)!=null}function Ti(){return zt(bu(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(yu).location}var HN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $N(t){T.useContext(Ys).static||T.useLayoutEffect(t)}function vu(){let{isDataRoute:t}=T.useContext(mr);return t?oj():YA()}function YA(){zt(bu(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(wo),{basename:e,navigator:n}=T.useContext(Ys),{matches:r}=T.useContext(mr),{pathname:i}=Ti(),c=JSON.stringify(LN(r)),d=T.useRef(!1);return $N(()=>{d.current=!0}),T.useCallback((p,g={})=>{if(ur(d.current,HN),!d.current)return;if(typeof p=="number"){n.go(p);return}let y=VN(p,JSON.parse(c),i,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ya([e,y.pathname])),(g.replace?n.replace:n.push)(y,g.state,g)},[e,n,c,i,t])}var QA=T.createContext(null);function XA(t){let e=T.useContext(mr).outlet;return T.useMemo(()=>e&&T.createElement(QA.Provider,{value:t},e),[e,t])}function xx(){let{matches:t}=T.useContext(mr),e=t[t.length-1];return e?e.params:{}}function _u(t,{relative:e}={}){let{matches:n}=T.useContext(mr),{pathname:r}=Ti(),i=JSON.stringify(LN(n));return T.useMemo(()=>VN(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function WA(t,e){return GN(t,e)}function GN(t,e,n,r,i){zt(bu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=T.useContext(Ys),{matches:d}=T.useContext(mr),m=d[d.length-1],p=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",b=m&&m.route;{let U=b&&b.path||"";YN(g,!b||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let N=Ti(),k;if(e){let U=typeof e=="string"?To(e):e;zt(y==="/"||U.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${U.pathname}" was given in the \`location\` prop.`),k=U}else k=N;let L=k.pathname||"/",M=L;if(y!=="/"){let U=y.replace(/^\//,"").split("/");M="/"+L.replace(/^\//,"").split("/").slice(U.length).join("/")}let I=DN(t,{pathname:M});ur(b||I!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),ur(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=nj(I&&I.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:ya([y,c.encodeLocation?c.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?y:ya([y,c.encodeLocation?c.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),d,n,r,i);return e&&B?T.createElement(yu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},B):B}function JA(){let t=lj(),e=LA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:c},"ErrorBoundary")," or"," ",T.createElement("code",{style:c},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,d)}var ZA=T.createElement(JA,null),KN=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=GA(t.digest);n&&(t=n)}let e=t!==void 0?T.createElement(mr.Provider,{value:this.props.routeContext},T.createElement(gx.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?T.createElement(ej,{error:t},e):e}};KN.contextType=zA;var ng=new WeakMap;function ej({children:t,error:e}){let{basename:n}=T.useContext(Ys);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=$A(e.digest);if(r){let i=ng.get(e);if(i)throw i;let c=zN(r.location,n);if(UN&&!ng.get(e))if(c.isExternal||r.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:r.replace}));throw ng.set(e,d),d}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return t}function tj({routeContext:t,match:e,children:n}){let r=T.useContext(wo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(mr.Provider,{value:t},n)}function nj(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,d=n?.errors;if(d!=null){let y=c.findIndex(b=>b.route.id&&d?.[b.route.id]!==void 0);zt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let m=!1,p=-1;if(n)for(let y=0;y<c.length;y++){let b=c[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=y),b.route.id){let{loaderData:N,errors:k}=n,L=b.route.loader&&!N.hasOwnProperty(b.route.id)&&(!k||k[b.route.id]===void 0);if(b.route.lazy||L){m=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let g=n&&r?(y,b)=>{r(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:VA(n.matches),errorInfo:b})}:void 0;return c.reduceRight((y,b,N)=>{let k,L=!1,M=null,I=null;n&&(k=d&&b.route.id?d[b.route.id]:void 0,M=b.route.errorElement||ZA,m&&(p<0&&N===0?(YN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,I=null):p===N&&(L=!0,I=b.route.hydrateFallbackElement||null)));let B=e.concat(c.slice(0,N+1)),U=()=>{let K;return k?K=M:L?K=I:b.route.Component?K=T.createElement(b.route.Component,null):b.route.element?K=b.route.element:K=y,T.createElement(tj,{match:b,routeContext:{outlet:y,matches:B,isDataRoute:n!=null},children:K})};return n&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?T.createElement(KN,{location:n.location,revalidation:n.revalidation,component:M,error:k,children:U(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:g}):U()},null)}function yx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sj(t){let e=T.useContext(wo);return zt(e,yx(t)),e}function rj(t){let e=T.useContext(Nf);return zt(e,yx(t)),e}function aj(t){let e=T.useContext(mr);return zt(e,yx(t)),e}function bx(t){let e=aj(t),n=e.matches[e.matches.length-1];return zt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ij(){return bx("useRouteId")}function lj(){let t=T.useContext(gx),e=rj("useRouteError"),n=bx("useRouteError");return t!==void 0?t:e.errors?.[n]}function oj(){let{router:t}=sj("useNavigate"),e=bx("useNavigate"),n=T.useRef(!1);return $N(()=>{n.current=!0}),T.useCallback(async(i,c={})=>{ur(n.current,HN),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...c}))},[t,e])}var g1={};function YN(t,e,n){!e&&!g1[t]&&(g1[t]=!0,ur(!1,n))}T.memo(cj);function cj({routes:t,future:e,state:n,onError:r}){return GN(t,void 0,n,r,e)}function uj(t){return XA(t.context)}function ts(t){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dj({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:c=!1,unstable_useTransitions:d}){zt(!bu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=T.useMemo(()=>({basename:m,navigator:i,static:c,unstable_useTransitions:d,future:{}}),[m,i,c,d]);typeof n=="string"&&(n=To(n));let{pathname:g="/",search:y="",hash:b="",state:N=null,key:k="default"}=n,L=T.useMemo(()=>{let M=va(g,m);return M==null?null:{location:{pathname:M,search:y,hash:b,state:N,key:k},navigationType:r}},[m,g,y,b,N,k,r]);return ur(L!=null,`<Router basename="${m}"> is not able to match the URL "${g}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:T.createElement(Ys.Provider,{value:p},T.createElement(yu.Provider,{children:e,value:L}))}function hj({children:t,location:e}){return WA(Ag(t),e)}function Ag(t,e=[]){let n=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let c=[...e,i];if(r.type===T.Fragment){n.push.apply(n,Ag(r.props.children,c));return}zt(r.type===ts,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=Ag(r.props.children,c)),n.push(d)}),n}var _h="get",Nh="application/x-www-form-urlencoded";function Sf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function fj(t){return Sf(t)&&t.tagName.toLowerCase()==="button"}function mj(t){return Sf(t)&&t.tagName.toLowerCase()==="form"}function pj(t){return Sf(t)&&t.tagName.toLowerCase()==="input"}function gj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xj(t,e){return t.button===0&&(!e||e==="_self")&&!gj(t)}var oh=null;function yj(){if(oh===null)try{new FormData(document.createElement("form"),0),oh=!1}catch{oh=!0}return oh}var bj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sg(t){return t!=null&&!bj.has(t)?(ur(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nh}"`),null):t}function vj(t,e){let n,r,i,c,d;if(mj(t)){let m=t.getAttribute("action");r=m?va(m,e):null,n=t.getAttribute("method")||_h,i=sg(t.getAttribute("enctype"))||Nh,c=new FormData(t)}else if(fj(t)||pj(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||m.getAttribute("action");if(r=p?va(p,e):null,n=t.getAttribute("formmethod")||m.getAttribute("method")||_h,i=sg(t.getAttribute("formenctype"))||sg(m.getAttribute("enctype"))||Nh,c=new FormData(m,t),!yj()){let{name:g,type:y,value:b}=t;if(y==="image"){let N=g?`${g}.`:"";c.append(`${N}x`,"0"),c.append(`${N}y`,"0")}else g&&c.append(g,b)}}else{if(Sf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_h,r=null,i=Nh,d=t}return c&&i==="text/plain"&&(d=c,c=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _j(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&va(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Nj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Sj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ej(t,e,n){let r=await Promise.all(t.map(async i=>{let c=e.routes[i.route.id];if(c){let d=await Nj(c,n);return d.links?d.links():[]}return[]}));return jj(r.flat(1).filter(Sj).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function x1(t,e,n,r,i,c){let d=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):c==="data"?e.filter((p,g)=>{let y=r.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Tj(t,e,{includeHydrateFallback:n}={}){return wj(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function wj(t){return[...new Set(t)]}function Aj(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function jj(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let c=JSON.stringify(Aj(i));return n.has(c)||(n.add(c),r.push({key:c,link:i})),r},[])}function QN(){let t=T.useContext(wo);return vx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Cj(){let t=T.useContext(Nf);return vx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _x=T.createContext(void 0);_x.displayName="FrameworkContext";function XN(){let t=T.useContext(_x);return vx(t,"You must render this element inside a <HydratedRouter> element"),t}function Rj(t,e){let n=T.useContext(_x),[r,i]=T.useState(!1),[c,d]=T.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:b}=e,N=T.useRef(null);T.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let M=B=>{B.forEach(U=>{d(U.isIntersecting)})},I=new IntersectionObserver(M,{threshold:.5});return N.current&&I.observe(N.current),()=>{I.disconnect()}}},[t]),T.useEffect(()=>{if(r){let M=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(M)}}},[r]);let k=()=>{i(!0)},L=()=>{i(!1),d(!1)};return n?t!=="intent"?[c,N,{}]:[c,N,{onFocus:Lc(m,k),onBlur:Lc(p,L),onMouseEnter:Lc(g,k),onMouseLeave:Lc(y,L),onTouchStart:Lc(b,k)}]:[!1,N,{}]}function Lc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function kj({page:t,...e}){let{router:n}=QN(),r=T.useMemo(()=>DN(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?T.createElement(Dj,{page:t,matches:r,...e}):null}function Ij(t){let{manifest:e,routeModules:n}=XN(),[r,i]=T.useState([]);return T.useEffect(()=>{let c=!1;return Ej(t,e,n).then(d=>{c||i(d)}),()=>{c=!0}},[t,e,n]),r}function Dj({page:t,matches:e,...n}){let r=Ti(),{future:i,manifest:c,routeModules:d}=XN(),{basename:m}=QN(),{loaderData:p,matches:g}=Cj(),y=T.useMemo(()=>x1(t,e,g,c,r,"data"),[t,e,g,c,r]),b=T.useMemo(()=>x1(t,e,g,c,r,"assets"),[t,e,g,c,r]),N=T.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,I=!1;if(e.forEach(U=>{let K=c.routes[U.route.id];!K||!K.hasLoader||(!y.some(Y=>Y.route.id===U.route.id)&&U.route.id in p&&d[U.route.id]?.shouldRevalidate||K.hasClientLoader?I=!0:M.add(U.route.id))}),M.size===0)return[];let B=_j(t,m,i.unstable_trailingSlashAwareDataRequests,"data");return I&&M.size>0&&B.searchParams.set("_routes",e.filter(U=>M.has(U.route.id)).map(U=>U.route.id).join(",")),[B.pathname+B.search]},[m,i.unstable_trailingSlashAwareDataRequests,p,r,c,y,e,t,d]),k=T.useMemo(()=>Tj(b,c),[b,c]),L=Ij(b);return T.createElement(T.Fragment,null,N.map(M=>T.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),k.map(M=>T.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),L.map(({key:M,link:I})=>T.createElement("link",{key:M,nonce:n.nonce,...I})))}function Mj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Pj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pj&&(window.__reactRouterVersion="7.12.0")}catch{}function Oj({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=T.useRef();i.current==null&&(i.current=fA({window:r,v5Compat:!0}));let c=i.current,[d,m]=T.useState({action:c.action,location:c.location}),p=T.useCallback(g=>{n===!1?m(g):T.startTransition(()=>m(g))},[n]);return T.useLayoutEffect(()=>c.listen(p),[c,p]),T.createElement(dj,{basename:t,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var WN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dn=T.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:c,replace:d,state:m,target:p,to:g,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:N,...k},L){let{basename:M,unstable_useTransitions:I}=T.useContext(Ys),B=typeof g=="string"&&WN.test(g),U=zN(g,M);g=U.to;let K=KA(g,{relative:i}),[Y,Q,$]=Rj(r,k),C=zj(g,{replace:d,state:m,target:p,preventScrollReset:y,relative:i,viewTransition:b,unstable_defaultShouldRevalidate:N,unstable_useTransitions:I});function E(P){e&&e(P),P.defaultPrevented||C(P)}let A=T.createElement("a",{...k,...$,href:U.absoluteURL||K,onClick:U.isExternal||c?e:E,ref:Mj(L,Q),target:p,"data-discover":!B&&n==="render"?"true":void 0});return Y&&!B?T.createElement(T.Fragment,null,A,T.createElement(kj,{page:K})):A});dn.displayName="Link";var Lj=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:c,to:d,viewTransition:m,children:p,...g},y){let b=_u(d,{relative:g.relative}),N=Ti(),k=T.useContext(Nf),{navigator:L,basename:M}=T.useContext(Ys),I=k!=null&&$j(b)&&m===!0,B=L.encodeLocation?L.encodeLocation(b).pathname:b.pathname,U=N.pathname,K=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(U=U.toLowerCase(),K=K?K.toLowerCase():null,B=B.toLowerCase()),K&&M&&(K=va(K,M)||K);const Y=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let Q=U===B||!i&&U.startsWith(B)&&U.charAt(Y)==="/",$=K!=null&&(K===B||!i&&K.startsWith(B)&&K.charAt(B.length)==="/"),C={isActive:Q,isPending:$,isTransitioning:I},E=Q?e:void 0,A;typeof r=="function"?A=r(C):A=[r,Q?"active":null,$?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let P=typeof c=="function"?c(C):c;return T.createElement(dn,{...g,"aria-current":E,className:A,ref:y,style:P,to:d,viewTransition:m},typeof p=="function"?p(C):p)});Lj.displayName="NavLink";var Vj=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:c,method:d=_h,action:m,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:N,...k},L)=>{let{unstable_useTransitions:M}=T.useContext(Ys),I=qj(),B=Hj(m,{relative:g}),U=d.toLowerCase()==="get"?"get":"post",K=typeof m=="string"&&WN.test(m),Y=Q=>{if(p&&p(Q),Q.defaultPrevented)return;Q.preventDefault();let $=Q.nativeEvent.submitter,C=$?.getAttribute("formmethod")||d,E=()=>I($||Q.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:c,relative:g,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:N});M&&n!==!1?T.startTransition(()=>E()):E()};return T.createElement("form",{ref:L,method:U,action:B,onSubmit:r?p:Y,...k,"data-discover":!K&&t==="render"?"true":void 0})});Vj.displayName="Form";function Uj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JN(t){let e=T.useContext(wo);return zt(e,Uj(t)),e}function zj(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=vu(),y=Ti(),b=_u(t,{relative:c});return T.useCallback(N=>{if(xj(N,e)){N.preventDefault();let k=n!==void 0?n:su(y)===su(b),L=()=>g(t,{replace:k,state:r,preventScrollReset:i,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m});p?T.startTransition(()=>L()):L()}},[y,g,b,n,r,e,t,i,c,d,m,p])}var Fj=0,Bj=()=>`__${String(++Fj)}__`;function qj(){let{router:t}=JN("useSubmit"),{basename:e}=T.useContext(Ys),n=ij(),r=t.fetch,i=t.navigate;return T.useCallback(async(c,d={})=>{let{action:m,method:p,encType:g,formData:y,body:b}=vj(c,e);if(d.navigate===!1){let N=d.fetcherKey||Bj();await r(N,n,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:b,formMethod:d.method||p,formEncType:d.encType||g,flushSync:d.flushSync})}else await i(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:b,formMethod:d.method||p,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,i,e,n])}function Hj(t,{relative:e}={}){let{basename:n}=T.useContext(Ys),r=T.useContext(mr);zt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),c={..._u(t||".",{relative:e})},d=Ti();if(t==null){c.search=d.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let y=m.toString();c.search=y?`?${y}`:""}}return(!t||t===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:ya([n,c.pathname])),su(c)}function $j(t,{relative:e}={}){let n=T.useContext(BN);zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=JN("useViewTransitionState"),i=_u(t,{relative:e});if(!n.isTransitioning)return!1;let c=va(n.currentLocation.pathname,r)||n.currentLocation.pathname,d=va(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Uh(i.pathname,d)!=null||Uh(i.pathname,c)!=null}var zc=IN();const y1=t=>{let e;const n=new Set,r=(g,y)=>{const b=typeof g=="function"?g(e):g;if(!Object.is(b,e)){const N=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(k=>k(e,N))}},i=()=>e,m={setState:r,getState:i,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g))},p=e=t(r,i,m);return m},Gj=(t=>t?y1(t):y1),Kj=t=>t;function Yj(t,e=Kj){const n=At.useSyncExternalStore(t.subscribe,At.useCallback(()=>e(t.getState()),[t,e]),At.useCallback(()=>e(t.getInitialState()),[t,e]));return At.useDebugValue(n),n}const Qj=t=>{const e=Gj(t),n=r=>Yj(e,r);return Object.assign(n,e),n},Nu=(t=>Qj);function Xj(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var c;const d=p=>p===null?null:JSON.parse(p,void 0),m=(c=n.getItem(i))!=null?c:null;return m instanceof Promise?m.then(d):d(m)},setItem:(i,c)=>n.setItem(i,JSON.stringify(c,void 0)),removeItem:i=>n.removeItem(i)}}const jg=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return jg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return jg(r)(n)}}}},Wj=(t,e)=>(n,r,i)=>{let c={storage:Xj(()=>localStorage),partialize:I=>I,version:0,merge:(I,B)=>({...B,...I}),...e},d=!1,m=0;const p=new Set,g=new Set;let y=c.storage;if(!y)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(...I)},r,i);const b=()=>{const I=c.partialize({...r()});return y.setItem(c.name,{state:I,version:c.version})},N=i.setState;i.setState=(I,B)=>(N(I,B),b());const k=t((...I)=>(n(...I),b()),r,i);i.getInitialState=()=>k;let L;const M=()=>{var I,B;if(!y)return;const U=++m;d=!1,p.forEach(Y=>{var Q;return Y((Q=r())!=null?Q:k)});const K=((B=c.onRehydrateStorage)==null?void 0:B.call(c,(I=r())!=null?I:k))||void 0;return jg(y.getItem.bind(y))(c.name).then(Y=>{if(Y)if(typeof Y.version=="number"&&Y.version!==c.version){if(c.migrate){const Q=c.migrate(Y.state,Y.version);return Q instanceof Promise?Q.then($=>[!0,$]):[!0,Q]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,Y.state];return[!1,void 0]}).then(Y=>{var Q;if(U!==m)return;const[$,C]=Y;if(L=c.merge(C,(Q=r())!=null?Q:k),n(L,!0),$)return b()}).then(()=>{U===m&&(K?.(L,void 0),L=r(),d=!0,g.forEach(Y=>Y(L)))}).catch(Y=>{U===m&&K?.(void 0,Y)})};return i.persist={setOptions:I=>{c={...c,...I},I.storage&&(y=I.storage)},clearStorage:()=>{y?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>M(),hasHydrated:()=>d,onHydrate:I=>(p.add(I),()=>{p.delete(I)}),onFinishHydration:I=>(g.add(I),()=>{g.delete(I)})},c.skipHydration||M(),L||k},Su=Wj,Jj="https://www.thebluealliance.com/api/v3",Zj="Gfxopzs8Vao3biyJ1TYRBbZWzhcX9LOBB64ta8i45X4Zvim6iSTMESj2xhrS2ake";async function Ao(t,e){const n=await fetch(`${Jj}${t}`,{headers:{"X-TBA-Auth-Key":e||Zj}});if(!n.ok)throw new Error(`TBA API error: ${n.statusText}`);return n.json()}async function eC(t,e){return Ao(`/event/${t}`,e)}async function ZN(t,e){return Ao(`/event/${t}/teams/simple`,e)}async function tC(t,e){return Ao(`/event/${t}/rankings`,e)}async function eS(t,e){return Ao(`/event/${t}/matches`,e)}async function tS(t,e,n){return Ao(`/team/${t}/event/${e}/matches`,n)}async function nC(t,e){return Ao(`/event/${t}/alliances`,e)}async function sC(t,e){const[n,r,i,c,d]=await Promise.all([eC(t,e).catch(()=>null),ZN(t,e).catch(()=>[]),eS(t,e).catch(()=>[]),tC(t,e).catch(()=>null),nC(t,e).catch(()=>[])]);return{event:n,teams:r,matches:i,rankings:c,alliances:d,lastUpdated:new Date().toISOString()}}function nS(t){const e=t.videos.find(n=>n.type==="youtube");return e?`https://www.youtube.com/watch?v=${e.key}`:null}function sS(t){return`frc${t}`}function Ut(t){return parseInt(t.replace("frc",""))}const mt=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,gn=t=>t[mt(0,t.length-1)],Rt=(t=.5)=>Math.random()<t;let el=null,tl=null,fa=null;const rS=["Alex","Jordan","Taylor","Morgan","Casey","Riley"];function aS(){el=null,tl=null,fa=null}function b1(t,e,n,r="qualification"){const i=gn(["red","blue"]),c=gn([1,2,3]),d=.5+Math.random()*1.5,m=Math.floor(mt(0,8)*d),p=mt(0,3),g=Math.floor(mt(10,40)*d),y=mt(5,20),b=Math.floor(g*(.6+Math.random()*.3)),N=g-b,k=gn(["none","none","level1","level1","level2","level2","level3"]);return{id:`${t}-${r}-${e}-${Date.now()}-${Math.random()}`,eventCode:n,matchType:r,matchNumber:e,teamNumber:t,alliance:i,driverStation:c,scoutName:gn(rS),timestamp:new Date(2026,2,20+Math.floor(e/10),9+e%8,mt(0,59)).toISOString(),preloadedFuel:mt(0,5),startingPosition:gn(["left","center","right"]),noShow:Rt(.02),autoMobility:Rt(.85),autoFuelScored:m,autoFuelMissed:p,autoFuelFromDepot:mt(0,5),autoFuelFromNeutral:mt(0,3),autoFuelFromHuman:mt(0,2),autoClimbAttempted:Rt(.15),autoClimbSuccess:Rt(.1),autoCrossedBump:Rt(.7),autoUsedTrench:Rt(.4),teleopTotalScored:g,teleopTotalMissed:y,teleopScoresDuringActive:b,teleopScoresDuringInactive:N,teleopFuelFromDepot:mt(5,15),teleopFuelFromNeutral:mt(8,20),teleopFuelFromHuman:mt(3,12),teleopFuelToHuman:mt(0,5),cycleCount:mt(3,12),playedDefense:Rt(.25),defenseEffectiveness:gn(["none","none","poor","fair","good","excellent"]),wasDefended:Rt(.3),defenseEvasion:gn(["none","poor","fair","good","excellent"]),climbAttempted:k!=="none",climbLevel:k,climbTime:k!=="none"?mt(5,25):0,climbAssisted:Rt(.15),climbAssistedOther:Rt(.15),parked:k==="none"&&Rt(.6),endgameFuelScored:mt(0,8),driverSkill:mt(2,5),intakeSpeed:mt(2,5),shootingAccuracy:mt(2,5),shootingSpeed:mt(2,5),humanPlayerRating:gn(["poor","average","good","excellent"]),robotDied:Rt(.05),robotTipped:Rt(.03),cardReceived:gn(["none","none","none","none","none","yellow","red"]),mechanicalIssues:Rt(.1),commentsAuto:Rt(.3)?"Good auto routine":"",commentsTeleop:Rt(.3)?"Strong teleop performance":"",commentsOverall:Rt(.2)?"Solid all-around robot":"",synced:!0,syncedAt:new Date().toISOString()}}function rC(t,e){return{id:`pit-${t}-${Date.now()}`,teamNumber:t,teamName:e,scoutName:gn(rS),timestamp:new Date(2026,2,19,mt(10,16),mt(0,59)).toISOString(),drivetrainType:gn(["tank","swerve","swerve","mecanum","other"]),drivetrainMotors:gn(["4x NEO","4x Falcon 500","6x CIM","4x Kraken X60"]),robotWeight:mt(100,125),robotHeight:mt(42,72),robotWidth:mt(24,32),robotLength:mt(28,36),maxFuelCapacity:mt(4,12),intakeType:gn(["Roller","Wheeled","Conveyor","Gripper"]),intakeGround:Rt(.9),intakeHumanPlayer:Rt(.8),intakeDepot:Rt(.85),shooterType:gn(["Flywheel","Catapult","Puncher","Hood"]),shooterAdjustable:Rt(.7),maxShootingRange:mt(10,30),canScoreInactive:Rt(.3),canUseTrench:Rt(.6),canCrossBump:Rt(.8),climbCapability:gn(["none","level1","level1","level2","level2","level3"]),climbTime:mt(8,20),canAssistClimb:Rt(.4),canBeAssisted:Rt(.5),preferredRole:gn(["scorer","scorer","scorer","defender","hybrid"]),autoCapabilities:gn(["Simple 2-ball auto","3-ball auto with mobility","5-ball auto","Defensive auto","Mobility only"]),preferredStartPosition:gn(["left","center","right","any"]),driverExperience:gn(["1 year","2 years","3+ years","Rookie"]),comments:Rt(.4)?"Well-built robot with good driving":"",synced:!0,syncedAt:new Date().toISOString()}}async function aC(t){if(fa&&fa!==t&&aS(),el&&fa===t)return el;try{return el=(await ZN(t)).map(n=>({number:n.team_number,name:n.nickname||`Team ${n.team_number}`})),fa=t,el}catch(e){return console.error("Failed to fetch teams from TBA, using fallback:",e),el=[{number:148,name:"Robowranglers"},{number:118,name:"Robonauts"},{number:1477,name:"Texas Torque"}],fa=t,el}}async function iC(t){if(fa&&fa!==t&&aS(),tl&&fa===t)return tl;try{return tl=await eS(t),tl}catch(e){return console.error("Failed to fetch matches from TBA:",e),tl=[],tl}}async function lC(t){const e=[],n=[],r=await aC(t),i=await iC(t);return r.forEach(c=>{n.push(rC(c.number,c.name))}),i.forEach(c=>{c.comp_level==="qm"&&[...c.alliances.red.team_keys,...c.alliances.blue.team_keys].forEach(m=>{const p=Ut(m);r.some(g=>g.number===p)&&e.push(b1(p,c.match_number,t,"qualification"))})}),e.length===0&&r.forEach(c=>{for(let d=1;d<=6;d++)e.push(b1(c.number,d,t,"qualification"))}),{matchEntries:e,pitEntries:n}}const pn=t=>t.length===0?0:t.reduce((e,n)=>e+n,0)/t.length,Zi=t=>t.length===0?0:Math.max(...t),oC=t=>{const e=t.filter(n=>n>0);return e.length===0?0:Math.min(...e)},cC=t=>t.length===0?0:Math.min(...t),In=(t,e)=>e===0?0:t/e*100,v1=t=>({none:0,poor:1,fair:2,good:3,excellent:4})[t]||0;function uC(t){const e=t.autoFuelScored*1,n=t.autoClimbSuccess?15:0,r=e+n,i=t.teleopScoresDuringActive*1,d={none:0,level1:10,level2:20,level3:30}[t.climbLevel]||0,m=t.endgameFuelScored*1,p=d+m;return{autoPoints:r,teleopPoints:i,endgamePoints:p,total:r+i+p}}function dC(t,e,n){const r=e.filter(X=>X.teamNumber===t&&!X.noShow),i=r.length;if(i===0)return{teamNumber:t,teamName:n?.teamName,matchesPlayed:0,avgAutoFuelScored:0,avgAutoFuelMissed:0,autoAccuracy:0,autoMobilityRate:0,autoClimbRate:0,autoClimbSuccessRate:0,avgTeleopFuelScored:0,avgTeleopFuelMissed:0,teleopAccuracy:0,avgCycleCount:0,avgActiveHubScores:0,avgInactiveHubScores:0,climbAttemptRate:0,level1ClimbRate:0,level2ClimbRate:0,level3ClimbRate:0,avgClimbTime:0,avgEndgameFuelScored:0,defensePlayedRate:0,avgDefenseEffectiveness:0,wasDefendedRate:0,avgDefenseEvasion:0,avgDriverSkill:0,avgIntakeSpeed:0,avgShootingAccuracy:0,avgShootingSpeed:0,noShowRate:0,diedRate:0,tippedRate:0,mechanicalIssuesRate:0,yellowCardRate:0,redCardRate:0,avgTotalPoints:0,avgAutoPoints:0,avgTeleopPoints:0,avgEndgamePoints:0,maxTotalPoints:0,maxAutoPoints:0,maxTeleopPoints:0,maxEndgamePoints:0,maxAutoFuelScored:0,maxTeleopFuelScored:0,maxCycleCount:0,minTotalPoints:0,minClimbTime:0,pitData:n};const c=r.map(X=>X.autoFuelScored),d=r.map(X=>X.autoFuelMissed),m=r.reduce((X,ye)=>X+ye.autoFuelScored+ye.autoFuelMissed,0),p=r.reduce((X,ye)=>X+ye.autoFuelScored,0),g=r.filter(X=>X.autoMobility).length,y=r.filter(X=>X.autoClimbAttempted).length,b=r.filter(X=>X.autoClimbSuccess).length,N=r.map(X=>X.teleopTotalScored),k=r.map(X=>X.teleopTotalMissed),L=r.reduce((X,ye)=>X+ye.teleopTotalScored+ye.teleopTotalMissed,0),M=r.reduce((X,ye)=>X+ye.teleopTotalScored,0),I=r.map(X=>X.cycleCount),B=r.map(X=>X.teleopScoresDuringActive),U=r.map(X=>X.teleopScoresDuringInactive),K=r.filter(X=>X.climbAttempted).length,Y=r.filter(X=>X.climbLevel==="level1").length,Q=r.filter(X=>X.climbLevel==="level2").length,$=r.filter(X=>X.climbLevel==="level3").length,C=r.filter(X=>X.climbTime>0).map(X=>X.climbTime),E=r.map(X=>X.endgameFuelScored),A=r.filter(X=>X.playedDefense).length,P=r.map(X=>v1(X.defenseEffectiveness)),w=r.filter(X=>X.wasDefended).length,j=r.map(X=>v1(X.defenseEvasion)),D=r.map(X=>X.driverSkill),F=r.map(X=>X.intakeSpeed),ue=r.map(X=>X.shootingAccuracy),z=r.map(X=>X.shootingSpeed),ee=e.filter(X=>X.teamNumber===t),pe=ee.filter(X=>X.noShow).length,H=r.filter(X=>X.robotDied).length,ge=r.filter(X=>X.robotTipped).length,V=r.filter(X=>X.mechanicalIssues).length,Z=r.filter(X=>X.cardReceived==="yellow").length,oe=r.filter(X=>X.cardReceived==="red").length,xe=r.map(X=>uC(X)),Ae=xe.map(X=>X.autoPoints),we=xe.map(X=>X.teleopPoints),De=xe.map(X=>X.endgamePoints),J=xe.map(X=>X.total);return{teamNumber:t,teamName:n?.teamName,matchesPlayed:i,avgAutoFuelScored:pn(c),avgAutoFuelMissed:pn(d),autoAccuracy:In(p,m),autoMobilityRate:In(g,i),autoClimbRate:In(b,i),autoClimbSuccessRate:In(b,y),avgTeleopFuelScored:pn(N),avgTeleopFuelMissed:pn(k),teleopAccuracy:In(M,L),avgCycleCount:pn(I),avgActiveHubScores:pn(B),avgInactiveHubScores:pn(U),climbAttemptRate:In(K,i),level1ClimbRate:In(Y,i),level2ClimbRate:In(Q,i),level3ClimbRate:In($,i),avgClimbTime:pn(C),avgEndgameFuelScored:pn(E),defensePlayedRate:In(A,i),avgDefenseEffectiveness:pn(P),wasDefendedRate:In(w,i),avgDefenseEvasion:pn(j),avgDriverSkill:pn(D),avgIntakeSpeed:pn(F),avgShootingAccuracy:pn(ue),avgShootingSpeed:pn(z),noShowRate:In(pe,ee.length),diedRate:In(H,i),tippedRate:In(ge,i),mechanicalIssuesRate:In(V,i),yellowCardRate:In(Z,i),redCardRate:In(oe,i),avgTotalPoints:pn(J),avgAutoPoints:pn(Ae),avgTeleopPoints:pn(we),avgEndgamePoints:pn(De),maxTotalPoints:Zi(J),maxAutoPoints:Zi(Ae),maxTeleopPoints:Zi(we),maxEndgamePoints:Zi(De),maxAutoFuelScored:Zi(c),maxTeleopFuelScored:Zi(N),maxCycleCount:Zi(I),minTotalPoints:cC(J),minClimbTime:oC(C),pitData:n}}function hC(t,e){return Array.from(new Set(t.map(r=>r.teamNumber))).map(r=>{const i=e.find(c=>c.teamNumber===r);return dC(r,t,i)})}const $e=Nu()(Su((t,e)=>({matchEntries:[],pitEntries:[],teamStatistics:[],selectedTeams:[],eventCode:"2025txcmp1",tbaData:null,tbaLoading:!1,tbaError:null,autoRefreshEnabled:!1,loadMockData:async()=>{const{eventCode:n}=e(),{matchEntries:r,pitEntries:i}=await lC(n);t({matchEntries:r,pitEntries:i}),e().calculateStats()},calculateStats:()=>{const{matchEntries:n,pitEntries:r}=e(),i=hC(n,r);t({teamStatistics:i})},toggleTeamSelection:n=>{const{selectedTeams:r}=e();r.includes(n)?t({selectedTeams:r.filter(i=>i!==n)}):t({selectedTeams:[...r,n]})},clearTeamSelection:()=>{t({selectedTeams:[]})},setEventCode:n=>{t({eventCode:n})},fetchTBAData:async n=>{const r=n||e().eventCode;t({tbaLoading:!0,tbaError:null});try{const i=await sC(r);return t({tbaData:i,tbaLoading:!1}),i}catch(i){const c=i instanceof Error?i.message:"Failed to fetch TBA data";return t({tbaError:c,tbaLoading:!1}),null}},setAutoRefresh:n=>{t({autoRefreshEnabled:n})},clearTBAData:()=>{t({tbaData:null,tbaError:null})}}),{name:"frc-analytics-storage",partialize:t=>({eventCode:t.eventCode,selectedTeams:t.selectedTeams,tbaData:t.tbaData,autoRefreshEnabled:t.autoRefreshEnabled})})),fC=()=>{};var _1={};const iS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const c=t[n++];e[r++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=t[n++],d=t[n++],m=t[n++],p=((i&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const c=t[n++],d=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(c&63)<<6|d&63)}}return e.join("")},lS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const c=t[i],d=i+1<t.length,m=d?t[i+1]:0,p=i+2<t.length,g=p?t[i+2]:0,y=c>>2,b=(c&3)<<4|m>>4;let N=(m&15)<<2|g>>6,k=g&63;p||(k=64,d||(N=64)),r.push(n[y],n[b],n[N],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const c=n[t.charAt(i++)],m=i<t.length?n[t.charAt(i)]:0;++i;const g=i<t.length?n[t.charAt(i)]:64;++i;const b=i<t.length?n[t.charAt(i)]:64;if(++i,c==null||m==null||g==null||b==null)throw new pC;const N=c<<2|m>>4;if(r.push(N),g!==64){const k=m<<4&240|g>>2;if(r.push(k),b!==64){const L=g<<6&192|b;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gC=function(t){const e=iS(t);return lS.encodeByteArray(e,!0)},zh=function(t){return gC(t).replace(/\./g,"")},oS=function(t){try{return lS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const yC=()=>xC().__FIREBASE_DEFAULTS__,bC=()=>{if(typeof process>"u"||typeof _1>"u")return;const t=_1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oS(t[1]);return e&&JSON.parse(e)},Ef=()=>{try{return fC()||yC()||bC()||vC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cS=t=>Ef()?.emulatorHosts?.[t],uS=t=>{const e=cS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dS=()=>Ef()?.config,hS=t=>Ef()?.[`_${t}`];class _C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function wi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nx(t){return(await fetch(t,{credentials:"include"})).ok}function fS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zh(JSON.stringify(n)),zh(JSON.stringify(d)),""].join(".")}const $c={};function NC(){const t={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?t.emulator.push(e):t.prod.push(e);return t}function SC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let N1=!1;function Sx(t,e){if(typeof window>"u"||typeof document>"u"||!wi(window.location.host)||$c[t]===e||$c[t]||N1)return;$c[t]=e;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",c=NC().prod.length>0;function d(){const N=document.getElementById(r);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function p(N,k){N.setAttribute("width","24"),N.setAttribute("id",k),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function g(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{N1=!0,d()},N}function y(N,k){N.setAttribute("id",k),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function b(){const N=SC(r),k=n("text"),L=document.getElementById(k)||document.createElement("span"),M=n("learnmore"),I=document.getElementById(M)||document.createElement("a"),B=n("preprendIcon"),U=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const K=N.element;m(K),y(I,M);const Y=g();p(U,B),K.append(U,L,I,Y),document.body.appendChild(K)}c?(L.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function TC(){const t=Ef()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CC(){const t=Gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RC(){return!TC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kC(){try{return typeof indexedDB=="object"}catch{return!1}}function IC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const DC="FirebaseError";class qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DC,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eu.prototype.create)}}class Eu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,c=this.errors[e],d=c?MC(c,r):"Error",m=`${this.serviceName}: ${d} (${i}).`;return new qr(i,m,r)}}function MC(t,e){return t.replace(PC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PC=/\{\$([^}]+)}/g;function OC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ol(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const c=t[i],d=e[i];if(S1(c)&&S1(d)){if(!ol(c,d))return!1}else if(c!==d)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S1(t){return t!==null&&typeof t=="object"}function Tu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function LC(t,e){const n=new VC(t,e);return n.subscribe.bind(n)}class VC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=rg),i.error===void 0&&(i.error=rg),i.complete===void 0&&(i.complete=rg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rg(){}function Ft(t){return t&&t._delegate?t._delegate:t}class pi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const nl="[DEFAULT]";class zC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _C;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BC(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:i});r.resolve(c)}catch{}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const c=this.instances.get(r);return c&&e(c,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FC(t){return t===nl?void 0:t}function BC(t){return t.instantiationMode==="EAGER"}class qC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const HC={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},$C=Xe.INFO,GC={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},KC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=GC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ex{constructor(e){this.name=e,this._logLevel=$C,this._logHandler=KC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const YC=(t,e)=>e.some(n=>t instanceof n);let E1,T1;function QC(){return E1||(E1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XC(){return T1||(T1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mS=new WeakMap,Cg=new WeakMap,pS=new WeakMap,ag=new WeakMap,Tx=new WeakMap;function WC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",c),t.removeEventListener("error",d)},c=()=>{n(ui(t.result)),i()},d=()=>{r(t.error),i()};t.addEventListener("success",c),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&mS.set(n,t)}).catch(()=>{}),Tx.set(e,t),e}function JC(t){if(Cg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",d),t.removeEventListener("abort",d)},c=()=>{n(),i()},d=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",c),t.addEventListener("error",d),t.addEventListener("abort",d)});Cg.set(t,e)}let Rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZC(t){Rg=t(Rg)}function eR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ig(this),e,...n);return pS.set(r,e.sort?e.sort():[e]),ui(r)}:XC().includes(t)?function(...e){return t.apply(ig(this),e),ui(mS.get(this))}:function(...e){return ui(t.apply(ig(this),e))}}function tR(t){return typeof t=="function"?eR(t):(t instanceof IDBTransaction&&JC(t),YC(t,QC())?new Proxy(t,Rg):t)}function ui(t){if(t instanceof IDBRequest)return WC(t);if(ag.has(t))return ag.get(t);const e=tR(t);return e!==t&&(ag.set(t,e),Tx.set(e,t)),e}const ig=t=>Tx.get(t);function nR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:c}={}){const d=indexedDB.open(t,e),m=ui(d);return r&&d.addEventListener("upgradeneeded",p=>{r(ui(d.result),p.oldVersion,p.newVersion,ui(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),i&&p.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const sR=["get","getKey","getAll","getAllKeys","count"],rR=["put","add","delete","clear"],lg=new Map;function w1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sR.includes(n)))return;const c=async function(d,...m){const p=this.transaction(d,i?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),i&&p.done]))[0]};return lg.set(e,c),c}ZC(t=>({...t,get:(e,n,r)=>w1(e,n)||t.get(e,n,r),has:(e,n)=>!!w1(e,n)||t.has(e,n)}));class aR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iR(t){return t.getComponent()?.type==="VERSION"}const kg="@firebase/app",A1="0.14.7";const _a=new Ex("@firebase/app"),lR="@firebase/app-compat",oR="@firebase/analytics-compat",cR="@firebase/analytics",uR="@firebase/app-check-compat",dR="@firebase/app-check",hR="@firebase/auth",fR="@firebase/auth-compat",mR="@firebase/database",pR="@firebase/data-connect",gR="@firebase/database-compat",xR="@firebase/functions",yR="@firebase/functions-compat",bR="@firebase/installations",vR="@firebase/installations-compat",_R="@firebase/messaging",NR="@firebase/messaging-compat",SR="@firebase/performance",ER="@firebase/performance-compat",TR="@firebase/remote-config",wR="@firebase/remote-config-compat",AR="@firebase/storage",jR="@firebase/storage-compat",CR="@firebase/firestore",RR="@firebase/ai",kR="@firebase/firestore-compat",IR="firebase",DR="12.8.0";const Ig="[DEFAULT]",MR={[kg]:"fire-core",[lR]:"fire-core-compat",[cR]:"fire-analytics",[oR]:"fire-analytics-compat",[dR]:"fire-app-check",[uR]:"fire-app-check-compat",[hR]:"fire-auth",[fR]:"fire-auth-compat",[mR]:"fire-rtdb",[pR]:"fire-data-connect",[gR]:"fire-rtdb-compat",[xR]:"fire-fn",[yR]:"fire-fn-compat",[bR]:"fire-iid",[vR]:"fire-iid-compat",[_R]:"fire-fcm",[NR]:"fire-fcm-compat",[SR]:"fire-perf",[ER]:"fire-perf-compat",[TR]:"fire-rc",[wR]:"fire-rc-compat",[AR]:"fire-gcs",[jR]:"fire-gcs-compat",[CR]:"fire-fst",[kR]:"fire-fst-compat",[RR]:"fire-vertex","fire-js":"fire-js",[IR]:"fire-js-all"};const Fh=new Map,PR=new Map,Dg=new Map;function j1(t,e){try{t.container.addComponent(e)}catch(n){_a.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(Dg.has(e))return _a.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,t);for(const n of Fh.values())j1(n,t);for(const n of PR.values())j1(n,t);return!0}function Tf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ws(t){return t==null?!1:t.settings!==void 0}const OR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new Eu("app","Firebase",OR);class LR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}const gl=DR;function gS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ig,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(n||(n=dS()),!n)throw di.create("no-options");const c=Fh.get(i);if(c){if(ol(n,c.options)&&ol(r,c.config))return c;throw di.create("duplicate-app",{appName:i})}const d=new qC(i);for(const p of Dg.values())d.addComponent(p);const m=new LR(n,r,d);return Fh.set(i,m),m}function wx(t=Ig){const e=Fh.get(t);if(!e&&t===Ig&&dS())return gS();if(!e)throw di.create("no-app",{appName:t});return e}function Or(t,e,n){let r=MR[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const d=[`Unable to register library "${r}" with version "${e}":`];i&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_a.warn(d.join(" "));return}cl(new pi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const VR="firebase-heartbeat-database",UR=1,ru="firebase-heartbeat-store";let og=null;function xS(){return og||(og=nR(VR,UR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(t=>{throw di.create("idb-open",{originalErrorMessage:t.message})})),og}async function zR(t){try{const n=(await xS()).transaction(ru),r=await n.objectStore(ru).get(yS(t));return await n.done,r}catch(e){if(e instanceof qr)_a.warn(e.message);else{const n=di.create("idb-get",{originalErrorMessage:e?.message});_a.warn(n.message)}}}async function C1(t,e){try{const r=(await xS()).transaction(ru,"readwrite");await r.objectStore(ru).put(e,yS(t)),await r.done}catch(n){if(n instanceof qr)_a.warn(n.message);else{const r=di.create("idb-set",{originalErrorMessage:n?.message});_a.warn(r.message)}}}function yS(t){return`${t.name}!${t.options.appId}`}const FR=1024,BR=30;class qR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $R(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=R1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>BR){const i=GR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_a.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=R1(),{heartbeatsToSend:n,unsentEntries:r}=HR(this._heartbeatsCache.heartbeats),i=zh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return _a.warn(e),""}}}function R1(){return new Date().toISOString().substring(0,10)}function HR(t,e=FR){const n=[];let r=t.slice();for(const i of t){const c=n.find(d=>d.agent===i.agent);if(c){if(c.dates.push(i.date),k1(n)>e){c.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),k1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kC()?IC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return C1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return C1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k1(t){return zh(JSON.stringify({version:2,heartbeats:t})).length}function GR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function KR(t){cl(new pi("platform-logger",e=>new aR(e),"PRIVATE")),cl(new pi("heartbeat",e=>new qR(e),"PRIVATE")),Or(kg,A1,t),Or(kg,A1,"esm2020"),Or("fire-js","")}KR("");var I1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hi,bS;(function(){var t;function e(C,E){function A(){}A.prototype=E.prototype,C.F=E.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(P,w,j){for(var D=Array(arguments.length-2),F=2;F<arguments.length;F++)D[F-2]=arguments[F];return E.prototype[w].apply(P,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,E,A){A||(A=0);const P=Array(16);if(typeof E=="string")for(var w=0;w<16;++w)P[w]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(w=0;w<16;++w)P[w]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=C.g[0],A=C.g[1],w=C.g[2];let j=C.g[3],D;D=E+(j^A&(w^j))+P[0]+3614090360&4294967295,E=A+(D<<7&4294967295|D>>>25),D=j+(w^E&(A^w))+P[1]+3905402710&4294967295,j=E+(D<<12&4294967295|D>>>20),D=w+(A^j&(E^A))+P[2]+606105819&4294967295,w=j+(D<<17&4294967295|D>>>15),D=A+(E^w&(j^E))+P[3]+3250441966&4294967295,A=w+(D<<22&4294967295|D>>>10),D=E+(j^A&(w^j))+P[4]+4118548399&4294967295,E=A+(D<<7&4294967295|D>>>25),D=j+(w^E&(A^w))+P[5]+1200080426&4294967295,j=E+(D<<12&4294967295|D>>>20),D=w+(A^j&(E^A))+P[6]+2821735955&4294967295,w=j+(D<<17&4294967295|D>>>15),D=A+(E^w&(j^E))+P[7]+4249261313&4294967295,A=w+(D<<22&4294967295|D>>>10),D=E+(j^A&(w^j))+P[8]+1770035416&4294967295,E=A+(D<<7&4294967295|D>>>25),D=j+(w^E&(A^w))+P[9]+2336552879&4294967295,j=E+(D<<12&4294967295|D>>>20),D=w+(A^j&(E^A))+P[10]+4294925233&4294967295,w=j+(D<<17&4294967295|D>>>15),D=A+(E^w&(j^E))+P[11]+2304563134&4294967295,A=w+(D<<22&4294967295|D>>>10),D=E+(j^A&(w^j))+P[12]+1804603682&4294967295,E=A+(D<<7&4294967295|D>>>25),D=j+(w^E&(A^w))+P[13]+4254626195&4294967295,j=E+(D<<12&4294967295|D>>>20),D=w+(A^j&(E^A))+P[14]+2792965006&4294967295,w=j+(D<<17&4294967295|D>>>15),D=A+(E^w&(j^E))+P[15]+1236535329&4294967295,A=w+(D<<22&4294967295|D>>>10),D=E+(w^j&(A^w))+P[1]+4129170786&4294967295,E=A+(D<<5&4294967295|D>>>27),D=j+(A^w&(E^A))+P[6]+3225465664&4294967295,j=E+(D<<9&4294967295|D>>>23),D=w+(E^A&(j^E))+P[11]+643717713&4294967295,w=j+(D<<14&4294967295|D>>>18),D=A+(j^E&(w^j))+P[0]+3921069994&4294967295,A=w+(D<<20&4294967295|D>>>12),D=E+(w^j&(A^w))+P[5]+3593408605&4294967295,E=A+(D<<5&4294967295|D>>>27),D=j+(A^w&(E^A))+P[10]+38016083&4294967295,j=E+(D<<9&4294967295|D>>>23),D=w+(E^A&(j^E))+P[15]+3634488961&4294967295,w=j+(D<<14&4294967295|D>>>18),D=A+(j^E&(w^j))+P[4]+3889429448&4294967295,A=w+(D<<20&4294967295|D>>>12),D=E+(w^j&(A^w))+P[9]+568446438&4294967295,E=A+(D<<5&4294967295|D>>>27),D=j+(A^w&(E^A))+P[14]+3275163606&4294967295,j=E+(D<<9&4294967295|D>>>23),D=w+(E^A&(j^E))+P[3]+4107603335&4294967295,w=j+(D<<14&4294967295|D>>>18),D=A+(j^E&(w^j))+P[8]+1163531501&4294967295,A=w+(D<<20&4294967295|D>>>12),D=E+(w^j&(A^w))+P[13]+2850285829&4294967295,E=A+(D<<5&4294967295|D>>>27),D=j+(A^w&(E^A))+P[2]+4243563512&4294967295,j=E+(D<<9&4294967295|D>>>23),D=w+(E^A&(j^E))+P[7]+1735328473&4294967295,w=j+(D<<14&4294967295|D>>>18),D=A+(j^E&(w^j))+P[12]+2368359562&4294967295,A=w+(D<<20&4294967295|D>>>12),D=E+(A^w^j)+P[5]+4294588738&4294967295,E=A+(D<<4&4294967295|D>>>28),D=j+(E^A^w)+P[8]+2272392833&4294967295,j=E+(D<<11&4294967295|D>>>21),D=w+(j^E^A)+P[11]+1839030562&4294967295,w=j+(D<<16&4294967295|D>>>16),D=A+(w^j^E)+P[14]+4259657740&4294967295,A=w+(D<<23&4294967295|D>>>9),D=E+(A^w^j)+P[1]+2763975236&4294967295,E=A+(D<<4&4294967295|D>>>28),D=j+(E^A^w)+P[4]+1272893353&4294967295,j=E+(D<<11&4294967295|D>>>21),D=w+(j^E^A)+P[7]+4139469664&4294967295,w=j+(D<<16&4294967295|D>>>16),D=A+(w^j^E)+P[10]+3200236656&4294967295,A=w+(D<<23&4294967295|D>>>9),D=E+(A^w^j)+P[13]+681279174&4294967295,E=A+(D<<4&4294967295|D>>>28),D=j+(E^A^w)+P[0]+3936430074&4294967295,j=E+(D<<11&4294967295|D>>>21),D=w+(j^E^A)+P[3]+3572445317&4294967295,w=j+(D<<16&4294967295|D>>>16),D=A+(w^j^E)+P[6]+76029189&4294967295,A=w+(D<<23&4294967295|D>>>9),D=E+(A^w^j)+P[9]+3654602809&4294967295,E=A+(D<<4&4294967295|D>>>28),D=j+(E^A^w)+P[12]+3873151461&4294967295,j=E+(D<<11&4294967295|D>>>21),D=w+(j^E^A)+P[15]+530742520&4294967295,w=j+(D<<16&4294967295|D>>>16),D=A+(w^j^E)+P[2]+3299628645&4294967295,A=w+(D<<23&4294967295|D>>>9),D=E+(w^(A|~j))+P[0]+4096336452&4294967295,E=A+(D<<6&4294967295|D>>>26),D=j+(A^(E|~w))+P[7]+1126891415&4294967295,j=E+(D<<10&4294967295|D>>>22),D=w+(E^(j|~A))+P[14]+2878612391&4294967295,w=j+(D<<15&4294967295|D>>>17),D=A+(j^(w|~E))+P[5]+4237533241&4294967295,A=w+(D<<21&4294967295|D>>>11),D=E+(w^(A|~j))+P[12]+1700485571&4294967295,E=A+(D<<6&4294967295|D>>>26),D=j+(A^(E|~w))+P[3]+2399980690&4294967295,j=E+(D<<10&4294967295|D>>>22),D=w+(E^(j|~A))+P[10]+4293915773&4294967295,w=j+(D<<15&4294967295|D>>>17),D=A+(j^(w|~E))+P[1]+2240044497&4294967295,A=w+(D<<21&4294967295|D>>>11),D=E+(w^(A|~j))+P[8]+1873313359&4294967295,E=A+(D<<6&4294967295|D>>>26),D=j+(A^(E|~w))+P[15]+4264355552&4294967295,j=E+(D<<10&4294967295|D>>>22),D=w+(E^(j|~A))+P[6]+2734768916&4294967295,w=j+(D<<15&4294967295|D>>>17),D=A+(j^(w|~E))+P[13]+1309151649&4294967295,A=w+(D<<21&4294967295|D>>>11),D=E+(w^(A|~j))+P[4]+4149444226&4294967295,E=A+(D<<6&4294967295|D>>>26),D=j+(A^(E|~w))+P[11]+3174756917&4294967295,j=E+(D<<10&4294967295|D>>>22),D=w+(E^(j|~A))+P[2]+718787259&4294967295,w=j+(D<<15&4294967295|D>>>17),D=A+(j^(w|~E))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(w+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+w&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.v=function(C,E){E===void 0&&(E=C.length);const A=E-this.blockSize,P=this.C;let w=this.h,j=0;for(;j<E;){if(w==0)for(;j<=A;)i(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<E;)if(P[w++]=C.charCodeAt(j++),w==this.blockSize){i(this,P),w=0;break}}else for(;j<E;)if(P[w++]=C[j++],w==this.blockSize){i(this,P),w=0;break}}this.h=w,this.o+=E},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;E=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=E&255,E/=256;for(this.v(C),C=Array(16),E=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)C[E++]=this.g[A]>>>P&255;return C};function c(C,E){var A=m;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=E(C)}function d(C,E){this.h=E;const A=[];let P=!0;for(let w=C.length-1;w>=0;w--){const j=C[w]|0;P&&j==E||(A[w]=j,P=!1)}this.g=A}var m={};function p(C){return-128<=C&&C<128?c(C,function(E){return new d([E|0],E<0?-1:0)}):new d([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return b;if(C<0)return I(g(-C));const E=[];let A=1;for(let P=0;C>=A;P++)E[P]=C/A|0,A*=4294967296;return new d(E,0)}function y(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return I(y(C.substring(1),E));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(E,8));let P=b;for(let j=0;j<C.length;j+=8){var w=Math.min(8,C.length-j);const D=parseInt(C.substring(j,j+w),E);w<8?(w=g(Math.pow(E,w)),P=P.j(w).add(g(D))):(P=P.j(A),P=P.add(g(D)))}return P}var b=p(0),N=p(1),k=p(16777216);t=d.prototype,t.m=function(){if(M(this))return-I(this).m();let C=0,E=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);C+=(P>=0?P:4294967296+P)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(L(this))return"0";if(M(this))return"-"+I(this).toString(C);const E=g(Math.pow(C,6));var A=this;let P="";for(;;){const w=Y(A,E).g;A=B(A,w.j(E));let j=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=w,L(A))return j+P;for(;j.length<6;)j="0"+j;P=j+P}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function L(C){if(C.h!=0)return!1;for(let E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function M(C){return C.h==-1}t.l=function(C){return C=B(this,C),M(C)?-1:L(C)?0:1};function I(C){const E=C.g.length,A=[];for(let P=0;P<E;P++)A[P]=~C.g[P];return new d(A,~C.h).add(N)}t.abs=function(){return M(this)?I(this):this},t.add=function(C){const E=Math.max(this.g.length,C.g.length),A=[];let P=0;for(let w=0;w<=E;w++){let j=P+(this.i(w)&65535)+(C.i(w)&65535),D=(j>>>16)+(this.i(w)>>>16)+(C.i(w)>>>16);P=D>>>16,j&=65535,D&=65535,A[w]=D<<16|j}return new d(A,A[A.length-1]&-2147483648?-1:0)};function B(C,E){return C.add(I(E))}t.j=function(C){if(L(this)||L(C))return b;if(M(this))return M(C)?I(this).j(I(C)):I(I(this).j(C));if(M(C))return I(this.j(I(C)));if(this.l(k)<0&&C.l(k)<0)return g(this.m()*C.m());const E=this.g.length+C.g.length,A=[];for(var P=0;P<2*E;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let w=0;w<C.g.length;w++){const j=this.i(P)>>>16,D=this.i(P)&65535,F=C.i(w)>>>16,ue=C.i(w)&65535;A[2*P+2*w]+=D*ue,U(A,2*P+2*w),A[2*P+2*w+1]+=j*ue,U(A,2*P+2*w+1),A[2*P+2*w+1]+=D*F,U(A,2*P+2*w+1),A[2*P+2*w+2]+=j*F,U(A,2*P+2*w+2)}for(C=0;C<E;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=E;C<2*E;C++)A[C]=0;return new d(A,0)};function U(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function K(C,E){this.g=C,this.h=E}function Y(C,E){if(L(E))throw Error("division by zero");if(L(C))return new K(b,b);if(M(C))return E=Y(I(C),E),new K(I(E.g),I(E.h));if(M(E))return E=Y(C,I(E)),new K(I(E.g),E.h);if(C.g.length>30){if(M(C)||M(E))throw Error("slowDivide_ only works with positive integers.");for(var A=N,P=E;P.l(C)<=0;)A=Q(A),P=Q(P);var w=$(A,1),j=$(P,1);for(P=$(P,2),A=$(A,2);!L(P);){var D=j.add(P);D.l(C)<=0&&(w=w.add(A),j=D),P=$(P,1),A=$(A,1)}return E=B(C,w.j(E)),new K(w,E)}for(w=b;C.l(E)>=0;){for(A=Math.max(1,Math.floor(C.m()/E.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),j=g(A),D=j.j(E);M(D)||D.l(C)>0;)A-=P,j=g(A),D=j.j(E);L(j)&&(j=N),w=w.add(j),C=B(C,D)}return new K(w,C)}t.B=function(C){return Y(this,C).h},t.and=function(C){const E=Math.max(this.g.length,C.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)&C.i(P);return new d(A,this.h&C.h)},t.or=function(C){const E=Math.max(this.g.length,C.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)|C.i(P);return new d(A,this.h|C.h)},t.xor=function(C){const E=Math.max(this.g.length,C.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)^C.i(P);return new d(A,this.h^C.h)};function Q(C){const E=C.g.length+1,A=[];for(let P=0;P<E;P++)A[P]=C.i(P)<<1|C.i(P-1)>>>31;return new d(A,C.h)}function $(C,E){const A=E>>5;E%=32;const P=C.g.length-A,w=[];for(let j=0;j<P;j++)w[j]=E>0?C.i(j+A)>>>E|C.i(j+A+1)<<32-E:C.i(j+A);return new d(w,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bS=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=y,hi=d}).apply(typeof I1<"u"?I1:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vS,Fc,_S,Sh,Mg,NS,SS,ES;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var v=0;v<h.length;++v){var S=h[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function i(h,v){if(v)e:{var S=r;h=h.split(".");for(var O=0;O<h.length-1;O++){var ne=h[O];if(!(ne in S))break e;S=S[ne]}h=h[h.length-1],O=S[h],v=v(O),v!=O&&v!=null&&e(S,h,{configurable:!0,writable:!0,value:v})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(v){var S=[],O;for(O in v)Object.prototype.hasOwnProperty.call(v,O)&&S.push([O,v[O]]);return S}});var c=c||{},d=this||self;function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function p(h,v,S){return h.call.apply(h.bind,arguments)}function g(h,v,S){return g=p,g.apply(null,arguments)}function y(h,v){var S=Array.prototype.slice.call(arguments,1);return function(){var O=S.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function b(h,v){function S(){}S.prototype=v.prototype,h.Z=v.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(O,ne,ie){for(var ve=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ve[Fe-2]=arguments[Fe];return v.prototype[ne].apply(O,ve)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const v=h.length;if(v>0){const S=Array(v);for(let O=0;O<v;O++)S[O]=h[O];return S}return[]}function L(h,v){for(let O=1;O<arguments.length;O++){const ne=arguments[O];var S=typeof ne;if(S=S!="object"?S:ne?Array.isArray(ne)?"array":S:"null",S=="array"||S=="object"&&typeof ne.length=="number"){S=h.length||0;const ie=ne.length||0;h.length=S+ie;for(let ve=0;ve<ie;ve++)h[S+ve]=ne[ve]}else h.push(ne)}}class M{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function I(h){d.setTimeout(()=>{throw h},0)}function B(){var h=C;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class U{constructor(){this.h=this.g=null}add(v,S){const O=K.get();O.set(v,S),this.h?this.h.next=O:this.g=O,this.h=O}}var K=new M(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,$=!1,C=new U,E=()=>{const h=Promise.resolve(void 0);Q=()=>{h.then(A)}};function A(){for(var h;h=B();){try{h.h.call(h.g)}catch(S){I(S)}var v=K;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}$=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};d.addEventListener("test",S,v),d.removeEventListener("test",S,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function F(h,v){w.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}b(F,w),F.prototype.init=function(h,v){const S=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(S=="mouseover"?v=h.fromElement:S=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),z=0;function ee(h,v,S,O,ne){this.listener=h,this.proxy=null,this.src=v,this.type=S,this.capture=!!O,this.ha=ne,this.key=++z,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function H(h,v,S){for(const O in h)v.call(S,h[O],O,h)}function ge(h,v){for(const S in h)v.call(void 0,h[S],S,h)}function V(h){const v={};for(const S in h)v[S]=h[S];return v}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,v){let S,O;for(let ne=1;ne<arguments.length;ne++){O=arguments[ne];for(S in O)h[S]=O[S];for(let ie=0;ie<Z.length;ie++)S=Z[ie],Object.prototype.hasOwnProperty.call(O,S)&&(h[S]=O[S])}}function xe(h){this.src=h,this.g={},this.h=0}xe.prototype.add=function(h,v,S,O,ne){const ie=h.toString();h=this.g[ie],h||(h=this.g[ie]=[],this.h++);const ve=we(h,v,O,ne);return ve>-1?(v=h[ve],S||(v.fa=!1)):(v=new ee(v,this.src,ie,!!O,ne),v.fa=S,h.push(v)),v};function Ae(h,v){const S=v.type;if(S in h.g){var O=h.g[S],ne=Array.prototype.indexOf.call(O,v,void 0),ie;(ie=ne>=0)&&Array.prototype.splice.call(O,ne,1),ie&&(pe(v),h.g[S].length==0&&(delete h.g[S],h.h--))}}function we(h,v,S,O){for(let ne=0;ne<h.length;++ne){const ie=h[ne];if(!ie.da&&ie.listener==v&&ie.capture==!!S&&ie.ha==O)return ne}return-1}var De="closure_lm_"+(Math.random()*1e6|0),J={};function X(h,v,S,O,ne){if(Array.isArray(v)){for(let ie=0;ie<v.length;ie++)X(h,v[ie],S,O,ne);return null}return S=ms(S),h&&h[ue]?h.J(v,S,m(O)?!!O.capture:!1,ne):ye(h,v,S,!1,O,ne)}function ye(h,v,S,O,ne,ie){if(!v)throw Error("Invalid event type");const ve=m(ne)?!!ne.capture:!!ne;let Fe=Ze(h);if(Fe||(h[De]=Fe=new xe(h)),S=Fe.add(v,S,O,ve,ie),S.proxy)return S;if(O=qe(),S.proxy=O,O.src=h,O.listener=S,h.addEventListener)j||(ne=ve),ne===void 0&&(ne=!1),h.addEventListener(v.toString(),O,ne);else if(h.attachEvent)h.attachEvent(ht(v.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return S}function qe(){function h(S){return v.call(h.src,h.listener,S)}const v=_t;return h}function Se(h,v,S,O,ne){if(Array.isArray(v))for(var ie=0;ie<v.length;ie++)Se(h,v[ie],S,O,ne);else O=m(O)?!!O.capture:!!O,S=ms(S),h&&h[ue]?(h=h.i,ie=String(v).toString(),ie in h.g&&(v=h.g[ie],S=we(v,S,O,ne),S>-1&&(pe(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete h.g[ie],h.h--)))):h&&(h=Ze(h))&&(v=h.g[v.toString()],h=-1,v&&(h=we(v,S,O,ne)),(S=h>-1?v[h]:null)&&jt(S))}function jt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[ue])Ae(v.i,h);else{var S=h.type,O=h.proxy;v.removeEventListener?v.removeEventListener(S,O,h.capture):v.detachEvent?v.detachEvent(ht(S),O):v.addListener&&v.removeListener&&v.removeListener(O),(S=Ze(v))?(Ae(S,h),S.h==0&&(S.src=null,v[De]=null)):pe(h)}}}function ht(h){return h in J?J[h]:J[h]="on"+h}function _t(h,v){if(h.da)h=!0;else{v=new F(v,this);const S=h.listener,O=h.ha||h.src;h.fa&&jt(h),h=S.call(O,v)}return h}function Ze(h){return h=h[De],h instanceof xe?h:null}var Kn="__closure_events_fn_"+(Math.random()*1e9>>>0);function ms(h){return typeof h=="function"?h:(h[Kn]||(h[Kn]=function(v){return h.handleEvent(v)}),h[Kn])}function kt(){P.call(this),this.i=new xe(this),this.M=this,this.G=null}b(kt,P),kt.prototype[ue]=!0,kt.prototype.removeEventListener=function(h,v,S,O){Se(this,h,v,S,O)};function at(h,v){var S,O=h.G;if(O)for(S=[];O;O=O.G)S.push(O);if(h=h.M,O=v.type||v,typeof v=="string")v=new w(v,h);else if(v instanceof w)v.target=v.target||h;else{var ne=v;v=new w(O,h),oe(v,ne)}ne=!0;let ie,ve;if(S)for(ve=S.length-1;ve>=0;ve--)ie=v.g=S[ve],ne=Yn(ie,O,!0,v)&&ne;if(ie=v.g=h,ne=Yn(ie,O,!0,v)&&ne,ne=Yn(ie,O,!1,v)&&ne,S)for(ve=0;ve<S.length;ve++)ie=v.g=S[ve],ne=Yn(ie,O,!1,v)&&ne}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const S=h.g[v];for(let O=0;O<S.length;O++)pe(S[O]);delete h.g[v],h.h--}}this.G=null},kt.prototype.J=function(h,v,S,O){return this.i.add(String(h),v,!1,S,O)},kt.prototype.K=function(h,v,S,O){return this.i.add(String(h),v,!0,S,O)};function Yn(h,v,S,O){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let ne=!0;for(let ie=0;ie<v.length;++ie){const ve=v[ie];if(ve&&!ve.da&&ve.capture==S){const Fe=ve.listener,Qt=ve.ha||ve.src;ve.fa&&Ae(h.i,ve),ne=Fe.call(Qt,O)!==!1&&ne}}return ne&&!O.defaultPrevented}function ks(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Hr(h){h.g=ks(()=>{h.g=null,h.i&&(h.i=!1,Hr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Zt extends P{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(h){P.call(this),this.h=h,this.g={}}b(Qs,P);var Is=[];function ss(h){H(h.g,function(v,S){this.g.hasOwnProperty(S)&&jt(v)},h),h.g={}}Qs.prototype.N=function(){Qs.Z.N.call(this),ss(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=d.JSON.stringify,Xs=d.JSON.parse,$r=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ln(){}function pr(){}var Vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ot(){w.call(this,"d")}b(Ot,w);function te(){w.call(this,"c")}b(te,w);var be={},Ce=null;function Re(){return Ce=Ce||new kt}be.Ia="serverreachability";function Nt(h){w.call(this,be.Ia,h)}b(Nt,w);function it(h){const v=Re();at(v,new Nt(v))}be.STAT_EVENT="statevent";function Ds(h,v){w.call(this,be.STAT_EVENT,h),this.stat=v}b(Ds,w);function Le(h){const v=Re();at(v,new Ds(v,h))}be.Ja="timingevent";function ft(h,v){w.call(this,be.Ja,h),this.size=v}b(ft,w);function nt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function lt(){this.g=!0}lt.prototype.ua=function(){this.g=!1};function bn(h,v,S,O,ne,ie){h.info(function(){if(h.g)if(ie){var ve="",Fe=ie.split("&");for(let ot=0;ot<Fe.length;ot++){var Qt=Fe[ot].split("=");if(Qt.length>1){const Lt=Qt[0];Qt=Qt[1];const Ls=Lt.split("_");ve=Ls.length>=2&&Ls[1]=="type"?ve+(Lt+"="+Qt+"&"):ve+(Lt+"=redacted&")}}}else ve=null;else ve=ie;return"XMLHTTP REQ ("+O+") [attempt "+ne+"]: "+v+`
`+S+`
`+ve})}function en(h,v,S,O,ne,ie,ve){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+ne+"]: "+v+`
`+S+`
`+ie+" "+ve})}function gt(h,v,S,O){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Yt(h,S)+(O?" "+O:"")})}function Un(h,v){h.info(function(){return"TIMEOUT: "+v})}lt.prototype.info=function(){};function Yt(h,v){if(!h.g)return v;if(!v)return null;try{const ie=JSON.parse(v);if(ie){for(h=0;h<ie.length;h++)if(Array.isArray(ie[h])){var S=ie[h];if(!(S.length<2)){var O=S[1];if(Array.isArray(O)&&!(O.length<1)){var ne=O[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(let ve=1;ve<O.length;ve++)O[ve]=""}}}}return Tn(ie)}catch{return v}}var zn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qn;function ps(){}b(ps,Ln),ps.prototype.g=function(){return new XMLHttpRequest},Qn=new ps;function Xn(h){return encodeURIComponent(String(h))}function gs(h){var v=1;h=h.split(":");const S=[];for(;v>0&&h.length;)S.push(h.shift()),v--;return h.length&&S.push(h.join(":")),S}function wn(h,v,S,O){this.j=h,this.i=v,this.l=S,this.S=O||1,this.V=new Qs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}var tn={},vn={};function gr(h,v,S){h.M=1,h.A=Ci(sn(v)),h.u=S,h.R=!0,vl(h,null)}function vl(h,v){h.F=Date.now(),xr(h),h.B=sn(h.A);var S=h.B,O=h.S;Array.isArray(O)||(O=[String(O)]),El(S.i,"t",O),h.C=0,S=h.j.L,h.h=new Wn,h.g=td(h.j,S?v:null,!h.u),h.P>0&&(h.O=new Zt(g(h.Y,h,h.g),h.P)),v=h.V,S=h.g,O=h.ba;var ne="readystatechange";Array.isArray(ne)||(ne&&(Is[0]=ne.toString()),ne=Is);for(let ie=0;ie<ne.length;ie++){const ve=X(S,ne[ie],O||v.handleEvent,!1,v.h||v);if(!ve)break;v.g[ve.key]=ve}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),it(),bn(h.i,h.v,h.B,h.l,h.S,h.u)}wn.prototype.ba=function(h){h=h.target;const v=this.O;v&&Zs(h)==3?v.j():this.Y(h)},wn.prototype.Y=function(h){try{if(h==this.g)e:{const Fe=Zs(this.g),Qt=this.g.ya(),ot=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Fe!=4||Qt==7||(Qt==8||ot<=0?it(3):it(2)),yr(this);var v=this.g.ca();this.X=v;var S=tm(this);if(this.o=v==200,en(this.i,this.v,this.B,this.l,this.S,Fe,v),this.o){if(this.U&&!this.L){t:{if(this.g){var O,ne=this.g;if((O=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(O)){var ie=O;break t}}ie=null}if(h=ie)gt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,br(this,h);else{this.o=!1,this.m=3,Le(12),xs(this),Ms(this);break e}}if(this.R){h=!0;let Lt;for(;!this.K&&this.C<S.length;)if(Lt=Bu(this,S),Lt==vn){Fe==4&&(this.m=4,Le(14),h=!1),gt(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==tn){this.m=4,Le(15),gt(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else gt(this.i,this.l,Lt,null),br(this,Lt);if(Fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||S.length!=0||this.h.h||(this.m=1,Le(16),h=!1),this.o=this.o&&h,!h)gt(this.i,this.l,S,"[Invalid Chunked Response]"),xs(this),Ms(this);else if(S.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Jo(ve),ve.P=!0,Le(11))}}else gt(this.i,this.l,S,null),br(this,S);Fe==4&&xs(this),this.o&&!this.K&&(Fe==4?Wu(this.j,this):(this.o=!1,xr(this)))}else Kr(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),xs(this),Ms(this)}}}catch{}};function tm(h){if(!Fu(h))return h.g.la();const v=An(h.g);if(v==="")return"";let S="";const O=v.length,ne=Zs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xs(h),Ms(h),"";h.h.i=new d.TextDecoder}for(let ie=0;ie<O;ie++)h.h.h=!0,S+=h.h.i.decode(v[ie],{stream:!(ne&&ie==O-1)});return v.length=0,h.h.g+=S,h.C=0,h.h.g}function Fu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Bu(h,v){var S=h.C,O=v.indexOf(`
`,S);return O==-1?vn:(S=Number(v.substring(S,O)),isNaN(S)?tn:(O+=1,O+S>v.length?vn:(v=v.slice(O,O+S),h.C=O+S,v)))}wn.prototype.cancel=function(){this.K=!0,xs(this)};function xr(h){h.T=Date.now()+h.H,_l(h,h.H)}function _l(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=nt(g(h.aa,h),v)}function yr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}wn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Un(this.i,this.B),this.M!=2&&(it(),Le(17)),xs(this),this.m=2,Ms(this)):_l(this,this.T-h)};function Ms(h){h.j.I==0||h.K||Wu(h.j,h)}function xs(h){yr(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,ss(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function br(h,v){try{var S=h.j;if(S.I!=0&&(S.g==h||_r(S.h,h))){if(!h.L&&_r(S.h,h)&&S.I==3){try{var O=S.Ba.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var ne=O;if(ne[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Cl(S),Ia(S);else break e;Oi(S),Le(18)}}else S.xa=ne[1],0<S.xa-S.K&&ne[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=nt(g(S.Va,S),6e3));vr(S.h)<=1&&S.ta&&(S.ta=void 0)}else Ar(S,11)}else if((h.L||S.g==h)&&Cl(S),!D(v))for(ne=S.Ba.g.parse(v),v=0;v<ne.length;v++){let ot=ne[v];const Lt=ot[0];if(!(Lt<=S.K))if(S.K=Lt,ot=ot[1],S.I==2)if(ot[0]=="c"){S.M=ot[1],S.ba=ot[2];const Ls=ot[3];Ls!=null&&(S.ka=Ls,S.j.info("VER="+S.ka));const jr=ot[4];jr!=null&&(S.za=jr,S.j.info("SVER="+S.za));const er=ot[5];er!=null&&typeof er=="number"&&er>0&&(O=1.5*er,S.O=O,S.j.info("backChannelRequestTimeoutMs_="+O)),O=S;const tr=h.g;if(tr){const Li=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Li){var ie=O.h;ie.g||Li.indexOf("spdy")==-1&&Li.indexOf("quic")==-1&&Li.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(zo(ie,ie.h),ie.h=null))}if(O.G){const Rl=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(O.wa=Rl,xt(O.J,O.G,Rl))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),O=S;var ve=h;if(O.na=ed(O,O.L?O.ba:null,O.W),ve.L){Fo(O.h,ve);var Fe=ve,Qt=O.O;Qt&&(Fe.H=Qt),Fe.D&&(yr(Fe),xr(Fe)),O.g=ve}else Qu(O);S.i.length>0&&wr(S)}else ot[0]!="stop"&&ot[0]!="close"||Ar(S,7);else S.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Ar(S,7):Xo(S):ot[0]!="noop"&&S.l&&S.l.qa(ot),S.A=0)}}it(4)}catch{}}var nn=class{constructor(h,v){this.g=h,this.map=v}};function Vo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vr(h){return h.h?1:h.g?h.g.size:0}function _r(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function zo(h,v){h.g?h.g.add(v):h.h=v}function Fo(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Vo.prototype.cancel=function(){if(this.i=Bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Bo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const S of h.g.values())v=v.concat(S.G);return v}return k(h.i)}var qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nl(h,v){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const O=h[S].indexOf("=");let ne,ie=null;O>=0?(ne=h[S].substring(0,O),ie=h[S].substring(O+1)):ne=h[S],v(ne,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function ys(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ys?(this.l=h.l,_n(this,h.j),this.o=h.o,this.g=h.g,Ta(this,h.u),this.h=h.h,qo(this,Ku(h.i)),this.m=h.m):h&&(v=String(h).match(qu))?(this.l=!1,_n(this,v[1]||"",!0),this.o=Nr(v[2]||""),this.g=Nr(v[3]||"",!0),Ta(this,v[4]),this.h=Nr(v[5]||"",!0),qo(this,v[6]||"",!0),this.m=Nr(v[7]||"")):(this.l=!1,this.i=new Aa(null,this.l))}ys.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ri(v,Sl,!0),":");var S=this.g;return(S||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ri(v,Sl,!0),"@"),h.push(Xn(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Ri(S,S.charAt(0)=="/"?Ho:Hu,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Ri(S,$u)),h.join("")},ys.prototype.resolve=function(h){const v=sn(this);let S=!!h.j;S?_n(v,h.j):S=!!h.o,S?v.o=h.o:S=!!h.g,S?v.g=h.g:S=h.u!=null;var O=h.h;if(S)Ta(v,h.u);else if(S=!!h.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var ne=v.h.lastIndexOf("/");ne!=-1&&(O=v.h.slice(0,ne+1)+O)}if(ne=O,ne==".."||ne==".")O="";else if(ne.indexOf("./")!=-1||ne.indexOf("/.")!=-1){O=ne.lastIndexOf("/",0)==0,ne=ne.split("/");const ie=[];for(let ve=0;ve<ne.length;){const Fe=ne[ve++];Fe=="."?O&&ve==ne.length&&ie.push(""):Fe==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),O&&ve==ne.length&&ie.push("")):(ie.push(Fe),O=!0)}O=ie.join("/")}else O=ne}return S?v.h=O:S=h.i.toString()!=="",S?qo(v,Ku(h.i)):S=!!h.m,S&&(v.m=h.m),v};function sn(h){return new ys(h)}function _n(h,v,S){h.j=S?Nr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ta(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function qo(h,v,S){v instanceof Aa?(h.i=v,Tl(h.i,h.l)):(S||(v=Ri(v,wa)),h.i=new Aa(v,h.l))}function xt(h,v,S){h.i.set(v,S)}function Ci(h){return xt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Nr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ri(h,v,S){return typeof h=="string"?(h=encodeURI(h).replace(v,rs),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function rs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Sl=/[#\/\?@]/g,Hu=/[#\?:]/g,Ho=/[#\?]/g,wa=/[#\?@]/g,$u=/#/g;function Aa(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function as(h){h.g||(h.g=new Map,h.h=0,h.i&&Nl(h.i,function(v,S){h.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}t=Aa.prototype,t.add=function(h,v){as(this),this.i=null,h=ja(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(v),this.h+=1,this};function Gu(h,v){as(h),v=ja(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function $o(h,v){return as(h),v=ja(h,v),h.g.has(v)}t.forEach=function(h,v){as(this),this.g.forEach(function(S,O){S.forEach(function(ne){h.call(v,ne,O,this)},this)},this)};function Go(h,v){as(h);let S=[];if(typeof v=="string")$o(h,v)&&(S=S.concat(h.g.get(ja(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)S=S.concat(h[v]);return S}t.set=function(h,v){return as(this),this.i=null,h=ja(this,h),$o(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=Go(this,h),h.length>0?String(h[0]):v):v};function El(h,v,S){Gu(h,v),S.length>0&&(h.i=null,h.g.set(ja(h,v),k(S)),h.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let O=0;O<v.length;O++){var S=v[O];const ne=Xn(S);S=Go(this,S);for(let ie=0;ie<S.length;ie++){let ve=ne;S[ie]!==""&&(ve+="="+Xn(S[ie])),h.push(ve)}}return this.i=h.join("&")};function Ku(h){const v=new Aa;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function ja(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Tl(h,v){v&&!h.j&&(as(h),h.i=null,h.g.forEach(function(S,O){const ne=O.toLowerCase();O!=ne&&(Gu(this,O),El(this,ne,S))},h)),h.j=v}function Ws(h,v){const S=new lt;if(d.Image){const O=new Image;O.onload=y(Ps,S,"TestLoadImage: loaded",!0,v,O),O.onerror=y(Ps,S,"TestLoadImage: error",!1,v,O),O.onabort=y(Ps,S,"TestLoadImage: abort",!1,v,O),O.ontimeout=y(Ps,S,"TestLoadImage: timeout",!1,v,O),d.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else v(!1)}function Ko(h,v){const S=new lt,O=new AbortController,ne=setTimeout(()=>{O.abort(),Ps(S,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:O.signal}).then(ie=>{clearTimeout(ne),ie.ok?Ps(S,"TestPingServer: ok",!0,v):Ps(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ne),Ps(S,"TestPingServer: error",!1,v)})}function Ps(h,v,S,O,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),O(S)}catch{}}function Ca(){this.g=new $r}function Sr(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Sr,Ln),Sr.prototype.g=function(){return new ki(this.i,this.h)};function ki(h,v){kt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ki,kt),t=ki.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Js(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function wl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Ra(this):Js(this),this.readyState==3&&wl(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Ra(this))},t.Na=function(h){this.g&&(this.response=h,Ra(this))},t.ga=function(){this.g&&Ra(this)};function Ra(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Js(h)}t.setRequestHeader=function(h,v){this.A.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=v.next();return h.join(`\r
`)};function Js(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Os(h){let v="";return H(h,function(S,O){v+=O,v+=":",v+=S,v+=`\r
`}),v}function Ii(h,v,S){e:{for(O in S){var O=!1;break e}O=!0}O||(S=Os(S),typeof h=="string"?S!=null&&Xn(S):xt(h,v,S))}function St(h){kt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(St,kt);var Er=/^https?$/i,Yo=["POST","PUT"];t=St.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,v,S,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qn.g(),this.g.onreadystatechange=N(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ie){Di(this,ie);return}if(h=S||"",S=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var ne in O)S.set(ne,O[ne]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const ie of O.keys())S.set(ie,O.get(ie));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(S.keys()).find(ie=>ie.toLowerCase()=="content-type"),ne=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Yo,v,void 0)>=0)||O||ne||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ve]of S)this.g.setRequestHeader(ie,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ie){Di(this,ie)}};function Di(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Qo(h),Gr(h)}function Qo(h){h.A||(h.A=!0,at(h,"complete"),at(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,at(this,"complete"),at(this,"abort"),Gr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gr(this,!0)),St.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mi(this):this.Xa())},t.Xa=function(){Mi(this)};function Mi(h){if(h.h&&typeof c<"u"){if(h.v&&Zs(h)==4)setTimeout(h.Ca.bind(h),0);else if(at(h,"readystatechange"),Zs(h)==4){h.h=!1;try{const ie=h.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var O;if(O=ie===0){let ve=String(h.D).match(qu)[1]||null;!ve&&d.self&&d.self.location&&(ve=d.self.location.protocol.slice(0,-1)),O=!Er.test(ve?ve.toLowerCase():"")}S=O}if(S)at(h,"complete"),at(h,"success");else{h.o=6;try{var ne=Zs(h)>2?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.ca()+"]",Qo(h)}}finally{Gr(h)}}}}function Gr(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,v||at(h,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zs(h){return h.g?h.g.readyState:0}t.ca=function(){try{return Zs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Xs(v)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Kr(h){const v={};h=(h.g&&Zs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(D(h[O]))continue;var S=gs(h[O]);const ne=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ie=v[ne]||[];v[ne]=ie,ie.push(S)}ge(v,function(O){return O.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(h,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||v}function ka(h){this.za=0,this.i=[],this.j=new lt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tr("baseRetryDelayMs",5e3,h),this.Za=Tr("retryDelaySeedMs",1e4,h),this.Ta=Tr("forwardChannelMaxRetries",2,h),this.va=Tr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Vo(h&&h.concurrentRequestLimit),this.Ba=new Ca,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ka.prototype,t.ka=8,t.I=1,t.connect=function(h,v,S,O){Le(0),this.W=h,this.H=v||{},S&&O!==void 0&&(this.H.OSID=S,this.H.OAID=O),this.F=this.X,this.J=ed(this,null,this.W),wr(this)};function Xo(h){if(Al(h),h.I==3){var v=h.V++,S=sn(h.J);if(xt(S,"SID",h.M),xt(S,"RID",v),xt(S,"TYPE","terminate"),Pi(h,S),v=new wn(h,h.j,v),v.M=2,v.A=Ci(sn(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&d.Image&&(new Image().src=v.A,S=!0),S||(v.g=td(v.j,null),v.g.ea(v.A)),v.F=Date.now(),xr(v)}Zu(h)}function Ia(h){h.g&&(Jo(h),h.g.cancel(),h.g=null)}function Al(h){Ia(h),h.v&&(d.clearTimeout(h.v),h.v=null),Cl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function wr(h){if(!Uo(h.h)&&!h.m){h.m=!0;var v=h.Ea;Q||E(),$||(Q(),$=!0),C.add(v,h),h.D=0}}function jl(h,v){return vr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=nt(g(h.Ea,h,v),Ju(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const ne=new wn(this,this.j,h);let ie=this.o;if(this.U&&(ie?(ie=V(ie),oe(ie,this.U)):ie=this.U),this.u!==null||this.R||(ne.J=ie,ie=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var O=this.i[S];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Yu(this,ne,v),S=sn(this.J),xt(S,"RID",h),xt(S,"CVER",22),this.G&&xt(S,"X-HTTP-Session-Id",this.G),Pi(this,S),ie&&(this.R?v="headers="+Xn(Os(ie))+"&"+v:this.u&&Ii(S,this.u,ie)),zo(this.h,ne),this.Ra&&xt(S,"TYPE","init"),this.S?(xt(S,"$req",v),xt(S,"SID","null"),ne.U=!0,gr(ne,S,null)):gr(ne,S,v),this.I=2}}else this.I==3&&(h?Wo(this,h):this.i.length==0||Uo(this.h)||Wo(this))};function Wo(h,v){var S;v?S=v.l:S=h.V++;const O=sn(h.J);xt(O,"SID",h.M),xt(O,"RID",S),xt(O,"AID",h.K),Pi(h,O),h.u&&h.o&&Ii(O,h.u,h.o),S=new wn(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Yu(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),zo(h.h,S),gr(S,O,v)}function Pi(h,v){h.H&&H(h.H,function(S,O){xt(v,O,S)}),h.l&&H({},function(S,O){xt(v,O,S)})}function Yu(h,v,S){S=Math.min(h.i.length,S);const O=h.l?g(h.l.Ka,h.l,h):null;e:{var ne=h.i;let Fe=-1;for(;;){const Qt=["count="+S];Fe==-1?S>0?(Fe=ne[0].g,Qt.push("ofs="+Fe)):Fe=0:Qt.push("ofs="+Fe);let ot=!0;for(let Lt=0;Lt<S;Lt++){var ie=ne[Lt].g;const Ls=ne[Lt].map;if(ie-=Fe,ie<0)Fe=Math.max(0,ne[Lt].g-100),ot=!1;else try{ie="req"+ie+"_"||"";try{var ve=Ls instanceof Map?Ls:Object.entries(Ls);for(const[jr,er]of ve){let tr=er;m(er)&&(tr=Tn(er)),Qt.push(ie+jr+"="+encodeURIComponent(tr))}}catch(jr){throw Qt.push(ie+"type="+encodeURIComponent("_badmap")),jr}}catch{O&&O(Ls)}}if(ot){ve=Qt.join("&");break e}}ve=void 0}return h=h.i.splice(0,S),v.G=h,ve}function Qu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Q||E(),$||(Q(),$=!0),C.add(v,h),h.A=0}}function Oi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=nt(g(h.Da,h),Ju(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=nt(g(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),Ia(this),Xu(this))};function Jo(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Xu(h){h.g=new wn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=sn(h.na);xt(v,"RID","rpc"),xt(v,"SID",h.M),xt(v,"AID",h.K),xt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&xt(v,"TO",h.ia),xt(v,"TYPE","xmlhttp"),Pi(h,v),h.u&&h.o&&Ii(v,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=Ci(sn(v)),S.u=null,S.R=!0,vl(S,h)}t.Va=function(){this.C!=null&&(this.C=null,Ia(this),Oi(this),Le(19))};function Cl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Wu(h,v){var S=null;if(h.g==v){Cl(h),Jo(h),h.g=null;var O=2}else if(_r(h.h,v))S=v.G,Fo(h.h,v),O=1;else return;if(h.I!=0){if(v.o)if(O==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var ne=h.D;O=Re(),at(O,new ft(O,S)),wr(h)}else Qu(h);else if(ne=v.m,ne==3||ne==0&&v.X>0||!(O==1&&jl(h,v)||O==2&&Oi(h)))switch(S&&S.length>0&&(v=h.h,v.i=v.i.concat(S)),ne){case 1:Ar(h,5);break;case 4:Ar(h,10);break;case 3:Ar(h,6);break;default:Ar(h,2)}}}function Ju(h,v){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*v}function Ar(h,v){if(h.j.info("Error code "+v),v==2){var S=g(h.bb,h),O=h.Ua;const ne=!O;O=new ys(O||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||_n(O,"https"),Ci(O),ne?Ws(O.toString(),S):Ko(O.toString(),S)}else Le(2);h.I=0,h.l&&h.l.pa(v),Zu(h),Al(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Zu(h){if(h.I=0,h.ja=[],h.l){const v=Bo(h.h);(v.length!=0||h.i.length!=0)&&(L(h.ja,v),L(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function ed(h,v,S){var O=S instanceof ys?sn(S):new ys(S);if(O.g!="")v&&(O.g=v+"."+O.g),Ta(O,O.u);else{var ne=d.location;O=ne.protocol,v=v?v+"."+ne.hostname:ne.hostname,ne=+ne.port;const ie=new ys(null);O&&_n(ie,O),v&&(ie.g=v),ne&&Ta(ie,ne),S&&(ie.h=S),O=ie}return S=h.G,v=h.wa,S&&v&&xt(O,S,v),xt(O,"VER",h.ka),Pi(h,O),O}function td(h,v,S){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new St(new Sr({ab:S})):new St(h.ma),v.Fa(h.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nd(){}t=nd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Da(){}Da.prototype.g=function(h,v){return new Jn(h,v)};function Jn(h,v){kt.call(this),this.g=new ka(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Yr(this)}b(Jn,kt),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Xo(this.g)},Jn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=Tn(h),h=S);v.i.push(new nn(v.Ya++,h)),v.I==3&&wr(v)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,Jn.Z.N.call(this)};function sd(h){Ot.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const S in v){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(sd,Ot);function rd(){te.call(this),this.status=1}b(rd,te);function Yr(h){this.g=h}b(Yr,nd),Yr.prototype.ra=function(){at(this.g,"a")},Yr.prototype.qa=function(h){at(this.g,new sd(h))},Yr.prototype.pa=function(h){at(this.g,new rd)},Yr.prototype.oa=function(){at(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,ES=function(){return new Da},SS=function(){return Re()},NS=be,Mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zn.NO_ERROR=0,zn.TIMEOUT=8,zn.HTTP_ERROR=6,Sh=zn,Fn.COMPLETE="complete",_S=Fn,pr.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",kt.prototype.listen=kt.prototype.J,Fc=pr,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,vS=St}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});class Hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");let jo="12.8.0";function YR(t){jo=t}const ul=new Ex("@firebase/firestore");function io(){return ul.logLevel}function Ee(t,...e){if(ul.logLevel<=Xe.DEBUG){const n=e.map(Ax);ul.debug(`Firestore (${jo}): ${t}`,...n)}}function Na(t,...e){if(ul.logLevel<=Xe.ERROR){const n=e.map(Ax);ul.error(`Firestore (${jo}): ${t}`,...n)}}function xo(t,...e){if(ul.logLevel<=Xe.WARN){const n=e.map(Ax);ul.warn(`Firestore (${jo}): ${t}`,...n)}}function Ax(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,TS(t,r,n)}function TS(t,e,n){let r=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Na(r),new Error(r)}function pt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||TS(e,i,r)}function ze(t,e){return t}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ba{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class wS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Hn.UNAUTHENTICATED)))}shutdown(){}}class XR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class WR{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let c=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ba,e.enqueueRetryable((()=>i(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},m=p=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ba)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string",31837,{l:r}),new wS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Hn(e)}}class JR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ZR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class D1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ek{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ws(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pt(this.o===void 0,3512);const r=c=>{c.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,Ee("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const i=c=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>i(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new D1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new D1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class jx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=tk(40);for(let c=0;c<i.length;++c)r.length<20&&i[c]<n&&(r+=e.charAt(i[c]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function Pg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),c=e.charAt(r);if(i!==c)return cg(i)===cg(c)?We(i,c):cg(i)?1:-1}return We(t.length,e.length)}const nk=55296,sk=57343;function cg(t){const e=t.charCodeAt(0);return e>=nk&&e<=sk}function yo(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const M1="__name__";class Mr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const c=Mr.compareSegments(e.get(i),n.get(i));if(c!==0)return c}return We(e.length,n.length)}static compareSegments(e,n){const r=Mr.isNumericId(e),i=Mr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):Pg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class It extends Mr{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new It(n)}static emptyPath(){return new It([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Mr{construct(e,n,r){return new Pn(e,n,r)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M1}static keyField(){return new Pn([M1])}static fromServerFormat(e){const n=[];let r="",i=0;const c=()=>{if(r.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;i<e.length;){const m=e[i];if(m==="\\"){if(i+1===e.length)throw new Ne(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ne(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else m==="`"?(d=!d,i++):m!=="."||d?(r+=m,i++):(c(),i++)}if(c(),d)throw new Ne(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(n)}static emptyPath(){return new Pn([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(It.fromString(e))}static fromName(e){return new Ie(It.fromString(e).popFirst(5))}static empty(){return new Ie(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new It(e.slice()))}}function AS(t,e,n){if(!n)throw new Ne(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ak(t,e,n,r){if(e===!0&&r===!0)throw new Ne(fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function P1(t){if(!Ie.isDocumentKey(t))throw new Ne(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function O1(t){if(Ie.isDocumentKey(t))throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function Cs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ne(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wf(t);throw new Ne(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function fn(t,e){const n={typeString:t};return e&&(n.value=e),n}function wu(t,e){if(!jS(t))throw new Ne(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const d=t[r];if(i&&typeof d!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new Ne(fe.INVALID_ARGUMENT,n);return!0}const L1=-62135596800,V1=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*V1);return new Dt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<L1)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V1}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wu(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-L1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:fn("string",Dt._jsonSchemaVersion),seconds:fn("number"),nanoseconds:fn("number")};class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Dt(0,0))}static max(){return new Ve(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const au=-1;function ik(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new Dt(n+1,0):new Dt(n,r));return new gi(i,Ie.empty(),e)}function lk(t){return new gi(t.readTime,t.key,au)}class gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gi(Ve.min(),Ie.empty(),au)}static max(){return new gi(Ve.max(),Ie.empty(),au)}}function ok(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}const ck="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Co(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==ck)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me(((r,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,i)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):me.reject(n)}static resolve(e){return new me(((n,r)=>{n(e)}))}static reject(e){return new me(((n,r)=>{r(e)}))}static waitFor(e){return new me(((n,r)=>{let i=0,c=0,d=!1;e.forEach((m=>{++i,m.next((()=>{++c,d&&c===i&&n()}),(p=>r(p)))})),d=!0,c===i&&n()}))}static or(e){let n=me.resolve(!1);for(const r of e)n=n.next((i=>i?me.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,c)=>{r.push(n.call(this,i,c))})),this.waitFor(r)}static mapArray(e,n){return new me(((r,i)=>{const c=e.length,d=new Array(c);let m=0;for(let p=0;p<c;p++){const g=p;n(e[g]).next((y=>{d[g]=y,++m,m===c&&r(d)}),(y=>i(y)))}}))}static doWhile(e,n){return new me(((r,i)=>{const c=()=>{e()===!0?n().next((()=>{c()}),i):r()};c()}))}}function dk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ro(t){return t.name==="IndexedDbTransactionError"}class Af{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Af.ce=-1;const Cx=-1;function jf(t){return t==null}function Bh(t){return t===0&&1/t==-1/0}function hk(t){return typeof t=="number"&&Number.isInteger(t)&&!Bh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const CS="";function fk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=U1(e)),e=mk(t.get(n),e);return U1(e)}function mk(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const c=t.charAt(i);switch(c){case"\0":n+="";break;case CS:n+="";break;default:n+=c}}return n}function U1(t){return t+CS+""}function z1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Bt{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,n,r,i,c){this.key=e,this.value=n,this.color=r??Mn.RED,this.left=i??Mn.EMPTY,this.right=c??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,c){return new Mn(e??this.key,n??this.value,r??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const c=r(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,n,r),null):c===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,i,c){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new F1(this.data.getIterator())}getIteratorFrom(e){return new F1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,c=r.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class F1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class As{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new As([])}unionWith(e){let n=new yn(Pn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new As(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class kS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class On{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new kS("Invalid base64 string: "+c):c}})(e);return new On(n)}static fromUint8Array(e){const n=(function(i){let c="";for(let d=0;d<i.length;++d)c+=String.fromCharCode(i[d]);return c})(e);return new On(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const pk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){if(pt(!!t,39018),typeof t=="string"){let e=0;const n=pk.exec(t);if(pt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jt(t.seconds),nanos:Jt(t.nanos)}}function Jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yi(t){return typeof t=="string"?On.fromBase64String(t):On.fromUint8Array(t)}const IS="server_timestamp",DS="__type__",MS="__previous_value__",PS="__local_write_time__";function Rx(t){return(t?.mapValue?.fields||{})[DS]?.stringValue===IS}function Cf(t){const e=t.mapValue.fields[MS];return Rx(e)?Cf(e):e}function iu(t){const e=xi(t.mapValue.fields[PS].timestampValue);return new Dt(e.seconds,e.nanos)}class gk{constructor(e,n,r,i,c,d,m,p,g,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y,this.apiKey=b}}const qh="(default)";class lu{constructor(e,n){this.projectId=e,this.database=n||qh}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===qh}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}function xk(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ne(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(t.options.projectId,e)}const OS="__type__",yk="__max__",dh={mapValue:{}},LS="__vector__",Hh="value";function bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rx(t)?4:vk(t)?9007199254740991:bk(t)?10:11:Pe(28295,{value:t})}function Fr(t,e){if(t===e)return!0;const n=bi(t);if(n!==bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return iu(t).isEqual(iu(e));case 3:return(function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const d=xi(i.timestampValue),m=xi(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,c){return yi(i.bytesValue).isEqual(yi(c.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,c){return Jt(i.geoPointValue.latitude)===Jt(c.geoPointValue.latitude)&&Jt(i.geoPointValue.longitude)===Jt(c.geoPointValue.longitude)})(t,e);case 2:return(function(i,c){if("integerValue"in i&&"integerValue"in c)return Jt(i.integerValue)===Jt(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const d=Jt(i.doubleValue),m=Jt(c.doubleValue);return d===m?Bh(d)===Bh(m):isNaN(d)&&isNaN(m)}return!1})(t,e);case 9:return yo(t.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return(function(i,c){const d=i.mapValue.fields||{},m=c.mapValue.fields||{};if(z1(d)!==z1(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Fr(d[p],m[p])))return!1;return!0})(t,e);default:return Pe(52216,{left:t})}}function ou(t,e){return(t.values||[]).find((n=>Fr(n,e)))!==void 0}function bo(t,e){if(t===e)return 0;const n=bi(t),r=bi(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Jt(c.integerValue||c.doubleValue),p=Jt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(t,e);case 3:return B1(t.timestampValue,e.timestampValue);case 4:return B1(iu(t),iu(e));case 5:return Pg(t.stringValue,e.stringValue);case 6:return(function(c,d){const m=yi(c),p=yi(d);return m.compareTo(p)})(t.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const y=We(m[g],p[g]);if(y!==0)return y}return We(m.length,p.length)})(t.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=We(Jt(c.latitude),Jt(d.latitude));return m!==0?m:We(Jt(c.longitude),Jt(d.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return q1(t.arrayValue,e.arrayValue);case 10:return(function(c,d){const m=c.fields||{},p=d.fields||{},g=m[Hh]?.arrayValue,y=p[Hh]?.arrayValue,b=We(g?.values?.length||0,y?.values?.length||0);return b!==0?b:q1(g,y)})(t.mapValue,e.mapValue);case 11:return(function(c,d){if(c===dh.mapValue&&d===dh.mapValue)return 0;if(c===dh.mapValue)return 1;if(d===dh.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),g=d.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let b=0;b<p.length&&b<y.length;++b){const N=Pg(p[b],y[b]);if(N!==0)return N;const k=bo(m[p[b]],g[y[b]]);if(k!==0)return k}return We(p.length,y.length)})(t.mapValue,e.mapValue);default:throw Pe(23264,{he:n})}}function B1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=xi(t),r=xi(e),i=We(n.seconds,r.seconds);return i!==0?i:We(n.nanos,r.nanos)}function q1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const c=bo(n[i],r[i]);if(c)return c}return We(n.length,r.length)}function vo(t){return Og(t)}function Og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=xi(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return yi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const c of n.values||[])i?i=!1:r+=",",r+=Og(c);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",c=!0;for(const d of r)c?c=!1:i+=",",i+=`${d}:${Og(n.fields[d])}`;return i+"}"})(t.mapValue):Pe(61005,{value:t})}function Eh(t){switch(bi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cf(t);return e?16+Eh(e):16;case 5:return 2*t.stringValue.length;case 6:return yi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,c)=>i+Eh(c)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Ai(r.fields,((c,d)=>{i+=c.length+Eh(d)})),i})(t.mapValue);default:throw Pe(13486,{value:t})}}function H1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lg(t){return!!t&&"integerValue"in t}function kx(t){return!!t&&"arrayValue"in t}function $1(t){return!!t&&"nullValue"in t}function G1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Th(t){return!!t&&"mapValue"in t}function bk(t){return(t?.mapValue?.fields||{})[OS]?.stringValue===LS}function Gc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Gc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gc(t.arrayValue.values[n]);return e}return{...t}}function vk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yk}class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(n)}setAll(e){let n=Pn.emptyPath(),r={},i=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,r,i),r={},i=[],n=m.popLast()}d?r[m.lastSegment()]=Gc(d):i.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,i)}delete(e){const n=this.field(e.popLast());Th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ai(n,((i,c)=>e[i]=c));for(const i of r)delete e[i]}clone(){return new hs(Gc(this.value))}}function VS(t){const e=[];return Ai(t.fields,((n,r)=>{const i=new Pn([n]);if(Th(r)){const c=VS(r.mapValue).fields;if(c.length===0)e.push(i);else for(const d of c)e.push(i.child(d))}else e.push(i)})),new As(e)}class $n{constructor(e,n,r,i,c,d,m){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new $n(e,0,Ve.min(),Ve.min(),Ve.min(),hs.empty(),0)}static newFoundDocument(e,n,r,i){return new $n(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new $n(e,2,n,Ve.min(),Ve.min(),hs.empty(),0)}static newUnknownDocument(e,n){return new $n(e,3,n,Ve.min(),Ve.min(),hs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $h{constructor(e,n){this.position=e,this.inclusive=n}}function K1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const c=e[i],d=t.position[i];if(c.field.isKeyField()?r=Ie.comparator(Ie.fromName(d.referenceValue),n.key):r=bo(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Y1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fr(t.position[n],e.position[n]))return!1;return!0}class Gh{constructor(e,n="asc"){this.field=e,this.dir=n}}function _k(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class US{}class hn extends US{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Sk(e,n,r):n==="array-contains"?new wk(e,r):n==="in"?new Ak(e,r):n==="not-in"?new jk(e,r):n==="array-contains-any"?new Ck(e,r):new hn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ek(e,r):new Tk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bo(n,this.value)):n!==null&&bi(this.value)===bi(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dr extends US{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dr(e,n)}matches(e){return zS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zS(t){return t.op==="and"}function FS(t){return Nk(t)&&zS(t)}function Nk(t){for(const e of t.filters)if(e instanceof dr)return!1;return!0}function Vg(t){if(t instanceof hn)return t.field.canonicalString()+t.op.toString()+vo(t.value);if(FS(t))return t.filters.map((e=>Vg(e))).join(",");{const e=t.filters.map((n=>Vg(n))).join(",");return`${t.op}(${e})`}}function BS(t,e){return t instanceof hn?(function(r,i){return i instanceof hn&&r.op===i.op&&r.field.isEqual(i.field)&&Fr(r.value,i.value)})(t,e):t instanceof dr?(function(r,i){return i instanceof dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((c,d,m)=>c&&BS(d,i.filters[m])),!0):!1})(t,e):void Pe(19439)}function qS(t){return t instanceof hn?(function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`})(t):t instanceof dr?(function(n){return n.op.toString()+" {"+n.getFilters().map(qS).join(" ,")+"}"})(t):"Filter"}class Sk extends hn{constructor(e,n,r){super(e,n,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ek extends hn{constructor(e,n){super(e,"in",n),this.keys=HS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Tk extends hn{constructor(e,n){super(e,"not-in",n),this.keys=HS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function HS(t,e){return(e.arrayValue?.values||[]).map((n=>Ie.fromName(n.referenceValue)))}class wk extends hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kx(n)&&ou(n.arrayValue,this.value)}}class Ak extends hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class jk extends hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ou(this.value.arrayValue,n)}}class Ck extends hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kx(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ou(this.value.arrayValue,r)))}}class Rk{constructor(e,n=null,r=[],i=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function Q1(t,e=null,n=[],r=[],i=null,c=null,d=null){return new Rk(t,e,n,r,i,c,d)}function Ix(t){const e=ze(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Vg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),jf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>vo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>vo(r))).join(",")),e.Te=n}return e.Te}function Dx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_k(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y1(t.startAt,e.startAt)&&Y1(t.endAt,e.endAt)}function Ug(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Au{constructor(e,n=null,r=[],i=[],c=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kk(t,e,n,r,i,c,d,m){return new Au(t,e,n,r,i,c,d,m)}function Rf(t){return new Au(t)}function X1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ik(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $S(t){return t.collectionGroup!==null}function Kc(t){const e=ze(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new yn(Pn.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Gh(c,r))})),n.has(Pn.keyField().canonicalString())||e.Ie.push(new Gh(Pn.keyField(),r))}return e.Ie}function Lr(t){const e=ze(t);return e.Ee||(e.Ee=Dk(e,Kc(t))),e.Ee}function Dk(t,e){if(t.limitType==="F")return Q1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const c=i.dir==="desc"?"asc":"desc";return new Gh(i.field,c)}));const n=t.endAt?new $h(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $h(t.startAt.position,t.startAt.inclusive):null;return Q1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zg(t,e){const n=t.filters.concat([e]);return new Au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fg(t,e,n){return new Au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kf(t,e){return Dx(Lr(t),Lr(e))&&t.limitType===e.limitType}function GS(t){return`${Ix(Lr(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>qS(i))).join(", ")}]`),jf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>vo(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>vo(i))).join(",")),`Target(${r})`})(Lr(t))}; limitType=${t.limitType})`}function If(t,e){return e.isFoundDocument()&&(function(r,i){const c=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ie.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(t,e)&&(function(r,i){for(const c of Kc(r))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const c of r.filters)if(!c.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(d,m,p){const g=K1(d,m,p);return d.inclusive?g<=0:g<0})(r.startAt,Kc(r),i)||r.endAt&&!(function(d,m,p){const g=K1(d,m,p);return d.inclusive?g>=0:g>0})(r.endAt,Kc(r),i))})(t,e)}function Mk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KS(t){return(e,n)=>{let r=!1;for(const i of Kc(t)){const c=Pk(i,e,n);if(c!==0)return c;r=r||i.field.isKeyField()}return 0}}function Pk(t,e,n){const r=t.field.isKeyField()?Ie.comparator(e.key,n.key):(function(c,d,m){const p=d.data.field(c),g=m.data.field(c);return p!==null&&g!==null?bo(p,g):Pe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:t.dir})}}class xl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,c]of r)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,((n,r)=>{for(const[i,c]of r)e(i,c)}))}isEmpty(){return RS(this.inner)}size(){return this.innerSize}}const Ok=new Bt(Ie.comparator);function Sa(){return Ok}const YS=new Bt(Ie.comparator);function Bc(...t){let e=YS;for(const n of t)e=e.insert(n.key,n);return e}function QS(t){let e=YS;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function sl(){return Yc()}function XS(){return Yc()}function Yc(){return new xl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Lk=new Bt(Ie.comparator),Vk=new yn(Ie.comparator);function Je(...t){let e=Vk;for(const n of t)e=e.add(n);return e}const Uk=new yn(We);function zk(){return Uk}function Mx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function WS(t){return{integerValue:""+t}}function Fk(t,e){return hk(e)?WS(e):Mx(t,e)}class Df{constructor(){this._=void 0}}function Bk(t,e,n){return t instanceof Kh?(function(i,c){const d={fields:{[DS]:{stringValue:IS},[PS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Rx(c)&&(c=Cf(c)),c&&(d.fields[MS]=c),{mapValue:d}})(n,e):t instanceof cu?ZS(t,e):t instanceof uu?eE(t,e):(function(i,c){const d=JS(i,c),m=W1(d)+W1(i.Ae);return Lg(d)&&Lg(i.Ae)?WS(m):Mx(i.serializer,m)})(t,e)}function qk(t,e,n){return t instanceof cu?ZS(t,e):t instanceof uu?eE(t,e):n}function JS(t,e){return t instanceof Yh?(function(r){return Lg(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Kh extends Df{}class cu extends Df{constructor(e){super(),this.elements=e}}function ZS(t,e){const n=tE(e);for(const r of t.elements)n.some((i=>Fr(i,r)))||n.push(r);return{arrayValue:{values:n}}}class uu extends Df{constructor(e){super(),this.elements=e}}function eE(t,e){let n=tE(e);for(const r of t.elements)n=n.filter((i=>!Fr(i,r)));return{arrayValue:{values:n}}}class Yh extends Df{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function W1(t){return Jt(t.integerValue||t.doubleValue)}function tE(t){return kx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Hk(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof cu&&i instanceof cu||r instanceof uu&&i instanceof uu?yo(r.elements,i.elements,Fr):r instanceof Yh&&i instanceof Yh?Fr(r.Ae,i.Ae):r instanceof Kh&&i instanceof Kh})(t.transform,e.transform)}class $k{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function nE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Px(t.key,lr.none()):new ju(t.key,t.data,lr.none());{const n=t.data,r=hs.empty();let i=new yn(Pn.comparator);for(let c of e.fields)if(!i.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),i=i.add(c)}return new ji(t.key,r,new As(i.toArray()),lr.none())}}function Gk(t,e,n){t instanceof ju?(function(i,c,d){const m=i.value.clone(),p=Z1(i.fieldTransforms,c,d.transformResults);m.setAll(p),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(t,e,n):t instanceof ji?(function(i,c,d){if(!wh(i.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Z1(i.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(sE(i)),p.setAll(m),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(t,e,n):(function(i,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Qc(t,e,n,r){return t instanceof ju?(function(c,d,m,p){if(!wh(c.precondition,d))return m;const g=c.value.clone(),y=e_(c.fieldTransforms,p,d);return g.setAll(y),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(t,e,n,r):t instanceof ji?(function(c,d,m,p){if(!wh(c.precondition,d))return m;const g=e_(c.fieldTransforms,p,d),y=d.data;return y.setAll(sE(c)),y.setAll(g),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(c,d,m){return wh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(t,e,n)}function Kk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),c=JS(r.transform,i||null);c!=null&&(n===null&&(n=hs.empty()),n.set(r.field,c))}return n||null}function J1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yo(r,i,((c,d)=>Hk(c,d)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ju extends Mf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends Mf{constructor(e,n,r,i,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function sE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Z1(t,e,n){const r=new Map;pt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const c=t[i],d=c.transform,m=e.data.field(c.field);r.set(c.field,qk(d,m,n[i]))}return r}function e_(t,e,n){const r=new Map;for(const i of t){const c=i.transform,d=n.data.field(i.field);r.set(i.field,Bk(c,d,e))}return r}class Px extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yk extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&Gk(c,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XS();return this.mutations.forEach((i=>{const c=e.get(i.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(i.key)?null:m;const p=nE(d,m);p!==null&&r.set(i.key,p),d.isValidDocument()||d.convertToNoDocument(Ve.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((n,r)=>J1(n,r)))&&yo(this.baseMutations,e.baseMutations,((n,r)=>J1(n,r)))}}class Ox{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Lk})();const c=e.mutations;for(let d=0;d<c.length;d++)i=i.insert(c[d].key,r[d].version);return new Ox(e,n,r,i)}}class Xk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Wk{constructor(e,n){this.count=e,this.unchangedNames=n}}var cn,tt;function Jk(t){switch(t){case fe.OK:return Pe(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function rE(t){if(t===void 0)return Na("GRPC error has no .code"),fe.UNKNOWN;switch(t){case cn.OK:return fe.OK;case cn.CANCELLED:return fe.CANCELLED;case cn.UNKNOWN:return fe.UNKNOWN;case cn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case cn.INTERNAL:return fe.INTERNAL;case cn.UNAVAILABLE:return fe.UNAVAILABLE;case cn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case cn.NOT_FOUND:return fe.NOT_FOUND;case cn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case cn.ABORTED:return fe.ABORTED;case cn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case cn.DATA_LOSS:return fe.DATA_LOSS;default:return Pe(39323,{code:t})}}(tt=cn||(cn={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";function Zk(){return new TextEncoder}const e4=new hi([4294967295,4294967295],0);function t_(t){const e=Zk().encode(t),n=new bS;return n.update(e),new Uint8Array(n.digest())}function n_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new hi([n,r],0),new hi([i,c],0)]}class Lx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qc(`Invalid padding: ${n}`);if(r<0)throw new qc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(hi.fromNumber(r)));return i.compare(e4)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=t_(e),[r,i]=n_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,i,c);if(!this.we(d))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Lx(c,i,n);return r.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=t_(e),[r,i]=n_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,i,c);this.be(d)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pf{constructor(e,n,r,i,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pf(Ve.min(),i,new Bt(We),Sa(),Je())}}class Cu{constructor(e,n,r,i,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cu(r,n,Je(),Je(),Je())}}class Ah{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class aE{constructor(e,n){this.targetId=e,this.Ce=n}}class iE{constructor(e,n,r=On.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class s_{constructor(){this.ve=0,this.Fe=r_(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),r=Je();return this.Fe.forEach(((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:c})}})),new Cu(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=r_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class t4{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sa(),this.He=hh(),this.Je=hh(),this.Ze=new Bt(We)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const c=i.target;if(Ug(c))if(r===0){const d=new Ie(c.path);this.et(n,d,$n.newNoDocument(d,Ve.min()))}else pt(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:c=0}=n;let d,m;try{d=yi(r).toUint8Array()}catch(p){if(p instanceof kS)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Lx(d,i,c)}catch(p){return xo(p instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Ug(m.target)){const p=new Ie(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,$n.newNoDocument(p,e))}c.Be&&(n.set(d,c.ke()),c.Ke())}}));let r=Je();this.Je.forEach(((c,d)=>{let m=!0;d.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const i=new Pf(e,n,this.Ze,this.je,r);return this.je=Sa(),this.He=hh(),this.Je=hh(),this.Ze=new Bt(We),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new s_,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new yn(We),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new yn(We),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new s_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hh(){return new Bt(Ie.comparator)}function r_(){return new Bt(Ie.comparator)}const n4={asc:"ASCENDING",desc:"DESCENDING"},s4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r4={and:"AND",or:"OR"};class a4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bg(t,e){return t.useProto3Json||jf(e)?e:{value:e}}function Qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i4(t,e){return Qh(t,e.toTimestamp())}function Vr(t){return pt(!!t,49232),Ve.fromTimestamp((function(n){const r=xi(n);return new Dt(r.seconds,r.nanos)})(t))}function Vx(t,e){return qg(t,e).canonicalString()}function qg(t,e){const n=(function(i){return new It(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function oE(t){const e=It.fromString(t);return pt(fE(e),10190,{key:e.toString()}),e}function Hg(t,e){return Vx(t.databaseId,e.path)}function ug(t,e){const n=oE(e);if(n.get(1)!==t.databaseId.projectId)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(uE(n))}function cE(t,e){return Vx(t.databaseId,e)}function l4(t){const e=oE(t);return e.length===4?It.emptyPath():uE(e)}function $g(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uE(t){return pt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function a_(t,e,n){return{name:Hg(t,e),fields:n.value.mapValue.fields}}function o4(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Pe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=(function(g,y){return g.useProto3Json?(pt(y===void 0||typeof y=="string",58123),On.fromBase64String(y||"")):(pt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),On.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(g){const y=g.code===void 0?fe.UNKNOWN:rE(g.code);return new Ne(y,g.message||"")})(d);n=new iE(r,i,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ug(t,r.document.name),c=Vr(r.document.updateTime),d=r.document.createTime?Vr(r.document.createTime):Ve.min(),m=new hs({mapValue:{fields:r.document.fields}}),p=$n.newFoundDocument(i,c,d,m),g=r.targetIds||[],y=r.removedTargetIds||[];n=new Ah(g,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ug(t,r.document),c=r.readTime?Vr(r.readTime):Ve.min(),d=$n.newNoDocument(i,c),m=r.removedTargetIds||[];n=new Ah([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ug(t,r.document),c=r.removedTargetIds||[];n=new Ah([],c,i,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:c}=r,d=new Wk(i,c),m=r.targetId;n=new aE(m,d)}}return n}function c4(t,e){let n;if(e instanceof ju)n={update:a_(t,e.key,e.value)};else if(e instanceof Px)n={delete:Hg(t,e.key)};else if(e instanceof ji)n={update:a_(t,e.key,e.data),updateMask:y4(e.fieldMask)};else{if(!(e instanceof Yk))return Pe(16599,{dt:e.type});n={verify:Hg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const m=d.transform;if(m instanceof Kh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof cu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof uu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Yh)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Pe(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,c){return c.updateTime!==void 0?{updateTime:i4(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pe(27497)})(t,e.precondition)),n}function u4(t,e){return t&&t.length>0?(pt(e!==void 0,14353),t.map((n=>(function(i,c){let d=i.updateTime?Vr(i.updateTime):Vr(c);return d.isEqual(Ve.min())&&(d=Vr(c)),new $k(d,i.transformResults||[])})(n,e)))):[]}function d4(t,e){return{documents:[cE(t,e.path)]}}function h4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cE(t,i);const c=(function(g){if(g.length!==0)return hE(dr.create(g,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(g){if(g.length!==0)return g.map((y=>(function(N){return{field:oo(N.field),direction:p4(N.dir)}})(y)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Bg(t,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:i}}function f4(t){let e=l4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pt(r===1,65062);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let c=[];n.where&&(c=(function(b){const N=dE(b);return N instanceof dr&&FS(N)?N.getFilters():[N]})(n.where));let d=[];n.orderBy&&(d=(function(b){return b.map((N=>(function(L){return new Gh(co(L.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(N)))})(n.orderBy));let m=null;n.limit&&(m=(function(b){let N;return N=typeof b=="object"?b.value:b,jf(N)?null:N})(n.limit));let p=null;n.startAt&&(p=(function(b){const N=!!b.before,k=b.values||[];return new $h(k,N)})(n.startAt));let g=null;return n.endAt&&(g=(function(b){const N=!b.before,k=b.values||[];return new $h(k,N)})(n.endAt)),kk(e,i,d,c,m,"F",p,g)}function m4(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=co(n.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=co(n.unaryFilter.field);return hn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=co(n.unaryFilter.field);return hn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=co(n.unaryFilter.field);return hn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return hn.create(co(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return dr.create(n.compositeFilter.filters.map((r=>dE(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(n.compositeFilter.op))})(t):Pe(30097,{filter:t})}function p4(t){return n4[t]}function g4(t){return s4[t]}function x4(t){return r4[t]}function oo(t){return{fieldPath:t.canonicalString()}}function co(t){return Pn.fromServerFormat(t.fieldPath)}function hE(t){return t instanceof hn?(function(n){if(n.op==="=="){if(G1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if($1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if($1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:g4(n.op),value:n.value}}})(t):t instanceof dr?(function(n){const r=n.getFilters().map((i=>hE(i)));return r.length===1?r[0]:{compositeFilter:{op:x4(n.op),filters:r}}})(t):Pe(54877,{filter:t})}function y4(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function mE(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class oi{constructor(e,n,r,i,c=Ve.min(),d=Ve.min(),m=On.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class b4{constructor(e){this.yt=e}}function v4(t){const e=f4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fg(e,e.limit,"L"):e}class _4{constructor(){this.Sn=new N4}addToCollectionParentIndex(e,n){return this.Sn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve(gi.min())}updateCollectionGroup(e,n,r){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class N4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yn(It.comparator),c=!i.has(r);return this.index[n]=i.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yn(It.comparator)).toArray()}}const i_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pE=41943040;class ds{static withCacheSize(e){return new ds(e,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}ds.DEFAULT_COLLECTION_PERCENTILE=10,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ds.DEFAULT=new ds(pE,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ds.DISABLED=new ds(-1,0,0);class _o{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _o(0)}static ar(){return new _o(-1)}}const l_="LruGarbageCollector",S4=1048576;function o_([t,e],[n,r]){const i=We(t,n);return i===0?We(e,r):i}class E4{constructor(e){this.Pr=e,this.buffer=new yn(o_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();o_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class T4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ee(l_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ro(n)?Ee(l_,"Ignoring IndexedDB error during garbage collection: ",n):await Co(n)}await this.Ar(3e5)}))}}class w4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return me.resolve(Af.ce);const r=new E4(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(i_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i_):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,c,d,m,p,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,d=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(r=b,m=Date.now(),this.removeTargets(e,r,n)))).next((b=>(c=b,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(g=Date.now(),io()<=Xe.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-y}ms
	Determined least recently used ${i} in `+(m-d)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:b}))))}}function A4(t,e){return new w4(t,e)}class j4{constructor(){this.changes=new xl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?me.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class C4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class R4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Qc(r.mutation,i,As.empty(),Dt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Je()){const i=sl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((c=>{let d=Bc();return c.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=sl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Je())))}populateOverlays(e,n,r){const i=[];return r.forEach((c=>{n.has(c)||i.push(c)})),this.documentOverlayCache.getOverlays(e,i).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,r,i){let c=Sa();const d=Yc(),m=(function(){return Yc()})();return n.forEach(((p,g)=>{const y=r.get(g.key);i.has(g.key)&&(y===void 0||y.mutation instanceof ji)?c=c.insert(g.key,g):y!==void 0?(d.set(g.key,y.mutation.getFieldMask()),Qc(y.mutation,g,y.mutation.getFieldMask(),Dt.now())):d.set(g.key,As.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((g,y)=>d.set(g,y))),n.forEach(((g,y)=>m.set(g,new C4(y,d.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const r=Yc();let i=new Bt(((d,m)=>d-m)),c=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let y=r.get(p)||As.empty();y=m.applyToLocalView(g,y),r.set(p,y);const b=(i.get(m.batchId)||Je()).add(p);i=i.insert(m.batchId,b)}))})).next((()=>{const d=[],m=i.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,y=p.value,b=XS();y.forEach((N=>{if(!c.has(N)){const k=nE(n.get(N),r.get(N));k!==null&&b.set(N,k),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,b))}return me.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return Ik(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$S(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((c=>{const d=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-c.size):me.resolve(sl());let m=au,p=c;return d.next((g=>me.forEach(g,((y,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(y)?me.resolve():this.remoteDocumentCache.getEntry(e,y).next((N=>{p=p.insert(y,N)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,p,g,Je()))).next((y=>({batchId:m,changes:QS(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((r=>{let i=Bc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const c=n.collectionGroup;let d=Bc();return this.indexManager.getCollectionParents(e,c).next((m=>me.forEach(m,(p=>{const g=(function(b,N){return new Au(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next((y=>{y.forEach(((b,N)=>{d=d.insert(b,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,i)))).next((d=>{c.forEach(((p,g)=>{const y=g.getKey();d.get(y)===null&&(d=d.insert(y,$n.newInvalidDocument(y)))}));let m=Bc();return d.forEach(((p,g)=>{const y=c.get(p);y!==void 0&&Qc(y.mutation,g,As.empty(),Dt.now()),If(n,g)&&(m=m.insert(p,g))})),m}))}}class k4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return me.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Vr(i.createTime)}})(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:v4(i.bundledQuery),readTime:Vr(i.readTime)}})(n)),me.resolve()}}class I4{constructor(){this.overlays=new Bt(Ie.comparator),this.Lr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sl();return me.forEach(n,(i=>this.getOverlay(e,i).next((c=>{c!==null&&r.set(i,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,c)=>{this.bt(e,n,c)})),me.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),me.resolve()}getOverlaysForCollection(e,n,r){const i=sl(),c=n.length+1,d=new Ie(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===c&&p.largestBatchId>r&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let c=new Bt(((g,y)=>g-y));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let y=c.get(g.largestBatchId);y===null&&(y=sl(),c=c.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const m=sl(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,y)=>m.set(g,y))),!(m.size()>=i)););return me.resolve(m)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const d=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Xk(n,r));let c=this.Lr.get(n);c===void 0&&(c=Je(),this.Lr.set(n,c)),this.Lr.set(n,c.add(r.key))}}class D4{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}class Ux{constructor(){this.kr=new yn(Sn.Kr),this.qr=new yn(Sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Sn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Sn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ie(new It([])),r=new Sn(n,e),i=new Sn(n,e+1),c=[];return this.qr.forEachInRange([r,i],(d=>{this.Wr(d),c.push(d.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ie(new It([])),r=new Sn(n,e),i=new Sn(n,e+1);let c=Je();return this.qr.forEachInRange([r,i],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Sn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Sn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ie.comparator(e.key,n.key)||We(e.Hr,n.Hr)}static Ur(e,n){return We(e.Hr,n.Hr)||Ie.comparator(e.key,n.key)}}class M4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new yn(Sn.Kr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Qk(c,n,r,i);this.mutationQueue.push(d);for(const m of i)this.Jr=this.Jr.add(new Sn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return me.resolve(d)}lookupMutationBatch(e,n){return me.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),c=i<0?0:i;return me.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Cx:this.Yn-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Sn(n,0),i=new Sn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,i],(d=>{const m=this.Zr(d.Hr);c.push(m)})),me.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yn(We);return n.forEach((i=>{const c=new Sn(i,0),d=new Sn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,d],(m=>{r=r.add(m.Hr)}))})),me.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let c=r;Ie.isDocumentKey(c)||(c=c.child(""));const d=new Sn(new Ie(c),0);let m=new yn(We);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(m=m.add(p.Hr)),!0)}),d),me.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){pt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return me.forEach(n.mutations,(i=>{const c=new Sn(i.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Sn(n,0),i=this.Jr.firstAfterOrEqual(r);return me.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class P4{constructor(e){this.ti=e,this.docs=(function(){return new Bt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),c=i?i.size:0,d=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return me.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(n))}getEntries(e,n){let r=Sa();return n.forEach((i=>{const c=this.docs.get(i);r=r.insert(i,c?c.document.mutableCopy():$n.newInvalidDocument(i))})),me.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let c=Sa();const d=n.path,m=new Ie(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||ok(lk(y),r)<=0||(i.has(y.key)||If(n,y))&&(c=c.insert(y.key,y.mutableCopy()))}return me.resolve(c)}getAllFromCollectionGroup(e,n,r,i){Pe(9500)}ni(e,n){return me.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new O4(this)}getSize(e){return me.resolve(this.size)}}class O4 extends j4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),me.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class L4{constructor(e){this.persistence=e,this.ri=new xl((n=>Ix(n)),Dx),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.ii=0,this.si=new Ux,this.targetCount=0,this.oi=_o._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),me.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new _o(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.lr(n),me.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,r){let i=0;const c=[];return this.ri.forEach(((d,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.ri.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)})),me.waitFor(c).next((()=>i))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return me.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),me.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,c=[];return i&&n.forEach((d=>{c.push(i.markPotentiallyOrphaned(e,d))})),me.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return me.resolve(r)}containsKey(e,n){return me.resolve(this.si.containsKey(n))}}class gE{constructor(e,n){this._i={},this.overlays={},this.ai=new Af(0),this.ui=!1,this.ui=!0,this.ci=new D4,this.referenceDelegate=e(this),this.li=new L4(this),this.indexManager=new _4,this.remoteDocumentCache=(function(i){return new P4(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new b4(n),this.Pi=new k4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new M4(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const i=new V4(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((c=>this.referenceDelegate.Ii(i).next((()=>c)))).toPromise().then((c=>(i.raiseOnCommittedEvent(),c)))}Ei(e,n){return me.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class V4 extends uk{constructor(e){super(),this.currentSequenceNumber=e}}class zx{constructor(e){this.persistence=e,this.Ri=new Ux,this.Ai=null}static Vi(e){return new zx(e)}get di(){if(this.Ai)return this.Ai;throw Pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),me.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.di,(r=>{const i=Ie.fromPath(r);return this.mi(e,i).next((c=>{c||n.removeEntry(i,Ve.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xh{constructor(e,n){this.persistence=e,this.fi=new xl((r=>fk(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=A4(this,n)}static Vi(e,n){return new Xh(e,n)}Ti(){}Ii(e){return me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return me.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((c=>c?me.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ni(e,(d=>this.wr(e,d,n).next((m=>{m||(r++,c.removeEntry(d,Ve.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),me.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Eh(e.data.value)),n}wr(e,n,r){return me.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return me.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Fx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=Je(),i=Je();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new Fx(e,n.fromCache,r,i)}}class U4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class z4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return RC()?8:dk(Gn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const c={result:null};return this.gs(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ps(e,n,i,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new U4;return this.ys(e,n,d).next((m=>{if(c.result=m,this.As)return this.ws(e,n,d,m.size)}))})).next((()=>c.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(io()<=Xe.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),me.resolve()):(io()<=Xe.DEBUG&&Ee("QueryEngine","Query:",lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(io()<=Xe.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(n))):me.resolve())}gs(e,n){if(X1(n))return me.resolve(null);let r=Lr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Fg(n,null,"F"),r=Lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Je(...c);return this.fs.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.bs(n,m);return this.Ss(n,g,d,p.readTime)?this.gs(e,Fg(n,null,"F")):this.Ds(e,g,n,p)}))))})))))}ps(e,n,r,i){return X1(n)||i.isEqual(Ve.min())?me.resolve(null):this.fs.getDocuments(e,r).next((c=>{const d=this.bs(n,c);return this.Ss(n,d,r,i)?me.resolve(null):(io()<=Xe.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lo(n)),this.Ds(e,d,n,ik(i,au)).next((m=>m)))}))}bs(e,n){let r=new yn(KS(e));return n.forEach(((i,c)=>{If(e,c)&&(r=r.add(c))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}ys(e,n,r){return io()<=Xe.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",lo(n)),this.fs.getDocumentsMatchingQuery(e,n,gi.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const Bx="LocalStore",F4=3e8;class B4{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Bt(We),this.Fs=new xl((c=>Ix(c)),Dx),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function q4(t,e,n,r){return new B4(t,e,n,r)}async function xE(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((c=>(i=c,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],m=[];let p=Je();for(const g of i){d.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of c){m.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return n.localDocuments.getDocuments(r,p).next((g=>({Ns:g,removedBatchIds:d,addedBatchIds:m})))}))}))}function H4(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,y){const b=g.batch,N=b.keys();let k=me.resolve();return N.forEach((L=>{k=k.next((()=>y.getEntry(p,L))).next((M=>{const I=g.docVersions.get(L);pt(I!==null,48541),M.version.compareTo(I)<0&&(b.applyToRemoteDocument(M,g),M.isValidDocument()&&(M.setReadTime(g.commitVersion),y.addEntry(M)))}))})),k.next((()=>m.mutationQueue.removeMutationBatch(p,b)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Je();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function yE(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function $4(t,e){const n=ze(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const m=[];e.targetChanges.forEach(((y,b)=>{const N=i.get(b);if(!N)return;m.push(n.li.removeMatchingKeys(c,y.removedDocuments,b).next((()=>n.li.addMatchingKeys(c,y.addedDocuments,b))));let k=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?k=k.withResumeToken(On.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),i=i.insert(b,k),(function(M,I,B){return M.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=F4?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(N,k,y)&&m.push(n.li.updateTargetData(c,k))}));let p=Sa(),g=Je();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,y))})),m.push(G4(c,d,e.documentUpdates).next((y=>{p=y.Bs,g=y.Ls}))),!r.isEqual(Ve.min())){const y=n.li.getLastRemoteSnapshotVersion(c).next((b=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));m.push(y)}return me.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,g))).next((()=>p))})).then((c=>(n.vs=i,c)))}function G4(t,e,n){let r=Je(),i=Je();return n.forEach((c=>r=r.add(c))),e.getEntries(t,r).next((c=>{let d=Sa();return n.forEach(((m,p)=>{const g=c.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(m)),p.isNoDocument()&&p.version.isEqual(Ve.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):Ee(Bx,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{Bs:d,Ls:i}}))}function K4(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Cx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Y4(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((c=>c?(i=c,me.resolve(i)):n.li.allocateTargetId(r).next((d=>(i=new oi(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Gg(t,e,n){const r=ze(t),i=r.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Ro(d))throw d;Ee(Bx,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function c_(t,e,n){const r=ze(t);let i=Ve.min(),c=Je();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,g,y){const b=ze(p),N=b.Fs.get(y);return N!==void 0?me.resolve(b.vs.get(N)):b.li.getTargetData(g,y)})(r,d,Lr(e)).next((m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,m.targetId).next((p=>{c=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,n?i:Ve.min(),n?c:Je()))).next((m=>(Q4(r,Mk(e),m),{documents:m,ks:c})))))}function Q4(t,e,n){let r=t.Ms.get(e)||Ve.min();n.forEach(((i,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),t.Ms.set(e,r)}class u_{constructor(){this.activeTargetIds=zk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X4{constructor(){this.vo=new u_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new u_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class W4{Mo(e){}shutdown(){}}const d_="ConnectivityMonitor";class h_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ee(d_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ee(d_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fh=null;function Kg(){return fh===null?fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():fh++,"0x"+fh.toString(16)}const dg="RestConnection",J4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Z4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===qh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,c){const d=Kg(),m=this.Qo(e,n.toUriEncodedString());Ee(dg,`Sending RPC '${e}' ${d}:`,m,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,i,c);const{host:g}=new URL(m),y=wi(g);return this.zo(e,m,p,r,y).then((b=>(Ee(dg,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw xo(dg,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",r),b}))}jo(e,n,r,i,c,d){return this.Wo(e,n,r,i,c)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,c)=>e[c]=i)),r&&r.headers.forEach(((i,c)=>e[c]=i))}Qo(e,n){const r=J4[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class eI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const qn="WebChannelConnection",Vc=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class uo extends Z4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!uo.c_){const e=SS();Vc(e,NS.STAT_EVENT,(n=>{n.stat===Mg.PROXY?Ee(qn,"STAT_EVENT: detected buffering proxy"):n.stat===Mg.NOPROXY&&Ee(qn,"STAT_EVENT: detected no buffering proxy")})),uo.c_=!0}}zo(e,n,r,i,c){const d=Kg();return new Promise(((m,p)=>{const g=new vS;g.setWithCredentials(!0),g.listenOnce(_S.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Sh.NO_ERROR:const b=g.getResponseJson();Ee(qn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case Sh.TIMEOUT:Ee(qn,`RPC '${e}' ${d} timed out`),p(new Ne(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const N=g.getStatus();if(Ee(qn,`RPC '${e}' ${d} failed with status:`,N,"response text:",g.getResponseText()),N>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const L=k?.error;if(L&&L.status&&L.message){const M=(function(B){const U=B.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(U)>=0?U:fe.UNKNOWN})(L.status);p(new Ne(M,L.message))}else p(new Ne(fe.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Ne(fe.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ee(qn,`RPC '${e}' ${d} completed.`)}}));const y=JSON.stringify(i);Ee(qn,`RPC '${e}' ${d} sending request:`,i),g.send(n,"POST",y,r,15)}))}T_(e,n,r){const i=Kg(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const g=c.join("");Ee(qn,`Creating RPC '${e}' stream ${i}: ${g}`,m);const y=d.createWebChannel(g,m);this.I_(y);let b=!1,N=!1;const k=new eI({Ho:L=>{N?Ee(qn,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(b||(Ee(qn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),b=!0),Ee(qn,`RPC '${e}' stream ${i} sending:`,L),y.send(L))},Jo:()=>y.close()});return Vc(y,Fc.EventType.OPEN,(()=>{N||(Ee(qn,`RPC '${e}' stream ${i} transport opened.`),k.i_())})),Vc(y,Fc.EventType.CLOSE,(()=>{N||(N=!0,Ee(qn,`RPC '${e}' stream ${i} transport closed`),k.o_(),this.E_(y))})),Vc(y,Fc.EventType.ERROR,(L=>{N||(N=!0,xo(qn,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),k.o_(new Ne(fe.UNAVAILABLE,"The operation could not be completed")))})),Vc(y,Fc.EventType.MESSAGE,(L=>{if(!N){const M=L.data[0];pt(!!M,16349);const I=M,B=I?.error||I[0]?.error;if(B){Ee(qn,`RPC '${e}' stream ${i} received error:`,B);const U=B.status;let K=(function($){const C=cn[$];if(C!==void 0)return rE(C)})(U),Y=B.message;K===void 0&&(K=fe.INTERNAL,Y="Unknown error status: "+U+" with message "+B.message),N=!0,k.o_(new Ne(K,Y)),y.close()}else Ee(qn,`RPC '${e}' stream ${i} received:`,M),k.__(M)}})),uo.u_(),setTimeout((()=>{k.s_()}),0),k}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ES()}}function tI(t){return new uo(t)}function hg(){return typeof document<"u"?document:null}function Of(t){return new a4(t,!0)}uo.c_=!1;class bE{constructor(e,n,r=1e3,i=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const f_="PersistentStream";class vE{constructor(e,n,r,i,c,d,m,p){this.Ci=e,this.b_=r,this.S_=i,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(Na(n.toString()),Na("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ne(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(f_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ee(f_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nI extends vE{constructor(e,n,r,i,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=o4(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ve.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?Vr(d.readTime):Ve.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=$g(this.serializer),n.addTarget=(function(c,d){let m;const p=d.target;if(m=Ug(p)?{documents:d4(c,p)}:{query:h4(c,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=lE(c,d.resumeToken);const g=Bg(c,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(Ve.min())>0){m.readTime=Qh(c,d.snapshotVersion.toTimestamp());const g=Bg(c,d.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const r=m4(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=$g(this.serializer),n.removeTarget=e,this.K_(n)}}class sI extends vE{constructor(e,n,r,i,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,d),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=u4(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=$g(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>c4(this.serializer,r)))};this.K_(n)}}class rI{}class aI extends rI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,qg(n,r),i,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(fe.UNKNOWN,c.toString())}))}jo(e,n,r,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.jo(e,qg(n,r),i,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ne(fe.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function iI(t,e,n,r){return new aI(t,e,n,r)}class lI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Na(n),this.aa=!1):Ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const dl="RemoteStore";class oI{constructor(e,n,r,i,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{yl(this)&&(Ee(dl,"Restarting streams for network reachability change."),await(async function(p){const g=ze(p);g.Ea.add(4),await Ru(g),g.Va.set("Unknown"),g.Ea.delete(4),await Lf(g)})(this))}))})),this.Va=new lI(r,i)}}async function Lf(t){if(yl(t))for(const e of t.Ra)await e(!0)}async function Ru(t){for(const e of t.Ra)await e(!1)}function _E(t,e){const n=ze(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gx(n)?$x(n):ko(n).O_()&&Hx(n,e))}function qx(t,e){const n=ze(t),r=ko(n);n.Ia.delete(e),r.O_()&&NE(n,e),n.Ia.size===0&&(r.O_()?r.L_():yl(n)&&n.Va.set("Unknown"))}function Hx(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(t).Z_(e)}function NE(t,e){t.da.$e(e),ko(t).X_(e)}function $x(t){t.da=new t4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ko(t).start(),t.Va.ua()}function Gx(t){return yl(t)&&!ko(t).x_()&&t.Ia.size>0}function yl(t){return ze(t).Ea.size===0}function SE(t){t.da=void 0}async function cI(t){t.Va.set("Online")}async function uI(t){t.Ia.forEach(((e,n)=>{Hx(t,e)}))}async function dI(t,e){SE(t),Gx(t)?(t.Va.ha(e),$x(t)):t.Va.set("Unknown")}async function hI(t,e,n){if(t.Va.set("Online"),e instanceof iE&&e.state===2&&e.cause)try{await(async function(i,c){const d=c.cause;for(const m of c.targetIds)i.Ia.has(m)&&(await i.remoteSyncer.rejectListen(m,d),i.Ia.delete(m),i.da.removeTarget(m))})(t,e)}catch(r){Ee(dl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wh(t,r)}else if(e instanceof Ah?t.da.Xe(e):e instanceof aE?t.da.st(e):t.da.tt(e),!n.isEqual(Ve.min()))try{const r=await yE(t.localStore);n.compareTo(r)>=0&&await(function(c,d){const m=c.da.Tt(d);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=c.Ia.get(g);y&&c.Ia.set(g,y.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,g)=>{const y=c.Ia.get(p);if(!y)return;c.Ia.set(p,y.withResumeToken(On.EMPTY_BYTE_STRING,y.snapshotVersion)),NE(c,p);const b=new oi(y.target,p,g,y.sequenceNumber);Hx(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(t,n)}catch(r){Ee(dl,"Failed to raise snapshot:",r),await Wh(t,r)}}async function Wh(t,e,n){if(!Ro(e))throw e;t.Ea.add(1),await Ru(t),t.Va.set("Offline"),n||(n=()=>yE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee(dl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Lf(t)}))}function EE(t,e){return e().catch((n=>Wh(t,n,e)))}async function Vf(t){const e=ze(t),n=vi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cx;for(;fI(e);)try{const i=await K4(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,mI(e,i)}catch(i){await Wh(e,i)}TE(e)&&wE(e)}function fI(t){return yl(t)&&t.Ta.length<10}function mI(t,e){t.Ta.push(e);const n=vi(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function TE(t){return yl(t)&&!vi(t).x_()&&t.Ta.length>0}function wE(t){vi(t).start()}async function pI(t){vi(t).ra()}async function gI(t){const e=vi(t);for(const n of t.Ta)e.ea(n.mutations)}async function xI(t,e,n){const r=t.Ta.shift(),i=Ox.from(r,e,n);await EE(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Vf(t)}async function yI(t,e){e&&vi(t).Y_&&await(async function(r,i){if((function(d){return Jk(d)&&d!==fe.ABORTED})(i.code)){const c=r.Ta.shift();vi(r).B_(),await EE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i))),await Vf(r)}})(t,e),TE(t)&&wE(t)}async function m_(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),Ee(dl,"RemoteStore received new credentials");const r=yl(n);n.Ea.add(3),await Ru(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Lf(n)}async function bI(t,e){const n=ze(t);e?(n.Ea.delete(2),await Lf(n)):e||(n.Ea.add(2),await Ru(n),n.Va.set("Unknown"))}function ko(t){return t.ma||(t.ma=(function(n,r,i){const c=ze(n);return c.sa(),new nI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(t.datastore,t.asyncQueue,{Zo:cI.bind(null,t),Yo:uI.bind(null,t),t_:dI.bind(null,t),J_:hI.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Gx(t)?$x(t):t.Va.set("Unknown")):(await t.ma.stop(),SE(t))}))),t.ma}function vi(t){return t.fa||(t.fa=(function(n,r,i){const c=ze(n);return c.sa(),new sI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:pI.bind(null,t),t_:yI.bind(null,t),ta:gI.bind(null,t),na:xI.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Vf(t)):(await t.fa.stop(),t.Ta.length>0&&(Ee(dl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Kx{constructor(e,n,r,i,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=c,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,c){const d=Date.now()+r,m=new Kx(e,n,d,i,c);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yx(t,e){if(Na("AsyncQueue",`${e}: ${t}`),Ro(t))return new Ne(fe.UNAVAILABLE,`${e}: ${t}`);throw t}class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ie.comparator(n.key,r.key):(n,r)=>Ie.comparator(n.key,r.key),this.keyedMap=Bc(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,c=r.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class p_{constructor(){this.ga=new Bt(Ie.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class No{constructor(e,n,r,i,c,d,m,p,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,i,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new No(e,n,ho.emptySet(n),d,r,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class vI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class _I{constructor(){this.queries=g_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ze(n),c=i.queries;i.queries=g_(),c.forEach(((d,m)=>{for(const p of m.ba)p.onError(r)}))})(this,new Ne(fe.ABORTED,"Firestore shutting down"))}}function g_(){return new xl((t=>GS(t)),kf)}async function Qx(t,e){const n=ze(t);let r=3;const i=e.query;let c=n.queries.get(i);c?!c.Sa()&&e.Da()&&(r=2):(c=new vI,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(i,!0);break;case 1:c.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(d){const m=Yx(d,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(m)}n.queries.set(i,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Wx(n)}async function Xx(t,e){const n=ze(t),r=e.query;let i=3;const c=n.queries.get(r);if(c){const d=c.ba.indexOf(e);d>=0&&(c.ba.splice(d,1),c.ba.length===0?i=e.Da()?0:1:!c.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NI(t,e){const n=ze(t);let r=!1;for(const i of e){const c=i.query,d=n.queries.get(c);if(d){for(const m of d.ba)m.Fa(i)&&(r=!0);d.wa=i}}r&&Wx(n)}function SI(t,e,n){const r=ze(t),i=r.queries.get(e);if(i)for(const c of i.ba)c.onError(n);r.queries.delete(e)}function Wx(t){t.Ca.forEach((e=>{e.next()}))}var Yg,x_;(x_=Yg||(Yg={})).Ma="default",x_.Cache="cache";class Jx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new No(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yg.Cache}}class AE{constructor(e){this.key=e}}class jE{constructor(e){this.key=e}}class EI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=KS(e),this.tu=new ho(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new p_,i=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=i,m=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,b)=>{const N=i.get(y),k=If(this.query,b)?b:null,L=!!N&&this.mutatedKeys.has(N.key),M=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let I=!1;N&&k?N.data.isEqual(k.data)?L!==M&&(r.track({type:3,doc:k}),I=!0):this.su(N,k)||(r.track({type:2,doc:k}),I=!0,(p&&this.eu(k,p)>0||g&&this.eu(k,g)<0)&&(m=!0)):!N&&k?(r.track({type:0,doc:k}),I=!0):N&&!k&&(r.track({type:1,doc:N}),I=!0,(p||g)&&(m=!0)),I&&(k?(d=d.add(k),c=M?c.add(y):c.delete(y)):(d=d.delete(y),c=c.delete(y)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const y=this.query.limitType==="F"?d.last():d.first();d=d.delete(y.key),c=c.delete(y.key),r.track({type:1,doc:y})}return{tu:d,iu:r,Ss:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((y,b)=>(function(k,L){const M=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:I})}};return M(k)-M(L)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(r),i=i??!1;const m=n&&!i?this._u():[],p=this.Ya.size===0&&this.current&&!i?1:0,g=p!==this.Xa;return this.Xa=p,d.length!==0||g?{snapshot:new No(this.query,e.tu,c,d,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new p_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new jE(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new AE(r))})),n}cu(e){this.Za=e.ks,this.Ya=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zx="SyncEngine";class TI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wI{constructor(e){this.key=e,this.hu=!1}}class AI{constructor(e,n,r,i,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new xl((m=>GS(m)),kf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bt(Ie.comparator),this.Au=new Map,this.Vu=new Ux,this.du={},this.mu=new Map,this.fu=_o.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jI(t,e,n=!0){const r=ME(t);let i;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await CE(r,e,n,!0),i}async function CI(t,e){const n=ME(t);await CE(n,e,!0,!1)}async function CE(t,e,n,r){const i=await Y4(t.localStore,Lr(e)),c=i.targetId,d=t.sharedClientState.addLocalQueryTarget(c,n);let m;return r&&(m=await RI(t,e,c,d==="current",i.resumeToken)),t.isPrimaryClient&&n&&_E(t.remoteStore,i),m}async function RI(t,e,n,r,i){t.pu=(b,N,k)=>(async function(M,I,B,U){let K=I.view.ru(B);K.Ss&&(K=await c_(M.localStore,I.query,!1).then((({documents:C})=>I.view.ru(C,K))));const Y=U&&U.targetChanges.get(I.targetId),Q=U&&U.targetMismatches.get(I.targetId)!=null,$=I.view.applyChanges(K,M.isPrimaryClient,Y,Q);return b_(M,I.targetId,$.au),$.snapshot})(t,b,N,k);const c=await c_(t.localStore,e,!0),d=new EI(e,c.ks),m=d.ru(c.documents),p=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),g=d.applyChanges(m,t.isPrimaryClient,p);b_(t,n,g.au);const y=new TI(e,n,d);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),g.snapshot}async function kI(t,e,n){const r=ze(t),i=r.Tu.get(e),c=r.Iu.get(i.targetId);if(c.length>1)return r.Iu.set(i.targetId,c.filter((d=>!kf(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qx(r.remoteStore,i.targetId),Qg(r,i.targetId)})).catch(Co)):(Qg(r,i.targetId),await Gg(r.localStore,i.targetId,!0))}async function II(t,e){const n=ze(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qx(n.remoteStore,r.targetId))}async function DI(t,e,n){const r=zI(t);try{const i=await(function(d,m){const p=ze(d),g=Dt.now(),y=m.reduce(((k,L)=>k.add(L.key)),Je());let b,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let L=Sa(),M=Je();return p.xs.getEntries(k,y).next((I=>{L=I,L.forEach(((B,U)=>{U.isValidDocument()||(M=M.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(k,L))).next((I=>{b=I;const B=[];for(const U of m){const K=Kk(U,b.get(U.key).overlayedDocument);K!=null&&B.push(new ji(U.key,K,VS(K.value.mapValue),lr.exists(!0)))}return p.mutationQueue.addMutationBatch(k,g,B,m)})).next((I=>{N=I;const B=I.applyToLocalDocumentSet(b,M);return p.documentOverlayCache.saveOverlays(k,I.batchId,B)}))})).then((()=>({batchId:N.batchId,changes:QS(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(d,m,p){let g=d.du[d.currentUser.toKey()];g||(g=new Bt(We)),g=g.insert(m,p),d.du[d.currentUser.toKey()]=g})(r,i.batchId,n),await ku(r,i.changes),await Vf(r.remoteStore)}catch(i){const c=Yx(i,"Failed to persist write");n.reject(c)}}async function RE(t,e){const n=ze(t);try{const r=await $4(n.localStore,e);e.targetChanges.forEach(((i,c)=>{const d=n.Au.get(c);d&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?d.hu=!0:i.modifiedDocuments.size>0?pt(d.hu,14607):i.removedDocuments.size>0&&(pt(d.hu,42227),d.hu=!1))})),await ku(n,r,e)}catch(r){await Co(r)}}function y_(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&i.push(m.snapshot)})),(function(d,m){const p=ze(d);p.onlineState=m;let g=!1;p.queries.forEach(((y,b)=>{for(const N of b.ba)N.va(m)&&(g=!0)})),g&&Wx(p)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MI(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),c=i&&i.key;if(c){let d=new Bt(Ie.comparator);d=d.insert(c,$n.newNoDocument(c,Ve.min()));const m=Je().add(c),p=new Pf(Ve.min(),new Map,new Bt(We),d,m);await RE(r,p),r.Ru=r.Ru.remove(c),r.Au.delete(e),ey(r)}else await Gg(r.localStore,e,!1).then((()=>Qg(r,e,n))).catch(Co)}async function PI(t,e){const n=ze(t),r=e.batch.batchId;try{const i=await H4(n.localStore,e);IE(n,r,null),kE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ku(n,i)}catch(i){await Co(i)}}async function OI(t,e,n){const r=ze(t);try{const i=await(function(d,m){const p=ze(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return p.mutationQueue.lookupMutationBatch(g,m).next((b=>(pt(b!==null,37113),y=b.keys(),p.mutationQueue.removeMutationBatch(g,b)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>p.localDocuments.getDocuments(g,y)))}))})(r.localStore,e);IE(r,e,n),kE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ku(r,i)}catch(i){await Co(i)}}function kE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function IE(t,e,n){const r=ze(t);let i=r.du[r.currentUser.toKey()];if(i){const c=i.get(e);c&&(n?c.reject(n):c.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Qg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||DE(t,r)}))}function DE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(qx(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),ey(t))}function b_(t,e,n){for(const r of n)r instanceof AE?(t.Vu.addReference(r.key,e),LI(t,r)):r instanceof jE?(Ee(Zx,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||DE(t,r.key)):Pe(19791,{wu:r})}function LI(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ee(Zx,"New document in limbo: "+n),t.Eu.add(r),ey(t))}function ey(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ie(It.fromString(e)),r=t.fu.next();t.Au.set(r,new wI(n)),t.Ru=t.Ru.insert(n,r),_E(t.remoteStore,new oi(Lr(Rf(n.path)),r,"TargetPurposeLimboResolution",Af.ce))}}async function ku(t,e,n){const r=ze(t),i=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{d.push(r.pu(p,e,n).then((g=>{if((g||n)&&r.isPrimaryClient){const y=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,y?"current":"not-current")}if(g){i.push(g);const y=Fx.Es(p.targetId,g);c.push(y)}})))})),await Promise.all(d),r.Pu.J_(i),await(async function(p,g){const y=ze(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>me.forEach(g,(N=>me.forEach(N.Ts,(k=>y.persistence.referenceDelegate.addReference(b,N.targetId,k))).next((()=>me.forEach(N.Is,(k=>y.persistence.referenceDelegate.removeReference(b,N.targetId,k)))))))))}catch(b){if(!Ro(b))throw b;Ee(Bx,"Failed to update sequence numbers: "+b)}for(const b of g){const N=b.targetId;if(!b.fromCache){const k=y.vs.get(N),L=k.snapshotVersion,M=k.withLastLimboFreeSnapshotVersion(L);y.vs=y.vs.insert(N,M)}}})(r.localStore,c))}async function VI(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){Ee(Zx,"User change. New user:",e.toKey());const r=await xE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new Ne(fe.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(n,r.Ns)}}function UI(t,e){const n=ze(t),r=n.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const c=n.Iu.get(e);if(!c)return i;for(const d of c){const m=n.Tu.get(d);i=i.unionWith(m.view.nu)}return i}}function ME(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MI.bind(null,e),e.Pu.J_=NI.bind(null,e.eventManager),e.Pu.yu=SI.bind(null,e.eventManager),e}function zI(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OI.bind(null,e),e}class Jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return q4(this.persistence,new z4,e.initialUser,this.serializer)}Cu(e){return new gE(zx.Vi,this.serializer)}Du(e){return new X4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jh.provider={build:()=>new Jh};class FI extends Jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pt(this.persistence.referenceDelegate instanceof Xh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new T4(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ds.withCacheSize(this.cacheSizeBytes):ds.DEFAULT;return new gE((r=>Xh.Vi(r,n)),this.serializer)}}class Xg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>y_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VI.bind(null,this.syncEngine),await bI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _I})()}createDatastore(e){const n=Of(e.databaseInfo.databaseId),r=tI(e.databaseInfo);return iI(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,c,d,m){return new oI(r,i,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>y_(this.syncEngine,n,0)),(function(){return h_.v()?new h_:new W4})())}createSyncEngine(e,n){return(function(i,c,d,m,p,g,y){const b=new AI(i,c,d,m,p,g);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ze(n);Ee(dl,"RemoteStore shutting down."),r.Ea.add(5),await Ru(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xg.provider={build:()=>new Xg};class ty{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Na("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const _i="FirestoreClient";class BI{constructor(e,n,r,i,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=Hn.UNAUTHENTICATED,this.clientId=jx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{Ee(_i,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(Ee(_i,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yx(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function fg(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(_i,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await xE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function v_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qI(t);Ee(_i,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>m_(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>m_(e.remoteStore,i))),t._onlineComponents=e}async function qI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(_i,"Using user provided OfflineComponentProvider");try{await fg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===fe.FAILED_PRECONDITION||i.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await fg(t,new Jh)}}else Ee(_i,"Using default OfflineComponentProvider"),await fg(t,new FI(void 0));return t._offlineComponents}async function PE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(_i,"Using user provided OnlineComponentProvider"),await v_(t,t._uninitializedComponentsProvider._online)):(Ee(_i,"Using default OnlineComponentProvider"),await v_(t,new Xg))),t._onlineComponents}function HI(t){return PE(t).then((e=>e.syncEngine))}async function Zh(t){const e=await PE(t),n=e.eventManager;return n.onListen=jI.bind(null,e.syncEngine),n.onUnlisten=kI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=II.bind(null,e.syncEngine),n}function $I(t,e,n,r){const i=new ty(r),c=new Jx(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>Qx(await Zh(t),c))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>Xx(await Zh(t),c)))}}function GI(t,e,n={}){const r=new ba;return t.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,g){const y=new ty({next:N=>{y.Nu(),d.enqueueAndForget((()=>Xx(c,b)));const k=N.docs.has(m);!k&&N.fromCache?g.reject(new Ne(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&N.fromCache&&p&&p.source==="server"?g.reject(new Ne(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(N)},error:N=>g.reject(N)}),b=new Jx(Rf(m.path),y,{includeMetadataChanges:!0,Ka:!0});return Qx(c,b)})(await Zh(t),t.asyncQueue,e,n,r))),r.promise}function KI(t,e,n={}){const r=new ba;return t.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,g){const y=new ty({next:N=>{y.Nu(),d.enqueueAndForget((()=>Xx(c,b))),N.fromCache&&p.source==="server"?g.reject(new Ne(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(N)},error:N=>g.reject(N)}),b=new Jx(m,y,{includeMetadataChanges:!0,Ka:!0});return Qx(c,b)})(await Zh(t),t.asyncQueue,e,n,r))),r.promise}function YI(t,e){const n=new ba;return t.asyncQueue.enqueueAndForget((async()=>DI(await HI(t),e,n))),n.promise}function OE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const QI="ComponentProvider",__=new Map;function XI(t,e,n,r,i){return new gk(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,OE(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const LE="firestore.googleapis.com",N_=!0;class S_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LE,this.ssl=N_}else this.host=e.host,this.ssl=e.ssl??N_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S4)throw new Ne(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new QR;switch(r.type){case"firstParty":return new ZR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=__.get(n);r&&(Ee(QI,"Removing Datastore"),__.delete(n),r.terminate())})(this),Promise.resolve()}}function WI(t,e,n,r={}){t=Cs(t,Uf);const i=wi(e),c=t._getSettings(),d={...c,emulatorOptions:t._getEmulatorOptions()},m=`${e}:${n}`;i&&(Nx(`https://${m}`),Sx("Firestore",!0)),c.host!==LE&&c.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:i,emulatorOptions:r};if(!ol(p,d)&&(t._setSettings(p),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Hn.MOCK_USER;else{g=fS(r.mockUserToken,t._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Ne(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Hn(b)}t._authCredentials=new XR(new wS(g,y))}}class bl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bl(this.firestore,e,this._query)}}class $t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(wu(n,$t._jsonSchema))return new $t(e,r||null,new Ie(It.fromString(n.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:fn("string",$t._jsonSchemaVersion),referencePath:fn("string")};class fi extends bl{constructor(e,n,r){super(e,n,Rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new Ie(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function jh(t,e,...n){if(t=Ft(t),AS("collection","path",e),t instanceof Uf){const r=It.fromString(e,...n);return O1(r),new fi(t,null,r)}{if(!(t instanceof $t||t instanceof fi))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return O1(r),new fi(t.firestore,null,r)}}function Dn(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=jx.newId()),AS("doc","path",e),t instanceof Uf){const r=It.fromString(e,...n);return P1(r),new $t(t,null,new Ie(r))}{if(!(t instanceof $t||t instanceof fi))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return P1(r),new $t(t.firestore,t instanceof fi?t.converter:null,new Ie(r))}}const E_="AsyncQueue";class T_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bE(this,"async_queue_retry"),this._c=()=>{const r=hg();r&&Ee(E_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=hg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ro(e))throw e;Ee(E_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Na("INTERNAL UNHANDLED ERROR: ",w_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Kx.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(i),i}uc(){this.nc&&Pe(47125,{Pc:w_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function w_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ni extends Uf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new T_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T_(e),this._firestoreClient=void 0,await e}}}function JI(t,e){const n=typeof t=="object"?t:wx(),r=typeof t=="string"?t:qh,i=Tf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const c=uS("firestore");c&&WI(i,...c)}return i}function zf(t){if(t._terminated)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZI(t),t._firestoreClient}function ZI(t){const e=t._freezeSettings(),n=XI(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new BI(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const c=i?._online.build();return{_offline:i?._offline.build(c),_online:c}})(t._componentsProvider))}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(On.fromBase64String(e))}catch(n){throw new Ne(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wu(e,Ks._jsonSchema))return Ks.fromBase64String(e.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:fn("string",Ks._jsonSchemaVersion),bytes:fn("string")};class ny{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sy{constructor(e){this._methodName=e}}class Ur{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ur._jsonSchemaVersion}}static fromJSON(e){if(wu(e,Ur._jsonSchema))return new Ur(e.latitude,e.longitude)}}Ur._jsonSchemaVersion="firestore/geoPoint/1.0",Ur._jsonSchema={type:fn("string",Ur._jsonSchemaVersion),latitude:fn("number"),longitude:fn("number")};class or{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==i[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wu(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new or(e.vectorValues);throw new Ne(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:fn("string",or._jsonSchemaVersion),vectorValues:fn("object")};const e3=/^__.*__$/;class t3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class VE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{dataSource:t})}}class ry{constructor(e,n,r,i,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ry({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ef(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(UE(this.dataSource)&&e3.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class n3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Of(e)}createContext(e,n,r,i=!1){return new ry({dataSource:e,methodName:n,targetDoc:r,path:Pn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ay(t){const e=t._freezeSettings(),n=Of(t._databaseId);return new n3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function s3(t,e,n,r,i,c={}){const d=t.createContext(c.merge||c.mergeFields?2:0,e,n,i);iy("Data must be an object, but it was:",d,r);const m=zE(r,d);let p,g;if(c.merge)p=new As(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const y=[];for(const b of c.mergeFields){const N=So(e,b,n);if(!d.contains(N))throw new Ne(fe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);qE(y,N)||y.push(N)}p=new As(y),g=d.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,g=d.fieldTransforms;return new t3(new hs(m),p,g)}class Ff extends sy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}function r3(t,e,n,r){const i=t.createContext(1,e,n);iy("Data must be an object, but it was:",i,r);const c=[],d=hs.empty();Ai(r,((p,g)=>{const y=BE(e,p,n);g=Ft(g);const b=i.childContextForFieldPath(y);if(g instanceof Ff)c.push(y);else{const N=Iu(g,b);N!=null&&(c.push(y),d.set(y,N))}}));const m=new As(c);return new VE(d,m,i.fieldTransforms)}function a3(t,e,n,r,i,c){const d=t.createContext(1,e,n),m=[So(e,r,n)],p=[i];if(c.length%2!=0)throw new Ne(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)m.push(So(e,c[N])),p.push(c[N+1]);const g=[],y=hs.empty();for(let N=m.length-1;N>=0;--N)if(!qE(g,m[N])){const k=m[N];let L=p[N];L=Ft(L);const M=d.childContextForFieldPath(k);if(L instanceof Ff)g.push(k);else{const I=Iu(L,M);I!=null&&(g.push(k),y.set(k,I))}}const b=new As(g);return new VE(y,b,d.fieldTransforms)}function i3(t,e,n,r=!1){return Iu(n,t.createContext(r?4:3,e))}function Iu(t,e){if(FE(t=Ft(t)))return iy("Unsupported field value:",e,t),zE(t,e);if(t instanceof sy)return(function(r,i){if(!UE(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(i);c&&i.fieldTransforms.push(c)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const c=[];let d=0;for(const m of r){let p=Iu(m,i.childContextForArray(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(t,e)}return(function(r,i){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Fk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Dt.fromDate(r);return{timestampValue:Qh(i.serializer,c)}}if(r instanceof Dt){const c=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qh(i.serializer,c)}}if(r instanceof Ur)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:lE(i.serializer,r._byteString)};if(r instanceof $t){const c=i.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw i.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof or)return(function(d,m){const p=d instanceof or?d.toArray():d;return{mapValue:{fields:{[OS]:{stringValue:LS},[Hh]:{arrayValue:{values:p.map((y=>{if(typeof y!="number")throw m.createError("VectorValues must only contain numeric values.");return Mx(m.serializer,y)}))}}}}}})(r,i);if(mE(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${wf(r)}`)})(t,e)}function zE(t,e){const n={};return RS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,((r,i)=>{const c=Iu(i,e.childContextForField(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function FE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof Ur||t instanceof Ks||t instanceof $t||t instanceof sy||t instanceof or||mE(t))}function iy(t,e,n){if(!FE(n)||!jS(n)){const r=wf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function So(t,e,n){if((e=Ft(e))instanceof ny)return e._internalPath;if(typeof e=="string")return BE(t,e);throw ef("Field path arguments must be of type string or ",t,!1,void 0,n)}const l3=new RegExp("[~\\*/\\[\\]]");function BE(t,e,n){if(e.search(l3)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ny(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ef(t,e,n,r,i){const c=r&&!r.isEmpty(),d=i!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${r}`),d&&(p+=` in document ${i}`),p+=")"),new Ne(fe.INVALID_ARGUMENT,m+t+p)}function qE(t,e){return t.some((n=>n.isEqual(e)))}class o3{convertValue(e,n="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ai(e,((i,c)=>{r[i]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[Hh].arrayValue?.values?.map((r=>Jt(r.doubleValue)));return new or(n)}convertGeoPoint(e){return new Ur(Jt(e.latitude),Jt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=xi(e);return new Dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);pt(fE(r),9688,{name:e});const i=new lu(r.get(1),r.get(3)),c=new Ie(r.popFirst(5));return i.isEqual(n)||Na(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class ly extends o3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}const A_="@firebase/firestore",j_="4.10.0";function C_(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const c of r)if(c in i&&typeof i[c]=="function")return!0;return!1})(t,["next","error","complete"])}class HE{constructor(e,n,r,i,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(So("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c3 extends HE{data(){return super.data()}}function $E(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ne(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class u3 extends oy{}function Wg(t,e,...n){let r=[];e instanceof oy&&r.push(e),r=r.concat(n),(function(c){const d=c.filter((p=>p instanceof cy)).length,m=c.filter((p=>p instanceof Bf)).length;if(d>1||d>0&&m>0)throw new Ne(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Bf extends u3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=this._parse(e);return GE(e._query,n),new bl(e.firestore,e.converter,zg(e._query,n))}_parse(e){const n=ay(e.firestore);return(function(c,d,m,p,g,y,b){let N;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){k_(b,y);const L=[];for(const M of b)L.push(R_(p,c,M));N={arrayValue:{values:L}}}else N=R_(p,c,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||k_(b,y),N=i3(m,d,b,y==="in"||y==="not-in");return hn.create(g,y,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jg(t,e,n){const r=e,i=So("where",t);return Bf._create(i,r,n)}class cy extends oy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cy(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:dr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,c){let d=i;const m=c.getFlattenedFilters();for(const p of m)GE(d,p),d=zg(d,p)})(e._query,n),new bl(e.firestore,e.converter,zg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function R_(t,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$S(e)&&n.indexOf("/")!==-1)throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!Ie.isDocumentKey(r))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return H1(t,new Ie(r))}if(n instanceof $t)return H1(t,n._key);throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(n)}.`)}function k_(t,e){if(!Array.isArray(t)||t.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GE(t,e){const n=(function(i,c){for(const d of i)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function d3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class al extends HE{constructor(e,n,r,i,c,d){super(e,n,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(So("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=al._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}al._jsonSchemaVersion="firestore/documentSnapshot/1.0",al._jsonSchema={type:fn("string",al._jsonSchemaVersion),bundleSource:fn("string","DocumentSnapshot"),bundleName:fn("string"),bundle:fn("string")};class Ch extends al{data(e={}){return super.data(e)}}class il{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Hc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ch(this._firestore,this._userDataWriter,r.key,r,new Hc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,c){if(i._snapshot.oldDocs.isEmpty()){let d=0;return i._snapshot.docChanges.map((m=>{const p=new Ch(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Hc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new Ch(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Hc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,y=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),y=d.indexOf(m.doc.key)),{type:h3(m.type),doc:p,oldIndex:g,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}il._jsonSchemaVersion="firestore/querySnapshot/1.0",il._jsonSchema={type:fn("string",il._jsonSchemaVersion),bundleSource:fn("string","QuerySnapshot"),bundleName:fn("string"),bundle:fn("string")};function f3(t){t=Cs(t,$t);const e=Cs(t.firestore,Ni),n=zf(e);return GI(n,t._key).then((r=>YE(e,t,r)))}function Zg(t){t=Cs(t,bl);const e=Cs(t.firestore,Ni),n=zf(e),r=new ly(e);return $E(t._query),KI(n,t._query).then((i=>new il(e,r,t,i)))}function ha(t,e,n){t=Cs(t,$t);const r=Cs(t.firestore,Ni),i=d3(t.converter,e),c=ay(r);return uy(r,[s3(c,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,lr.none())])}function I_(t,e,n,...r){t=Cs(t,$t);const i=Cs(t.firestore,Ni),c=ay(i);let d;return d=typeof(e=Ft(e))=="string"||e instanceof ny?a3(c,"updateDoc",t._key,e,n,r):r3(c,"updateDoc",t._key,e),uy(i,[d.toMutation(t._key,lr.exists(!0))])}function KE(t){return uy(Cs(t.firestore,Ni),[new Px(t._key,lr.none())])}function Rh(t,...e){t=Ft(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||C_(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(C_(e[r])){const g=e[r];e[r]=g.next?.bind(g),e[r+1]=g.error?.bind(g),e[r+2]=g.complete?.bind(g)}let c,d,m;if(t instanceof $t)d=Cs(t.firestore,Ni),m=Rf(t._key.path),c={next:g=>{e[r]&&e[r](YE(d,t,g))},error:e[r+1],complete:e[r+2]};else{const g=Cs(t,bl);d=Cs(g.firestore,Ni),m=g._query;const y=new ly(d);c={next:b=>{e[r]&&e[r](new il(d,y,g,b))},error:e[r+1],complete:e[r+2]},$E(t._query)}const p=zf(d);return $I(p,m,i,c)}function uy(t,e){const n=zf(t);return YI(n,e)}function YE(t,e,n){const r=n.docs.get(e._key),i=new ly(t);return new al(t,i,e._key,r,new Hc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){YR(gl),cl(new pi("firestore",((r,{instanceIdentifier:i,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new Ni(new WR(r.getProvider("auth-internal")),new ek(d,r.getProvider("app-check-internal")),xk(d,i),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Or(A_,j_,e),Or(A_,j_,"esm2020")})();var m3="firebase",p3="12.8.0";Or(m3,p3,"app");function QE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g3=QE,XE=new Eu("auth","Firebase",QE());const tf=new Ex("@firebase/auth");function x3(t,...e){tf.logLevel<=Xe.WARN&&tf.warn(`Auth (${gl}): ${t}`,...e)}function kh(t,...e){tf.logLevel<=Xe.ERROR&&tf.error(`Auth (${gl}): ${t}`,...e)}function Br(t,...e){throw hy(t,...e)}function cr(t,...e){return hy(t,...e)}function dy(t,e,n){const r={...g3(),[e]:n};return new Eu("auth","Firebase",r).create(e,{appName:t.name})}function mi(t){return dy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Br(t,"argument-error"),dy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XE.create(t,...e)}function Oe(t,e,...n){if(!t)throw hy(e,...n)}function pa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kh(e),new Error(e)}function Ea(t,e){t||pa(e)}function ex(){return typeof self<"u"&&self.location?.href||""}function b3(){return D_()==="http:"||D_()==="https:"}function D_(){return typeof self<"u"&&self.location?.protocol||null}function v3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b3()||AC()||"connection"in navigator)?navigator.onLine:!0}function _3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Du{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ea(n>e,"Short delay should be less than long delay!"),this.isMobile=EC()||jC()}get(){return v3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fy(t,e){Ea(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class WE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const S3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E3=new Du(3e4,6e4);function qf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Io(t,e,n,r,i={}){return JE(t,i,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const m=Tu({key:t.config.apiKey,...d}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const g={method:e,headers:p,...c};return wC()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&wi(t.emulatorConfig.host)&&(g.credentials="include"),WE.fetch()(await eT(t,t.config.apiHost,n,m),g)})}async function JE(t,e,n){t._canInitEmulator=!1;const r={...N3,...e};try{const i=new T3(t),c=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw mh(t,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(t,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw mh(t,"email-already-in-use",d);if(p==="USER_DISABLED")throw mh(t,"user-disabled",d);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw dy(t,y,g);Br(t,y)}}catch(i){if(i instanceof qr)throw i;Br(t,"network-request-failed",{message:String(i)})}}async function ZE(t,e,n,r,i={}){const c=await Io(t,e,n,r,i);return"mfaPendingCredential"in c&&Br(t,"multi-factor-auth-required",{_serverResponse:c}),c}async function eT(t,e,n,r){const i=`${e}${n}?${r}`,c=t,d=c.config.emulator?fy(t.config,i):`${t.config.apiScheme}://${i}`;return S3.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class T3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cr(this.auth,"network-request-failed")),E3.get())})}}function mh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cr(t,e,r);return i.customData._tokenResponse=n,i}async function w3(t,e){return Io(t,"POST","/v1/accounts:delete",e)}async function nf(t,e){return Io(t,"POST","/v1/accounts:lookup",e)}function Xc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A3(t,e=!1){const n=Ft(t),r=await n.getIdToken(e),i=my(r);Oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,d=c?.sign_in_provider;return{claims:i,token:r,authTime:Xc(mg(i.auth_time)),issuedAtTime:Xc(mg(i.iat)),expirationTime:Xc(mg(i.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function mg(t){return Number(t)*1e3}function my(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{const i=oS(n);return i?JSON.parse(i):(kh("Failed to decode base64 JWT payload"),null)}catch(i){return kh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function M_(t){const e=my(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function du(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qr&&j3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function j3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class C3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sf(t){const e=t.auth,n=await t.getIdToken(),r=await du(t,nf(e,{idToken:n}));Oe(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const c=i.providerUserInfo?.length?tT(i.providerUserInfo):[],d=k3(t.providerData,c),m=t.isAnonymous,p=!(t.email&&i.passwordHash)&&!d?.length,g=m?p:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new tx(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function R3(t){const e=Ft(t);await sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function I3(t,e){const n=await JE(t,{},async()=>{const r=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=t.config,d=await eT(t,i,"/v1/token",`key=${c}`),m=await t._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return t.emulatorConfig&&wi(t.emulatorConfig.host)&&(p.credentials="include"),WE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D3(t,e){return Io(t,"POST","/v2/accounts:revokeToken",qf(t,e))}class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=M_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:c}=await I3(e,n);this.updateTokensAndExpiration(r,i,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:c}=n,d=new fo;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),d.accessToken=i),c&&(Oe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return pa("not implemented")}}function ni(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ar{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new C3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new tx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await du(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A3(this,e)}reload(){return R3(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ws(this.auth.app))return Promise.reject(mi(this.auth));const e=await this.getIdToken();return await du(this,w3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:b,emailVerified:N,isAnonymous:k,providerData:L,stsTokenManager:M}=n;Oe(b&&M,e,"internal-error");const I=fo.fromJSON(this.name,M);Oe(typeof b=="string",e,"internal-error"),ni(r,e.name),ni(i,e.name),Oe(typeof N=="boolean",e,"internal-error"),Oe(typeof k=="boolean",e,"internal-error"),ni(c,e.name),ni(d,e.name),ni(m,e.name),ni(p,e.name),ni(g,e.name),ni(y,e.name);const B=new ar({uid:b,auth:e,email:i,emailVerified:N,displayName:r,isAnonymous:k,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:I,createdAt:g,lastLoginAt:y});return L&&Array.isArray(L)&&(B.providerData=L.map(U=>({...U}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,n,r=!1){const i=new fo;i.updateFromServerResponse(n);const c=new ar({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sf(c),c}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Oe(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?tT(i.providerUserInfo):[],d=!(i.email&&i.passwordHash)&&!c?.length,m=new fo;m.updateFromIdToken(r);const p=new ar({uid:i.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new tx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(p,g),p}}const P_=new Map;function ga(t){Ea(t instanceof Function,"Expected a class definition");let e=P_.get(t);return e?(Ea(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,P_.set(t,e),e)}class nT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nT.type="NONE";const O_=nT;function Ih(t,e,n){return`firebase:${t}:${e}:${n}`}class mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:c}=this.auth;this.fullUserKey=Ih(this.userKey,i.apiKey,c),this.fullPersistenceKey=Ih("persistence",i.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nf(this.auth,{idToken:e}).catch(()=>{});return n?ar._fromGetAccountInfoResponse(this.auth,n,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mo(ga(O_),e,r);const i=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=i[0]||ga(O_);const d=Ih(r,e.config.apiKey,e.name);let m=null;for(const g of n)try{const y=await g._get(d);if(y){let b;if(typeof y=="string"){const N=await nf(e,{idToken:y}).catch(()=>{});if(!N)break;b=await ar._fromGetAccountInfoResponse(e,N,y)}else b=ar._fromJSON(e,y);g!==c&&(m=b),c=g;break}}catch{}const p=i.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new mo(c,e,r):(c=p[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new mo(c,e,r))}}function L_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oT(e))return"Blackberry";if(cT(e))return"Webos";if(rT(e))return"Safari";if((e.includes("chrome/")||aT(e))&&!e.includes("edge/"))return"Chrome";if(lT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function sT(t=Gn()){return/firefox\//i.test(t)}function rT(t=Gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aT(t=Gn()){return/crios\//i.test(t)}function iT(t=Gn()){return/iemobile/i.test(t)}function lT(t=Gn()){return/android/i.test(t)}function oT(t=Gn()){return/blackberry/i.test(t)}function cT(t=Gn()){return/webos/i.test(t)}function py(t=Gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M3(t=Gn()){return py(t)&&!!window.navigator?.standalone}function P3(){return CC()&&document.documentMode===10}function uT(t=Gn()){return py(t)||lT(t)||cT(t)||oT(t)||/windows phone/i.test(t)||iT(t)}function dT(t,e=[]){let n;switch(t){case"Browser":n=L_(Gn());break;case"Worker":n=`${L_(Gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gl}/${r}`}class O3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((d,m)=>{try{const p=e(c);d(p)}catch(p){m(p)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function L3(t,e={}){return Io(t,"GET","/v2/passwordPolicy",qf(t,e))}const V3=6;class U3{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??V3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class z3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V_(this),this.idTokenSubscription=new V_(this),this.beforeStateQueue=new O3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ga(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nf(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ws(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ws(this.app))return Promise.reject(mi(this));const n=e?Ft(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ws(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ws(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ga(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L3(this),n=new U3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Eu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await D3(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ga(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[ga(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,i);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ws(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&x3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Mu(t){return Ft(t)}class V_{constructor(e){this.auth=e,this.observer=null,this.addObserver=LC(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F3(t){gy=t}function B3(t){return gy.loadJS(t)}function q3(){return gy.gapiScript}function H3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function $3(t,e){const n=Tf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),c=n.getOptions();if(ol(c,e??{}))return i;Br(i,"already-initialized")}return n.initialize({options:e})}function G3(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ga);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function K3(t,e,n){const r=Mu(t);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,c=hT(e),{host:d,port:m}=Y3(e),p=m===null?"":`:${m}`,g={url:`${c}//${d}${p}/`},y=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(ol(g,r.config.emulator)&&ol(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,wi(d)?(Nx(`${c}//${d}${p}`),Sx("Auth",!0)):Q3()}function hT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y3(t){const e=hT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const c=i[1];return{host:c,port:U_(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:U_(d)}}}function U_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class fT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pa("not implemented")}_getIdTokenResponse(e){return pa("not implemented")}_linkToIdToken(e,n){return pa("not implemented")}_getReauthenticationResolver(e){return pa("not implemented")}}async function po(t,e){return ZE(t,"POST","/v1/accounts:signInWithIdp",qf(t,e))}const X3="http://localhost";class hl extends fT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...c}=n;if(!r||!i)return null;const d=new hl(r,i);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return po(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,po(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,po(e,n)}buildRequest(){const e={requestUri:X3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tu(n)}return e}}class xy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Pu extends xy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ri extends Pu{constructor(){super("facebook.com")}static credential(e){return hl._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";ri.PROVIDER_ID="facebook.com";class ma extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hl._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ma.credential(n,r)}catch{return null}}}ma.GOOGLE_SIGN_IN_METHOD="google.com";ma.PROVIDER_ID="google.com";class ai extends Pu{constructor(){super("github.com")}static credential(e){return hl._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.GITHUB_SIGN_IN_METHOD="github.com";ai.PROVIDER_ID="github.com";class ii extends Pu{constructor(){super("twitter.com")}static credential(e,n){return hl._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";async function W3(t,e){return ZE(t,"POST","/v1/accounts:signUp",qf(t,e))}class Si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const c=await ar._fromIdTokenResponse(e,r,i),d=z_(r);return new Si({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=z_(r);return new Si({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function z_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function J3(t){if(ws(t.app))return Promise.reject(mi(t));const e=Mu(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Si({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await W3(e,{returnSecureToken:!0}),r=await Si._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class rf extends qr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new rf(e,n,r,i)}}function mT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?rf._fromErrorAndOperation(t,c,e,r):c})}async function Z3(t,e,n=!1){const r=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Si._forOperation(t,"link",r)}async function eD(t,e,n=!1){const{auth:r}=t;if(ws(r.app))return Promise.reject(mi(r));const i="reauthenticate";try{const c=await du(t,mT(r,i,e,t),n);Oe(c.idToken,r,"internal-error");const d=my(c.idToken);Oe(d,r,"internal-error");const{sub:m}=d;return Oe(t.uid===m,r,"user-mismatch"),Si._forOperation(t,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&Br(r,"user-mismatch"),c}}async function tD(t,e,n=!1){if(ws(t.app))return Promise.reject(mi(t));const r="signIn",i=await mT(t,r,e),c=await Si._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(c.user),c}function nD(t,e,n,r){return Ft(t).onIdTokenChanged(e,n,r)}function sD(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function rD(t,e,n,r){return Ft(t).onAuthStateChanged(e,n,r)}function aD(t){return Ft(t).signOut()}const af="__sak";class pT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(af,"1"),this.storage.removeItem(af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const iD=1e3,lD=10;class gT extends pT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);P3()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,lD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gT.type="LOCAL";const oD=gT;class xT extends pT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xT.type="SESSION";const yT=xT;function cD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Hf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:c}=n.data,d=this.handlersMap[i];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const m=Array.from(d).map(async g=>g(n.origin,c)),p=await cD(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];function yy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class uD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,d;return new Promise((m,p)=>{const g=yy("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);d={messageChannel:i,onMessage(b){const N=b;if(N.data.eventId===g)switch(N.data.status){case"ack":clearTimeout(y),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(N.data.response);break;default:clearTimeout(y),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),i.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[i.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function zr(){return window}function dD(t){zr().location.href=t}function bT(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function hD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fD(){return navigator?.serviceWorker?.controller||null}function mD(){return bT()?self:null}const vT="firebaseLocalStorageDb",pD=1,lf="firebaseLocalStorage",_T="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $f(t,e){return t.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function gD(){const t=indexedDB.deleteDatabase(vT);return new Ou(t).toPromise()}function nx(){const t=indexedDB.open(vT,pD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lf,{keyPath:_T})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lf)?e(r):(r.close(),await gD(),e(await nx()))})})}async function F_(t,e,n){const r=$f(t,!0).put({[_T]:e,value:n});return new Ou(r).toPromise()}async function xD(t,e){const n=$f(t,!1).get(e),r=await new Ou(n).toPromise();return r===void 0?null:r.value}function B_(t,e){const n=$f(t,!0).delete(e);return new Ou(n).toPromise()}const yD=800,bD=3;class NT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(mD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hD(),!this.activeServiceWorker)return;this.sender=new uD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nx();return await F_(e,af,"1"),await B_(e,af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>F_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=$f(i,!1).getAll();return new Ou(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NT.type="LOCAL";const vD=NT;new Du(3e4,6e4);function ST(t,e){return e?ga(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class by extends fT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,n){return po(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _D(t){return tD(t.auth,new by(t),t.bypassAuthState)}function ND(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),eD(n,new by(t),t.bypassAuthState)}async function SD(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),Z3(n,new by(t),t.bypassAuthState)}class ET{constructor(e,n,r,i,c=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _D;case"linkViaPopup":case"linkViaRedirect":return SD;case"reauthViaPopup":case"reauthViaRedirect":return ND;default:Br(this.auth,"internal-error")}}resolve(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ED=new Du(2e3,1e4);async function TD(t,e,n){if(ws(t.app))return Promise.reject(cr(t,"operation-not-supported-in-this-environment"));const r=Mu(t);y3(t,e,xy);const i=ST(r,n);return new rl(r,"signInViaPopup",e,i).executeNotNull()}class rl extends ET{constructor(e,n,r,i,c){super(e,n,i,c),this.provider=r,this.authWindow=null,this.pollId=null,rl.currentPopupAction&&rl.currentPopupAction.cancel(),rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Ea(this.filter.length===1,"Popup operations only handle one event");const e=yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ED.get())};e()}}rl.currentPopupAction=null;const wD="pendingRedirect",Dh=new Map;class AD extends ET{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dh.get(this.auth._key());if(!e){try{const r=await jD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dh.set(this.auth._key(),e)}return this.bypassAuthState||Dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jD(t,e){const n=kD(e),r=RD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function CD(t,e){Dh.set(t._key(),e)}function RD(t){return ga(t._redirectPersistence)}function kD(t){return Ih(wD,t.config.apiKey,t.name)}async function ID(t,e,n=!1){if(ws(t.app))return Promise.reject(mi(t));const r=Mu(t),i=ST(r,e),d=await new AD(r,i,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const DD=600*1e3;class MD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!TT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(cr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DD&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(e))}saveEventToCache(e){this.cachedEventUids.add(q_(e)),this.lastProcessedEventTime=Date.now()}}function q_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TT({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function PD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TT(t);default:return!1}}async function OD(t,e={}){return Io(t,"GET","/v1/projects",e)}const LD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VD=/^https?/;async function UD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OD(t);for(const n of e)try{if(zD(n))return}catch{}Br(t,"unauthorized-domain")}function zD(t){const e=ex(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!VD.test(n))return!1;if(LD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const FD=new Du(3e4,6e4);function H_(){const t=zr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BD(t){return new Promise((e,n)=>{function r(){H_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H_(),n(cr(t,"network-request-failed"))},timeout:FD.get()})}if(zr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(zr().gapi?.load)r();else{const i=H3("iframefcb");return zr()[i]=()=>{gapi.load?r():n(cr(t,"network-request-failed"))},B3(`${q3()}?onload=${i}`).catch(c=>n(c))}}).catch(e=>{throw Mh=null,e})}let Mh=null;function qD(t){return Mh=Mh||BD(t),Mh}const HD=new Du(5e3,15e3),$D="__/auth/iframe",GD="emulator/auth/iframe",KD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QD(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fy(e,GD):`https://${t.config.authDomain}/${$D}`,r={apiKey:e.apiKey,appName:t.name,v:gl},i=YD.get(t.config.apiHost);i&&(r.eid=i);const c=t._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Tu(r).slice(1)}`}async function XD(t){const e=await qD(t),n=zr().gapi;return Oe(n,t,"internal-error"),e.open({where:document.body,url:QD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KD,dontclear:!0},r=>new Promise(async(i,c)=>{await r.restyle({setHideOnLeave:!1});const d=cr(t,"network-request-failed"),m=zr().setTimeout(()=>{c(d)},HD.get());function p(){zr().clearTimeout(m),i(r)}r.ping(p).then(p,()=>{c(d)})}))}const WD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JD=500,ZD=600,eM="_blank",tM="http://localhost";class $_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nM(t,e,n,r=JD,i=ZD){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...WD,width:r.toString(),height:i.toString(),top:c,left:d},g=Gn().toLowerCase();n&&(m=aT(g)?eM:n),sT(g)&&(e=e||tM,p.scrollbars="yes");const y=Object.entries(p).reduce((N,[k,L])=>`${N}${k}=${L},`,"");if(M3(g)&&m!=="_self")return sM(e||"",m),new $_(null);const b=window.open(e||"",m,y);Oe(b,t,"popup-blocked");try{b.focus()}catch{}return new $_(b)}function sM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const rM="__/auth/handler",aM="emulator/auth/handler",iM=encodeURIComponent("fac");async function G_(t,e,n,r,i,c){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gl,eventId:i};if(e instanceof xy){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",OC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))d[y]=b}if(e instanceof Pu){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(d.scopes=y.join(","))}t.tenantId&&(d.tid=t.tenantId);const m=d;for(const y of Object.keys(m))m[y]===void 0&&delete m[y];const p=await t._getAppCheckToken(),g=p?`#${iM}=${encodeURIComponent(p)}`:"";return`${lM(t)}?${Tu(m).slice(1)}${g}`}function lM({config:t}){return t.emulator?fy(t,aM):`https://${t.authDomain}/${rM}`}const pg="webStorageSupport";class oM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yT,this._completeRedirectFn=ID,this._overrideRedirectResult=CD}async _openPopup(e,n,r,i){Ea(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await G_(e,n,r,ex(),i);return nM(e,c,yy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const c=await G_(e,n,r,ex(),i);return dD(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:c}=this.eventManagers[n];return i?Promise.resolve(i):(Ea(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await XD(e),r=new MD(e);return n.register("authEvent",i=>(Oe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pg,{type:pg},i=>{const c=i?.[0]?.[pg];c!==void 0&&n(!!c),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uT()||rT()||py()}}const cM=oM;var K_="@firebase/auth",Y_="1.12.0";class uM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hM(t){cl(new pi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Oe(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:d,authDomain:m,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dT(t)},g=new z3(r,i,c,p);return G3(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cl(new pi("auth-internal",e=>{const n=Mu(e.getProvider("auth").getImmediate());return(r=>new uM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(K_,Y_,dM(t)),Or(K_,Y_,"esm2020")}const fM=300,mM=hS("authIdTokenMaxAge")||fM;let Q_=null;const pM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mM)return;const i=n?.token;Q_!==i&&(Q_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gM(t=wx()){const e=Tf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$3(t,{popupRedirectResolver:cM,persistence:[vD,oD,yT]}),r=hS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=pM(c.toString());sD(n,d,()=>d(n.currentUser)),nD(n,m=>d(m))}}const i=cS("auth");return i&&K3(n,`http://${i}`),n}function xM(){return document.getElementsByTagName("head")?.[0]??document}F3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const c=cr("internal-error");c.customData=i,n(c)},r.type="text/javascript",r.charset="UTF-8",xM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hM("Browser");const wT="firebasestorage.googleapis.com",AT="storageBucket",yM=120*1e3,bM=600*1e3;class Kt extends qr{constructor(e,n,r=0){super(gg(e),`Firebase Storage: ${n} (${gg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gt||(Gt={}));function gg(t){return"storage/"+t}function vy(){const t="An unknown error occurred, please check the error payload for server response.";return new Kt(Gt.UNKNOWN,t)}function vM(t){return new Kt(Gt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _M(t){return new Kt(Gt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function NM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Kt(Gt.UNAUTHENTICATED,t)}function SM(){return new Kt(Gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EM(t){return new Kt(Gt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TM(){return new Kt(Gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wM(){return new Kt(Gt.CANCELED,"User canceled the upload/download.")}function AM(t){return new Kt(Gt.INVALID_URL,"Invalid URL '"+t+"'.")}function jM(t){return new Kt(Gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function CM(){return new Kt(Gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+AT+"' property when initializing the app?")}function RM(){return new Kt(Gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kM(){return new Kt(Gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function IM(t){return new Kt(Gt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sx(t){return new Kt(Gt.INVALID_ARGUMENT,t)}function jT(){return new Kt(Gt.APP_DELETED,"The Firebase app was deleted.")}function DM(t){return new Kt(Gt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wc(t,e){return new Kt(Gt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uc(t){throw new Kt(Gt.INTERNAL_ERROR,"Internal error: "+t)}class js{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=js.makeFromUrl(e,n)}catch{return new js(e,"")}if(r.path==="")return r;throw jM(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function c(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+i+d,"i"),p={bucket:1,path:3};function g(Y){Y.path_=decodeURIComponent(Y.path)}const y="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",k=new RegExp(`^https?://${b}/${y}/b/${i}/o${N}`,"i"),L={bucket:1,path:3},M=n===wT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",B=new RegExp(`^https?://${M}/${i}/${I}`,"i"),K=[{regex:m,indices:p,postModify:c},{regex:k,indices:L,postModify:g},{regex:B,indices:{bucket:1,path:2},postModify:g}];for(let Y=0;Y<K.length;Y++){const Q=K[Y],$=Q.regex.exec(e);if($){const C=$[Q.indices.bucket];let E=$[Q.indices.path];E||(E=""),r=new js(C,E),Q.postModify(r);break}}if(r==null)throw AM(e);return r}}class MM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PM(t,e,n){let r=1,i=null,c=null,d=!1,m=0;function p(){return m===2}let g=!1;function y(...I){g||(g=!0,e.apply(null,I))}function b(I){i=setTimeout(()=>{i=null,t(k,p())},I)}function N(){c&&clearTimeout(c)}function k(I,...B){if(g){N();return}if(I){N(),y.call(null,I,...B);return}if(p()||d){N(),y.call(null,I,...B);return}r<64&&(r*=2);let K;m===1?(m=2,K=0):K=(r+Math.random())*1e3,b(K)}let L=!1;function M(I){L||(L=!0,N(),!g&&(i!==null?(I||(m=2),clearTimeout(i),b(0)):I||(m=1)))}return b(0),c=setTimeout(()=>{d=!0,M(!0)},n),M}function OM(t){t(!1)}function LM(t){return t!==void 0}function VM(t){return typeof t=="object"&&!Array.isArray(t)}function _y(t){return typeof t=="string"||t instanceof String}function X_(t){return Ny()&&t instanceof Blob}function Ny(){return typeof Blob<"u"}function W_(t,e,n,r){if(r<e)throw sx(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sx(`Invalid value for '${t}'. Expected ${n} or less.`)}function Gf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function CT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ll;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ll||(ll={}));function UM(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,c=e.indexOf(t)!==-1;return n||i||c}class zM{constructor(e,n,r,i,c,d,m,p,g,y,b,N=!0,k=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=b,this.retry=N,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,M)=>{this.resolve_=L,this.reject_=M,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ph(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const p=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===ll.NO_ERROR,p=c.getStatus();if(!m||UM(p,this.additionalRetryCodes_)&&this.retry){const y=c.getErrorCode()===ll.ABORT;r(!1,new ph(!1,null,y));return}const g=this.successCodes_.indexOf(p)!==-1;r(!0,new ph(g,c))})},n=(r,i)=>{const c=this.resolve_,d=this.reject_,m=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());LM(p)?c(p):c()}catch(p){d(p)}else if(m!==null){const p=vy();p.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,p)):d(p)}else if(i.canceled){const p=this.appDelete_?jT():wM();d(p)}else{const p=TM();d(p)}};this.canceled_?n(!1,new ph(!1,null,!0)):this.backoffId_=PM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ph{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function FM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $M(t,e,n,r,i,c,d=!0,m=!1){const p=CT(t.urlParams),g=t.url+p,y=Object.assign({},t.headers);return qM(y,e),FM(y,n),BM(y,c),HM(y,r),new zM(g,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,d,m)}function GM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KM(...t){const e=GM();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ny())return new Blob(t);throw new Kt(Gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function YM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function QM(t){if(typeof atob>"u")throw IM("base-64");return atob(t)}const Pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xg{constructor(e,n){this.data=e,this.contentType=n||null}}function XM(t,e){switch(t){case Pr.RAW:return new xg(RT(e));case Pr.BASE64:case Pr.BASE64URL:return new xg(kT(t,e));case Pr.DATA_URL:return new xg(JM(e),ZM(e))}throw vy()}function RT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=r,d=t.charCodeAt(++n);r=65536|(c&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function WM(t){let e;try{e=decodeURIComponent(t)}catch{throw Wc(Pr.DATA_URL,"Malformed data URL.")}return RT(e)}function kT(t,e){switch(t){case Pr.BASE64:{const i=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(i||c)throw Wc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Pr.BASE64URL:{const i=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(i||c)throw Wc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QM(e)}catch(i){throw i.message.includes("polyfill")?i:Wc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class IT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wc(Pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=eP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function JM(t){const e=new IT(t);return e.base64?kT(Pr.BASE64,e.rest):WM(e.rest)}function ZM(t){return new IT(t).contentType}function eP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class li{constructor(e,n){let r=0,i="";X_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(X_(this.data_)){const r=this.data_,i=YM(r,e,n);return i===null?null:new li(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new li(r,!0)}}static getBlob(...e){if(Ny()){const n=e.map(r=>r instanceof li?r.data_:r);return new li(KM.apply(null,n))}else{const n=e.map(d=>_y(d)?XM(Pr.RAW,d).data:d.data_);let r=0;n.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let c=0;return n.forEach(d=>{for(let m=0;m<d.length;m++)i[c++]=d[m]}),new li(i,!0)}}uploadData(){return this.data_}}function DT(t){let e;try{e=JSON.parse(t)}catch{return null}return VM(e)?e:null}function tP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function MT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function sP(t,e){return e}class es{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||sP}}let gh=null;function rP(t){return!_y(t)||t.length<2?t:MT(t)}function PT(){if(gh)return gh;const t=[];t.push(new es("bucket")),t.push(new es("generation")),t.push(new es("metageneration")),t.push(new es("name","fullPath",!0));function e(c,d){return rP(d)}const n=new es("name");n.xform=e,t.push(n);function r(c,d){return d!==void 0?Number(d):d}const i=new es("size");return i.xform=r,t.push(i),t.push(new es("timeCreated")),t.push(new es("updated")),t.push(new es("md5Hash",null,!0)),t.push(new es("cacheControl",null,!0)),t.push(new es("contentDisposition",null,!0)),t.push(new es("contentEncoding",null,!0)),t.push(new es("contentLanguage",null,!0)),t.push(new es("contentType",null,!0)),t.push(new es("metadata","customMetadata",!0)),gh=t,gh}function aP(t,e){function n(){const r=t.bucket,i=t.fullPath,c=new js(r,i);return e._makeStorageReference(c)}Object.defineProperty(t,"ref",{get:n})}function iP(t,e,n){const r={};r.type="file";const i=n.length;for(let c=0;c<i;c++){const d=n[c];r[d.local]=d.xform(r,e[d.server])}return aP(r,t),r}function OT(t,e,n){const r=DT(e);return r===null?null:iP(t,r,n)}function lP(t,e,n,r){const i=DT(e);if(i===null||!_y(i.downloadTokens))return null;const c=i.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(g=>{const y=t.bucket,b=t.fullPath,N="/b/"+d(y)+"/o/"+d(b),k=Gf(N,n,r),L=CT({alt:"media",token:g});return k+L})[0]}function oP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const c=e[i];c.writable&&(n[c.server]=t[c.local])}return JSON.stringify(n)}class Sy{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function LT(t){if(!t)throw vy()}function cP(t,e){function n(r,i){const c=OT(t,i,e);return LT(c!==null),c}return n}function uP(t,e){function n(r,i){const c=OT(t,i,e);return LT(c!==null),lP(c,i,t.host,t._protocol)}return n}function VT(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=SM():i=NM():n.getStatus()===402?i=_M(t.bucket):n.getStatus()===403?i=EM(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function UT(t){const e=VT(t);function n(r,i){let c=e(r,i);return r.getStatus()===404&&(c=vM(t.path)),c.serverResponse=i.serverResponse,c}return n}function dP(t,e,n){const r=e.fullServerUrl(),i=Gf(r,t.host,t._protocol),c="GET",d=t.maxOperationRetryTime,m=new Sy(i,c,uP(t,n),d);return m.errorHandler=UT(e),m}function hP(t,e){const n=e.fullServerUrl(),r=Gf(n,t.host,t._protocol),i="DELETE",c=t.maxOperationRetryTime;function d(p,g){}const m=new Sy(r,i,d,c);return m.successCodes=[200,204],m.errorHandler=UT(e),m}function fP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function mP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fP(null,e)),r}function pP(t,e,n,r,i){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let K="";for(let Y=0;Y<2;Y++)K=K+Math.random().toString().slice(2);return K}const p=m();d["Content-Type"]="multipart/related; boundary="+p;const g=mP(e,r,i),y=oP(g,n),b="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,N=`\r
--`+p+"--",k=li.getBlob(b,r,N);if(k===null)throw RM();const L={name:g.fullPath},M=Gf(c,t.host,t._protocol),I="POST",B=t.maxUploadRetryTime,U=new Sy(M,I,cP(t,n),B);return U.urlParams=L,U.headers=d,U.body=k.uploadData(),U.errorHandler=VT(e),U}class gP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ll.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ll.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ll.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,c){if(this.sent_)throw Uc("cannot .send() more than once");if(wi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xP extends gP{initXhr(){this.xhr_.responseType="text"}}function Ey(){return new xP}class fl{constructor(e,n){this._service=e,n instanceof js?this._location=n:this._location=js.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fl(e,n)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MT(this._location.path)}get storage(){return this._service}get parent(){const e=tP(this._location.path);if(e===null)return null;const n=new js(this._location.bucket,e);return new fl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw DM(e)}}function yP(t,e,n){t._throwIfRoot("uploadBytes");const r=pP(t.storage,t._location,PT(),new li(e,!0),n);return t.storage.makeRequestWithTokens(r,Ey).then(i=>({metadata:i,ref:t}))}function bP(t){t._throwIfRoot("getDownloadURL");const e=dP(t.storage,t._location,PT());return t.storage.makeRequestWithTokens(e,Ey).then(n=>{if(n===null)throw kM();return n})}function vP(t){t._throwIfRoot("deleteObject");const e=hP(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ey)}function _P(t,e){const n=nP(t._location.path,e),r=new js(t._location.bucket,n);return new fl(t.storage,r)}function NP(t){return/^[A-Za-z]+:\/\//.test(t)}function SP(t,e){return new fl(t,e)}function zT(t,e){if(t instanceof Ty){const n=t;if(n._bucket==null)throw CM();const r=new fl(n,n._bucket);return e!=null?zT(r,e):r}else return e!==void 0?_P(t,e):t}function EP(t,e){if(e&&NP(e)){if(t instanceof Ty)return SP(t,e);throw sx("To use ref(service, url), the first argument must be a Storage instance.")}else return zT(t,e)}function J_(t,e){const n=e?.[AT];return n==null?null:js.makeFromBucketSpec(n,t)}function TP(t,e,n,r={}){t.host=`${e}:${n}`;const i=wi(e);i&&(Nx(`https://${t.host}/b`),Sx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:c}=r;c&&(t._overrideAuthToken=typeof c=="string"?c:fS(c,t.app.options.projectId))}class Ty{constructor(e,n,r,i,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=wT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yM,this._maxUploadRetryTime=bM,this._requests=new Set,i!=null?this._bucket=js.makeFromBucketSpec(i,this._host):this._bucket=J_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=js.makeFromBucketSpec(this._url,e):this._bucket=J_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ws(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fl(this,e)}_makeRequest(e,n,r,i,c=!0){if(this._deleted)return new MM(jT());{const d=$M(e,this._appId,r,i,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Z_="@firebase/storage",eN="0.14.0";const FT="storage";function wP(t,e,n){return t=Ft(t),yP(t,e,n)}function AP(t){return t=Ft(t),bP(t)}function jP(t){return t=Ft(t),vP(t)}function tN(t,e){return t=Ft(t),EP(t,e)}function CP(t=wx(),e){t=Ft(t);const r=Tf(t,FT).getImmediate({identifier:e}),i=uS("storage");return i&&RP(r,...i),r}function RP(t,e,n,r={}){TP(t,e,n,r)}function kP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ty(n,r,i,e,gl)}function IP(){cl(new pi(FT,kP,"PUBLIC").setMultipleInstances(!0)),Or(Z_,eN,""),Or(Z_,eN,"esm2020")}IP();const DP={apiKey:"AIzaSyAu2gp1zFL3_P-7rj9FaSgSxUWxvGGlykU",authDomain:"data-wrangler-2026.firebaseapp.com",projectId:"data-wrangler-2026",storageBucket:"data-wrangler-2026.firebasestorage.app",messagingSenderId:"584876627446",appId:"1:584876627446:web:33ffd3e73193549f3023d7",measurementId:"G-ZZ05LJ5K3S"},wy=gS(DP),un=JI(wy),xh=gM(wy),nN=CP(wy),MP=new ma;function Kf(){const[t,e]=T.useState(null),[n,r]=T.useState(!0),[i,c]=T.useState(null);T.useEffect(()=>rD(xh,y=>{e(y),r(!1)}),[]);const d=T.useCallback(async()=>{try{return c(null),(await J3(xh)).user}catch(g){const y=g instanceof Error?g.message:"Failed to sign in";return c(y),null}},[]),m=T.useCallback(async()=>{try{return c(null),(await TD(xh,MP)).user}catch(g){const y=g instanceof Error?g.message:"Failed to sign in with Google";return c(y),null}},[]),p=T.useCallback(async()=>{try{await aD(xh)}catch(g){const y=g instanceof Error?g.message:"Failed to sign out";c(y)}},[]);return{user:t,loading:n,error:i,signIn:d,signInWithGoogle:m,signOut:p}}const BT=T.createContext(null);function PP({children:t}){const{user:e,loading:n,error:r,signInWithGoogle:i,signOut:c}=Kf(),[d,m]=T.useState(null),[p,g]=T.useState([]),[y,b]=T.useState(null),[N,k]=T.useState(!0);T.useEffect(()=>Rh(Dn(un,"config","access"),ue=>{if(ue.exists()){const z=ue.data();m({allowedEmails:z.allowedEmails??[],adminEmails:z.adminEmails??[]})}else m({allowedEmails:[],adminEmails:[]});k(!1)},()=>{m({allowedEmails:[],adminEmails:[]}),k(!1)}),[]),T.useEffect(()=>Rh(Dn(un,"config","accessRequests"),ue=>{if(ue.exists()){const z=ue.data();g(z.requests??[])}else g([])},()=>{g([])}),[]),T.useEffect(()=>Rh(Dn(un,"config","liveSession"),ue=>{ue.exists()?b(ue.data()):b(null)},()=>{b(null)}),[]);const L=e?.email?.toLowerCase()??null,M=!!e&&!e.isAnonymous,I=M&&!!L&&!!d&&(d.allowedEmails.map(F=>F.toLowerCase()).includes(L)||d.adminEmails.map(F=>F.toLowerCase()).includes(L)),B=M&&!!L&&!!d&&d.adminEmails.map(F=>F.toLowerCase()).includes(L),U=M&&!!L&&p.some(F=>F.email.toLowerCase()===L),K=n||N;T.useEffect(()=>{if(!(!e||!L||!d||K)&&d.allowedEmails.length===0&&d.adminEmails.length===0&&!e.isAnonymous){const F=Dn(un,"config","access");f3(F).then(ue=>{ue.exists()||ha(F,{allowedEmails:[L],adminEmails:[L]})})}},[e,L,d,K]);const Y=async F=>{const ue=Dn(un,"config","access");await ha(ue,{...d??{allowedEmails:[],adminEmails:[]},...F})},Q=async(F,ue)=>{if(!e||!L||p.some(pe=>pe.email.toLowerCase()===L))return;const z={email:L,firstName:F,lastName:ue,displayName:`${F} ${ue}`,photoURL:e.photoURL,requestedAt:new Date().toISOString()},ee=Dn(un,"config","accessRequests");await ha(ee,{requests:[...p,z]})},$=async F=>{const ue=F.toLowerCase().trim();await E(ue);const z=Dn(un,"config","accessRequests");await ha(z,{requests:p.filter(ee=>ee.email.toLowerCase()!==ue)})},C=async F=>{const ue=F.toLowerCase().trim(),z=Dn(un,"config","accessRequests");await ha(z,{requests:p.filter(ee=>ee.email.toLowerCase()!==ue)})},E=async F=>{if(!d)return;const ue=F.toLowerCase().trim();d.allowedEmails.map(z=>z.toLowerCase()).includes(ue)||await Y({allowedEmails:[...d.allowedEmails,ue]})},A=async F=>{if(!d)return;const ue=F.toLowerCase().trim();await Y({allowedEmails:d.allowedEmails.filter(z=>z.toLowerCase()!==ue)})},P=async F=>{if(!d)return;const ue=F.toLowerCase().trim(),z=d.allowedEmails.map(pe=>pe.toLowerCase()).includes(ue)?d.allowedEmails:[...d.allowedEmails,ue],ee=d.adminEmails.map(pe=>pe.toLowerCase()).includes(ue)?d.adminEmails:[...d.adminEmails,ue];await Y({allowedEmails:z,adminEmails:ee})},w=async F=>{if(!d)return;const ue=F.toLowerCase().trim();d.adminEmails.length<=1||await Y({adminEmails:d.adminEmails.filter(z=>z.toLowerCase()!==ue)})},j=async F=>{await ha(Dn(un,"config","liveSession"),F)},D=async()=>{await KE(Dn(un,"config","liveSession"))};return l.jsx(BT.Provider,{value:{user:e,loading:K,error:r,isAuthenticated:M,isAllowed:I,isAdmin:B,accessConfig:d,accessRequests:p,hasRequestedAccess:U,liveSession:y,signInWithGoogle:i,signOut:c,requestAccess:Q,approveRequest:$,denyRequest:C,addAllowedEmail:E,removeAllowedEmail:A,addAdminEmail:P,removeAdminEmail:w,setLiveSession:j,clearLiveSession:D},children:t})}function Do(){const t=T.useContext(BT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const OP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),sN=t=>{const e=LP(t);return e.charAt(0).toUpperCase()+e.slice(1)},qT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),VP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var UP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zP=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:d,...m},p)=>T.createElement("svg",{ref:p,...UP,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qT("lucide",i),...!c&&!VP(m)&&{"aria-hidden":"true"},...m},[...d.map(([g,y])=>T.createElement(g,y)),...Array.isArray(c)?c:[c]]));const _e=(t,e)=>{const n=T.forwardRef(({className:r,...i},c)=>T.createElement(zP,{ref:c,iconNode:e,className:qT(`lucide-${OP(sN(t))}`,`lucide-${t}`,r),...i}));return n.displayName=sN(t),n};const FP=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],hu=_e("arrow-down",FP);const BP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],HT=_e("arrow-left",BP);const qP=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],HP=_e("arrow-right-left",qP);const $P=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],GP=_e("arrow-right",$P);const KP=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],xa=_e("arrow-up",KP);const YP=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ph=_e("ban",YP);const QP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],of=_e("calendar",QP);const XP=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],WP=_e("camera",XP);const JP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],rN=_e("chart-column",JP);const ZP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Oh=_e("check",ZP);const eO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mo=_e("chevron-down",eO);const tO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nO=_e("chevron-left",tO);const sO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Yf=_e("chevron-up",sO);const rO=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],aO=_e("chevrons-down",rO);const iO=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],aN=_e("chevrons-up",iO);const lO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cf=_e("circle-alert",lO);const oO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ir=_e("circle-check-big",oO);const cO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rx=_e("circle-x",cO);const uO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],dO=_e("clipboard-check",uO);const hO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],fO=_e("clipboard-list",hO);const mO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$T=_e("clock",mO);const pO=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gO=_e("copy",pO);const xO=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],yg=_e("crown",xO);const yO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],GT=_e("download",yO);const bO=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vO=_e("eye-off",bO);const _O=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fu=_e("eye",_O);const NO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],SO=_e("file-text",NO);const EO=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],uf=_e("flag",EO);const TO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wO=_e("funnel",TO);const AO=[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"M12 18H7a2 2 0 0 1-2-2V9",key:"16sdep"}],["path",{d:"m9 15 3 3-3 3",key:"1m3kbl"}]],iN=_e("git-compare-arrows",AO);const jO=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],ax=_e("git-compare",jO);const CO=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],df=_e("grip-vertical",CO);const RO=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],mu=_e("handshake",RO);const kO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],IO=_e("layout-grid",kO);const DO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fs=_e("loader-circle",DO);const MO=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],lN=_e("loader",MO);const PO=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Jc=_e("log-in",PO);const OO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ix=_e("log-out",OO);const LO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oN=_e("mail",LO);const VO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],UO=_e("menu",VO);const zO=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],FO=_e("message-square",zO);const BO=[["path",{d:"M5 12h14",key:"1ays0h"}]],qO=_e("minus",BO);const HO=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],$O=_e("mountain",HO);const GO=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],KO=_e("pause",GO);const YO=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],QO=_e("pen-line",YO);const XO=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],hf=_e("play",XO);const WO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ml=_e("plus",WO);const JO=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ZO=_e("qr-code",JO);const e6=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lx=_e("radio",e6);const t6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ay=_e("refresh-cw",t6);const n6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],s6=_e("rotate-ccw",n6);const r6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],KT=_e("save",r6);const a6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jy=_e("search",a6);const i6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],YT=_e("send",i6);const l6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ff=_e("settings",l6);const o6=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],cN=_e("share-2",o6);const c6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],pl=_e("shield",c6);const u6=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],d6=_e("sliders-horizontal",u6);const h6=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],QT=_e("sliders-vertical",h6);const f6=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ox=_e("square-check-big",f6);const m6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],cx=_e("square",m6);const p6=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],g6=_e("sticky-note",p6);const x6=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],mf=_e("swords",x6);const y6=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],b6=_e("table-2",y6);const v6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],pu=_e("target",v6);const _6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ci=_e("trash-2",_6);const N6=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],S6=_e("trending-down",N6);const E6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pf=_e("trending-up",E6);const T6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zc=_e("triangle-alert",T6);const w6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Eo=_e("trophy",w6);const A6=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],j6=_e("undo-2",A6);const C6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],XT=_e("upload",C6);const R6=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],k6=_e("user-check",R6);const I6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],D6=_e("user-minus",I6);const M6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],uN=_e("user-plus",M6);const P6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],O6=_e("user-x",P6);const L6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qf=_e("users",L6);const V6=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],U6=_e("wrench",V6);const z6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rs=_e("x",z6);const F6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],B6=_e("zap",F6);function q6(){const{loading:t,error:e,isAuthenticated:n,isAllowed:r,hasRequestedAccess:i,signInWithGoogle:c,requestAccess:d,user:m}=Do(),[p,g]=T.useState(""),[y,b]=T.useState("");return n&&!r?l.jsx("div",{className:"min-h-screen bg-background text-textPrimary flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-8 max-w-md w-full text-center",children:[l.jsx("img",{src:"/frc-2026-analytics/team-logo.png",alt:"Team 148",className:"h-16 w-16 mx-auto mb-4 object-contain"}),i?l.jsxs(l.Fragment,{children:[l.jsx(ir,{size:48,className:"mx-auto mb-4 text-success"}),l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Request Sent"}),l.jsx("p",{className:"text-textSecondary mb-2",children:"Your request to access Data Wrangler has been sent."}),l.jsxs("p",{className:"text-textSecondary mb-6",children:["Signed in as ",l.jsx("span",{className:"text-textPrimary font-semibold",children:m?.email})]}),l.jsx("p",{className:"text-textMuted text-sm mb-6",children:"A team admin will approve your request. This page will update automatically when you're approved."}),l.jsx("button",{onClick:c,className:"w-full px-4 py-3 bg-surfaceElevated border border-border rounded-lg hover:bg-interactive transition-colors text-sm",children:"Try a different account"})]}):l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Required"}),l.jsxs("p",{className:"text-textSecondary mb-2",children:["Signed in as ",l.jsx("span",{className:"text-textPrimary font-semibold",children:m?.email})]}),l.jsx("p",{className:"text-textMuted text-sm mb-6",children:"Your account is not on the approved access list. Request access and a team admin will review it."}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 text-left",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"First Name *"}),l.jsx("input",{type:"text",value:p,onChange:N=>g(N.target.value),placeholder:"First",className:"w-full px-3 py-2.5 bg-card border border-border rounded-lg text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Last Name *"}),l.jsx("input",{type:"text",value:y,onChange:N=>b(N.target.value),placeholder:"Last",className:"w-full px-3 py-2.5 bg-card border border-border rounded-lg text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"})]})]}),l.jsxs("button",{onClick:()=>d(p.trim(),y.trim()),disabled:!p.trim()||!y.trim(),className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors mb-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(YT,{size:18}),"Request Access"]}),l.jsx("button",{onClick:c,className:"w-full px-4 py-3 bg-surfaceElevated border border-border rounded-lg hover:bg-interactive transition-colors text-sm",children:"Try a different account"})]})]})}):l.jsx("div",{className:"min-h-screen bg-background text-textPrimary flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-8 max-w-md w-full text-center",children:[l.jsx("img",{src:"/frc-2026-analytics/team-logo.png",alt:"Team 148",className:"h-20 w-20 mx-auto mb-6 object-contain"}),l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Data Wrangler"}),l.jsx("p",{className:"text-textSecondary mb-8",children:"Team 148 Robowranglers  REBUILT 2026"}),e&&l.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg text-sm mb-6",children:e}),l.jsxs("button",{onClick:c,disabled:t,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-white text-gray-800 font-semibold rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-gray-300",children:[t?l.jsx(fs,{size:20,className:"animate-spin"}):l.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 01-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),l.jsx("p",{className:"text-textMuted text-xs mt-6",children:"Only approved team members can access this app."})]})})}function H6({children:t}){const{loading:e,isAllowed:n}=Do();return e?l.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:l.jsx(fs,{size:32,className:"animate-spin text-textSecondary"})}):n?l.jsx(l.Fragment,{children:t}):l.jsx(q6,{})}const dt=Nu()(Su((t,e)=>({lastSessionCode:null,lastDisplayName:"",lastTeamNumber:"",activeSessionId:null,searchQuery:"",selectedTeamsForCompare:[],showComparisonModal:!1,highlightedAlliance:null,showParticipants:!1,setLastSessionCode:n=>t({lastSessionCode:n}),setLastDisplayName:n=>t({lastDisplayName:n}),setLastTeamNumber:n=>t({lastTeamNumber:n}),setActiveSessionId:n=>t({activeSessionId:n}),setSearchQuery:n=>t({searchQuery:n}),toggleTeamForCompare:n=>{const{selectedTeamsForCompare:r}=e();if(r.includes(n))t({selectedTeamsForCompare:r.filter(i=>i!==n)});else if(r.length<2){const i=[...r,n];t({selectedTeamsForCompare:i,showComparisonModal:i.length===2})}},clearCompareSelection:()=>t({selectedTeamsForCompare:[],showComparisonModal:!1}),setShowComparisonModal:n=>t({showComparisonModal:n}),setHighlightedAlliance:n=>t({highlightedAlliance:n}),setShowParticipants:n=>t({showParticipants:n})}),{name:"frc-alliance-selection-ui",partialize:t=>({lastSessionCode:t.lastSessionCode,lastDisplayName:t.lastDisplayName,lastTeamNumber:t.lastTeamNumber,activeSessionId:t.activeSessionId})}));function $6(){const t=dt(r=>r.lastSessionCode),e=dt(r=>r.activeSessionId),{liveSession:n}=Do();return t&&e?l.jsxs(dn,{to:`/alliance-selection/${t}`,className:"flex items-center gap-3 px-4 py-3 mb-4 bg-success/10 border border-success/30 rounded-lg hover:bg-success/20 transition-colors",children:[l.jsx(lx,{size:18,className:"text-success animate-pulse"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("span",{className:"font-semibold text-success",children:"Live Alliance Selection"}),l.jsx("span",{className:"text-textSecondary text-sm ml-2 font-mono",children:t})]}),l.jsx(mu,{size:18,className:"text-success"})]}):n?l.jsxs(dn,{to:`/alliance-selection/${n.sessionCode}`,className:"flex items-center gap-3 px-4 py-3 mb-4 bg-blueAlliance/10 border border-blueAlliance/30 rounded-lg hover:bg-blueAlliance/20 transition-colors",children:[l.jsx(lx,{size:18,className:"text-blueAlliance animate-pulse"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("span",{className:"font-semibold text-blueAlliance",children:"Join Live Alliance Selection"}),l.jsxs("span",{className:"text-textSecondary text-sm ml-2",children:["Started by ",n.createdByName]})]}),l.jsx(mu,{size:18,className:"text-blueAlliance"})]}):null}function dN({label:t,icon:e,items:n,isActive:r}){const[i,c]=T.useState(!1),d=T.useRef(null);return T.useEffect(()=>{const m=p=>{d.current&&!d.current.contains(p.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),l.jsxs("div",{className:"relative",ref:d,children:[l.jsxs("button",{onClick:()=>c(!i),className:`flex items-center gap-2 px-3 xl:px-4 py-2 rounded transition-colors text-sm xl:text-base ${r?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[l.jsx(e,{size:20}),l.jsx("span",{children:t}),l.jsx(Mo,{size:16,className:`transition-transform ${i?"rotate-180":""}`})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-surface border border-border rounded-lg shadow-lg py-1 min-w-[160px] z-50",children:n.map(({to:m,icon:p,label:g})=>l.jsxs(dn,{to:m,onClick:()=>c(!1),className:"flex items-center gap-3 px-4 py-2.5 hover:bg-interactive transition-colors",children:[l.jsx(p,{size:18}),l.jsx("span",{children:g})]},m))})]})}const bg=[{to:"/teams",icon:Qf,label:"Teams"},{to:"/pit-scouting",icon:dO,label:"Pit Scout"}],vg=[{to:"/picklist",icon:fO,label:"Pick List"},{to:"/predict",icon:mf,label:"Predict"},{to:"/alliance-selection",icon:mu,label:"Alliance"}];function G6(){const t=$e(y=>y.eventCode),{user:e,isAdmin:n,signOut:r}=Do(),[i,c]=T.useState(!1),d=Ti(),m=()=>c(!1),p=bg.some(y=>d.pathname===y.to||d.pathname.startsWith(y.to+"/")),g=vg.some(y=>d.pathname===y.to||d.pathname.startsWith(y.to+"/"));return l.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[l.jsx("header",{className:"bg-surface border-b border-border sticky top-0 z-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[l.jsx("img",{src:"/frc-2026-analytics/team-logo.png",alt:"Team 148 Logo",className:"h-10 w-10 md:h-12 md:w-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg md:text-2xl font-bold",children:"Team 148 - Data Wrangler"}),l.jsxs("p",{className:"text-textSecondary text-xs md:text-sm",children:["REBUILT 2026  ",t]})]})]}),l.jsxs("nav",{className:"hidden lg:flex gap-2 xl:gap-3",children:[l.jsxs(dn,{to:"/",className:`flex items-center gap-2 px-3 xl:px-4 py-2 rounded transition-colors text-sm xl:text-base ${d.pathname==="/"?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[l.jsx(rN,{size:20}),l.jsx("span",{children:"Dashboard"})]}),l.jsx(dN,{label:"Scouting",icon:jy,items:bg,isActive:p}),l.jsx(dN,{label:"Strategy",icon:pu,items:vg,isActive:g}),l.jsxs(dn,{to:"/event",className:`flex items-center gap-2 px-3 xl:px-4 py-2 rounded transition-colors text-sm xl:text-base ${d.pathname==="/event"?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[l.jsx(of,{size:20}),l.jsx("span",{children:"Event"})]}),n&&l.jsxs(dn,{to:"/admin",className:`flex items-center gap-2 px-3 xl:px-4 py-2 rounded transition-colors text-sm xl:text-base ${d.pathname==="/admin"?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[l.jsx(pl,{size:20}),l.jsx("span",{children:"Admin"})]}),l.jsxs("div",{className:"flex items-center gap-2 pl-2 border-l border-border ml-1",children:[e?.photoURL&&l.jsx("img",{src:e.photoURL,alt:"",className:"h-7 w-7 rounded-full"}),l.jsx("span",{className:"text-xs text-textSecondary max-w-[100px] truncate",children:e?.email}),l.jsx("button",{onClick:r,className:"p-2 rounded hover:bg-interactive text-textMuted hover:text-danger transition-colors",title:"Sign out",children:l.jsx(ix,{size:16})})]})]}),l.jsx("button",{onClick:()=>c(!i),className:"lg:hidden p-2 rounded hover:bg-interactive transition-colors","aria-label":"Toggle menu",children:i?l.jsx(Rs,{size:24}):l.jsx(UO,{size:24})})]}),i&&l.jsxs("nav",{className:"lg:hidden mt-4 pt-4 border-t border-border space-y-1",children:[l.jsxs(dn,{to:"/",onClick:m,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${d.pathname==="/"?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[l.jsx(rN,{size:20}),l.jsx("span",{children:"Dashboard"})]}),l.jsxs("div",{className:"pt-2",children:[l.jsx("p",{className:"px-4 py-1 text-xs font-semibold text-textMuted uppercase tracking-wider",children:"Scouting"}),bg.map(({to:y,icon:b,label:N})=>l.jsxs(dn,{to:y,onClick:m,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${d.pathname===y?"bg-success/20 text-success":"hover:bg-interactive"}`,children:[l.jsx(b,{size:20}),l.jsx("span",{children:N})]},y))]}),l.jsxs("div",{className:"pt-2",children:[l.jsx("p",{className:"px-4 py-1 text-xs font-semibold text-textMuted uppercase tracking-wider",children:"Strategy"}),vg.map(({to:y,icon:b,label:N})=>l.jsxs(dn,{to:y,onClick:m,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${d.pathname===y||d.pathname.startsWith(y+"/")?"bg-success/20 text-success":"hover:bg-interactive"}`,children:[l.jsx(b,{size:20}),l.jsx("span",{children:N})]},y))]}),l.jsx("div",{className:"pt-2",children:l.jsxs(dn,{to:"/event",onClick:m,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${d.pathname==="/event"?"bg-success/20 text-success":"hover:bg-interactive"}`,children:[l.jsx(of,{size:20}),l.jsx("span",{children:"Event Setup"})]})}),n&&l.jsx("div",{className:"pt-2",children:l.jsxs(dn,{to:"/admin",onClick:m,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${d.pathname==="/admin"?"bg-success/20 text-success":"hover:bg-interactive"}`,children:[l.jsx(pl,{size:20}),l.jsx("span",{children:"Admin"})]})}),l.jsx("div",{className:"pt-4 mt-2 border-t border-border",children:l.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e?.photoURL&&l.jsx("img",{src:e.photoURL,alt:"",className:"h-8 w-8 rounded-full"}),l.jsx("span",{className:"flex-1 text-sm text-textSecondary truncate",children:e?.email}),l.jsxs("button",{onClick:()=>{m(),r()},className:"flex items-center gap-2 px-3 py-2 text-danger hover:bg-danger/10 rounded transition-colors text-sm",children:[l.jsx(ix,{size:16}),"Sign out"]})]})})]})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-4 md:py-8",children:[l.jsx($6,{}),l.jsx(uj,{})]})]})}const ux={diedRate:20,mechanicalIssuesRate:25,tippedRate:15,noShowRate:10},vt=Nu()(Su((t,e)=>({pickList:null,tbaApiKey:"",redFlagThresholds:ux,initializePickList:(n,r="Steak",i="Potatoes",c="Chicken Nuggets",d="Do Not Pick")=>{const m={eventKey:n,tier1Name:r,tier2Name:i,tier3Name:c,tier4Name:d,lastUpdated:new Date().toISOString()};t({pickList:{config:m,teams:[]}})},setTierNames:(n,r,i,c)=>{const{pickList:d}=e();d&&t({pickList:{...d,config:{...d.config,tier1Name:n,tier2Name:r,tier3Name:i,tier4Name:c,lastUpdated:new Date().toISOString()}}})},setTBAApiKey:n=>{t({tbaApiKey:n})},addTeamToTier:(n,r,i="")=>{const{pickList:c}=e();if(!c||c.teams.find(g=>g.teamNumber===n))return;const d=c.teams.filter(g=>g.tier===r),m=d.length>0?Math.max(...d.map(g=>g.rank)):0,p={teamNumber:n,tier:r,rank:m+1,notes:i,isPicked:!1,tags:[],flagged:!1,onWatchlist:!1};t({pickList:{...c,teams:[...c.teams,p],config:{...c.config,lastUpdated:new Date().toISOString()}}})},moveTeam:(n,r,i)=>{const{pickList:c}=e();if(!c)return;const d=c.teams.map(m=>m.teamNumber===n?{...m,tier:r,rank:i}:m.tier===r&&m.rank>=i?{...m,rank:m.rank+1}:m);t({pickList:{...c,teams:d,config:{...c.config,lastUpdated:new Date().toISOString()}}})},removeTeam:n=>{const{pickList:r}=e();r&&t({pickList:{...r,teams:r.teams.filter(i=>i.teamNumber!==n)}})},swapTeamRanks:(n,r)=>{const{pickList:i}=e();if(!i)return;const c=i.teams.find(p=>p.teamNumber===n),d=i.teams.find(p=>p.teamNumber===r);if(!c||!d||c.tier!==d.tier)return;const m=i.teams.map(p=>p.teamNumber===n?{...p,rank:d.rank}:p.teamNumber===r?{...p,rank:c.rank}:p);t({pickList:{...i,teams:m,config:{...i.config,lastUpdated:new Date().toISOString()}}})},moveTeamAbove:(n,r)=>{const{pickList:i,moveTeam:c}=e();if(!i)return;const d=i.teams.find(g=>g.teamNumber===n),m=i.teams.find(g=>g.teamNumber===r);if(!d||!m)return;const p={tier1:1,tier2:2,tier3:3,tier4:4};if(d.tier===m.tier){const g=i.teams.filter(N=>N.tier===d.tier).sort((N,k)=>N.rank-k.rank),y=g.findIndex(N=>N.teamNumber===n),b=g.findIndex(N=>N.teamNumber===r);y>b&&c(n,d.tier,m.rank)}else p[d.tier]>p[m.tier]&&c(n,m.tier,m.rank)},updateNotes:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,notes:r}:c)}})},togglePicked:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,isPicked:!c.isPicked,pickedBy:c.isPicked?void 0:r}:c)}})},addTag:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n&&!c.tags.includes(r)?{...c,tags:[...c.tags,r]}:c)}})},removeTag:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,tags:c.tags.filter(d=>d!==r)}:c)}})},toggleFlag:n=>{const{pickList:r}=e();r&&t({pickList:{...r,teams:r.teams.map(i=>i.teamNumber===n?{...i,flagged:!i.flagged}:i)}})},setRedFlagThresholds:n=>{t({redFlagThresholds:n})},autoFlagTeams:n=>{const{pickList:r,redFlagThresholds:i}=e();if(!r)return 0;let c=0;const d=r.teams.map(m=>{const p=n.find(y=>y.teamNumber===m.teamNumber);if(!p)return m;const g=p.diedRate>=i.diedRate||p.mechanicalIssuesRate>=i.mechanicalIssuesRate||p.tippedRate>=i.tippedRate||p.noShowRate>=i.noShowRate;return g&&!m.flagged&&c++,g?{...m,flagged:!0}:m});return t({pickList:{...r,teams:d}}),c},clearAllFlags:()=>{const{pickList:n}=e();n&&t({pickList:{...n,teams:n.teams.map(r=>({...r,flagged:!1}))}})},toggleWatchlist:n=>{const{pickList:r}=e();if(!r)return;const i=r.teams.find(d=>d.teamNumber===n);if(!i)return;if(i.onWatchlist)t({pickList:{...r,teams:r.teams.map(d=>d.teamNumber===n?{...d,onWatchlist:!1,watchlistRank:void 0,watchlistNotes:void 0}:d)}});else{const m=r.teams.filter(p=>p.onWatchlist).length+1;t({pickList:{...r,teams:r.teams.map(p=>p.teamNumber===n?{...p,onWatchlist:!0,watchlistRank:m,watchlistNotes:""}:p)}})}},updateWatchlistNotes:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,watchlistNotes:r}:c)}})},reorderWatchlist:(n,r)=>{const{pickList:i}=e();if(!i)return;const c=i.teams.filter(g=>g.onWatchlist).sort((g,y)=>(g.watchlistRank||0)-(y.watchlistRank||0)),d=c.findIndex(g=>g.teamNumber===n);if(d===-1)return;const[m]=c.splice(d,1);c.splice(r-1,0,m);const p={};c.forEach((g,y)=>{p[g.teamNumber]=y+1}),t({pickList:{...i,teams:i.teams.map(g=>g.onWatchlist?{...g,watchlistRank:p[g.teamNumber]}:g)}})},finalizeWatchlist:n=>{const{pickList:r}=e();if(!r)return;const i=r.teams.filter(y=>y.onWatchlist).sort((y,b)=>(y.watchlistRank||0)-(b.watchlistRank||0));if(i.length===0)return;const c=r.teams.filter(y=>y.tier==="tier2"&&!y.onWatchlist).sort((y,b)=>y.rank-b.rank),d=c.slice(0,n-1),m=c.slice(n-1),p=[...d,...i,...m],g=r.teams.map(y=>{if(y.onWatchlist){const b=p.findIndex(N=>N.teamNumber===y.teamNumber)+1;return{...y,tier:"tier2",rank:b,onWatchlist:!1,watchlistRank:void 0,notes:y.watchlistNotes?`${y.notes}
[Watchlist] ${y.watchlistNotes}`.trim():y.notes,watchlistNotes:void 0}}if(y.tier==="tier2"){const b=p.findIndex(N=>N.teamNumber===y.teamNumber)+1;return{...y,rank:b}}return y});t({pickList:{...r,teams:g,config:{...r.config,lastUpdated:new Date().toISOString()}}})},clearWatchlist:()=>{const{pickList:n}=e();n&&t({pickList:{...n,teams:n.teams.map(r=>({...r,onWatchlist:!1,watchlistRank:void 0,watchlistNotes:void 0}))}})},getWatchlistTeams:()=>{const{pickList:n}=e();return n?n.teams.filter(r=>r.onWatchlist).sort((r,i)=>(r.watchlistRank||0)-(i.watchlistRank||0)):[]},importFromTBARankings:n=>{const{pickList:r}=e();if(!r)return;const i=r.teams.filter(g=>g.tier==="tier1"),c=[...n.rankings].sort((g,y)=>g.rank-y.rank),d=g=>{let y=`Event Rank ${g.rank}`;return g.record&&typeof g.record.wins=="number"&&typeof g.record.losses=="number"&&(y+=` - ${g.record.wins}W/${g.record.losses}L`,g.record.ties>0&&(y+=`/${g.record.ties}T`)),y},m=c.slice(0,12).map((g,y)=>({teamNumber:Ut(g.team_key),tier:"tier2",rank:y+1,notes:d(g),isPicked:!1,tags:[],flagged:!1,onWatchlist:!1})),p=c.slice(12).map((g,y)=>({teamNumber:Ut(g.team_key),tier:"tier3",rank:y+1,notes:d(g),isPicked:!1,tags:[],flagged:!1,onWatchlist:!1}));t({pickList:{...r,teams:[...i,...m,...p],config:{...r.config,lastUpdated:new Date().toISOString()}}})},sortTier:(n,r)=>{const{pickList:i}=e();if(!i)return;const c=i.teams.filter(m=>m.tier===n),d=i.teams.filter(m=>m.tier!==n);c.sort((m,p)=>r==="teamNumber"?m.teamNumber-p.teamNumber:m.rank-p.rank),c.forEach((m,p)=>{m.rank=p+1}),t({pickList:{...i,teams:[...d,...c]}})},clearPickList:()=>{t({pickList:null})},exportPickList:()=>{const{pickList:n}=e();return JSON.stringify(n,null,2)},importPickList:n=>{try{const r=JSON.parse(n);t({pickList:r})}catch(r){console.error("Failed to import pick list:",r)}}}),{name:"frc-picklist-storage",partialize:t=>({pickList:t.pickList,tbaApiKey:t.tbaApiKey})})),dx=[{id:"avgTotalPoints",label:"Avg Points",field:"avgTotalPoints",aggregation:"avg",format:"number",decimals:1,enabled:!0,description:"Average total points per match",category:"overall"},{id:"maxTotalPoints",label:"Max Points",field:"maxTotalPoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum total points in a single match",category:"overall"},{id:"minTotalPoints",label:"Min Points",field:"minTotalPoints",aggregation:"min",format:"number",decimals:0,enabled:!1,description:"Minimum total points in a single match",category:"overall"},{id:"avgAutoPoints",label:"Avg Auto Pts",field:"avgAutoPoints",aggregation:"avg",format:"number",decimals:1,enabled:!0,description:"Average autonomous points",category:"overall"},{id:"maxAutoPoints",label:"Max Auto Pts",field:"maxAutoPoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum auto points in a single match",category:"overall"},{id:"avgTeleopPoints",label:"Avg Teleop Pts",field:"avgTeleopPoints",aggregation:"avg",format:"number",decimals:1,enabled:!0,description:"Average teleop points",category:"overall"},{id:"maxTeleopPoints",label:"Max Teleop Pts",field:"maxTeleopPoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum teleop points in a single match",category:"overall"},{id:"avgEndgamePoints",label:"Avg Endgame Pts",field:"avgEndgamePoints",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average endgame points",category:"overall"},{id:"maxEndgamePoints",label:"Max Endgame Pts",field:"maxEndgamePoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum endgame points in a single match",category:"overall"},{id:"avgAutoFuelScored",label:"Avg Auto FUEL",field:"avgAutoFuelScored",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL scored in auto",category:"auto"},{id:"maxAutoFuelScored",label:"Max Auto FUEL",field:"maxAutoFuelScored",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum FUEL scored in auto",category:"auto"},{id:"avgAutoFuelMissed",label:"Avg Auto Missed",field:"avgAutoFuelMissed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL missed in auto",category:"auto"},{id:"autoAccuracy",label:"Auto Accuracy",field:"autoAccuracy",aggregation:"avg",format:"percentage",decimals:0,enabled:!0,description:"Auto shooting accuracy percentage",category:"auto"},{id:"autoMobilityRate",label:"Mobility Rate",field:"autoMobilityRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with auto mobility",category:"auto"},{id:"autoClimbRate",label:"Auto Climb Rate",field:"autoClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches attempting auto climb",category:"auto"},{id:"autoClimbSuccessRate",label:"Auto Climb Success",field:"autoClimbSuccessRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Success rate of auto climb attempts",category:"auto"},{id:"avgTeleopFuelScored",label:"Avg Teleop FUEL",field:"avgTeleopFuelScored",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL scored in teleop",category:"teleop"},{id:"maxTeleopFuelScored",label:"Max Teleop FUEL",field:"maxTeleopFuelScored",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum FUEL scored in teleop",category:"teleop"},{id:"avgTeleopFuelMissed",label:"Avg Teleop Missed",field:"avgTeleopFuelMissed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL missed in teleop",category:"teleop"},{id:"teleopAccuracy",label:"Teleop Accuracy",field:"teleopAccuracy",aggregation:"avg",format:"percentage",decimals:0,enabled:!0,description:"Teleop shooting accuracy percentage",category:"teleop"},{id:"avgCycleCount",label:"Avg Cycles",field:"avgCycleCount",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average cycles per match",category:"teleop"},{id:"maxCycleCount",label:"Max Cycles",field:"maxCycleCount",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum cycles in a single match",category:"teleop"},{id:"avgActiveHubScores",label:"Avg Active Hub",field:"avgActiveHubScores",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average scores during active hub",category:"teleop"},{id:"avgInactiveHubScores",label:"Avg Inactive Hub",field:"avgInactiveHubScores",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average scores during inactive hub",category:"teleop"},{id:"climbAttemptRate",label:"Climb Attempt %",field:"climbAttemptRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with climb attempt",category:"endgame"},{id:"level1ClimbRate",label:"L1 Climb %",field:"level1ClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with Level 1 climb",category:"endgame"},{id:"level2ClimbRate",label:"L2 Climb %",field:"level2ClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with Level 2 climb",category:"endgame"},{id:"level3ClimbRate",label:"L3 Climb %",field:"level3ClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!0,description:"Percentage of matches with Level 3 climb",category:"endgame"},{id:"avgClimbTime",label:"Avg Climb Time",field:"avgClimbTime",aggregation:"avg",format:"time",decimals:1,enabled:!1,description:"Average climb time in seconds",category:"endgame"},{id:"minClimbTime",label:"Best Climb Time",field:"minClimbTime",aggregation:"min",format:"time",decimals:1,enabled:!1,description:"Fastest climb time",category:"endgame"},{id:"avgEndgameFuelScored",label:"Avg Endgame FUEL",field:"avgEndgameFuelScored",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL scored in endgame",category:"endgame"},{id:"defensePlayedRate",label:"Plays Defense %",field:"defensePlayedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches playing defense",category:"defense"},{id:"avgDefenseEffectiveness",label:"Defense Effect.",field:"avgDefenseEffectiveness",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average defense effectiveness (0-4)",category:"defense"},{id:"wasDefendedRate",label:"Was Defended %",field:"wasDefendedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches team was defended",category:"defense"},{id:"avgDefenseEvasion",label:"Defense Evasion",field:"avgDefenseEvasion",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average defense evasion rating (0-4)",category:"defense"},{id:"avgDriverSkill",label:"Driver Skill",field:"avgDriverSkill",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average driver skill rating (1-5)",category:"performance"},{id:"avgIntakeSpeed",label:"Intake Speed",field:"avgIntakeSpeed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average intake speed rating (1-5)",category:"performance"},{id:"avgShootingAccuracy",label:"Shooting Acc Rating",field:"avgShootingAccuracy",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average shooting accuracy rating (1-5)",category:"performance"},{id:"avgShootingSpeed",label:"Shooting Speed",field:"avgShootingSpeed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average shooting speed rating (1-5)",category:"performance"},{id:"noShowRate",label:"No Show %",field:"noShowRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with no show",category:"reliability"},{id:"diedRate",label:"Died %",field:"diedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches robot died",category:"reliability"},{id:"tippedRate",label:"Tipped %",field:"tippedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches robot tipped",category:"reliability"},{id:"mechanicalIssuesRate",label:"Mech Issues %",field:"mechanicalIssuesRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with mechanical issues",category:"reliability"},{id:"yellowCardRate",label:"Yellow Card %",field:"yellowCardRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with yellow card",category:"reliability"},{id:"redCardRate",label:"Red Card %",field:"redCardRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with red card",category:"reliability"}],WT={overall:"Overall Scoring",auto:"Autonomous",teleop:"Teleop",endgame:"Endgame & Climbing",defense:"Defense",performance:"Performance Ratings",reliability:"Reliability"},da=Nu()(Su((t,e)=>({config:{columns:dx,lastUpdated:new Date().toISOString()},toggleColumn:n=>{const{config:r}=e();t({config:{...r,columns:r.columns.map(i=>i.id===n?{...i,enabled:!i.enabled}:i),lastUpdated:new Date().toISOString()}})},updateColumn:(n,r)=>{const{config:i}=e();t({config:{...i,columns:i.columns.map(c=>c.id===n?{...c,...r}:c),lastUpdated:new Date().toISOString()}})},addColumn:n=>{const{config:r}=e();t({config:{...r,columns:[...r.columns,n],lastUpdated:new Date().toISOString()}})},deleteColumn:n=>{const{config:r}=e();t({config:{...r,columns:r.columns.filter(i=>i.id!==n),lastUpdated:new Date().toISOString()}})},reorderColumns:(n,r)=>{const{config:i}=e(),c=[...i.columns],[d]=c.splice(n,1);c.splice(r,0,d),t({config:{...i,columns:c,lastUpdated:new Date().toISOString()}})},resetToDefaults:()=>{t({config:{columns:dx,lastUpdated:new Date().toISOString()}})},getEnabledColumns:()=>{const{config:n}=e();return n.columns.filter(r=>r.enabled)}}),{name:"frc-metrics-storage"}));function K6(){const t=vu(),e=$e(E=>E.teamStatistics),n=$e(E=>E.selectedTeams),r=$e(E=>E.toggleTeamSelection),i=$e(E=>E.tbaData),c=vt(E=>E.addTeamToTier),d=vt(E=>E.pickList),m={tier1:d?.config?.tier1Name||"Steak",tier2:d?.config?.tier2Name||"Potatoes",tier3:d?.config?.tier3Name||"Chicken Nuggets"},p=da(E=>E.getEnabledColumns),g=T.useMemo(()=>{const E=new Map;return i?.rankings?.rankings&&i.rankings.rankings.forEach(A=>{E.set(Ut(A.team_key),A.rank)}),E},[i]),y=p(),[b,N]=T.useState(""),[k,L]=T.useState([{field:"avgTotalPoints",direction:"desc"}]),[M,I]=T.useState(null),[B,U]=T.useState("table"),K=T.useMemo(()=>{let E=[...e];return b&&(E=E.filter(A=>A.teamNumber.toString().includes(b)||A.teamName?.toLowerCase().includes(b.toLowerCase()))),E.sort((A,P)=>{for(const w of k){let j,D;if(w.field==="eventRank"?(j=g.get(A.teamNumber)??999,D=g.get(P.teamNumber)??999):(j=A[w.field],D=P[w.field]),j===void 0&&(j=0),D===void 0&&(D=0),j!==D)return w.direction==="asc"?j>D?1:-1:j<D?1:-1}return 0}),E},[e,b,k,g]),Y=(E,A)=>{L(P=>{const w=P.findIndex(j=>j.field===E);if(w!==-1){const j=[...P];return j[w]={...j[w],direction:j[w].direction==="asc"?"desc":"asc"},j}return A&&P.length<3?[...P,{field:E,direction:"desc"}]:[{field:E,direction:"desc"}]})},Q=(E,A)=>{A.stopPropagation(),L(P=>{const w=P.filter(j=>j.field!==E);return w.length>0?w:[{field:"avgTotalPoints",direction:"desc"}]})},$=({field:E,label:A})=>{const P=k.findIndex(F=>F.field===E),w=P!==-1,j=w?k[P]:null,D=P+1;return l.jsxs("button",{onClick:F=>Y(E,F.shiftKey),className:"flex items-center gap-1 hover:text-textPrimary transition-colors group",title:w?"Click to toggle direction, Shift+click to add secondary sort":"Click to sort, Shift+click to add as secondary sort",children:[A,w&&l.jsxs("span",{className:"flex items-center gap-0.5",children:[k.length>1&&l.jsx("span",{className:"text-xs text-warning font-bold",children:D}),j?.direction==="desc"?l.jsx(hu,{size:14,className:"text-warning"}):l.jsx(xa,{size:14,className:"text-warning"}),k.length>1&&l.jsx("button",{onClick:F=>Q(E,F),className:"ml-0.5 opacity-0 group-hover:opacity-100 hover:text-danger transition-opacity",title:"Remove this sort",children:l.jsx(Rs,{size:12})})]})]})},C=(E,A,P)=>{const w=E.toFixed(P);switch(A){case"percentage":return`${w}%`;case"time":return`${w}s`;default:return w}};return l.jsxs("div",{className:"space-y-4 md:space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Team List"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[l.jsxs("span",{className:"text-textSecondary text-sm md:text-base",children:[n.length," team",n.length!==1?"s":""," selected"]}),n.length>=2&&l.jsxs("button",{onClick:()=>t("/compare"),className:"flex items-center gap-2 px-3 py-2 bg-blueAlliance hover:bg-blueAlliance/80 text-white rounded-lg transition-colors text-sm font-medium",children:[l.jsx(ax,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Compare Selected"}),l.jsx("span",{className:"sm:hidden",children:"Compare"})]}),l.jsxs("div",{className:"flex gap-1 bg-surface border border-border rounded-lg p-1",children:[l.jsx("button",{onClick:()=>U("cards"),className:`p-2 rounded transition-colors ${B==="cards"?"bg-interactive":"hover:bg-surfaceElevated"}`,title:"Card view",children:l.jsx(IO,{size:18})}),l.jsx("button",{onClick:()=>U("table"),className:`p-2 rounded transition-colors ${B==="table"?"bg-interactive":"hover:bg-surfaceElevated"}`,title:"Table view",children:l.jsx(b6,{size:18})})]}),l.jsxs(dn,{to:"/metrics",className:"flex items-center gap-2 px-3 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm border border-border",children:[l.jsx(QT,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Customize Columns"}),l.jsx("span",{className:"sm:hidden",children:"Columns"})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(jy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-textMuted",size:20}),l.jsx("input",{type:"text",placeholder:"Search by team number or name...",value:b,onChange:E=>N(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-border rounded-lg text-textPrimary placeholder-textMuted focus:outline-none focus:ring-2 focus:ring-white"})]}),k.length>0&&l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Sorting by:"}),k.map((E,A)=>l.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-surface border border-border rounded",children:[l.jsxs("span",{className:"text-warning font-bold",children:[A+1,"."]}),l.jsx("span",{children:E.field==="eventRank"?"Rank":E.field==="teamNumber"?"Team":E.field==="matchesPlayed"?"Matches":y.find(P=>P.field===E.field)?.label||E.field}),E.direction==="desc"?l.jsx(hu,{size:12,className:"text-textSecondary"}):l.jsx(xa,{size:12,className:"text-textSecondary"}),l.jsx("button",{onClick:P=>Q(E.field,P),className:"ml-1 hover:text-danger transition-colors",title:"Remove this sort",children:l.jsx(Rs,{size:12})})]},E.field)),k.length<3&&l.jsx("span",{className:"text-textMuted text-xs",children:"(Shift+click column to add)"})]}),B==="table"?l.jsx("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-surfaceElevated border-b border-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:"Select"}),l.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:l.jsx($,{field:"teamNumber",label:"Team"})}),l.jsx("th",{className:"px-3 py-3 text-center text-textSecondary text-sm font-semibold",children:l.jsx($,{field:"eventRank",label:"Rank"})}),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:l.jsx($,{field:"matchesPlayed",label:"Matches"})}),y.map(E=>l.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:l.jsx($,{field:E.field,label:E.label})},E.id)),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-border",children:K.map(E=>l.jsxs("tr",{className:`hover:bg-interactive transition-colors ${n.includes(E.teamNumber)?"bg-surfaceElevated":""}`,children:[l.jsx("td",{className:"px-4 py-4",children:l.jsx("button",{onClick:()=>r(E.teamNumber),className:"text-textPrimary hover:text-success transition-colors",children:n.includes(E.teamNumber)?l.jsx(ox,{size:20,className:"text-success"}):l.jsx(cx,{size:20})})}),l.jsx("td",{className:"px-4 py-4",children:l.jsxs(dn,{to:`/teams/${E.teamNumber}`,className:"block hover:text-blueAlliance transition-colors",children:[l.jsx("p",{className:"font-bold",children:E.teamNumber}),E.teamName&&l.jsx("p",{className:"text-sm text-textSecondary",children:E.teamName})]})}),l.jsx("td",{className:"px-3 py-4 text-center",children:g.get(E.teamNumber)?l.jsxs("span",{className:"font-bold text-warning",children:["#",g.get(E.teamNumber)]}):l.jsx("span",{className:"text-textMuted",children:"-"})}),l.jsx("td",{className:"px-4 py-4 text-center text-textSecondary",children:E.matchesPlayed}),y.map(A=>{const P=E[A.field];return l.jsx("td",{className:"px-4 py-4 text-right",children:C(P||0,A.format,A.decimals)},A.id)}),l.jsxs("td",{className:"px-4 py-4 text-center relative",children:[l.jsx("button",{onClick:()=>I(M===E.teamNumber?null:E.teamNumber),className:"p-2 text-textMuted hover:text-success rounded transition-colors",title:"Add to Pick List",children:l.jsx(ml,{size:20})}),M===E.teamNumber&&l.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-surface border border-border rounded-lg shadow-lg z-10",children:[l.jsxs("button",{onClick:()=>{c(E.teamNumber,"tier1"),I(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier1]}),l.jsxs("button",{onClick:()=>{c(E.teamNumber,"tier2"),I(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier2]}),l.jsxs("button",{onClick:()=>{c(E.teamNumber,"tier3"),I(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier3]})]})]})]},E.teamNumber))})]})})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(E=>l.jsxs("div",{className:`bg-surface rounded-lg border border-border p-4 space-y-3 ${n.includes(E.teamNumber)?"ring-2 ring-success":""}`,children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs(dn,{to:`/teams/${E.teamNumber}`,className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:"text-xl font-bold hover:text-blueAlliance transition-colors",children:E.teamNumber}),g.get(E.teamNumber)&&l.jsxs("span",{className:"text-sm font-bold text-warning",children:["#",g.get(E.teamNumber)]})]}),E.teamName&&l.jsx("p",{className:"text-sm text-textSecondary line-clamp-1",children:E.teamName})]}),l.jsx("button",{onClick:()=>r(E.teamNumber),className:"text-textPrimary hover:text-success transition-colors p-1",children:n.includes(E.teamNumber)?l.jsx(ox,{size:24,className:"text-success"}):l.jsx(cx,{size:24})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{className:"bg-surfaceElevated rounded p-2",children:[l.jsx("p",{className:"text-textSecondary text-xs",children:"Matches"}),l.jsx("p",{className:"font-semibold",children:E.matchesPlayed})]}),y.slice(0,3).map(A=>{const P=E[A.field];return l.jsxs("div",{className:"bg-surfaceElevated rounded p-2",children:[l.jsx("p",{className:"text-textSecondary text-xs truncate",children:A.label}),l.jsx("p",{className:"font-semibold",children:C(P||0,A.format,A.decimals)})]},A.id)})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>I(M===E.teamNumber?null:E.teamNumber),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-surfaceElevated hover:bg-interactive rounded transition-colors text-sm",children:[l.jsx(ml,{size:16}),"Add to Pick List"]}),M===E.teamNumber&&l.jsxs("div",{className:"absolute bottom-full mb-2 w-full bg-surface border border-border rounded-lg shadow-lg z-10",children:[l.jsxs("button",{onClick:()=>{c(E.teamNumber,"tier1"),I(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors rounded-t-lg",children:["Add to ",m.tier1]}),l.jsxs("button",{onClick:()=>{c(E.teamNumber,"tier2"),I(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier2]}),l.jsxs("button",{onClick:()=>{c(E.teamNumber,"tier3"),I(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors rounded-b-lg",children:["Add to ",m.tier3]})]})]})]},E.teamNumber))}),l.jsxs("div",{className:"text-center text-textSecondary",children:["Showing ",K.length," of ",e.length," teams"]})]})}const Y6=["noShowRate","diedRate","tippedRate","mechanicalIssuesRate","yellowCardRate","redCardRate","avgClimbTime","minClimbTime","avgAutoFuelMissed","avgTeleopFuelMissed","wasDefendedRate"];function Q6(){const t=vu(),e=$e(M=>M.teamStatistics),n=$e(M=>M.selectedTeams),r=$e(M=>M.toggleTeamSelection),i=$e(M=>M.eventCode),c=vt(M=>M.tbaApiKey),d=da(M=>M.getEnabledColumns),[m,p]=T.useState(null),[g,y]=T.useState({}),b=e.filter(M=>n.includes(M.teamNumber)),N=d(),k=T.useMemo(()=>{const M={overall:[],auto:[],teleop:[],endgame:[],defense:[],performance:[],reliability:[]};return N.forEach(I=>{M[I.category].push(I)}),M},[N]);if(T.useEffect(()=>{b.length===0&&t("/teams")},[b.length,t]),T.useEffect(()=>{async function M(){const I={};for(const B of b)try{const U=sS(B.teamNumber),Y=(await tS(U,i,c)).filter(Q=>Q.videos&&Q.videos.length>0);Y.length>0&&(I[B.teamNumber]=Y)}catch(U){console.error(`Failed to load videos for team ${B.teamNumber}:`,U)}y(I)}b.length>0&&M()},[b,i,c]),b.length===0)return l.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[l.jsx(cf,{size:64,className:"text-textMuted mb-4"}),l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Teams Selected"}),l.jsx("p",{className:"text-textSecondary mb-6",children:"Go to the Teams page and select teams to compare"}),l.jsx("button",{onClick:()=>t("/teams"),className:"px-6 py-3 bg-white text-background font-semibold rounded-lg hover:bg-textSecondary transition-colors",children:"Go to Teams"})]});const L=({column:M})=>{const I=!Y6.includes(M.field),B=C=>C[M.field]||0,U=b.map(B),K=Math.max(...U),Y=Math.min(...U),Q=C=>{switch(M.format){case"percentage":return`${C.toFixed(M.decimals)}%`;case"time":return`${C.toFixed(M.decimals)}s`;default:return C.toFixed(M.decimals)}},$=C=>{if(K===Y)return"text-textPrimary";const E=I?C===K:C===Y,A=I?C===Y:C===K;return E?"text-success font-bold":A?"text-danger":"text-textPrimary"};return l.jsxs("tr",{className:"border-b border-border hover:bg-interactive",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-textSecondary",title:M.description,children:M.label}),b.map(C=>{const E=B(C);return l.jsx("td",{className:`px-4 py-3 text-center ${$(E)}`,children:Q(E)},C.teamNumber)})]})};return l.jsxs("div",{className:"space-y-4 md:space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>t("/teams"),className:"p-2 text-textSecondary hover:text-textPrimary hover:bg-interactive rounded-lg transition-colors",title:"Back to Teams",children:l.jsx(HT,{size:24})}),l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Team Comparison"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("p",{className:"text-textSecondary text-sm md:text-base",children:["Comparing ",b.length," team",b.length!==1?"s":"","  ",N.length," metrics"]}),l.jsxs(dn,{to:"/settings/metrics",className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-surface border border-border rounded-lg hover:bg-interactive transition-colors",children:[l.jsx(QT,{size:16}),"Customize"]})]})]}),l.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:`200px repeat(${b.length}, 1fr)`},children:[l.jsx("div",{}),b.map(M=>{const I=g[M.teamNumber]||[];return l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-4 relative",children:[l.jsx("button",{onClick:()=>r(M.teamNumber),className:"absolute top-2 right-2 text-textMuted hover:text-danger transition-colors",children:l.jsx(Rs,{size:20})}),l.jsx("p",{className:"text-2xl font-bold",children:M.teamNumber}),M.teamName&&l.jsx("p",{className:"text-sm text-textSecondary mt-1",children:M.teamName}),l.jsxs("p",{className:"text-xs text-textMuted mt-2",children:[M.matchesPlayed," matches"]}),I.length>0&&l.jsxs("button",{onClick:()=>p(M.teamNumber),className:"mt-3 flex items-center gap-1 text-xs text-danger hover:underline",children:[l.jsx(hf,{size:12,fill:"currentColor"}),I.length," video",I.length!==1?"s":""]})]},M.teamNumber)})]}),l.jsx("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsxs("colgroup",{children:[l.jsx("col",{style:{width:"200px"}}),b.map(M=>l.jsx("col",{},M.teamNumber))]}),Object.keys(k).map(M=>{const I=k[M];return I.length===0?null:l.jsxs(At.Fragment,{children:[l.jsx("thead",{className:"bg-surfaceElevated",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:WT[M]}),b.map(B=>l.jsx("th",{className:"px-4 py-3"},B.teamNumber))]})}),l.jsx("tbody",{children:I.map(B=>l.jsx(L,{column:B},B.id))})]},M)}),N.length===0&&l.jsx("tbody",{children:l.jsx("tr",{children:l.jsxs("td",{colSpan:b.length+1,className:"px-4 py-8 text-center text-textSecondary",children:["No metrics enabled. ",l.jsx(dn,{to:"/settings/metrics",className:"text-success hover:underline",children:"Click here"})," to customize which metrics to display."]})})})]})})}),l.jsxs("div",{className:"flex items-center gap-6 text-sm text-textSecondary justify-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 bg-success rounded"}),l.jsx("span",{children:"Best Performance"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 bg-danger rounded"}),l.jsx("span",{children:"Worst Performance"})]})]}),m&&g[m]&&l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>p(null),children:l.jsxs("div",{className:"bg-surface rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",onClick:M=>M.stopPropagation(),children:[l.jsxs("div",{className:"sticky top-0 bg-surface flex items-center justify-between p-4 border-b border-border",children:[l.jsxs("h3",{className:"font-bold",children:["Team ",m," - Match Videos"]}),l.jsx("button",{onClick:()=>p(null),className:"p-1 hover:bg-interactive rounded transition-colors",children:l.jsx(Rs,{size:20})})]}),l.jsx("div",{className:"p-4 space-y-3",children:g[m].sort((M,I)=>{const B={f:5,sf:4,qf:3,ef:2,qm:1};return B[M.comp_level]!==B[I.comp_level]?B[I.comp_level]-B[M.comp_level]:I.match_number-M.match_number}).map(M=>{const I=nS(M);if(!I)return null;const B=M.comp_level==="qm"?`Qual ${M.match_number}`:`${M.comp_level.toUpperCase()} ${M.set_number}-${M.match_number}`;return l.jsxs("a",{href:I,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-surfaceElevated hover:bg-interactive rounded-lg transition-colors border border-border",children:[l.jsx(hf,{size:20,className:"text-danger",fill:"currentColor"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold",children:B}),l.jsxs("p",{className:"text-xs text-textSecondary",children:[M.alliances.red.score," - ",M.alliances.blue.score]})]}),l.jsx("span",{className:"text-xs text-textMuted",children:"Watch on YouTube"})]},M.key)})})]})})]})}function hN(t,e){const n=t.map(y=>{const b=e.find(k=>k.teamNumber===y);if(!b)return{teamNumber:y,autoPoints:0,teleopPoints:0,endgamePoints:0,totalPoints:0,reliability:.5,matchesPlayed:0,climbRate:0};const N=1-Math.min((b.diedRate+b.noShowRate)/100,.5);return{teamNumber:y,teamName:b.teamName,autoPoints:b.avgAutoPoints*N,teleopPoints:b.avgTeleopPoints*N,endgamePoints:b.avgEndgamePoints*N,totalPoints:b.avgTotalPoints*N,reliability:N,matchesPlayed:b.matchesPlayed,climbRate:b.climbAttemptRate*(b.level1ClimbRate+b.level2ClimbRate+b.level3ClimbRate)/100}}),r=n.reduce((y,b)=>y+b.autoPoints,0),i=n.reduce((y,b)=>y+b.teleopPoints,0),c=n.reduce((y,b)=>y+b.endgamePoints,0),d=r+i+c,m=n.length>0?n.reduce((y,b)=>y+b.reliability,0)/n.length:0,p=n.length>0?Math.min(...n.map(y=>y.matchesPlayed)):0,g=p>=6?"high":p>=3?"medium":"low";return{totalScore:d,autoScore:r,teleopScore:i,endgameScore:c,reliability:m,confidence:g,teams:n}}function X6(t,e){const n=t-e;return 1/(1+Math.exp(-.1*n))}function fN(t,e){const n=X6(t.totalScore,e.totalScore),r=Math.max(0,1-Math.abs(t.totalScore-e.totalScore)/5)*.1,i=n*2+r*1,c=t.teams.map(y=>Math.min(y.climbRate/100,1)),d=c.length===3?c[0]*c[1]*c[2]:0,m=t.autoScore+t.teleopScore,p=1/(1+Math.exp(-.15*(m-50))),g=i+d+p;return{winProbability:n,expectedWinRP:i,climbBonusProb:d,scoringBonusProb:p,expectedTotalRP:g}}function Lh(t,e,n){const r=hN(t,n),i=hN(e,n),c=Math.abs(r.totalScore-i.totalScore),d=c<1?"even":r.totalScore>i.totalScore?"red":"blue",m=fN(r,i),p=fN(i,r);return{red:r,blue:i,scoreDiff:c,favoredAlliance:d,redRP:m,blueRP:p}}const Dr=148,mN=3;function W6(){const t=$e(w=>w.teamStatistics),e=$e(w=>w.matchEntries),n=$e(w=>w.pitEntries),r=$e(w=>w.tbaData),i=$e(w=>w.tbaLoading),c=$e(w=>w.fetchTBAData);T.useEffect(()=>{r||c()},[r,c]);const d=r?.matches?.filter(w=>w.alliances.red.team_keys.includes(`frc${Dr}`)||w.alliances.blue.team_keys.includes(`frc${Dr}`)).sort((w,j)=>{const D={qm:0,ef:1,qf:2,sf:3,f:4};return D[w.comp_level]!==D[j.comp_level]?D[w.comp_level]-D[j.comp_level]:w.match_number-j.match_number})||[],m=d.filter(w=>w.alliances.red.score>=0),p=d.filter(w=>w.alliances.red.score<0),g=m.reduce((w,j)=>{const D=j.alliances.red.team_keys.includes(`frc${Dr}`),F=D?j.alliances.red.score:j.alliances.blue.score,ue=D?j.alliances.blue.score:j.alliances.red.score;return F>ue?w.wins++:F<ue?w.losses++:w.ties++,w},{wins:0,losses:0,ties:0}),y=r?.rankings?.rankings.find(w=>w.team_key===`frc${Dr}`),b=p[0],N=e.length,k=t.length,L=t.length>0?t.reduce((w,j)=>w+j.avgTotalPoints,0)/t.length:0,M=[...t].sort((w,j)=>j.avgTotalPoints-w.avgTotalPoints).slice(0,5),I=[...t].sort((w,j)=>j.level3ClimbRate-w.level3ClimbRate).slice(0,5),B=[...t].sort((w,j)=>j.avgAutoPoints-w.avgAutoPoints).slice(0,5),[U,K]=T.useState(!1),Y=T.useMemo(()=>{if(!t.length||!d.length)return new Map;const w=new Map;for(const j of d){const D=j.alliances.red.team_keys.map(Ut),F=j.alliances.blue.team_keys.map(Ut);w.set(j.key,Lh(D,F,t))}return w},[d,t]),Q=w=>`${{qm:"Q",ef:"E",qf:"QF",sf:"SF",f:"F"}[w.comp_level]}${w.match_number}`,$=m.slice(-mN),C=p.slice(0,mN),E=U?d:[...$,...C],A=d.length>E.length,P=({match:w})=>{const j=w.alliances.red.team_keys.includes(`frc${Dr}`),D=w.alliances.red.score>=0,F=j?w.alliances.red.score:w.alliances.blue.score,ue=j?w.alliances.blue.score:w.alliances.red.score,z=F>ue,ee=F<ue,pe=Y.get(w.key),H=pe?j?pe.redRP:pe.blueRP:null,ge=H?.winProbability??0;return l.jsxs("tr",{className:`border-b border-border/50 hover:bg-surfaceElevated ${D?"":"bg-surfaceElevated/50"}`,children:[l.jsx("td",{className:"py-2 px-2 font-bold",children:Q(w)}),l.jsx("td",{className:`py-2 px-2 text-center ${j?"font-bold":""}`,children:w.alliances.red.team_keys.map(V=>{const Z=Ut(V);return l.jsx("span",{className:Z===Dr?"text-warning font-bold":"text-redAlliance",children:Z},V)}).reduce((V,Z,oe)=>oe===0?[Z]:[...V,", ",Z],[])}),l.jsx("td",{className:"py-2 px-2 text-center font-mono",children:D?l.jsxs("span",{children:[l.jsx("span",{className:w.alliances.red.score>w.alliances.blue.score?"text-success font-bold":"",children:w.alliances.red.score})," - ",l.jsx("span",{className:w.alliances.blue.score>w.alliances.red.score?"text-success font-bold":"",children:w.alliances.blue.score})]}):l.jsx("span",{className:"text-textMuted",children:"--"})}),l.jsx("td",{className:`py-2 px-2 text-center ${j?"":"font-bold"}`,children:w.alliances.blue.team_keys.map(V=>{const Z=Ut(V);return l.jsx("span",{className:Z===Dr?"text-warning font-bold":"text-blueAlliance",children:Z},V)}).reduce((V,Z,oe)=>oe===0?[Z]:[...V,", ",Z],[])}),l.jsx("td",{className:"py-2 px-2 text-center",children:D?l.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${z?"bg-success/20 text-success":ee?"bg-danger/20 text-danger":"bg-textMuted/20 text-textMuted"}`,children:z?"W":ee?"L":"T"}):l.jsx("span",{className:"text-textMuted text-xs",children:"Upcoming"})}),l.jsx("td",{className:"py-2 px-2 text-center font-mono text-xs",children:pe?l.jsxs("span",{children:[l.jsx("span",{className:"text-redAlliance",children:pe.red.totalScore.toFixed(0)}),l.jsx("span",{className:"text-textMuted",children:"-"}),l.jsx("span",{className:"text-blueAlliance",children:pe.blue.totalScore.toFixed(0)})]}):l.jsx("span",{className:"text-textMuted",children:"--"})}),l.jsx("td",{className:"py-2 px-2 text-center text-xs",children:H?l.jsxs("span",{className:`font-medium ${ge>=.6?"text-success":ge<=.4?"text-danger":"text-warning"}`,children:[(ge*100).toFixed(0),"%"]}):l.jsx("span",{className:"text-textMuted",children:"--"})}),l.jsx("td",{className:"py-2 px-2 text-center text-xs",children:H?l.jsx("span",{className:"text-warning font-medium",children:H.expectedTotalRP.toFixed(1)}):l.jsx("span",{className:"text-textMuted",children:"--"})})]})};return l.jsxs("div",{className:"space-y-6",children:[r&&l.jsx("div",{className:"bg-gradient-to-r from-warning/20 to-warning/5 p-6 rounded-lg border border-warning/30",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"text-5xl font-bold text-warning",children:Dr}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:"Robowranglers"}),l.jsx("p",{className:"text-textSecondary",children:r.event?.name||"Event Data Loading..."})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 md:gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-textSecondary uppercase tracking-wide",children:"Rank"}),l.jsx("p",{className:"text-3xl font-bold",children:y?`#${y.rank}`:"--"}),y&&l.jsxs("p",{className:"text-xs text-textSecondary",children:["of ",r.rankings?.rankings.length]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-textSecondary uppercase tracking-wide",children:"Record"}),l.jsxs("p",{className:"text-3xl font-bold",children:[l.jsx("span",{className:"text-success",children:g.wins}),l.jsx("span",{className:"text-textMuted",children:"-"}),l.jsx("span",{className:"text-danger",children:g.losses}),g.ties>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-textMuted",children:"-"}),l.jsx("span",{className:"text-textSecondary",children:g.ties})]})]}),l.jsxs("p",{className:"text-xs text-textSecondary",children:[m.length," played"]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-textSecondary uppercase tracking-wide",children:"Next Match"}),b?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold",children:Q(b)}),l.jsxs("p",{className:"text-xs text-textSecondary",children:["vs ",b.alliances.red.team_keys.includes(`frc${Dr}`)?b.alliances.blue.team_keys.map(w=>Ut(w)).join(", "):b.alliances.red.team_keys.map(w=>Ut(w)).join(", ")]})]}):l.jsx("p",{className:"text-2xl font-bold text-textMuted",children:"--"})]})]})]})}),r&&d.length>0&&l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[l.jsx(of,{className:"text-warning",size:20}),"Team ",Dr," Matches"]}),l.jsxs("button",{onClick:()=>c(),disabled:i,className:"flex items-center gap-1 px-3 py-1 text-sm bg-surfaceElevated hover:bg-interactive rounded transition-colors",children:[l.jsx(Ay,{size:14,className:i?"animate-spin":""}),"Refresh"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-border",children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Match"}),l.jsx("th",{className:"text-center py-2 px-2 text-redAlliance",children:"Red Alliance"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Score"}),l.jsx("th",{className:"text-center py-2 px-2 text-blueAlliance",children:"Blue Alliance"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Result"}),l.jsx("th",{className:"text-center py-2 px-2 text-textSecondary",children:l.jsxs("span",{className:"flex items-center justify-center gap-1",children:[l.jsx(mf,{size:12}),"Pred."]})}),l.jsx("th",{className:"text-center py-2 px-2 text-textSecondary",children:"Win%"}),l.jsx("th",{className:"text-center py-2 px-2 text-textSecondary",children:"xRP"})]})}),l.jsx("tbody",{children:E.map(w=>l.jsx(P,{match:w},w.key))})]})}),(A||U)&&l.jsx("button",{onClick:()=>K(!U),className:"w-full mt-4 flex items-center justify-center gap-2 py-2 text-sm text-textSecondary hover:text-textPrimary hover:bg-surfaceElevated rounded transition-colors",children:U?l.jsxs(l.Fragment,{children:[l.jsx(Yf,{size:16}),"Show Less"]}):l.jsxs(l.Fragment,{children:[l.jsx(Mo,{size:16}),"Show All ",d.length," Matches (",m.length-$.length," more completed)"]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Total Teams"}),l.jsx("p",{className:"text-3xl font-bold mt-1",children:k})]}),l.jsx(Qf,{className:"text-textMuted",size:32})]})}),l.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Total Matches"}),l.jsx("p",{className:"text-3xl font-bold mt-1",children:N})]}),l.jsx(pu,{className:"text-textMuted",size:32})]})}),l.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Points/Match"}),l.jsx("p",{className:"text-3xl font-bold mt-1",children:L.toFixed(1)})]}),l.jsx(pf,{className:"text-textMuted",size:32})]})}),l.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Pit Reports"}),l.jsx("p",{className:"text-3xl font-bold mt-1",children:n.length})]}),l.jsx(Eo,{className:"text-textMuted",size:32})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(Eo,{className:"text-warning",size:20}),"Top Scorers"]}),l.jsx("div",{className:"space-y-3",children:M.map((w,j)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-textMuted font-mono",children:["#",j+1]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:w.teamNumber}),w.teamName&&l.jsx("p",{className:"text-sm text-textSecondary",children:w.teamName})]})]}),l.jsxs("span",{className:"font-bold text-success",children:[w.avgTotalPoints.toFixed(1)," pts"]})]},w.teamNumber))})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(pf,{className:"text-blueAlliance",size:20}),"Top Climbers (L3)"]}),l.jsx("div",{className:"space-y-3",children:I.map((w,j)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-textMuted font-mono",children:["#",j+1]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:w.teamNumber}),w.teamName&&l.jsx("p",{className:"text-sm text-textSecondary",children:w.teamName})]})]}),l.jsxs("span",{className:"font-bold text-blueAlliance",children:[w.level3ClimbRate.toFixed(0),"%"]})]},w.teamNumber))})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(pu,{className:"text-redAlliance",size:20}),"Top Auto"]}),l.jsx("div",{className:"space-y-3",children:B.map((w,j)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-textMuted font-mono",children:["#",j+1]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:w.teamNumber}),w.teamName&&l.jsx("p",{className:"text-sm text-textSecondary",children:w.teamName})]})]}),l.jsxs("span",{className:"font-bold text-redAlliance",children:[w.avgAutoPoints.toFixed(1)," pts"]})]},w.teamNumber))})]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Event Statistics"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Auto Accuracy"}),l.jsxs("p",{className:"text-2xl font-bold mt-1",children:[t.length>0?(t.reduce((w,j)=>w+j.autoAccuracy,0)/t.length).toFixed(1):0,"%"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Teleop Accuracy"}),l.jsxs("p",{className:"text-2xl font-bold mt-1",children:[t.length>0?(t.reduce((w,j)=>w+j.teleopAccuracy,0)/t.length).toFixed(1):0,"%"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Climb Attempt Rate"}),l.jsxs("p",{className:"text-2xl font-bold mt-1",children:[t.length>0?(t.reduce((w,j)=>w+j.climbAttemptRate,0)/t.length).toFixed(1):0,"%"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Cycles/Match"}),l.jsx("p",{className:"text-2xl font-bold mt-1",children:t.length>0?(t.reduce((w,j)=>w+j.avgCycleCount,0)/t.length).toFixed(1):0})]})]})]})]})}function J6({match:t,onClose:e}){T.useEffect(()=>{const d=m=>{m.key==="Escape"&&e()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e]);const n=({value:d,label:m})=>l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${d?"bg-success/20 text-success":"bg-surface text-textMuted"}`,children:[d?l.jsx(ir,{size:12}):l.jsx(rx,{size:12}),m]}),r=({label:d,value:m,suffix:p=""})=>l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-xs",children:d}),l.jsxs("p",{className:"font-semibold",children:[m,p]})]}),i=({label:d,value:m,max:p=5})=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[l.jsx("span",{className:"text-textSecondary",children:d}),l.jsxs("span",{className:"font-semibold",children:[m,"/",p]})]}),l.jsx("div",{className:"h-2 bg-surface rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-success rounded-full transition-all",style:{width:`${m/p*100}%`}})})]}),c=({title:d})=>l.jsx("h3",{className:"text-sm font-bold text-textSecondary uppercase tracking-wide border-b border-border pb-2 mb-3",children:d});return l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:e,children:l.jsxs("div",{className:"bg-surface rounded-lg w-full max-w-[700px] max-h-[90vh] relative flex flex-col",onClick:d=>d.stopPropagation(),style:{WebkitOverflowScrolling:"touch"},children:[l.jsxs("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-b border-border flex justify-between items-center rounded-t-lg",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold",children:[t.matchType==="qualification"?"Qual":t.matchType==="playoff"?"Playoff":"Practice"," ",t.matchNumber]}),l.jsxs("p",{className:"text-sm text-textSecondary",children:["Team ",t.teamNumber,"  ",t.alliance.toUpperCase()," Alliance  Station ",t.driverStation]})]}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-interactive rounded transition-colors",title:"Close (ESC)",children:l.jsx(Rs,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 min-h-0 space-y-6",style:{WebkitOverflowScrolling:"touch"},children:[(t.noShow||t.robotDied||t.robotTipped||t.mechanicalIssues||t.cardReceived!=="none")&&l.jsxs("div",{className:"bg-danger/10 border border-danger/30 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-danger font-semibold mb-2",children:[l.jsx(Zc,{size:16}),"Issues Reported"]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.noShow&&l.jsx("span",{className:"px-2 py-1 bg-danger/20 text-danger text-xs rounded font-medium",children:"NO SHOW"}),t.robotDied&&l.jsx("span",{className:"px-2 py-1 bg-danger/20 text-danger text-xs rounded font-medium",children:"ROBOT DIED"}),t.robotTipped&&l.jsx("span",{className:"px-2 py-1 bg-warning/20 text-warning text-xs rounded font-medium",children:"ROBOT TIPPED"}),t.mechanicalIssues&&l.jsx("span",{className:"px-2 py-1 bg-warning/20 text-warning text-xs rounded font-medium",children:"MECHANICAL ISSUES"}),t.cardReceived==="yellow"&&l.jsx("span",{className:"px-2 py-1 bg-warning/20 text-warning text-xs rounded font-medium",children:"YELLOW CARD"}),t.cardReceived==="red"&&l.jsx("span",{className:"px-2 py-1 bg-danger/20 text-danger text-xs rounded font-medium",children:"RED CARD"})]})]}),l.jsxs("div",{children:[l.jsx(c,{title:"Pre-Match"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsx(r,{label:"Starting Position",value:t.startingPosition.toUpperCase()}),l.jsx(r,{label:"Preloaded FUEL",value:t.preloadedFuel}),l.jsx(r,{label:"No Show",value:t.noShow?"Yes":"No"})]})]}),l.jsxs("div",{children:[l.jsx(c,{title:"Autonomous"}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3",children:[l.jsx(r,{label:"FUEL Scored",value:t.autoFuelScored}),l.jsx(r,{label:"FUEL Missed",value:t.autoFuelMissed}),l.jsx(r,{label:"Accuracy",value:t.autoFuelScored+t.autoFuelMissed>0?Math.round(t.autoFuelScored/(t.autoFuelScored+t.autoFuelMissed)*100):0,suffix:"%"}),l.jsx(r,{label:"Climb Success",value:t.autoClimbSuccess?"Yes":"No"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsx(n,{value:t.autoMobility,label:"Mobility"}),l.jsx(n,{value:t.autoClimbAttempted,label:"Climb Attempted"}),l.jsx(n,{value:t.autoCrossedBump,label:"Crossed Bump"}),l.jsx(n,{value:t.autoUsedTrench,label:"Used Trench"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[l.jsx(r,{label:"From Depot",value:t.autoFuelFromDepot}),l.jsx(r,{label:"From Neutral",value:t.autoFuelFromNeutral}),l.jsx(r,{label:"From Human",value:t.autoFuelFromHuman})]}),t.commentsAuto&&l.jsxs("div",{className:"mt-3 p-3 bg-surfaceElevated rounded text-sm",children:[l.jsx("p",{className:"text-textSecondary text-xs mb-1",children:"Auto Comments"}),l.jsx("p",{children:t.commentsAuto})]})]}),l.jsxs("div",{children:[l.jsx(c,{title:"Teleop"}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3",children:[l.jsx(r,{label:"FUEL Scored",value:t.teleopTotalScored}),l.jsx(r,{label:"FUEL Missed",value:t.teleopTotalMissed}),l.jsx(r,{label:"Accuracy",value:t.teleopTotalScored+t.teleopTotalMissed>0?Math.round(t.teleopTotalScored/(t.teleopTotalScored+t.teleopTotalMissed)*100):0,suffix:"%"}),l.jsx(r,{label:"Cycles",value:t.cycleCount})]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3 text-sm",children:[l.jsx(r,{label:"Active Hub",value:t.teleopScoresDuringActive}),l.jsx(r,{label:"Inactive Hub",value:t.teleopScoresDuringInactive}),l.jsx(r,{label:"To Human Player",value:t.teleopFuelToHuman}),l.jsx("div",{})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[l.jsx(r,{label:"From Depot",value:t.teleopFuelFromDepot}),l.jsx(r,{label:"From Neutral",value:t.teleopFuelFromNeutral}),l.jsx(r,{label:"From Human",value:t.teleopFuelFromHuman})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(n,{value:t.playedDefense,label:"Played Defense"}),l.jsx(n,{value:t.wasDefended,label:"Was Defended"})]}),t.playedDefense&&l.jsx("div",{className:"mt-2",children:l.jsx(r,{label:"Defense Effectiveness",value:t.defenseEffectiveness.toUpperCase()})}),t.wasDefended&&l.jsx("div",{className:"mt-2",children:l.jsx(r,{label:"Defense Evasion",value:t.defenseEvasion.toUpperCase()})}),t.commentsTeleop&&l.jsxs("div",{className:"mt-3 p-3 bg-surfaceElevated rounded text-sm",children:[l.jsx("p",{className:"text-textSecondary text-xs mb-1",children:"Teleop Comments"}),l.jsx("p",{children:t.commentsTeleop})]})]}),l.jsxs("div",{children:[l.jsx(c,{title:"Endgame"}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3",children:[l.jsx(r,{label:"Climb Level",value:t.climbLevel==="none"?"None":t.climbLevel.replace("level","Level ")}),l.jsx(r,{label:"Climb Time",value:t.climbTime>0?t.climbTime:"-",suffix:t.climbTime>0?"s":""}),l.jsx(r,{label:"Endgame FUEL",value:t.endgameFuelScored}),l.jsx(r,{label:"Parked",value:t.parked?"Yes":"No"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(n,{value:t.climbAttempted,label:"Climb Attempted"}),l.jsx(n,{value:t.climbAssisted,label:"Was Assisted"}),l.jsx(n,{value:t.climbAssistedOther,label:"Assisted Others"})]})]}),l.jsxs("div",{children:[l.jsx(c,{title:"Performance Ratings"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(i,{label:"Driver Skill",value:t.driverSkill}),l.jsx(i,{label:"Intake Speed",value:t.intakeSpeed}),l.jsx(i,{label:"Shooting Accuracy",value:t.shootingAccuracy}),l.jsx(i,{label:"Shooting Speed",value:t.shootingSpeed})]}),l.jsx("div",{className:"mt-3",children:l.jsx(r,{label:"Human Player Rating",value:t.humanPlayerRating.toUpperCase()})})]}),t.commentsOverall&&l.jsxs("div",{children:[l.jsx(c,{title:"Overall Comments"}),l.jsx("div",{className:"p-3 bg-surfaceElevated rounded",children:l.jsx("p",{children:t.commentsOverall})})]}),l.jsxs("div",{className:"text-xs text-textMuted border-t border-border pt-4",children:[l.jsxs("p",{children:["Scouted by: ",t.scoutName]}),l.jsxs("p",{children:["Recorded: ",new Date(t.timestamp).toLocaleString()]})]})]}),l.jsx("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-t border-border rounded-b-lg",children:l.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors font-medium",children:"Close"})})]})})}function Z6(){const{teamNumber:t}=xx(),e=vu(),n=$e(Q=>Q.teamStatistics),r=$e(Q=>Q.matchEntries),i=$e(Q=>Q.pitEntries),c=$e(Q=>Q.eventCode),d=vt(Q=>Q.tbaApiKey),[m,p]=T.useState([]),[g,y]=T.useState(null),[b,N]=T.useState(null),k=parseInt(t||"0"),L=n.find(Q=>Q.teamNumber===k),M=r.filter(Q=>Q.teamNumber===k).sort((Q,$)=>Q.matchNumber-$.matchNumber),I=i.find(Q=>Q.teamNumber===k);if(T.useEffect(()=>{async function Q(){try{const $=sS(k),C=await tS($,c,d);p(C)}catch($){console.error("Failed to load TBA matches:",$)}}Q()},[k,c,d]),!L)return l.jsxs("div",{className:"text-center py-20",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Team Not Found"}),l.jsx("button",{onClick:()=>e(-1),className:"text-blueAlliance hover:underline",children:"Go Back"})]});const B=Q=>{const $=Q.autoFuelScored*1,C=Q.autoClimbSuccess?15:0,E=$+C,A=Q.teleopScoresDuringActive*1,w={none:0,level1:10,level2:20,level3:30}[Q.climbLevel]||0,j=Q.endgameFuelScored*1,D=w+j;return{auto:E,teleop:A,endgame:D,total:E+A+D}},U=M.map(Q=>({match:Q,points:B(Q)})),Y=(()=>{if(U.length<3)return"stable";const Q=U.slice(-3).map(A=>A.points.total),$=U.slice(0,3).map(A=>A.points.total),C=Q.reduce((A,P)=>A+P,0)/Q.length,E=$.reduce((A,P)=>A+P,0)/$.length;return C>E*1.1?"up":C<E*.9?"down":"stable"})();return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>e(-1),className:"p-2 bg-surface hover:bg-interactive rounded-lg transition-colors",title:"Go back",children:l.jsx(HT,{size:20})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("h1",{className:"text-4xl font-bold",children:L.teamNumber}),Y==="up"&&l.jsx(pf,{className:"text-success",size:32}),Y==="down"&&l.jsx(S6,{className:"text-danger",size:32}),Y==="stable"&&l.jsx(qO,{className:"text-textMuted",size:32})]}),L.teamName&&l.jsx("p",{className:"text-xl text-textSecondary mt-1",children:L.teamName})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Total Points"}),l.jsx("p",{className:"text-3xl font-bold mt-1",children:L.avgTotalPoints.toFixed(1)})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Matches Played"}),l.jsx("p",{className:"text-3xl font-bold mt-1",children:L.matchesPlayed})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Auto Accuracy"}),l.jsxs("p",{className:"text-3xl font-bold mt-1",children:[L.autoAccuracy.toFixed(0),"%"]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"L3 Climb Rate"}),l.jsxs("p",{className:"text-3xl font-bold mt-1",children:[L.level3ClimbRate.toFixed(0),"%"]})]})]}),I&&l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Pit Scouting Info"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Drivetrain"}),l.jsx("p",{className:"font-semibold mt-1 capitalize",children:I.drivetrainType})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Shooter Type"}),l.jsx("p",{className:"font-semibold mt-1",children:I.shooterType})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Max Capacity"}),l.jsxs("p",{className:"font-semibold mt-1",children:[I.maxFuelCapacity," FUEL"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Climb Capability"}),l.jsx("p",{className:"font-semibold mt-1 capitalize",children:I.climbCapability})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Max Range"}),l.jsxs("p",{className:"font-semibold mt-1",children:[I.maxShootingRange," ft"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Preferred Role"}),l.jsx("p",{className:"font-semibold mt-1 capitalize",children:I.preferredRole})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Weight"}),l.jsxs("p",{className:"font-semibold mt-1",children:[I.robotWeight," lbs"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Driver Experience"}),l.jsx("p",{className:"font-semibold mt-1",children:I.driverExperience})]})]}),I.comments&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[l.jsx("p",{className:"text-textSecondary text-sm",children:"Comments"}),l.jsx("p",{className:"mt-1",children:I.comments})]})]}),l.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[l.jsx("div",{className:"p-6 border-b border-border",children:l.jsx("h2",{className:"text-xl font-bold",children:"Match History"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-surfaceElevated border-b border-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:"Match"}),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Video"}),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Alliance"}),l.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Total Pts"}),l.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Auto"}),l.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Teleop"}),l.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Endgame"}),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Auto Fuel"}),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Teleop Fuel"}),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Climb"}),l.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Cycles"}),l.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:"Notes"})]})}),l.jsx("tbody",{className:"divide-y divide-border",children:U.map(({match:Q,points:$})=>{const C=m.find(A=>A.comp_level==="qm"&&A.match_number===Q.matchNumber),E=C?nS(C):null;return l.jsxs("tr",{className:"hover:bg-interactive transition-colors",children:[l.jsx("td",{className:"px-4 py-4",children:l.jsxs("button",{onClick:()=>N(Q),className:"flex items-center gap-1 font-semibold text-textPrimary hover:text-blueAlliance transition-colors",title:"View full scouting data",children:[Q.matchType==="qualification"?"Q":Q.matchType==="playoff"?"P":"Pr",Q.matchNumber,l.jsx(SO,{size:14,className:"text-textMuted"})]})}),l.jsx("td",{className:"px-4 py-4 text-center",children:E?l.jsx("button",{onClick:()=>y({matchNumber:Q.matchNumber,videoUrl:E}),className:"p-1 text-danger hover:bg-danger/10 rounded transition-colors",title:"Watch match video",children:l.jsx(hf,{size:18,fill:"currentColor"})}):l.jsx("span",{className:"text-textMuted text-xs",children:"-"})}),l.jsx("td",{className:"px-4 py-4 text-center",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Q.alliance==="red"?"bg-redAlliance/20 text-redAlliance":"bg-blueAlliance/20 text-blueAlliance"}`,children:Q.alliance.toUpperCase()})}),l.jsx("td",{className:"px-4 py-4 text-right font-bold",children:$.total}),l.jsx("td",{className:"px-4 py-4 text-right text-textSecondary",children:$.auto}),l.jsx("td",{className:"px-4 py-4 text-right text-textSecondary",children:$.teleop}),l.jsx("td",{className:"px-4 py-4 text-right text-textSecondary",children:$.endgame}),l.jsxs("td",{className:"px-4 py-4 text-center",children:[l.jsx("span",{className:"text-success",children:Q.autoFuelScored}),l.jsx("span",{className:"text-textMuted",children:"/"}),l.jsx("span",{className:"text-danger",children:Q.autoFuelMissed})]}),l.jsxs("td",{className:"px-4 py-4 text-center",children:[l.jsx("span",{className:"text-success",children:Q.teleopTotalScored}),l.jsx("span",{className:"text-textMuted",children:"/"}),l.jsx("span",{className:"text-danger",children:Q.teleopTotalMissed})]}),l.jsx("td",{className:"px-4 py-4 text-center",children:Q.climbLevel==="none"?l.jsx("span",{className:"text-textMuted",children:"-"}):l.jsx("span",{className:"font-semibold capitalize",children:Q.climbLevel.replace("level","L")})}),l.jsx("td",{className:"px-4 py-4 text-center",children:Q.cycleCount}),l.jsxs("td",{className:"px-4 py-4 text-sm text-textSecondary max-w-xs truncate",children:[Q.robotDied&&l.jsx("span",{className:"text-danger mr-2",children:"DIED"}),Q.robotTipped&&l.jsx("span",{className:"text-warning mr-2",children:"TIPPED"}),Q.cardReceived!=="none"&&l.jsxs("span",{className:Q.cardReceived==="yellow"?"text-warning mr-2":"text-danger mr-2",children:[Q.cardReceived.toUpperCase()," CARD"]}),Q.commentsOverall]})]},Q.id)})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Auto Performance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Avg FUEL Scored"}),l.jsx("span",{className:"font-semibold",children:L.avgAutoFuelScored.toFixed(1)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Accuracy"}),l.jsxs("span",{className:"font-semibold",children:[L.autoAccuracy.toFixed(1),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Mobility Rate"}),l.jsxs("span",{className:"font-semibold",children:[L.autoMobilityRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Auto Climb Rate"}),l.jsxs("span",{className:"font-semibold",children:[L.autoClimbRate.toFixed(0),"%"]})]})]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Teleop Performance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Avg FUEL Scored"}),l.jsx("span",{className:"font-semibold",children:L.avgTeleopFuelScored.toFixed(1)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Accuracy"}),l.jsxs("span",{className:"font-semibold",children:[L.teleopAccuracy.toFixed(1),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Avg Cycles"}),l.jsx("span",{className:"font-semibold",children:L.avgCycleCount.toFixed(1)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Active HUB Scoring"}),l.jsx("span",{className:"font-semibold",children:L.avgActiveHubScores.toFixed(1)})]})]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Endgame Performance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Climb Attempt Rate"}),l.jsxs("span",{className:"font-semibold",children:[L.climbAttemptRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Level 1 Rate"}),l.jsxs("span",{className:"font-semibold",children:[L.level1ClimbRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Level 2 Rate"}),l.jsxs("span",{className:"font-semibold",children:[L.level2ClimbRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Level 3 Rate"}),l.jsxs("span",{className:"font-semibold text-success",children:[L.level3ClimbRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Avg Climb Time"}),l.jsxs("span",{className:"font-semibold",children:[L.avgClimbTime.toFixed(1),"s"]})]})]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Reliability"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Robot Died"}),l.jsxs("span",{className:L.diedRate>10?"text-danger font-semibold":"font-semibold",children:[L.diedRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Robot Tipped"}),l.jsxs("span",{className:L.tippedRate>10?"text-warning font-semibold":"font-semibold",children:[L.tippedRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Mechanical Issues"}),l.jsxs("span",{className:L.mechanicalIssuesRate>15?"text-danger font-semibold":"font-semibold",children:[L.mechanicalIssuesRate.toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-textSecondary",children:"Driver Skill (1-5)"}),l.jsx("span",{className:"font-semibold",children:L.avgDriverSkill.toFixed(1)})]})]})]})]}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>y(null),children:l.jsxs("div",{className:"bg-surface rounded-lg max-w-4xl w-full overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[l.jsxs("h3",{className:"font-bold",children:["Match Q",g.matchNumber," - Team ",k]}),l.jsx("button",{onClick:()=>y(null),className:"p-1 hover:bg-interactive rounded transition-colors",children:l.jsx(Rs,{size:20})})]}),l.jsx("div",{className:"aspect-video w-full",children:l.jsx("iframe",{width:"100%",height:"100%",src:g.videoUrl.replace("watch?v=","embed/"),title:`Match Q${g.matchNumber}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})})]})}),b&&l.jsx(J6,{match:b,onClose:()=>N(null)})]})}function eL(){const[t,e]=T.useState(!1),[n,r]=T.useState([]),i=()=>{e(!t),t&&r([])},c=p=>{r(g=>g.includes(p)?g.filter(y=>y!==p):g.length>=2?g:[...g,p])},d=()=>{r([])},m=n.length===2;return{isCompareMode:t,selectedTeams:n,toggleCompareMode:i,toggleTeamSelection:c,clearSelection:d,canCompare:m}}function JT({team1:t,team2:e,onPickTeam:n,onClose:r}){T.useEffect(()=>{const d=m=>{m.key==="Escape"&&r()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[r]);const i=({label:d,getValue:m,format:p="number",higherIsBetter:g=!0,decimals:y=1})=>{const b=m(t),N=m(e),k=Math.max(b,N),L=Math.min(b,N),M=B=>{switch(p){case"percentage":return`${B.toFixed(y)}%`;case"time":return`${B.toFixed(y)}s`;case"level":return B===0?"None":`Level ${B}`;default:return B.toFixed(y)}},I=B=>{if(k===L)return"text-textPrimary";const U=g?B===k:B===L,K=g?B===L:B===k;return U?"text-success font-bold":K?"text-danger":"text-textPrimary"};return l.jsxs("div",{className:"grid grid-cols-[1fr_80px_80px] sm:grid-cols-[1fr_100px_100px] gap-2 py-2 border-b border-border",children:[l.jsx("div",{className:"text-sm text-textSecondary",children:d}),l.jsx("div",{className:`text-sm text-center ${I(b)}`,children:M(b)}),l.jsx("div",{className:`text-sm text-center ${I(N)}`,children:M(N)})]})},c=({title:d})=>l.jsx("div",{className:"bg-surfaceElevated px-3 py-2 font-bold text-sm mt-4 first:mt-0",children:d});return l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-surface rounded-lg w-full max-w-[900px] max-h-[90vh] relative flex flex-col",onClick:d=>d.stopPropagation(),style:{WebkitOverflowScrolling:"touch"},children:[l.jsxs("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-b border-border flex justify-between items-center rounded-t-lg",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Team Comparison"}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-interactive rounded transition-colors",title:"Close (ESC)",children:l.jsx(Rs,{size:20})})]}),l.jsxs("div",{className:"flex-shrink-0 grid grid-cols-[1fr_80px_80px] sm:grid-cols-[1fr_100px_100px] gap-2 p-4 border-b border-border bg-surface",children:[l.jsx("div",{className:"text-sm font-semibold text-textSecondary",children:"Metric"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold",children:t.teamNumber}),t.teamName&&l.jsx("div",{className:"text-xs text-textSecondary truncate",children:t.teamName})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold",children:e.teamNumber}),e.teamName&&l.jsx("div",{className:"text-xs text-textSecondary truncate",children:e.teamName})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",style:{WebkitOverflowScrolling:"touch"},children:[l.jsx(c,{title:"Overall Scoring"}),l.jsx(i,{label:"Avg Total Points",getValue:d=>d.avgTotalPoints}),l.jsx(i,{label:"Avg Auto Points",getValue:d=>d.avgAutoPoints}),l.jsx(i,{label:"Avg Teleop Points",getValue:d=>d.avgTeleopPoints}),l.jsx(i,{label:"Avg Endgame Points",getValue:d=>d.avgEndgamePoints}),l.jsx(c,{title:"Climbing Performance"}),l.jsx(i,{label:"Max Endgame Level",getValue:d=>d.level3ClimbRate>0?3:d.level2ClimbRate>0?2:d.level1ClimbRate>0?1:0,format:"level"}),l.jsx(i,{label:"Level 3 Climb Rate",getValue:d=>d.level3ClimbRate,format:"percentage"}),l.jsx(i,{label:"Avg Climb Time",getValue:d=>d.avgClimbTime,format:"time",higherIsBetter:!1}),l.jsx(i,{label:"Climb Attempt Rate",getValue:d=>d.climbAttemptRate,format:"percentage"}),l.jsx(c,{title:"Autonomous Performance"}),l.jsx(i,{label:"Avg Auto FUEL Scored",getValue:d=>d.avgAutoFuelScored,decimals:1}),l.jsx(i,{label:"Auto Accuracy",getValue:d=>d.autoAccuracy,format:"percentage"}),l.jsx(i,{label:"Mobility Rate",getValue:d=>d.autoMobilityRate,format:"percentage"}),l.jsx(i,{label:"Auto Climb Success Rate",getValue:d=>d.autoClimbRate,format:"percentage"}),l.jsx(c,{title:"Reliability"}),l.jsx(i,{label:"No Show Rate",getValue:d=>d.noShowRate,format:"percentage",higherIsBetter:!1}),l.jsx(i,{label:"Robot Died Rate",getValue:d=>d.diedRate,format:"percentage",higherIsBetter:!1}),l.jsx(i,{label:"Mechanical Issues Rate",getValue:d=>d.mechanicalIssuesRate,format:"percentage",higherIsBetter:!1})]}),l.jsxs("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-t border-border rounded-b-lg",children:[l.jsx("p",{className:"text-center text-sm text-textSecondary mb-3",children:"Which team should rank higher?"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("button",{onClick:()=>n(t.teamNumber),className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-3 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors min-h-[48px] text-sm sm:text-base",children:[l.jsx(xa,{size:18}),t.teamNumber]}),l.jsxs("button",{onClick:()=>n(e.teamNumber),className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-3 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors min-h-[48px] text-sm sm:text-base",children:[l.jsx(xa,{size:18}),e.teamNumber]})]})]})]})})}function tL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return T.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Xf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Po(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Cy(t){return"nodeType"in t}function ns(t){var e,n;return t?Po(t)?t:Cy(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Ry(t){const{Document:e}=ns(t);return t instanceof e}function Lu(t){return Po(t)?!1:t instanceof ns(t).HTMLElement}function ZT(t){return t instanceof ns(t).SVGElement}function Oo(t){return t?Po(t)?t.document:Cy(t)?Ry(t)?t:Lu(t)||ZT(t)?t.ownerDocument:document:document:document}const hr=Xf?T.useLayoutEffect:T.useEffect;function Wf(t){const e=T.useRef(t);return hr(()=>{e.current=t}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function nL(){const t=T.useRef(null),e=T.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function gu(t,e){e===void 0&&(e=[t]);const n=T.useRef(t);return hr(()=>{n.current!==t&&(n.current=t)},e),n}function Vu(t,e){const n=T.useRef();return T.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function gf(t){const e=Wf(t),n=T.useRef(null),r=T.useCallback(i=>{i!==n.current&&e?.(i,n.current),n.current=i},[]);return[n,r]}function xf(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let _g={};function Uu(t,e){return T.useMemo(()=>{if(e)return e;const n=_g[t]==null?0:_g[t]+1;return _g[t]=n,t+"-"+n},[t,e])}function e2(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((c,d)=>{const m=Object.entries(d);for(const[p,g]of m){const y=c[p];y!=null&&(c[p]=y+t*g)}return c},{...e})}}const go=e2(1),yf=e2(-1);function sL(t){return"clientX"in t&&"clientY"in t}function Jf(t){if(!t)return!1;const{KeyboardEvent:e}=ns(t.target);return e&&t instanceof e}function rL(t){if(!t)return!1;const{TouchEvent:e}=ns(t.target);return e&&t instanceof e}function bf(t){if(rL(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return sL(t)?{x:t.clientX,y:t.clientY}:null}const Ei=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ei.Translate.toString(t),Ei.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),pN="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function aL(t){return t.matches(pN)?t:t.querySelector(pN)}const iL={display:"none"};function lL(t){let{id:e,value:n}=t;return At.createElement("div",{id:e,style:iL},n)}function oL(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return At.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function cL(){const[t,e]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const t2=T.createContext(null);function uL(t){const e=T.useContext(t2);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function dL(){const[t]=T.useState(()=>new Set),e=T.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[T.useCallback(r=>{let{type:i,event:c}=r;t.forEach(d=>{var m;return(m=d[i])==null?void 0:m.call(d,c)})},[t]),e]}const hL={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},fL={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function mL(t){let{announcements:e=fL,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=hL}=t;const{announce:c,announcement:d}=cL(),m=Uu("DndLiveRegion"),[p,g]=T.useState(!1);if(T.useEffect(()=>{g(!0)},[]),uL(T.useMemo(()=>({onDragStart(b){let{active:N}=b;c(e.onDragStart({active:N}))},onDragMove(b){let{active:N,over:k}=b;e.onDragMove&&c(e.onDragMove({active:N,over:k}))},onDragOver(b){let{active:N,over:k}=b;c(e.onDragOver({active:N,over:k}))},onDragEnd(b){let{active:N,over:k}=b;c(e.onDragEnd({active:N,over:k}))},onDragCancel(b){let{active:N,over:k}=b;c(e.onDragCancel({active:N,over:k}))}}),[c,e])),!p)return null;const y=At.createElement(At.Fragment,null,At.createElement(lL,{id:r,value:i.draggable}),At.createElement(oL,{id:m,announcement:d}));return n?zc.createPortal(y,n):y}var xn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(xn||(xn={}));function vf(){}function pL(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function gL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return T.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const fr=Object.freeze({x:0,y:0});function xL(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function yL(t,e){const n=bf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function bL(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function vL(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function _L(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function gN(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const NL=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=gN(e,e.left,e.top),c=[];for(const d of r){const{id:m}=d,p=n.get(m);if(p){const g=xL(gN(p),i);c.push({id:m,data:{droppableContainer:d,value:g}})}}return c.sort(bL)};function SL(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),c=Math.min(e.top+e.height,t.top+t.height),d=i-r,m=c-n;if(r<i&&n<c){const p=e.width*e.height,g=t.width*t.height,y=d*m,b=y/(p+g-y);return Number(b.toFixed(4))}return 0}const EL=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const c of r){const{id:d}=c,m=n.get(d);if(m){const p=SL(m,e);p>0&&i.push({id:d,data:{droppableContainer:c,value:p}})}}return i.sort(vL)};function TL(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function n2(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:fr}function wL(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return i.reduce((d,m)=>({...d,top:d.top+t*m.y,bottom:d.bottom+t*m.y,left:d.left+t*m.x,right:d.right+t*m.x}),{...n})}}const AL=wL(1);function s2(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function jL(t,e,n){const r=s2(e);if(!r)return t;const{scaleX:i,scaleY:c,x:d,y:m}=r,p=t.left-d-(1-i)*parseFloat(n),g=t.top-m-(1-c)*parseFloat(n.slice(n.indexOf(" ")+1)),y=i?t.width/i:t.width,b=c?t.height/c:t.height;return{width:y,height:b,top:g,right:p+y,bottom:g+b,left:p}}const CL={ignoreTransform:!1};function Lo(t,e){e===void 0&&(e=CL);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:g,transformOrigin:y}=ns(t).getComputedStyle(t);g&&(n=jL(n,g,y))}const{top:r,left:i,width:c,height:d,bottom:m,right:p}=n;return{top:r,left:i,width:c,height:d,bottom:m,right:p}}function xN(t){return Lo(t,{ignoreTransform:!0})}function RL(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function kL(t,e){return e===void 0&&(e=ns(t).getComputedStyle(t)),e.position==="fixed"}function IL(t,e){e===void 0&&(e=ns(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const c=e[i];return typeof c=="string"?n.test(c):!1})}function ky(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Ry(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Lu(i)||ZT(i)||n.includes(i))return n;const c=ns(t).getComputedStyle(i);return i!==t&&IL(i,c)&&n.push(i),kL(i,c)?n:r(i.parentNode)}return t?r(t):n}function r2(t){const[e]=ky(t,1);return e??null}function Ng(t){return!Xf||!t?null:Po(t)?t:Cy(t)?Ry(t)||t===Oo(t).scrollingElement?window:Lu(t)?t:null:null}function a2(t){return Po(t)?t.scrollX:t.scrollLeft}function i2(t){return Po(t)?t.scrollY:t.scrollTop}function hx(t){return{x:a2(t),y:i2(t)}}var En;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(En||(En={}));function l2(t){return!Xf||!t?!1:t===document.scrollingElement}function o2(t){const e={x:0,y:0},n=l2(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,c=t.scrollLeft<=e.x,d=t.scrollTop>=r.y,m=t.scrollLeft>=r.x;return{isTop:i,isLeft:c,isBottom:d,isRight:m,maxScroll:r,minScroll:e}}const DL={x:.2,y:.2};function ML(t,e,n,r,i){let{top:c,left:d,right:m,bottom:p}=n;r===void 0&&(r=10),i===void 0&&(i=DL);const{isTop:g,isBottom:y,isLeft:b,isRight:N}=o2(t),k={x:0,y:0},L={x:0,y:0},M={height:e.height*i.y,width:e.width*i.x};return!g&&c<=e.top+M.height?(k.y=En.Backward,L.y=r*Math.abs((e.top+M.height-c)/M.height)):!y&&p>=e.bottom-M.height&&(k.y=En.Forward,L.y=r*Math.abs((e.bottom-M.height-p)/M.height)),!N&&m>=e.right-M.width?(k.x=En.Forward,L.x=r*Math.abs((e.right-M.width-m)/M.width)):!b&&d<=e.left+M.width&&(k.x=En.Backward,L.x=r*Math.abs((e.left+M.width-d)/M.width)),{direction:k,speed:L}}function PL(t){if(t===document.scrollingElement){const{innerWidth:c,innerHeight:d}=window;return{top:0,left:0,right:c,bottom:d,width:c,height:d}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function c2(t){return t.reduce((e,n)=>go(e,hx(n)),fr)}function OL(t){return t.reduce((e,n)=>e+a2(n),0)}function LL(t){return t.reduce((e,n)=>e+i2(n),0)}function u2(t,e){if(e===void 0&&(e=Lo),!t)return;const{top:n,left:r,bottom:i,right:c}=e(t);r2(t)&&(i<=0||c<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const VL=[["x",["left","right"],OL],["y",["top","bottom"],LL]];class Iy{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ky(n),i=c2(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,d,m]of VL)for(const p of d)Object.defineProperty(this,p,{get:()=>{const g=m(r),y=i[c]-g;return this.rect[p]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function UL(t){const{EventTarget:e}=ns(t);return t instanceof e?t:Oo(t)}function Sg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Gs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Gs||(Gs={}));function yN(t){t.preventDefault()}function zL(t){t.stopPropagation()}var ut;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ut||(ut={}));const d2={start:[ut.Space,ut.Enter],cancel:[ut.Esc],end:[ut.Space,ut.Enter,ut.Tab]},FL=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ut.Right:return{...n,x:n.x+25};case ut.Left:return{...n,x:n.x-25};case ut.Down:return{...n,y:n.y+25};case ut.Up:return{...n,y:n.y-25}}};class h2{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new eu(Oo(n)),this.windowListeners=new eu(ns(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Gs.Resize,this.handleCancel),this.windowListeners.add(Gs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Gs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&u2(r),n(fr)}handleKeyDown(e){if(Jf(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:c=d2,coordinateGetter:d=FL,scrollBehavior:m="smooth"}=i,{code:p}=e;if(c.end.includes(p)){this.handleEnd(e);return}if(c.cancel.includes(p)){this.handleCancel(e);return}const{collisionRect:g}=r.current,y=g?{x:g.left,y:g.top}:fr;this.referenceCoordinates||(this.referenceCoordinates=y);const b=d(e,{active:n,context:r.current,currentCoordinates:y});if(b){const N=yf(b,y),k={x:0,y:0},{scrollableAncestors:L}=r.current;for(const M of L){const I=e.code,{isTop:B,isRight:U,isLeft:K,isBottom:Y,maxScroll:Q,minScroll:$}=o2(M),C=PL(M),E={x:Math.min(I===ut.Right?C.right-C.width/2:C.right,Math.max(I===ut.Right?C.left:C.left+C.width/2,b.x)),y:Math.min(I===ut.Down?C.bottom-C.height/2:C.bottom,Math.max(I===ut.Down?C.top:C.top+C.height/2,b.y))},A=I===ut.Right&&!U||I===ut.Left&&!K,P=I===ut.Down&&!Y||I===ut.Up&&!B;if(A&&E.x!==b.x){const w=M.scrollLeft+N.x,j=I===ut.Right&&w<=Q.x||I===ut.Left&&w>=$.x;if(j&&!N.y){M.scrollTo({left:w,behavior:m});return}j?k.x=M.scrollLeft-w:k.x=I===ut.Right?M.scrollLeft-Q.x:M.scrollLeft-$.x,k.x&&M.scrollBy({left:-k.x,behavior:m});break}else if(P&&E.y!==b.y){const w=M.scrollTop+N.y,j=I===ut.Down&&w<=Q.y||I===ut.Up&&w>=$.y;if(j&&!N.x){M.scrollTo({top:w,behavior:m});return}j?k.y=M.scrollTop-w:k.y=I===ut.Down?M.scrollTop-Q.y:M.scrollTop-$.y,k.y&&M.scrollBy({top:-k.y,behavior:m});break}}this.handleMove(e,go(yf(b,this.referenceCoordinates),k))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}h2.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=d2,onActivation:i}=e,{active:c}=n;const{code:d}=t.nativeEvent;if(r.start.includes(d)){const m=c.activatorNode.current;return m&&t.target!==m?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function bN(t){return!!(t&&"distance"in t)}function vN(t){return!!(t&&"delay"in t)}class Dy{constructor(e,n,r){var i;r===void 0&&(r=UL(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:c}=e,{target:d}=c;this.props=e,this.events=n,this.document=Oo(d),this.documentListeners=new eu(this.document),this.listeners=new eu(r),this.windowListeners=new eu(ns(d)),this.initialCoordinates=(i=bf(c))!=null?i:fr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Gs.Resize,this.handleCancel),this.windowListeners.add(Gs.DragStart,yN),this.windowListeners.add(Gs.VisibilityChange,this.handleCancel),this.windowListeners.add(Gs.ContextMenu,yN),this.documentListeners.add(Gs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vN(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(bN(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Gs.Click,zL,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Gs.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:c}=this,{onMove:d,options:{activationConstraint:m}}=c;if(!i)return;const p=(n=bf(e))!=null?n:fr,g=yf(i,p);if(!r&&m){if(bN(m)){if(m.tolerance!=null&&Sg(g,m.tolerance))return this.handleCancel();if(Sg(g,m.distance))return this.handleStart()}if(vN(m)&&Sg(g,m.tolerance))return this.handleCancel();this.handlePending(m,g);return}e.cancelable&&e.preventDefault(),d(p)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ut.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const BL={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class My extends Dy{constructor(e){const{event:n}=e,r=Oo(n.target);super(e,BL,r)}}My.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const qL={move:{name:"mousemove"},end:{name:"mouseup"}};var fx;(function(t){t[t.RightClick=2]="RightClick"})(fx||(fx={}));class HL extends Dy{constructor(e){super(e,qL,Oo(e.event.target))}}HL.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===fx.RightClick?!1:(r?.({event:n}),!0)}}];const Eg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $L extends Dy{constructor(e){super(e,Eg)}static setup(){return window.addEventListener(Eg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Eg.move.name,e)};function e(){}}}$L.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var tu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(tu||(tu={}));var _f;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(_f||(_f={}));function GL(t){let{acceleration:e,activator:n=tu.Pointer,canScroll:r,draggingRect:i,enabled:c,interval:d=5,order:m=_f.TreeOrder,pointerCoordinates:p,scrollableAncestors:g,scrollableAncestorRects:y,delta:b,threshold:N}=t;const k=YL({delta:b,disabled:!c}),[L,M]=nL(),I=T.useRef({x:0,y:0}),B=T.useRef({x:0,y:0}),U=T.useMemo(()=>{switch(n){case tu.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case tu.DraggableRect:return i}},[n,i,p]),K=T.useRef(null),Y=T.useCallback(()=>{const $=K.current;if(!$)return;const C=I.current.x*B.current.x,E=I.current.y*B.current.y;$.scrollBy(C,E)},[]),Q=T.useMemo(()=>m===_f.TreeOrder?[...g].reverse():g,[m,g]);T.useEffect(()=>{if(!c||!g.length||!U){M();return}for(const $ of Q){if(r?.($)===!1)continue;const C=g.indexOf($),E=y[C];if(!E)continue;const{direction:A,speed:P}=ML($,E,U,e,N);for(const w of["x","y"])k[w][A[w]]||(P[w]=0,A[w]=0);if(P.x>0||P.y>0){M(),K.current=$,L(Y,d),I.current=P,B.current=A;return}}I.current={x:0,y:0},B.current={x:0,y:0},M()},[e,Y,r,M,c,d,JSON.stringify(U),JSON.stringify(k),L,g,Q,y,JSON.stringify(N)])}const KL={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function YL(t){let{delta:e,disabled:n}=t;const r=xf(e);return Vu(i=>{if(n||!r||!i)return KL;const c={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[En.Backward]:i.x[En.Backward]||c.x===-1,[En.Forward]:i.x[En.Forward]||c.x===1},y:{[En.Backward]:i.y[En.Backward]||c.y===-1,[En.Forward]:i.y[En.Forward]||c.y===1}}},[n,e,r])}function QL(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Vu(i=>{var c;return e==null?null:(c=r??i)!=null?c:null},[r,e])}function XL(t,e){return T.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,c=i.activators.map(d=>({eventName:d.eventName,handler:e(d.handler,r)}));return[...n,...c]},[]),[t,e])}var xu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(xu||(xu={}));var mx;(function(t){t.Optimized="optimized"})(mx||(mx={}));const _N=new Map;function WL(t,e){let{dragging:n,dependencies:r,config:i}=e;const[c,d]=T.useState(null),{frequency:m,measure:p,strategy:g}=i,y=T.useRef(t),b=I(),N=gu(b),k=T.useCallback(function(B){B===void 0&&(B=[]),!N.current&&d(U=>U===null?B:U.concat(B.filter(K=>!U.includes(K))))},[N]),L=T.useRef(null),M=Vu(B=>{if(b&&!n)return _N;if(!B||B===_N||y.current!==t||c!=null){const U=new Map;for(let K of t){if(!K)continue;if(c&&c.length>0&&!c.includes(K.id)&&K.rect.current){U.set(K.id,K.rect.current);continue}const Y=K.node.current,Q=Y?new Iy(p(Y),Y):null;K.rect.current=Q,Q&&U.set(K.id,Q)}return U}return B},[t,c,n,b,p]);return T.useEffect(()=>{y.current=t},[t]),T.useEffect(()=>{b||k()},[n,b]),T.useEffect(()=>{c&&c.length>0&&d(null)},[JSON.stringify(c)]),T.useEffect(()=>{b||typeof m!="number"||L.current!==null||(L.current=setTimeout(()=>{k(),L.current=null},m))},[m,b,k,...r]),{droppableRects:M,measureDroppableContainers:k,measuringScheduled:c!=null};function I(){switch(g){case xu.Always:return!1;case xu.BeforeDragging:return n;default:return!n}}}function Py(t,e){return Vu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function JL(t,e){return Py(t,e)}function ZL(t){let{callback:e,disabled:n}=t;const r=Wf(e),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(r)},[r,n]);return T.useEffect(()=>()=>i?.disconnect(),[i]),i}function Zf(t){let{callback:e,disabled:n}=t;const r=Wf(e),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(r)},[n]);return T.useEffect(()=>()=>i?.disconnect(),[i]),i}function e5(t){return new Iy(Lo(t),t)}function NN(t,e,n){e===void 0&&(e=e5);const[r,i]=T.useState(null);function c(){i(p=>{if(!t)return null;if(t.isConnected===!1){var g;return(g=p??n)!=null?g:null}const y=e(t);return JSON.stringify(p)===JSON.stringify(y)?p:y})}const d=ZL({callback(p){if(t)for(const g of p){const{type:y,target:b}=g;if(y==="childList"&&b instanceof HTMLElement&&b.contains(t)){c();break}}}}),m=Zf({callback:c});return hr(()=>{c(),t?(m?.observe(t),d?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),d?.disconnect())},[t]),r}function t5(t){const e=Py(t);return n2(t,e)}const SN=[];function n5(t){const e=T.useRef(t),n=Vu(r=>t?r&&r!==SN&&t&&e.current&&t.parentNode===e.current.parentNode?r:ky(t):SN,[t]);return T.useEffect(()=>{e.current=t},[t]),n}function s5(t){const[e,n]=T.useState(null),r=T.useRef(t),i=T.useCallback(c=>{const d=Ng(c.target);d&&n(m=>m?(m.set(d,hx(d)),new Map(m)):null)},[]);return T.useEffect(()=>{const c=r.current;if(t!==c){d(c);const m=t.map(p=>{const g=Ng(p);return g?(g.addEventListener("scroll",i,{passive:!0}),[g,hx(g)]):null}).filter(p=>p!=null);n(m.length?new Map(m):null),r.current=t}return()=>{d(t),d(c)};function d(m){m.forEach(p=>{const g=Ng(p);g?.removeEventListener("scroll",i)})}},[i,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((c,d)=>go(c,d),fr):c2(t):fr,[t,e])}function EN(t,e){e===void 0&&(e=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},e),T.useEffect(()=>{const r=t!==fr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?yf(t,n.current):fr}function r5(t){T.useEffect(()=>{if(!Xf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function a5(t,e){return T.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:c}=r;return n[i]=d=>{c(d,e)},n},{}),[t,e])}function f2(t){return T.useMemo(()=>t?RL(t):null,[t])}const TN=[];function i5(t,e){e===void 0&&(e=Lo);const[n]=t,r=f2(n?ns(n):null),[i,c]=T.useState(TN);function d(){c(()=>t.length?t.map(p=>l2(p)?r:new Iy(e(p),p)):TN)}const m=Zf({callback:d});return hr(()=>{m?.disconnect(),d(),t.forEach(p=>m?.observe(p))},[t]),i}function m2(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Lu(e)?e:t}function l5(t){let{measure:e}=t;const[n,r]=T.useState(null),i=T.useCallback(g=>{for(const{target:y}of g)if(Lu(y)){r(b=>{const N=e(y);return b?{...b,width:N.width,height:N.height}:N});break}},[e]),c=Zf({callback:i}),d=T.useCallback(g=>{const y=m2(g);c?.disconnect(),y&&c?.observe(y),r(y?e(y):null)},[e,c]),[m,p]=gf(d);return T.useMemo(()=>({nodeRef:m,rect:n,setRef:p}),[n,m,p])}const o5=[{sensor:My,options:{}},{sensor:h2,options:{}}],c5={current:{}},Vh={draggable:{measure:xN},droppable:{measure:xN,strategy:xu.WhileDragging,frequency:mx.Optimized},dragOverlay:{measure:Lo}};class nu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const u5={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:vf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vh,measureDroppableContainers:vf,windowRect:null,measuringScheduled:!1},p2={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:vf,draggableNodes:new Map,over:null,measureDroppableContainers:vf},zu=T.createContext(p2),g2=T.createContext(u5);function d5(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nu}}}function h5(t,e){switch(e.type){case xn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case xn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case xn.DragEnd:case xn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xn.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new nu(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case xn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,c=t.droppable.containers.get(n);if(!c||r!==c.key)return t;const d=new nu(t.droppable.containers);return d.set(n,{...c,disabled:i}),{...t,droppable:{...t.droppable,containers:d}}}case xn.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const c=new nu(t.droppable.containers);return c.delete(n),{...t,droppable:{...t.droppable,containers:c}}}default:return t}}function f5(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=T.useContext(zu),c=xf(r),d=xf(n?.id);return T.useEffect(()=>{if(!e&&!r&&c&&d!=null){if(!Jf(c)||document.activeElement===c.target)return;const m=i.get(d);if(!m)return;const{activatorNode:p,node:g}=m;if(!p.current&&!g.current)return;requestAnimationFrame(()=>{for(const y of[p.current,g.current]){if(!y)continue;const b=aL(y);if(b){b.focus();break}}})}},[r,e,i,d,c]),null}function x2(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,c)=>c({transform:i,...r}),n):n}function m5(t){return T.useMemo(()=>({draggable:{...Vh.draggable,...t?.draggable},droppable:{...Vh.droppable,...t?.droppable},dragOverlay:{...Vh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function p5(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const c=T.useRef(!1),{x:d,y:m}=typeof i=="boolean"?{x:i,y:i}:i;hr(()=>{if(!d&&!m||!e){c.current=!1;return}if(c.current||!r)return;const g=e?.node.current;if(!g||g.isConnected===!1)return;const y=n(g),b=n2(y,r);if(d||(b.x=0),m||(b.y=0),c.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const N=r2(g);N&&N.scrollBy({top:b.y,left:b.x})}},[e,d,m,r,n])}const em=T.createContext({...fr,scaleX:1,scaleY:1});var si;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(si||(si={}));const g5=T.memo(function(e){var n,r,i,c;let{id:d,accessibility:m,autoScroll:p=!0,children:g,sensors:y=o5,collisionDetection:b=EL,measuring:N,modifiers:k,...L}=e;const M=T.useReducer(h5,void 0,d5),[I,B]=M,[U,K]=dL(),[Y,Q]=T.useState(si.Uninitialized),$=Y===si.Initialized,{draggable:{active:C,nodes:E,translate:A},droppable:{containers:P}}=I,w=C!=null?E.get(C):null,j=T.useRef({initial:null,translated:null}),D=T.useMemo(()=>{var Le;return C!=null?{id:C,data:(Le=w?.data)!=null?Le:c5,rect:j}:null},[C,w]),F=T.useRef(null),[ue,z]=T.useState(null),[ee,pe]=T.useState(null),H=gu(L,Object.values(L)),ge=Uu("DndDescribedBy",d),V=T.useMemo(()=>P.getEnabled(),[P]),Z=m5(N),{droppableRects:oe,measureDroppableContainers:xe,measuringScheduled:Ae}=WL(V,{dragging:$,dependencies:[A.x,A.y],config:Z.droppable}),we=QL(E,C),De=T.useMemo(()=>ee?bf(ee):null,[ee]),J=Ds(),X=JL(we,Z.draggable.measure);p5({activeNode:C!=null?E.get(C):null,config:J.layoutShiftCompensation,initialRect:X,measure:Z.draggable.measure});const ye=NN(we,Z.draggable.measure,X),qe=NN(we?we.parentElement:null),Se=T.useRef({activatorEvent:null,active:null,activeNode:we,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),jt=P.getNodeFor((n=Se.current.over)==null?void 0:n.id),ht=l5({measure:Z.dragOverlay.measure}),_t=(r=ht.nodeRef.current)!=null?r:we,Ze=$?(i=ht.rect)!=null?i:ye:null,Kn=!!(ht.nodeRef.current&&ht.rect),ms=t5(Kn?null:ye),kt=f2(_t?ns(_t):null),at=n5($?jt??we:null),Yn=i5(at),ks=x2(k,{transform:{x:A.x-ms.x,y:A.y-ms.y,scaleX:1,scaleY:1},activatorEvent:ee,active:D,activeNodeRect:ye,containerNodeRect:qe,draggingNodeRect:Ze,over:Se.current.over,overlayNodeRect:ht.rect,scrollableAncestors:at,scrollableAncestorRects:Yn,windowRect:kt}),Hr=De?go(De,A):null,Zt=s5(at),Qs=EN(Zt),Is=EN(Zt,[ye]),ss=go(ks,Qs),Tn=Ze?AL(Ze,ks):null,Xs=D&&Tn?b({active:D,collisionRect:Tn,droppableRects:oe,droppableContainers:V,pointerCoordinates:Hr}):null,$r=_L(Xs,"id"),[Ln,pr]=T.useState(null),Vn=Kn?ks:go(ks,Is),Ot=TL(Vn,(c=Ln?.rect)!=null?c:null,ye),te=T.useRef(null),be=T.useCallback((Le,ft)=>{let{sensor:nt,options:lt}=ft;if(F.current==null)return;const bn=E.get(F.current);if(!bn)return;const en=Le.nativeEvent,gt=new nt({active:F.current,activeNode:bn,event:en,options:lt,context:Se,onAbort(Yt){if(!E.get(Yt))return;const{onDragAbort:Fn}=H.current,Qn={id:Yt};Fn?.(Qn),U({type:"onDragAbort",event:Qn})},onPending(Yt,zn,Fn,Qn){if(!E.get(Yt))return;const{onDragPending:Xn}=H.current,gs={id:Yt,constraint:zn,initialCoordinates:Fn,offset:Qn};Xn?.(gs),U({type:"onDragPending",event:gs})},onStart(Yt){const zn=F.current;if(zn==null)return;const Fn=E.get(zn);if(!Fn)return;const{onDragStart:Qn}=H.current,ps={activatorEvent:en,active:{id:zn,data:Fn.data,rect:j}};zc.unstable_batchedUpdates(()=>{Qn?.(ps),Q(si.Initializing),B({type:xn.DragStart,initialCoordinates:Yt,active:zn}),U({type:"onDragStart",event:ps}),z(te.current),pe(en)})},onMove(Yt){B({type:xn.DragMove,coordinates:Yt})},onEnd:Un(xn.DragEnd),onCancel:Un(xn.DragCancel)});te.current=gt;function Un(Yt){return async function(){const{active:Fn,collisions:Qn,over:ps,scrollAdjustedTranslate:Xn}=Se.current;let gs=null;if(Fn&&Xn){const{cancelDrop:wn}=H.current;gs={activatorEvent:en,active:Fn,collisions:Qn,delta:Xn,over:ps},Yt===xn.DragEnd&&typeof wn=="function"&&await Promise.resolve(wn(gs))&&(Yt=xn.DragCancel)}F.current=null,zc.unstable_batchedUpdates(()=>{B({type:Yt}),Q(si.Uninitialized),pr(null),z(null),pe(null),te.current=null;const wn=Yt===xn.DragEnd?"onDragEnd":"onDragCancel";if(gs){const Wn=H.current[wn];Wn?.(gs),U({type:wn,event:gs})}})}}},[E]),Ce=T.useCallback((Le,ft)=>(nt,lt)=>{const bn=nt.nativeEvent,en=E.get(lt);if(F.current!==null||!en||bn.dndKit||bn.defaultPrevented)return;const gt={active:en};Le(nt,ft.options,gt)===!0&&(bn.dndKit={capturedBy:ft.sensor},F.current=lt,be(nt,ft))},[E,be]),Re=XL(y,Ce);r5(y),hr(()=>{ye&&Y===si.Initializing&&Q(si.Initialized)},[ye,Y]),T.useEffect(()=>{const{onDragMove:Le}=H.current,{active:ft,activatorEvent:nt,collisions:lt,over:bn}=Se.current;if(!ft||!nt)return;const en={active:ft,activatorEvent:nt,collisions:lt,delta:{x:ss.x,y:ss.y},over:bn};zc.unstable_batchedUpdates(()=>{Le?.(en),U({type:"onDragMove",event:en})})},[ss.x,ss.y]),T.useEffect(()=>{const{active:Le,activatorEvent:ft,collisions:nt,droppableContainers:lt,scrollAdjustedTranslate:bn}=Se.current;if(!Le||F.current==null||!ft||!bn)return;const{onDragOver:en}=H.current,gt=lt.get($r),Un=gt&&gt.rect.current?{id:gt.id,rect:gt.rect.current,data:gt.data,disabled:gt.disabled}:null,Yt={active:Le,activatorEvent:ft,collisions:nt,delta:{x:bn.x,y:bn.y},over:Un};zc.unstable_batchedUpdates(()=>{pr(Un),en?.(Yt),U({type:"onDragOver",event:Yt})})},[$r]),hr(()=>{Se.current={activatorEvent:ee,active:D,activeNode:we,collisionRect:Tn,collisions:Xs,droppableRects:oe,draggableNodes:E,draggingNode:_t,draggingNodeRect:Ze,droppableContainers:P,over:Ln,scrollableAncestors:at,scrollAdjustedTranslate:ss},j.current={initial:Ze,translated:Tn}},[D,we,Xs,Tn,E,_t,Ze,oe,P,Ln,at,ss]),GL({...J,delta:A,draggingRect:Tn,pointerCoordinates:Hr,scrollableAncestors:at,scrollableAncestorRects:Yn});const Nt=T.useMemo(()=>({active:D,activeNode:we,activeNodeRect:ye,activatorEvent:ee,collisions:Xs,containerNodeRect:qe,dragOverlay:ht,draggableNodes:E,droppableContainers:P,droppableRects:oe,over:Ln,measureDroppableContainers:xe,scrollableAncestors:at,scrollableAncestorRects:Yn,measuringConfiguration:Z,measuringScheduled:Ae,windowRect:kt}),[D,we,ye,ee,Xs,qe,ht,E,P,oe,Ln,xe,at,Yn,Z,Ae,kt]),it=T.useMemo(()=>({activatorEvent:ee,activators:Re,active:D,activeNodeRect:ye,ariaDescribedById:{draggable:ge},dispatch:B,draggableNodes:E,over:Ln,measureDroppableContainers:xe}),[ee,Re,D,ye,B,ge,E,Ln,xe]);return At.createElement(t2.Provider,{value:K},At.createElement(zu.Provider,{value:it},At.createElement(g2.Provider,{value:Nt},At.createElement(em.Provider,{value:Ot},g)),At.createElement(f5,{disabled:m?.restoreFocus===!1})),At.createElement(mL,{...m,hiddenTextDescribedById:ge}));function Ds(){const Le=ue?.autoScrollEnabled===!1,ft=typeof p=="object"?p.enabled===!1:p===!1,nt=$&&!Le&&!ft;return typeof p=="object"?{...p,enabled:nt}:{enabled:nt}}}),x5=T.createContext(null),wN="button",y5="Draggable";function b5(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const c=Uu(y5),{activators:d,activatorEvent:m,active:p,activeNodeRect:g,ariaDescribedById:y,draggableNodes:b,over:N}=T.useContext(zu),{role:k=wN,roleDescription:L="draggable",tabIndex:M=0}=i??{},I=p?.id===e,B=T.useContext(I?em:x5),[U,K]=gf(),[Y,Q]=gf(),$=a5(d,e),C=gu(n);hr(()=>(b.set(e,{id:e,key:c,node:U,activatorNode:Y,data:C}),()=>{const A=b.get(e);A&&A.key===c&&b.delete(e)}),[b,e]);const E=T.useMemo(()=>({role:k,tabIndex:M,"aria-disabled":r,"aria-pressed":I&&k===wN?!0:void 0,"aria-roledescription":L,"aria-describedby":y.draggable}),[r,k,M,I,L,y.draggable]);return{active:p,activatorEvent:m,activeNodeRect:g,attributes:E,isDragging:I,listeners:r?void 0:$,node:U,over:N,setNodeRef:K,setActivatorNodeRef:Q,transform:B}}function y2(){return T.useContext(g2)}const v5="Droppable",_5={timeout:25};function b2(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const c=Uu(v5),{active:d,dispatch:m,over:p,measureDroppableContainers:g}=T.useContext(zu),y=T.useRef({disabled:n}),b=T.useRef(!1),N=T.useRef(null),k=T.useRef(null),{disabled:L,updateMeasurementsFor:M,timeout:I}={..._5,...i},B=gu(M??r),U=T.useCallback(()=>{if(!b.current){b.current=!0;return}k.current!=null&&clearTimeout(k.current),k.current=setTimeout(()=>{g(Array.isArray(B.current)?B.current:[B.current]),k.current=null},I)},[I]),K=Zf({callback:U,disabled:L||!d}),Y=T.useCallback((E,A)=>{K&&(A&&(K.unobserve(A),b.current=!1),E&&K.observe(E))},[K]),[Q,$]=gf(Y),C=gu(e);return T.useEffect(()=>{!K||!Q.current||(K.disconnect(),b.current=!1,K.observe(Q.current))},[Q,K]),T.useEffect(()=>(m({type:xn.RegisterDroppable,element:{id:r,key:c,disabled:n,node:Q,rect:N,data:C}}),()=>m({type:xn.UnregisterDroppable,key:c,id:r})),[r]),T.useEffect(()=>{n!==y.current.disabled&&(m({type:xn.SetDroppableDisabled,id:r,key:c,disabled:n}),y.current.disabled=n)},[r,c,n,m]),{active:d,rect:N,isOver:p?.id===r,node:Q,over:p,setNodeRef:$}}function N5(t){let{animation:e,children:n}=t;const[r,i]=T.useState(null),[c,d]=T.useState(null),m=xf(n);return!n&&!r&&m&&i(m),hr(()=>{if(!c)return;const p=r?.key,g=r?.props.id;if(p==null||g==null){i(null);return}Promise.resolve(e(g,c)).then(()=>{i(null)})},[e,r,c]),At.createElement(At.Fragment,null,n,r?T.cloneElement(r,{ref:d}):null)}const S5={x:0,y:0,scaleX:1,scaleY:1};function E5(t){let{children:e}=t;return At.createElement(zu.Provider,{value:p2},At.createElement(em.Provider,{value:S5},e))}const T5={position:"fixed",touchAction:"none"},w5=t=>Jf(t)?"transform 250ms ease":void 0,A5=T.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:c,className:d,rect:m,style:p,transform:g,transition:y=w5}=t;if(!m)return null;const b=i?g:{...g,scaleX:1,scaleY:1},N={...T5,width:m.width,height:m.height,top:m.top,left:m.left,transform:Ei.Transform.toString(b),transformOrigin:i&&r?yL(r,m):void 0,transition:typeof y=="function"?y(r):y,...p};return At.createElement(n,{className:d,style:N,ref:e},c)}),j5=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:c,className:d}=t;if(c!=null&&c.active)for(const[m,p]of Object.entries(c.active))p!==void 0&&(i[m]=n.node.style.getPropertyValue(m),n.node.style.setProperty(m,p));if(c!=null&&c.dragOverlay)for(const[m,p]of Object.entries(c.dragOverlay))p!==void 0&&r.node.style.setProperty(m,p);return d!=null&&d.active&&n.node.classList.add(d.active),d!=null&&d.dragOverlay&&r.node.classList.add(d.dragOverlay),function(){for(const[p,g]of Object.entries(i))n.node.style.setProperty(p,g);d!=null&&d.active&&n.node.classList.remove(d.active)}},C5=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ei.Transform.toString(e)},{transform:Ei.Transform.toString(n)}]},R5={duration:250,easing:"ease",keyframes:C5,sideEffects:j5({styles:{active:{opacity:"0"}}})};function k5(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Wf((c,d)=>{if(e===null)return;const m=n.get(c);if(!m)return;const p=m.node.current;if(!p)return;const g=m2(d);if(!g)return;const{transform:y}=ns(d).getComputedStyle(d),b=s2(y);if(!b)return;const N=typeof e=="function"?e:I5(e);return u2(p,i.draggable.measure),N({active:{id:c,data:m.data,node:p,rect:i.draggable.measure(p)},draggableNodes:n,dragOverlay:{node:d,rect:i.dragOverlay.measure(g)},droppableContainers:r,measuringConfiguration:i,transform:b})})}function I5(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...R5,...t};return c=>{let{active:d,dragOverlay:m,transform:p,...g}=c;if(!e)return;const y={x:m.rect.left-d.rect.left,y:m.rect.top-d.rect.top},b={scaleX:p.scaleX!==1?d.rect.width*p.scaleX/m.rect.width:1,scaleY:p.scaleY!==1?d.rect.height*p.scaleY/m.rect.height:1},N={x:p.x-y.x,y:p.y-y.y,...b},k=i({...g,active:d,dragOverlay:m,transform:{initial:p,final:N}}),[L]=k,M=k[k.length-1];if(JSON.stringify(L)===JSON.stringify(M))return;const I=r?.({active:d,dragOverlay:m,...g}),B=m.node.animate(k,{duration:e,easing:n,fill:"forwards"});return new Promise(U=>{B.onfinish=()=>{I?.(),U()}})}}let AN=0;function D5(t){return T.useMemo(()=>{if(t!=null)return AN++,AN},[t])}const M5=At.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:c,modifiers:d,wrapperElement:m="div",className:p,zIndex:g=999}=t;const{activatorEvent:y,active:b,activeNodeRect:N,containerNodeRect:k,draggableNodes:L,droppableContainers:M,dragOverlay:I,over:B,measuringConfiguration:U,scrollableAncestors:K,scrollableAncestorRects:Y,windowRect:Q}=y2(),$=T.useContext(em),C=D5(b?.id),E=x2(d,{activatorEvent:y,active:b,activeNodeRect:N,containerNodeRect:k,draggingNodeRect:I.rect,over:B,overlayNodeRect:I.rect,scrollableAncestors:K,scrollableAncestorRects:Y,transform:$,windowRect:Q}),A=Py(N),P=k5({config:r,draggableNodes:L,droppableContainers:M,measuringConfiguration:U}),w=A?I.setRef:void 0;return At.createElement(E5,null,At.createElement(N5,{animation:P},b&&C?At.createElement(A5,{key:C,id:b.id,ref:w,as:m,activatorEvent:y,adjustScale:e,className:p,transition:c,rect:A,style:{zIndex:g,...i},transform:E},n):null))});function v2(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function P5(t,e){return t.reduce((n,r,i)=>{const c=e.get(r);return c&&(n[i]=c),n},Array(t.length))}function yh(t){return t!==null&&t>=0}function O5(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function L5(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const _2=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const c=v2(e,r,n),d=e[i],m=c[i];return!m||!d?null:{x:m.left-d.left,y:m.top-d.top,scaleX:m.width/d.width,scaleY:m.height/d.height}},bh={scaleX:1,scaleY:1},V5=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:c,overIndex:d}=t;const m=(e=c[n])!=null?e:r;if(!m)return null;if(i===n){const g=c[d];return g?{x:0,y:n<d?g.top+g.height-(m.top+m.height):g.top-m.top,...bh}:null}const p=U5(c,i,n);return i>n&&i<=d?{x:0,y:-m.height-p,...bh}:i<n&&i>=d?{x:0,y:m.height+p,...bh}:{x:0,y:0,...bh}};function U5(t,e,n){const r=t[e],i=t[e-1],c=t[e+1];return r?n<e?i?r.top-(i.top+i.height):c?c.top-(r.top+r.height):0:c?c.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const N2="Sortable",S2=At.createContext({activeIndex:-1,containerId:N2,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_2,disabled:{draggable:!1,droppable:!1}});function z5(t){let{children:e,id:n,items:r,strategy:i=_2,disabled:c=!1}=t;const{active:d,dragOverlay:m,droppableRects:p,over:g,measureDroppableContainers:y}=y2(),b=Uu(N2,n),N=m.rect!==null,k=T.useMemo(()=>r.map($=>typeof $=="object"&&"id"in $?$.id:$),[r]),L=d!=null,M=d?k.indexOf(d.id):-1,I=g?k.indexOf(g.id):-1,B=T.useRef(k),U=!O5(k,B.current),K=I!==-1&&M===-1||U,Y=L5(c);hr(()=>{U&&L&&y(k)},[U,k,L,y]),T.useEffect(()=>{B.current=k},[k]);const Q=T.useMemo(()=>({activeIndex:M,containerId:b,disabled:Y,disableTransforms:K,items:k,overIndex:I,useDragOverlay:N,sortedRects:P5(k,p),strategy:i}),[M,b,Y.draggable,Y.droppable,K,k,I,p,N,i]);return At.createElement(S2.Provider,{value:Q},e)}const F5=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return v2(n,r,i).indexOf(e)},B5=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:c,newIndex:d,previousItems:m,previousContainerId:p,transition:g}=t;return!g||!r||m!==c&&i===d?!1:n?!0:d!==i&&e===p},q5={duration:200,easing:"ease"},E2="transform",H5=Ei.Transition.toString({property:E2,duration:0,easing:"linear"}),$5={roleDescription:"sortable"};function G5(t){let{disabled:e,index:n,node:r,rect:i}=t;const[c,d]=T.useState(null),m=T.useRef(n);return hr(()=>{if(!e&&n!==m.current&&r.current){const p=i.current;if(p){const g=Lo(r.current,{ignoreTransform:!0}),y={x:p.left-g.left,y:p.top-g.top,scaleX:p.width/g.width,scaleY:p.height/g.height};(y.x||y.y)&&d(y)}}n!==m.current&&(m.current=n)},[e,n,r,i]),T.useEffect(()=>{c&&d(null)},[c]),c}function K5(t){let{animateLayoutChanges:e=B5,attributes:n,disabled:r,data:i,getNewIndex:c=F5,id:d,strategy:m,resizeObserverConfig:p,transition:g=q5}=t;const{items:y,containerId:b,activeIndex:N,disabled:k,disableTransforms:L,sortedRects:M,overIndex:I,useDragOverlay:B,strategy:U}=T.useContext(S2),K=Y5(r,k),Y=y.indexOf(d),Q=T.useMemo(()=>({sortable:{containerId:b,index:Y,items:y},...i}),[b,i,Y,y]),$=T.useMemo(()=>y.slice(y.indexOf(d)),[y,d]),{rect:C,node:E,isOver:A,setNodeRef:P}=b2({id:d,data:Q,disabled:K.droppable,resizeObserverConfig:{updateMeasurementsFor:$,...p}}),{active:w,activatorEvent:j,activeNodeRect:D,attributes:F,setNodeRef:ue,listeners:z,isDragging:ee,over:pe,setActivatorNodeRef:H,transform:ge}=b5({id:d,data:Q,attributes:{...$5,...n},disabled:K.draggable}),V=tL(P,ue),Z=!!w,oe=Z&&!L&&yh(N)&&yh(I),xe=!B&&ee,Ae=xe&&oe?ge:null,De=oe?Ae??(m??U)({rects:M,activeNodeRect:D,activeIndex:N,overIndex:I,index:Y}):null,J=yh(N)&&yh(I)?c({id:d,items:y,activeIndex:N,overIndex:I}):Y,X=w?.id,ye=T.useRef({activeId:X,items:y,newIndex:J,containerId:b}),qe=y!==ye.current.items,Se=e({active:w,containerId:b,isDragging:ee,isSorting:Z,id:d,index:Y,items:y,newIndex:ye.current.newIndex,previousItems:ye.current.items,previousContainerId:ye.current.containerId,transition:g,wasDragging:ye.current.activeId!=null}),jt=G5({disabled:!Se,index:Y,node:E,rect:C});return T.useEffect(()=>{Z&&ye.current.newIndex!==J&&(ye.current.newIndex=J),b!==ye.current.containerId&&(ye.current.containerId=b),y!==ye.current.items&&(ye.current.items=y)},[Z,J,b,y]),T.useEffect(()=>{if(X===ye.current.activeId)return;if(X!=null&&ye.current.activeId==null){ye.current.activeId=X;return}const _t=setTimeout(()=>{ye.current.activeId=X},50);return()=>clearTimeout(_t)},[X]),{active:w,activeIndex:N,attributes:F,data:Q,rect:C,index:Y,newIndex:J,items:y,isOver:A,isSorting:Z,isDragging:ee,listeners:z,node:E,overIndex:I,over:pe,setNodeRef:V,setActivatorNodeRef:H,setDroppableNodeRef:P,setDraggableNodeRef:ue,transform:jt??De,transition:ht()};function ht(){if(jt||qe&&ye.current.newIndex===Y)return H5;if(!(xe&&!Jf(j)||!g)&&(Z||Se))return Ei.Transition.toString({...g,property:E2})}}function Y5(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(r=t?.droppable)!=null?r:e.droppable}}ut.Down,ut.Right,ut.Up,ut.Left;const jN={mountain:$O,zap:B6,shield:pl,trophy:Eo,target:pu,wrench:U6},Q5=[{value:"avgTotalPoints",label:"Avg Total Points"},{value:"avgAutoPoints",label:"Avg Auto Points"},{value:"avgTeleopPoints",label:"Avg Teleop Points"},{value:"avgEndgamePoints",label:"Avg Endgame Points"},{value:"level3ClimbRate",label:"L3 Climb Rate (%)"},{value:"level2ClimbRate",label:"L2 Climb Rate (%)"},{value:"climbAttemptRate",label:"Climb Attempt Rate (%)"},{value:"avgClimbTime",label:"Avg Climb Time (s)"},{value:"autoMobilityRate",label:"Auto Mobility Rate (%)"},{value:"autoAccuracy",label:"Auto Accuracy (%)"},{value:"avgAutoFuelScored",label:"Avg Auto Fuel Scored"},{value:"diedRate",label:"Died Rate (%)"},{value:"noShowRate",label:"No Show Rate (%)"},{value:"mechanicalIssuesRate",label:"Mech Issues Rate (%)"},{value:"tippedRate",label:"Tipped Rate (%)"},{value:"avgDriverSkill",label:"Avg Driver Skill (1-5)"},{value:"avgDefenseEffectiveness",label:"Avg Defense (0-4)"}],X5=[{id:"l3Climber",label:"L3 Climber",icon:"mountain",field:"level3ClimbRate",operator:">=",threshold:20,active:!1},{id:"strongAuto",label:"Strong Auto",icon:"zap",field:"avgAutoPoints",operator:">=",threshold:10,active:!1},{id:"reliable",label:"Reliable",icon:"shield",field:"diedRate",operator:"<=",threshold:15,active:!1},{id:"highScorer",label:"High Scorer",icon:"trophy",field:"avgTotalPoints",operator:">=",threshold:35,active:!1}];function W5({team:t,currentTier:e,tierNames:n,onMoveTier:r,onUpdateNotes:i,onToggleFlag:c,onToggleWatchlist:d,isCompareMode:m,isSelected:p,onToggleSelection:g,passesFilters:y,hasActiveFilters:b}){const{attributes:N,listeners:k,setNodeRef:L,transform:M,transition:I,isDragging:B}=K5({id:`team-${t.teamNumber}`}),U={transform:Ei.Transform.toString(M),transition:I,opacity:B?.5:1},K="tier"in t,Y=$e(P=>P.teamStatistics.find(w=>w.teamNumber===t.teamNumber)),[Q,$]=T.useState(!1),[C,E]=T.useState(K?t.notes:""),A=Y||t;return l.jsx("div",{ref:L,style:U,className:`border rounded-lg p-2 mb-2 transition-all ${K&&t.onWatchlist?"bg-warning/10 border-warning ring-1 ring-warning":K&&t.flagged?"bg-surface border-danger":p?"bg-surface border-success ring-2 ring-success":b&&y!==!1?"bg-success/10 border-success":"bg-surface border-border"} ${y===!1?"opacity-20":""}`,children:l.jsxs("div",{className:"flex items-start gap-2",children:[m?l.jsx("button",{onClick:g,className:"p-1 mt-1 text-textPrimary hover:text-success transition-colors",title:"Select for comparison",children:p?l.jsx(ox,{size:20,className:"text-success"}):l.jsx(cx,{size:20})}):l.jsx("div",{...k,...N,className:"cursor-grab active:cursor-grabbing text-textMuted hover:text-textPrimary mt-1 touch-none",children:l.jsx(df,{size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(dn,{to:`/teams/${t.teamNumber}`,className:"font-bold text-sm text-textPrimary hover:text-blueAlliance transition-colors",title:"View team details",children:t.teamNumber}),Y?.teamName&&l.jsx("span",{className:"text-xs text-textSecondary truncate",children:Y.teamName})]}),l.jsxs("div",{className:"flex gap-2 text-xs text-textSecondary",children:[l.jsxs("span",{children:[A.avgTotalPoints?.toFixed(0)??"0"," pts"]}),l.jsxs("span",{children:["L3: ",A.level3ClimbRate?.toFixed(0)??"0","%"]}),l.jsxs("span",{children:["A: ",A.avgAutoPoints?.toFixed(0)??"0"]})]}),e&&K&&Q?l.jsx("input",{type:"text",value:C,onChange:P=>E(P.target.value),onBlur:()=>{$(!1),i?.(C)},onKeyDown:P=>{P.key==="Enter"&&($(!1),i?.(C))},className:"w-full mt-1 bg-background border border-border rounded px-2 py-1 text-xs",autoFocus:!0}):e&&K&&t.notes&&l.jsx("p",{className:"text-xs text-textSecondary italic mt-1 truncate",children:t.notes}),e&&n&&r&&l.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[e==="tier1"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>r("tier2"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Demote to ${n.tier2}`,children:[l.jsx(hu,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier2})]}),l.jsxs("button",{onClick:()=>r("tier3"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Demote to ${n.tier3}`,children:[l.jsx(aO,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier3})]}),l.jsxs("button",{onClick:()=>r("tier4"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-danger/20 text-danger hover:bg-danger/30 rounded transition-colors",title:`Demote to ${n.tier4}`,children:[l.jsx(Ph,{size:14}),l.jsx("span",{children:"DNP"})]})]}),e==="tier2"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>r("tier1"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier1}`,children:[l.jsx(xa,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier1})]}),l.jsxs("button",{onClick:()=>r("tier3"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Demote to ${n.tier3}`,children:[l.jsx(hu,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier3})]}),l.jsxs("button",{onClick:()=>r("tier4"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-danger/20 text-danger hover:bg-danger/30 rounded transition-colors",title:`Demote to ${n.tier4}`,children:[l.jsx(Ph,{size:14}),l.jsx("span",{children:"DNP"})]})]}),e==="tier3"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>r("tier2"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier2}`,children:[l.jsx(xa,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier2})]}),l.jsxs("button",{onClick:()=>r("tier1"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier1}`,children:[l.jsx(aN,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier1})]}),l.jsxs("button",{onClick:()=>r("tier4"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-danger/20 text-danger hover:bg-danger/30 rounded transition-colors",title:`Demote to ${n.tier4}`,children:[l.jsx(Ph,{size:14}),l.jsx("span",{children:"DNP"})]})]}),e==="tier4"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>r("tier3"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier3}`,children:[l.jsx(xa,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier3})]}),l.jsxs("button",{onClick:()=>r("tier2"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier2}`,children:[l.jsx(xa,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier2})]}),l.jsxs("button",{onClick:()=>r("tier1"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier1}`,children:[l.jsx(aN,{size:14}),l.jsx("span",{className:"truncate max-w-[60px]",children:n.tier1})]})]})]})]}),e&&l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("button",{onClick:()=>d?.(),className:`p-1 rounded transition-colors ${K&&t.onWatchlist?"text-warning":"text-textMuted hover:text-warning"}`,title:K&&t.onWatchlist?"Remove from watchlist":"Add to watchlist",children:l.jsx(fu,{size:14})}),l.jsx("button",{onClick:()=>c?.(),className:`p-1 rounded transition-colors ${K&&t.flagged?"text-danger":"text-textMuted hover:text-danger"}`,title:"Flag team",children:l.jsx(uf,{size:14})}),l.jsx("button",{onClick:()=>$(!0),className:"p-1 text-textMuted hover:text-textPrimary rounded transition-colors",title:"Add note",children:l.jsx(g6,{size:14})})]})]})})}function vh({id:t,title:e,teams:n,tier:r,tierNames:i,onMoveTier:c,isCompareMode:d,selectedTeams:m,onToggleTeamSelection:p,teamPassesFilters:g,hasActiveFilters:y}){const{setNodeRef:b,isOver:N}=b2({id:t}),k=vt(I=>I.updateNotes),L=vt(I=>I.toggleFlag),M=vt(I=>I.toggleWatchlist);return l.jsxs("div",{ref:b,className:`flex-1 bg-surfaceElevated rounded-lg p-3 md:p-4 min-h-[600px] transition-colors ${N?"ring-2 ring-success bg-interactive":""}`,children:[l.jsx("h2",{className:"text-base md:text-lg font-bold mb-3",children:e}),l.jsx(z5,{items:n.map(I=>`team-${I.teamNumber}`),strategy:V5,children:l.jsxs("div",{className:"space-y-0 min-h-[500px]",children:[n.map(I=>l.jsx(W5,{team:I,currentTier:r,tierNames:i,onMoveTier:r&&c?B=>c(I.teamNumber,B):void 0,onUpdateNotes:r?B=>k(I.teamNumber,B):void 0,onToggleFlag:r?()=>L(I.teamNumber):void 0,onToggleWatchlist:r?()=>M(I.teamNumber):void 0,isCompareMode:d,isSelected:m?.includes(I.teamNumber),onToggleSelection:p?()=>p(I.teamNumber):void 0,passesFilters:g?g(I.teamNumber):!0,hasActiveFilters:y},I.teamNumber)),n.length===0&&l.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:l.jsx("p",{className:"text-textMuted text-sm text-center",children:r?"Drag teams here or use buttons":"No teams available"})})]})})]})}function J5(){const t=vt(te=>te.pickList),e=vt(te=>te.initializePickList),n=vt(te=>te.setTierNames),r=vt(te=>te.exportPickList),i=vt(te=>te.importPickList),c=vt(te=>te.moveTeam),d=vt(te=>te.moveTeamAbove),m=vt(te=>te.redFlagThresholds),p=vt(te=>te.setRedFlagThresholds),g=vt(te=>te.autoFlagTeams),y=vt(te=>te.clearAllFlags),b=vt(te=>te.toggleWatchlist),N=vt(te=>te.updateWatchlistNotes),k=vt(te=>te.reorderWatchlist),L=vt(te=>te.finalizeWatchlist),M=vt(te=>te.clearWatchlist),I=vt(te=>te.getWatchlistTeams),B=$e(te=>te.eventCode),U=$e(te=>te.teamStatistics),[K,Y]=T.useState(!1),[Q,$]=T.useState("Steak"),[C,E]=T.useState("Potatoes"),[A,P]=T.useState("Chicken Nuggets"),[w,j]=T.useState("Do Not Pick"),[D,F]=T.useState(null),[ue,z]=T.useState(m||ux),[ee,pe]=T.useState(null),[H,ge]=T.useState(!0),[V,Z]=T.useState(1),[oe,xe]=T.useState(X5),[Ae,we]=T.useState(!1),De=te=>{xe(be=>be.map(Ce=>Ce.id===te?{...Ce,active:!Ce.active}:Ce))},J=(te,be)=>{xe(Ce=>Ce.map(Re=>Re.id===te?{...Re,...be}:Re))},X=()=>{const te=`custom-${Date.now()}`;xe(be=>[...be,{id:te,label:"New Filter",icon:"target",field:"avgTotalPoints",operator:">=",threshold:0,active:!1}])},ye=te=>{xe(be=>be.filter(Ce=>Ce.id!==te))},qe=te=>t?t.teams.filter(be=>{const Ce=U.find(Nt=>Nt.teamNumber===be.teamNumber);if(!Ce)return!1;const Re=Ce[te.field];switch(te.operator){case">=":return Re>=te.threshold;case"<=":return Re<=te.threshold;case">":return Re>te.threshold;case"<":return Re<te.threshold}}).length:0,Se=te=>{const be=oe.filter(Re=>Re.active);if(be.length===0)return!0;const Ce=U.find(Re=>Re.teamNumber===te);return Ce?be.every(Re=>{const Nt=Ce[Re.field];switch(Re.operator){case">=":return Nt>=Re.threshold;case"<=":return Nt<=Re.threshold;case">":return Nt>Re.threshold;case"<":return Nt<Re.threshold}}):!1},jt=oe.some(te=>te.active),ht=t?.teams.filter(te=>te.tier==="tier1"||te.tier==="tier2").length||0,{isCompareMode:_t,selectedTeams:Ze,toggleCompareMode:Kn,toggleTeamSelection:ms,clearSelection:kt,canCompare:at}=eL(),[Yn,ks]=T.useState(!1),Hr=gL(pL(My,{activationConstraint:{distance:8}}));T.useEffect(()=>{t?($(t.config.tier1Name),E(t.config.tier2Name),P(t.config.tier3Name),j(t.config.tier4Name||"Do Not Pick")):e(B)},[t,B,e]),T.useEffect(()=>{at&&_t&&ks(!0)},[at,_t]);const Zt=te=>{F(te.active.id.toString())},Qs=te=>{const{active:be,over:Ce}=te;if(F(null),!Ce||!t)return;const Re=parseInt(be.id.toString().replace("team-","")),Nt=Ce.id.toString();if(Nt.startsWith("team-")){const Le=parseInt(Nt.replace("team-",""));if(Re===Le)return;const ft=t.teams.find(lt=>lt.teamNumber===Re),nt=t.teams.find(lt=>lt.teamNumber===Le);if(!ft||!nt)return;if(ft.tier===nt.tier){const lt=t.teams.filter(gt=>gt.tier===ft.tier).sort((gt,Un)=>gt.rank-Un.rank),bn=lt.findIndex(gt=>gt.teamNumber===Re),en=lt.findIndex(gt=>gt.teamNumber===Le);if(bn===en)return;c(Re,ft.tier,nt.rank);return}c(Re,nt.tier,nt.rank);return}let it=null;if(Nt==="tier1-column"?it="tier1":Nt==="tier2-column"?it="tier2":Nt==="tier3-column"?it="tier3":Nt==="tier4-column"&&(it="tier4"),!it)return;const Ds=t.teams.find(Le=>Le.teamNumber===Re);if(Ds&&Ds.tier!==it){const Le=t.teams.filter(lt=>lt.tier===it),nt=(Le.length>0?Math.max(...Le.map(lt=>lt.rank)):0)+1;c(Re,it,nt)}},Is=(te,be)=>{if(!t)return;const Ce=t.teams.filter(it=>it.tier===be),Nt=(Ce.length>0?Math.max(...Ce.map(it=>it.rank)):0)+1;c(te,be,Nt)},ss=()=>{const te=r(),be=new Blob([te],{type:"application/json"}),Ce=URL.createObjectURL(be),Re=document.createElement("a");Re.href=Ce,Re.download=`picklist-${B}-${new Date().toISOString()}.json`,Re.click()},Tn=()=>{const te=document.createElement("input");te.type="file",te.accept="application/json",te.onchange=be=>{const Ce=be.target.files?.[0];if(Ce){const Re=new FileReader;Re.onload=Nt=>{const it=Nt.target?.result;i(it)},Re.readAsText(Ce)}},te.click()},Xs=()=>{n(Q,C,A,w),Y(!1)},$r=te=>{const be=Ze.find(Ce=>Ce!==te);be&&d(te,be),ks(!1),kt(),Kn()};if(!t)return l.jsx("div",{children:"Loading..."});const Ln=t.teams.filter(te=>te.tier==="tier1").sort((te,be)=>te.rank-be.rank),pr=t.teams.filter(te=>te.tier==="tier2").sort((te,be)=>te.rank-be.rank),Vn=t.teams.filter(te=>te.tier==="tier3").sort((te,be)=>te.rank-be.rank),Ot=t.teams.filter(te=>te.tier==="tier4").sort((te,be)=>te.rank-be.rank);return l.jsxs("div",{className:"space-y-4 md:space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Pick List"}),l.jsxs("p",{className:"text-textSecondary text-sm md:text-base",children:[B,"  Last updated: ",new Date(t.config.lastUpdated).toLocaleString()]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(dn,{to:"/alliance-selection",className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-success/20 text-success hover:bg-success/30 rounded-lg transition-colors text-sm md:text-base font-semibold",children:[l.jsx(mu,{size:18}),l.jsx("span",{className:"hidden sm:inline",children:"Alliance Selection"}),l.jsx("span",{className:"sm:hidden",children:"Alliance"})]}),l.jsxs("button",{onClick:Kn,className:`flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg transition-colors text-sm md:text-base ${_t?"bg-success text-background hover:bg-success/90":"bg-surface hover:bg-interactive"}`,children:[l.jsx(ax,{size:18}),l.jsx("span",{className:"hidden sm:inline",children:"Compare Mode"}),l.jsx("span",{className:"sm:hidden",children:"Compare"})]}),l.jsxs("button",{onClick:()=>Y(!K),className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm md:text-base",children:[l.jsx(ff,{size:18}),l.jsx("span",{className:"hidden sm:inline",children:"Settings"}),l.jsx("span",{className:"sm:hidden",children:"Config"})]}),l.jsxs("button",{onClick:ss,className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm md:text-base",children:[l.jsx(GT,{size:18}),l.jsx("span",{children:"Export"})]}),l.jsxs("button",{onClick:Tn,className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm md:text-base",children:[l.jsx(XT,{size:18}),l.jsx("span",{children:"Import"})]})]})]}),K&&l.jsxs("div",{className:"bg-surface p-4 md:p-6 rounded-lg border border-border",children:[l.jsx("h2",{className:"text-lg md:text-xl font-bold mb-4",children:"Pick List Settings"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 1 Name"}),l.jsx("input",{type:"text",value:Q,onChange:te=>$(te.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., Elite, God Tier"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 2 Name"}),l.jsx("input",{type:"text",value:C,onChange:te=>E(te.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., Definitely Getting Picked"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 3 Name"}),l.jsx("input",{type:"text",value:A,onChange:te=>P(te.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., Maybe Pick"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 4 Name"}),l.jsx("input",{type:"text",value:w,onChange:te=>j(te.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., All Teams"})]})]}),l.jsx("button",{onClick:Xs,className:"px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:"Save Tier Names"}),l.jsxs("div",{className:"border-t border-border mt-6 pt-6",children:[l.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[l.jsx(uf,{size:20,className:"text-danger"}),"Red Flag Auto-Detection"]}),l.jsx("p",{className:"text-sm text-textSecondary mb-4",children:"Automatically flag teams that exceed reliability thresholds. Flagged teams have a red indicator."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Died Rate (%)"}),l.jsx("input",{type:"number",min:"0",max:"100",value:ue.diedRate,onChange:te=>z(be=>({...be,diedRate:Number(te.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),l.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if robot died ",">","= this %"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Mechanical Issues (%)"}),l.jsx("input",{type:"number",min:"0",max:"100",value:ue.mechanicalIssuesRate,onChange:te=>z(be=>({...be,mechanicalIssuesRate:Number(te.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),l.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if mech issues ",">","= this %"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tipped Rate (%)"}),l.jsx("input",{type:"number",min:"0",max:"100",value:ue.tippedRate,onChange:te=>z(be=>({...be,tippedRate:Number(te.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),l.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if tipped ",">","= this %"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"No-Show Rate (%)"}),l.jsx("input",{type:"number",min:"0",max:"100",value:ue.noShowRate,onChange:te=>z(be=>({...be,noShowRate:Number(te.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),l.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if no-showed ",">","= this %"]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("button",{onClick:()=>{p(ue);const te=g(U);pe(`Auto-flagged ${te} team${te!==1?"s":""} based on reliability thresholds`),setTimeout(()=>pe(null),4e3)},className:"flex items-center gap-2 px-4 py-2 bg-danger text-white font-semibold rounded-lg hover:bg-danger/90 transition-colors",children:[l.jsx(uf,{size:18}),"Run Auto-Flag"]}),l.jsxs("button",{onClick:()=>{y(),pe("Cleared all flags"),setTimeout(()=>pe(null),3e3)},className:"flex items-center gap-2 px-4 py-2 bg-textMuted text-background font-semibold rounded-lg hover:bg-textMuted/80 transition-colors",children:[l.jsx(ci,{size:18}),"Clear All Flags"]}),l.jsx("button",{onClick:()=>z(ux),className:"px-4 py-2 text-textSecondary hover:text-textPrimary transition-colors",children:"Reset to Defaults"})]}),ee&&l.jsx("div",{className:"mt-3 p-3 bg-danger/20 border border-danger rounded-lg text-danger text-sm",children:ee})]})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border space-y-4",children:[l.jsx("div",{className:"flex flex-wrap items-center gap-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Eo,{size:20,className:"text-warning"}),l.jsx("span",{className:"font-semibold",children:"Pick List:"}),l.jsx("span",{className:"text-2xl font-bold text-success",children:ht}),l.jsx("span",{className:"text-textSecondary",children:"teams"})]})}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[l.jsx(wO,{size:16,className:"text-textSecondary"}),l.jsx("span",{className:"text-sm text-textSecondary",children:"Highlight:"}),l.jsx("button",{onClick:()=>we(!Ae),className:`p-1 rounded transition-colors ${Ae?"text-success":"text-textMuted hover:text-textPrimary"}`,title:"Edit filter settings",children:l.jsx(d6,{size:14})})]}),oe.map(te=>{const be=jN[te.icon]||pu,Ce=te.active?qe(te):null;return l.jsxs("button",{onClick:()=>De(te.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm transition-colors ${te.active?"bg-success text-background":"bg-surfaceElevated hover:bg-interactive"}`,children:[l.jsx(be,{size:14}),te.label,Ce!==null&&l.jsxs("span",{className:"ml-1 font-bold",children:["(",Ce,")"]})]},te.id)}),oe.some(te=>te.active)&&l.jsx("button",{onClick:()=>xe(te=>te.map(be=>({...be,active:!1}))),className:"text-xs text-textMuted hover:text-danger ml-2",children:"Clear all"})]}),oe.some(te=>te.active)&&U.length===0&&l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-warning/10 border border-warning/30 rounded-lg",children:[l.jsx(Zc,{size:16,className:"text-warning"}),l.jsx("span",{className:"text-sm text-warning",children:"No scouting data loaded. Filters require team statistics to work."})]}),Ae&&l.jsxs("div",{className:"bg-surfaceElevated rounded-lg border border-border p-4 space-y-3",children:[l.jsx("h3",{className:"text-sm font-bold text-textSecondary uppercase tracking-wider",children:"Filter Settings"}),oe.map(te=>l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("select",{value:te.icon,onChange:be=>J(te.id,{icon:be.target.value}),className:"w-20 px-2 py-1.5 bg-background border border-border rounded text-sm",children:Object.keys(jN).map(be=>l.jsx("option",{value:be,children:be},be))}),l.jsx("input",{type:"text",value:te.label,onChange:be=>J(te.id,{label:be.target.value}),className:"w-28 px-2 py-1.5 bg-background border border-border rounded text-sm",placeholder:"Filter name"}),l.jsx("select",{value:te.field,onChange:be=>J(te.id,{field:be.target.value}),className:"flex-1 min-w-[140px] px-2 py-1.5 bg-background border border-border rounded text-sm",children:Q5.map(be=>l.jsx("option",{value:be.value,children:be.label},be.value))}),l.jsxs("select",{value:te.operator,onChange:be=>J(te.id,{operator:be.target.value}),className:"w-16 px-2 py-1.5 bg-background border border-border rounded text-sm",children:[l.jsx("option",{value:">=",children:">="}),l.jsx("option",{value:"<=",children:"<="}),l.jsx("option",{value:">",children:">"}),l.jsx("option",{value:"<",children:"<"})]}),l.jsx("input",{type:"number",value:te.threshold,onChange:be=>J(te.id,{threshold:parseFloat(be.target.value)||0}),className:"w-20 px-2 py-1.5 bg-background border border-border rounded text-sm"}),l.jsx("button",{onClick:()=>ye(te.id),className:"p-1.5 text-textMuted hover:text-danger rounded transition-colors",title:"Remove filter",children:l.jsx(ci,{size:14})})]},te.id)),l.jsxs("button",{onClick:X,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-success hover:bg-interactive rounded transition-colors",children:[l.jsx(ml,{size:14}),"Add Filter"]})]})]}),_t&&l.jsx("div",{className:"bg-surfaceElevated p-4 rounded-lg border border-success",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ax,{size:24,className:"text-success"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-success",children:"Compare Mode Active"}),l.jsx("p",{className:"text-sm text-textSecondary",children:Ze.length===0?"Click on any 2 teams to compare them":Ze.length===1?"1 team selected - click 1 more to compare":`Comparing Team ${Ze[0]} vs Team ${Ze[1]}`})]})]})}),(()=>{const te=I();if(te.length===0)return null;const be=t?.teams.filter(Ce=>Ce.tier==="tier2"&&!Ce.onWatchlist).sort((Ce,Re)=>Ce.rank-Re.rank)||[];return l.jsxs("div",{className:"bg-warning/10 border-2 border-warning rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-warning/20 cursor-pointer",onClick:()=>ge(!H),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(fu,{size:20,className:"text-warning"}),l.jsxs("h2",{className:"text-lg font-bold",children:["Final Morning Watchlist (",te.length,")"]}),l.jsxs("span",{className:"text-sm text-textSecondary",children:["Rank these teams, then finalize into ",C]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),confirm("Clear all teams from watchlist?")&&M()},className:"p-2 text-textMuted hover:text-danger transition-colors",title:"Clear watchlist",children:l.jsx(ci,{size:18})}),H?l.jsx(Yf,{size:20}):l.jsx(Mo,{size:20})]})]}),H&&l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:te.map((Ce,Re)=>{const Nt=U.find(it=>it.teamNumber===Ce.teamNumber);return l.jsxs("div",{className:"bg-surface border border-border rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xl font-bold text-warning",children:["#",Re+1]}),l.jsx("span",{className:"text-lg font-bold",children:Ce.teamNumber})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[Re>0&&l.jsx("button",{onClick:()=>k(Ce.teamNumber,Re),className:"p-1 hover:bg-interactive rounded",title:"Move up",children:l.jsx(xa,{size:16})}),Re<te.length-1&&l.jsx("button",{onClick:()=>k(Ce.teamNumber,Re+2),className:"p-1 hover:bg-interactive rounded",title:"Move down",children:l.jsx(hu,{size:16})}),l.jsx("button",{onClick:()=>b(Ce.teamNumber),className:"p-1 hover:bg-danger/20 text-danger rounded",title:"Remove from watchlist",children:l.jsx(ci,{size:16})})]})]}),Nt&&l.jsxs("div",{className:"text-xs text-textSecondary mb-2",children:[Nt.avgTotalPoints.toFixed(1)," pts  L3: ",Nt.level3ClimbRate.toFixed(0),"%"]}),l.jsx("textarea",{value:Ce.watchlistNotes||"",onChange:it=>N(Ce.teamNumber,it.target.value),placeholder:"Notes from final matches...",className:"w-full px-2 py-1 text-sm bg-background border border-border rounded resize-none",rows:2})]},Ce.teamNumber)})}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-4 border-t border-warning/30",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium",children:"Insert at position:"}),l.jsxs("select",{value:V,onChange:Ce=>Z(Number(Ce.target.value)),className:"px-3 py-1.5 bg-background border border-border rounded-lg text-sm",children:[l.jsxs("option",{value:1,children:["Top of ",C]}),be.map((Ce,Re)=>l.jsxs("option",{value:Re+2,children:["After #",Re+1," (",Ce.teamNumber,")"]},Ce.teamNumber))]})]}),l.jsxs("button",{onClick:()=>{confirm(`This will move ${te.length} teams into ${C} at position ${V}. Continue?`)&&L(V)},className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:[l.jsx(Oh,{size:18}),"Finalize to ",C]}),l.jsxs("p",{className:"text-xs text-textSecondary",children:["Teams will be inserted in watchlist order (#",1," first)"]})]})]})]})})(),l.jsxs(g5,{sensors:Hr,collisionDetection:NL,onDragStart:Zt,onDragEnd:Qs,children:[l.jsxs("div",{className:`grid grid-cols-1 ${Ot.length>0?"lg:grid-cols-4":"lg:grid-cols-3"} gap-3 md:gap-4`,children:[l.jsx(vh,{id:"tier1-column",title:`${t.config.tier1Name} (${Ln.length})`,teams:Ln,tier:"tier1",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"Do Not Pick"},onMoveTier:Is,isCompareMode:_t,selectedTeams:Ze,onToggleTeamSelection:ms,teamPassesFilters:Se,hasActiveFilters:jt}),l.jsx(vh,{id:"tier2-column",title:`${t.config.tier2Name} (${pr.length})`,teams:pr,tier:"tier2",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"Do Not Pick"},onMoveTier:Is,isCompareMode:_t,selectedTeams:Ze,onToggleTeamSelection:ms,teamPassesFilters:Se,hasActiveFilters:jt}),l.jsx(vh,{id:"tier3-column",title:`${t.config.tier3Name} (${Vn.length})`,teams:Vn,tier:"tier3",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"Do Not Pick"},onMoveTier:Is,isCompareMode:_t,selectedTeams:Ze,onToggleTeamSelection:ms,teamPassesFilters:Se,hasActiveFilters:jt}),Ot.length>0&&l.jsx(vh,{id:"tier4-column",title:`${t.config.tier4Name||"Do Not Pick"} (${Ot.length})`,teams:Ot,tier:"tier4",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"Do Not Pick"},onMoveTier:Is,isCompareMode:_t,selectedTeams:Ze,onToggleTeamSelection:ms,teamPassesFilters:Se,hasActiveFilters:jt})]}),l.jsx(M5,{children:D?l.jsx("div",{className:"bg-surface border border-border rounded-lg p-3 opacity-90 shadow-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(df,{size:16,className:"text-textMuted"}),l.jsxs("span",{className:"font-bold",children:["Team ",D.replace("team-","")]})]})}):null})]}),Yn&&Ze.length===2&&l.jsx(JT,{team1:U.find(te=>te.teamNumber===Ze[0]),team2:U.find(te=>te.teamNumber===Ze[1]),onPickTeam:$r,onClose:()=>ks(!1)})]})}const ua=[{field:"avgTotalPoints",label:"Total Points",category:"overall"},{field:"avgAutoPoints",label:"Auto Points",category:"overall"},{field:"avgTeleopPoints",label:"Teleop Points",category:"overall"},{field:"avgEndgamePoints",label:"Endgame Points",category:"overall"},{field:"avgAutoFuelScored",label:"Auto FUEL Scored",category:"auto"},{field:"avgAutoFuelMissed",label:"Auto FUEL Missed",category:"auto"},{field:"autoAccuracy",label:"Auto Accuracy",category:"auto"},{field:"autoMobilityRate",label:"Auto Mobility Rate",category:"auto"},{field:"autoClimbRate",label:"Auto Climb Rate",category:"auto"},{field:"autoClimbSuccessRate",label:"Auto Climb Success Rate",category:"auto"},{field:"avgTeleopFuelScored",label:"Teleop FUEL Scored",category:"teleop"},{field:"avgTeleopFuelMissed",label:"Teleop FUEL Missed",category:"teleop"},{field:"teleopAccuracy",label:"Teleop Accuracy",category:"teleop"},{field:"avgCycleCount",label:"Cycle Count",category:"teleop"},{field:"avgActiveHubScores",label:"Active Hub Scores",category:"teleop"},{field:"avgInactiveHubScores",label:"Inactive Hub Scores",category:"teleop"},{field:"climbAttemptRate",label:"Climb Attempt Rate",category:"endgame"},{field:"level1ClimbRate",label:"Level 1 Climb Rate",category:"endgame"},{field:"level2ClimbRate",label:"Level 2 Climb Rate",category:"endgame"},{field:"level3ClimbRate",label:"Level 3 Climb Rate",category:"endgame"},{field:"avgClimbTime",label:"Climb Time",category:"endgame"},{field:"avgEndgameFuelScored",label:"Endgame FUEL Scored",category:"endgame"},{field:"defensePlayedRate",label:"Defense Played Rate",category:"defense"},{field:"avgDefenseEffectiveness",label:"Defense Effectiveness",category:"defense"},{field:"wasDefendedRate",label:"Was Defended Rate",category:"defense"},{field:"avgDefenseEvasion",label:"Defense Evasion",category:"defense"},{field:"avgDriverSkill",label:"Driver Skill",category:"performance"},{field:"avgIntakeSpeed",label:"Intake Speed",category:"performance"},{field:"avgShootingAccuracy",label:"Shooting Accuracy",category:"performance"},{field:"avgShootingSpeed",label:"Shooting Speed",category:"performance"},{field:"noShowRate",label:"No Show Rate",category:"reliability"},{field:"diedRate",label:"Died Rate",category:"reliability"},{field:"tippedRate",label:"Tipped Rate",category:"reliability"},{field:"mechanicalIssuesRate",label:"Mechanical Issues Rate",category:"reliability"},{field:"yellowCardRate",label:"Yellow Card Rate",category:"reliability"},{field:"redCardRate",label:"Red Card Rate",category:"reliability"}];function Z5(){const t=da(F=>F.config),e=da(F=>F.toggleColumn),n=da(F=>F.updateColumn),r=da(F=>F.addColumn),i=da(F=>F.deleteColumn),c=da(F=>F.reorderColumns),d=da(F=>F.resetToDefaults),m=T.useRef(null),p=T.useRef(null),[g,y]=T.useState(!1),b=F=>{m.current=F,y(!0)},N=F=>{p.current=F},k=()=>{if(m.current&&p.current&&m.current!==p.current){const F=t.columns.findIndex(z=>z.id===m.current),ue=t.columns.findIndex(z=>z.id===p.current);F!==-1&&ue!==-1&&c(F,ue)}m.current=null,p.current=null,y(!1)},[L,M]=T.useState(null),[I,B]=T.useState({}),[U,K]=T.useState(!1),[Y,Q]=T.useState({baseField:"",aggregation:"avg",label:"",format:"number",decimals:1,category:"overall"}),$=F=>dx.some(ue=>ue.id===F),C=()=>{if(!Y.baseField||!Y.label)return;const F=ua.find(H=>H.field===Y.baseField),ue=Y.baseField.replace(/^avg/,"").replace(/Rate$/,""),z=`custom_${Y.aggregation}_${ue}_${Date.now()}`;let ee=Y.baseField;Y.aggregation==="max"?ee=Y.baseField.replace(/^avg/,"max"):Y.aggregation==="min"&&(ee=Y.baseField.replace(/^avg/,"min"));const pe={id:z,label:Y.label,field:ee,aggregation:Y.aggregation,format:Y.format,decimals:Y.decimals,enabled:!0,description:`Custom: ${Y.aggregation} of ${F?.label||Y.baseField}`,category:F?.category||Y.category};r(pe),K(!1),Q({baseField:"",aggregation:"avg",label:"",format:"number",decimals:1,category:"overall"})},E=(F,ue)=>{const z=ua.find(ee=>ee.field===F);if(z){const ee=ue==="avg"?"Avg":ue==="max"?"Max":ue==="min"?"Min":"";Q(pe=>({...pe,baseField:F,aggregation:ue,label:`${ee} ${z.label}`.trim(),category:z.category}))}else Q(ee=>({...ee,baseField:F,aggregation:ue}))},A=F=>{M(F.id),B({label:F.label,aggregation:F.aggregation,format:F.format,decimals:F.decimals})},P=()=>{L&&I&&(n(L,I),M(null),B({}))},w=()=>{M(null),B({})},j=t.columns.filter(F=>F.enabled).length,D=F=>l.jsx("div",{draggable:L!==F.id,onDragStart:()=>b(F.id),onDragEnter:()=>N(F.id),onDragEnd:k,onDragOver:ue=>ue.preventDefault(),className:`p-4 border-b border-border/50 last:border-b-0 transition-all ${F.enabled?"bg-surface":"bg-background opacity-60"} ${g&&m.current===F.id?"opacity-50":""} ${L!==F.id?"cursor-grab active:cursor-grabbing":""}`,children:L===F.id?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Display Label"}),l.jsx("input",{type:"text",value:I.label||"",onChange:ue=>B({...I,label:ue.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Format"}),l.jsxs("select",{value:I.format||"number",onChange:ue=>B({...I,format:ue.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[l.jsx("option",{value:"number",children:"Number"}),l.jsx("option",{value:"percentage",children:"Percentage"}),l.jsx("option",{value:"time",children:"Time (seconds)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Decimal Places"}),l.jsx("input",{type:"number",min:"0",max:"3",value:I.decimals??1,onChange:ue=>B({...I,decimals:parseInt(ue.target.value)}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx("button",{onClick:w,className:"px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors border border-border",children:"Cancel"}),l.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:[l.jsx(KT,{size:16}),"Save Changes"]})]})]}):l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-textMuted hover:text-textSecondary cursor-grab active:cursor-grabbing",children:l.jsx(df,{size:18})}),l.jsx("button",{onClick:()=>e(F.id),className:`p-2 rounded transition-colors ${F.enabled?"text-success hover:text-success/80":"text-textMuted hover:text-textPrimary"}`,title:F.enabled?"Hide column":"Show column",children:F.enabled?l.jsx(fu,{size:20}):l.jsx(vO,{size:20})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[l.jsx("h3",{className:"font-bold",children:F.label}),l.jsx("span",{className:"text-xs px-2 py-0.5 bg-warning/20 text-warning rounded",children:WT[F.category||"overall"]}),l.jsx("span",{className:"text-xs px-2 py-0.5 bg-surfaceElevated rounded text-textSecondary",children:F.aggregation}),l.jsx("span",{className:"text-xs px-2 py-0.5 bg-surfaceElevated rounded text-textSecondary",children:F.format})]})}),l.jsx("button",{onClick:()=>A(F),className:"p-2 text-textMuted hover:text-textPrimary rounded transition-colors",title:"Edit column",children:l.jsx(ff,{size:18})}),!$(F.id)&&l.jsx("button",{onClick:()=>i(F.id),className:"p-2 text-textMuted hover:text-danger rounded transition-colors",title:"Delete custom column",children:l.jsx(ci,{size:18})})]})},F.id);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Metrics Configuration"}),l.jsx("p",{className:"text-textSecondary mt-2",children:"Customize which columns appear in the Teams view"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:[l.jsx(ml,{size:20}),"Add Column"]}),l.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors border border-border",children:[l.jsx(Ay,{size:20}),"Reset to Defaults"]})]})]}),U&&l.jsxs("div",{className:"bg-surface p-6 rounded-lg border-2 border-success",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Add New Column"}),l.jsx("button",{onClick:()=>K(!1),className:"p-2 text-textMuted hover:text-textPrimary rounded transition-colors",children:l.jsx(Rs,{size:20})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Data Field *"}),l.jsxs("select",{value:Y.baseField,onChange:F=>E(F.target.value,Y.aggregation),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[l.jsx("option",{value:"",children:"Select a field..."}),l.jsx("optgroup",{label:"Overall",children:ua.filter(F=>F.category==="overall").map(F=>l.jsx("option",{value:F.field,children:F.label},F.field))}),l.jsx("optgroup",{label:"Autonomous",children:ua.filter(F=>F.category==="auto").map(F=>l.jsx("option",{value:F.field,children:F.label},F.field))}),l.jsx("optgroup",{label:"Teleop",children:ua.filter(F=>F.category==="teleop").map(F=>l.jsx("option",{value:F.field,children:F.label},F.field))}),l.jsx("optgroup",{label:"Endgame",children:ua.filter(F=>F.category==="endgame").map(F=>l.jsx("option",{value:F.field,children:F.label},F.field))}),l.jsx("optgroup",{label:"Defense",children:ua.filter(F=>F.category==="defense").map(F=>l.jsx("option",{value:F.field,children:F.label},F.field))}),l.jsx("optgroup",{label:"Performance",children:ua.filter(F=>F.category==="performance").map(F=>l.jsx("option",{value:F.field,children:F.label},F.field))}),l.jsx("optgroup",{label:"Reliability",children:ua.filter(F=>F.category==="reliability").map(F=>l.jsx("option",{value:F.field,children:F.label},F.field))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Measurement Type *"}),l.jsxs("select",{value:Y.aggregation,onChange:F=>E(Y.baseField,F.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[l.jsx("option",{value:"avg",children:"Average"}),l.jsx("option",{value:"max",children:"Maximum"}),l.jsx("option",{value:"min",children:"Minimum"}),l.jsx("option",{value:"rate",children:"Rate (%)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Display Label *"}),l.jsx("input",{type:"text",value:Y.label,onChange:F=>Q({...Y,label:F.target.value}),placeholder:"e.g., Max Points",className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Format"}),l.jsxs("select",{value:Y.format,onChange:F=>Q({...Y,format:F.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[l.jsx("option",{value:"number",children:"Number"}),l.jsx("option",{value:"percentage",children:"Percentage"}),l.jsx("option",{value:"time",children:"Time (seconds)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Decimal Places"}),l.jsx("input",{type:"number",min:"0",max:"3",value:Y.decimals,onChange:F=>Q({...Y,decimals:parseInt(F.target.value)}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors border border-border",children:"Cancel"}),l.jsxs("button",{onClick:C,disabled:!Y.baseField||!Y.label,className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(ml,{size:16}),"Add Column"]})]})]}),l.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold mb-2",children:"Active Configuration"}),l.jsxs("p",{className:"text-textSecondary",children:[j," of ",t.columns.length," metrics enabled"]})]}),l.jsxs("div",{className:"text-sm text-textMuted",children:["Last updated: ",new Date(t.lastUpdated).toLocaleString()]})]})}),l.jsxs("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-border",children:[l.jsx("h2",{className:"text-lg font-bold",children:"All Metrics"}),l.jsx("p",{className:"text-sm text-textSecondary mt-1",children:"Drag to reorder. Order here = column order on Teams page."})]}),l.jsx("div",{children:t.columns.map(F=>D(F))})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h2",{className:"text-lg font-bold mb-4",children:"How It Works"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-sm text-textSecondary",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-textPrimary font-semibold mb-2",children:"Controls"}),l.jsxs("ul",{className:"space-y-1",children:[l.jsxs("li",{children:[l.jsx(df,{size:14,className:"inline mr-1"})," Drag to reorder"]}),l.jsxs("li",{children:[l.jsx(fu,{size:14,className:"inline mr-1"})," Toggle visibility"]}),l.jsxs("li",{children:[l.jsx(ff,{size:14,className:"inline mr-1"})," Edit settings"]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textPrimary font-semibold mb-2",children:"Measurements"}),l.jsxs("ul",{className:"space-y-1",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"avg"})," - Mean across all matches"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"max"})," - Best single-match value"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"min"})," - Worst or fastest"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"rate"})," - Percentage of matches"]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-textPrimary font-semibold mb-2",children:"Formats"}),l.jsxs("ul",{className:"space-y-1",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Number"})," - Decimal number"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Percentage"})," - With % symbol"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Time"})," - Seconds with 's'"]})]})]})]})]})]})}const eV=600*1e3;function tV(){const t=$e(j=>j.eventCode),e=$e(j=>j.setEventCode),n=$e(j=>j.loadMockData),r=$e(j=>j.tbaData),i=$e(j=>j.tbaLoading),c=$e(j=>j.tbaError),d=$e(j=>j.fetchTBAData),m=$e(j=>j.autoRefreshEnabled),p=$e(j=>j.setAutoRefresh),g=vt(j=>j.clearPickList),y=vt(j=>j.initializePickList),b=vt(j=>j.importFromTBARankings),[N,k]=T.useState(t),[L,M]=T.useState(!1),[I,B]=T.useState({type:null,message:""}),U=T.useRef(null);T.useEffect(()=>{if(m&&t)return r||d(),U.current=setInterval(()=>{d()},eV),()=>{U.current&&clearInterval(U.current)};U.current&&clearInterval(U.current)},[m,t,d,r]);const K=async()=>{if(!N){B({type:"error",message:"Please enter an event code"});return}B({type:null,message:""});const j=await d(N);j&&j.event?B({type:"success",message:`Found event: ${j.event.name}`}):j&&B({type:"success",message:`Found ${j.teams.length} teams and ${j.matches.length} matches`})},Y=async()=>{if(!N||!r){B({type:"error",message:"Please check event first"});return}M(!0),B({type:null,message:""});try{g(),e(N),y(N);let j="";if(r.rankings&&r.rankings.rankings.length>0){b(r.rankings);const D=Math.min(12,r.rankings.rankings.length),F=Math.max(0,r.rankings.rankings.length-12);j=` ${D} teams imported to "Potatoes", ${F} to "Chicken Nuggets".`}await n(),B({type:"success",message:`Event ${N} initialized!${j}`})}catch(j){B({type:"error",message:`Failed to initialize: ${j instanceof Error?j.message:"Unknown error"}`})}finally{M(!1)}},Q=()=>{if(confirm("Are you sure you want to clear the entire pick list? This cannot be undone.")){g(),y(t);let j="Pick list cleared and reinitialized";if(r?.rankings&&r.rankings.rankings.length>0){b(r.rankings);const D=Math.min(12,r.rankings.rankings.length),F=Math.max(0,r.rankings.rankings.length-12);j+=`. ${D} teams imported to tier 2, ${F} to tier 3 (by event rank).`}B({type:"success",message:j})}},$=()=>{d()},C=j=>j?new Date(j).toLocaleTimeString():"Never",E=r?.matches?.slice().sort((j,D)=>{const F={qm:0,ef:1,qf:2,sf:3,f:4};return F[j.comp_level]!==F[D.comp_level]?F[j.comp_level]-F[D.comp_level]:j.match_number-D.match_number})||[],A=E.filter(j=>j.comp_level==="qm"),P=E.filter(j=>j.comp_level!=="qm"),w=E.filter(j=>j.alliances.red.score>=0);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Event Setup"}),l.jsx("p",{className:"text-textSecondary mt-2",children:"Load event data from The Blue Alliance and manage your pick list"})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ff,{size:24,className:"text-blueAlliance"}),l.jsx("h2",{className:"text-xl font-bold",children:"Current Event"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:$,disabled:i,className:"flex items-center gap-2 px-3 py-2 bg-surfaceElevated hover:bg-interactive rounded-lg transition-colors text-sm",title:"Refresh TBA Data",children:[l.jsx(Ay,{size:16,className:i?"animate-spin":""}),"Refresh"]}),l.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-surfaceElevated rounded-lg cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:j=>p(j.target.checked),className:"w-4 h-4 rounded"}),l.jsx("span",{className:"text-sm",children:"Auto (10 min)"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Event Code"}),l.jsx("p",{className:"text-xl font-bold",children:t})]}),l.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Teams"}),l.jsx("p",{className:"text-xl font-bold",children:r?.teams?.length||0})]}),l.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Matches"}),l.jsx("p",{className:"text-xl font-bold",children:r?.matches?.length||0})]}),l.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Last Updated"}),l.jsxs("p",{className:"text-lg font-bold flex items-center gap-1",children:[l.jsx($T,{size:14}),C(r?.lastUpdated||null)]})]})]}),r?.event&&l.jsxs("div",{className:"mt-4 p-4 bg-surfaceElevated rounded-lg",children:[l.jsx("p",{className:"font-bold text-lg",children:r.event.name}),l.jsxs("p",{className:"text-sm text-textSecondary",children:[r.event.city,", ",r.event.state_prov,"  ",r.event.start_date," to ",r.event.end_date]})]}),c&&l.jsxs("div",{className:"mt-4 p-3 bg-danger/10 border border-danger/30 rounded-lg text-danger text-sm flex items-center gap-2",children:[l.jsx(cf,{size:16}),c]})]}),r?.rankings&&r.rankings.rankings.length>0&&l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(Eo,{size:24,className:"text-warning"}),l.jsx("h2",{className:"text-xl font-bold",children:"Rankings"}),l.jsxs("span",{className:"text-sm text-textSecondary",children:["(",r.rankings.rankings.length," teams)"]})]}),l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-border",children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Rank"}),l.jsx("th",{className:"text-left py-2 px-2",children:"Team"}),l.jsx("th",{className:"text-center py-2 px-2",children:"RP"}),l.jsx("th",{className:"text-center py-2 px-2",children:"W-L-T"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Played"})]})}),l.jsx("tbody",{children:r.rankings.rankings.slice(0,20).map(j=>{const D=r.teams.find(F=>F.key===j.team_key);return l.jsxs("tr",{className:"border-b border-border/50 hover:bg-surfaceElevated",children:[l.jsx("td",{className:"py-2 px-2 font-bold",children:j.rank}),l.jsxs("td",{className:"py-2 px-2",children:[l.jsx("span",{className:"font-semibold",children:Ut(j.team_key)}),D?.nickname&&l.jsx("span",{className:"text-textSecondary ml-2",children:D.nickname})]}),l.jsx("td",{className:"py-2 px-2 text-center font-semibold text-warning",children:j.extra_stats?.[0]??"-"}),l.jsxs("td",{className:"py-2 px-2 text-center",children:[j.record.wins,"-",j.record.losses,"-",j.record.ties]}),l.jsx("td",{className:"py-2 px-2 text-center",children:j.matches_played})]},j.team_key)})})]}),r.rankings.rankings.length>20&&l.jsxs("p",{className:"text-xs text-textMuted mt-2 text-center",children:["Showing top 20 of ",r.rankings.rankings.length," teams"]})]})]}),r?.alliances&&r.alliances.length>0&&l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(Qf,{size:24,className:"text-success"}),l.jsx("h2",{className:"text-xl font-bold",children:"Alliance Selection"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:r.alliances.map((j,D)=>l.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[l.jsxs("p",{className:"font-bold text-sm mb-2",children:["Alliance ",D+1]}),l.jsx("div",{className:"space-y-1",children:j.picks.map((F,ue)=>l.jsxs("div",{className:`text-sm ${ue===0?"font-bold text-warning":""}`,children:[ue===0?" ":"",Ut(F)]},F))}),j.status&&l.jsxs("p",{className:"text-xs text-textSecondary mt-2",children:[j.status.record.wins,"-",j.status.record.losses,"-",j.status.record.ties]})]},D))})]}),r?.matches&&r.matches.length>0&&l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(of,{size:24,className:"text-blueAlliance"}),l.jsx("h2",{className:"text-xl font-bold",children:"Match Schedule"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Qual Matches"}),l.jsx("p",{className:"text-xl font-bold",children:A.length})]}),l.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Playoff Matches"}),l.jsx("p",{className:"text-xl font-bold",children:P.length})]}),l.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Completed"}),l.jsx("p",{className:"text-xl font-bold",children:w.length})]}),l.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[l.jsx("p",{className:"text-xs text-textSecondary",children:"Remaining"}),l.jsx("p",{className:"text-xl font-bold",children:E.length-w.length})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-semibold text-textSecondary",children:"Recent/Upcoming Qual Matches"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-border",children:[l.jsx("th",{className:"text-left py-2 px-2",children:"Match"}),l.jsx("th",{className:"text-center py-2 px-2 text-redAlliance",children:"Red Alliance"}),l.jsx("th",{className:"text-center py-2 px-2",children:"Score"}),l.jsx("th",{className:"text-center py-2 px-2 text-blueAlliance",children:"Blue Alliance"})]})}),l.jsx("tbody",{children:A.slice(-10).map(j=>l.jsxs("tr",{className:"border-b border-border/50 hover:bg-surfaceElevated",children:[l.jsxs("td",{className:"py-2 px-2 font-bold",children:["Q",j.match_number]}),l.jsx("td",{className:"py-2 px-2 text-center text-redAlliance",children:j.alliances.red.team_keys.map(D=>Ut(D)).join(", ")}),l.jsx("td",{className:"py-2 px-2 text-center font-mono",children:j.alliances.red.score>=0?l.jsxs("span",{children:[l.jsx("span",{className:j.alliances.red.score>j.alliances.blue.score?"text-success font-bold":"",children:j.alliances.red.score})," - ",l.jsx("span",{className:j.alliances.blue.score>j.alliances.red.score?"text-success font-bold":"",children:j.alliances.blue.score})]}):l.jsx("span",{className:"text-textMuted",children:"--"})}),l.jsx("td",{className:"py-2 px-2 text-center text-blueAlliance",children:j.alliances.blue.team_keys.map(D=>Ut(D)).join(", ")})]},j.key))})]})})]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Load New Event"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Event Code"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:N,onChange:j=>k(j.target.value.toLowerCase()),placeholder:"e.g., 2025txcmp1",className:"flex-1 px-4 py-2 bg-background border border-border rounded-lg text-textPrimary focus:outline-none focus:ring-2 focus:ring-white"}),l.jsxs("button",{onClick:K,disabled:i,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-semibold transition-colors ${i?"bg-textMuted text-background cursor-not-allowed":"bg-blueAlliance text-white hover:bg-blueAlliance/90"}`,children:[i?l.jsx(lN,{size:20,className:"animate-spin"}):l.jsx(GT,{size:20}),"Check"]})]}),l.jsxs("p",{className:"text-xs text-textMuted mt-2",children:["Format: [year][region][event]. Find events on"," ",l.jsx("a",{href:"https://www.thebluealliance.com/events",target:"_blank",rel:"noopener noreferrer",className:"text-blueAlliance hover:underline",children:"TBA Events Page"})]})]}),r&&N!==t&&l.jsxs("div",{className:"p-4 bg-surfaceElevated rounded-lg border border-success/50",children:[l.jsxs("button",{onClick:Y,disabled:L,className:`w-full flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold transition-colors ${L?"bg-textMuted text-background cursor-not-allowed":"bg-success text-background hover:bg-success/90"}`,children:[L?l.jsx(lN,{size:20,className:"animate-spin"}):l.jsx(ir,{size:20}),"Initialize Event & Reset Pick List"]}),l.jsx("p",{className:"text-xs text-textMuted mt-2 text-center",children:"This will clear your current pick list and import teams from TBA rankings"})]})]})]}),I.type&&l.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-3 ${I.type==="success"?"bg-success/10 border-success text-success":"bg-danger/10 border-danger text-danger"}`,children:[I.type==="success"?l.jsx(ir,{size:20}):l.jsx(cf,{size:20}),l.jsx("p",{className:"flex-1",children:I.message})]}),l.jsxs("div",{className:"bg-danger/5 p-6 rounded-lg border border-danger",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(ci,{size:24,className:"text-danger"}),l.jsx("h2",{className:"text-xl font-bold text-danger",children:"Danger Zone"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:"Reset Pick List"}),l.jsx("p",{className:"text-sm text-textSecondary",children:"Clear all teams from your pick list"})]}),l.jsx("button",{onClick:Q,className:"px-4 py-2 bg-danger text-white rounded-lg hover:bg-danger/90 transition-colors font-semibold",children:"Clear Pick List"})]})]})]})}const Tg=148;function nV(){const t=$e(J=>J.tbaData),e=$e(J=>J.teamStatistics),n=t?.alliances??[],r=t?.matches??[],i=n.length>0,c=T.useMemo(()=>r.filter(J=>J.comp_level==="qm").sort((J,X)=>J.match_number-X.match_number),[r]),d=c.length>0,m=d?"quals":i?"playoffs":"custom",[p,g]=T.useState(m),[y,b]=T.useState(null),[N,k]=T.useState(null),[L,M]=T.useState(null),[I,B]=T.useState(!1),[U,K]=T.useState(["","",""]),[Y,Q]=T.useState(["","",""]),$=T.useMemo(()=>n.map(J=>J.picks.map(Ut)),[n]),C=T.useMemo(()=>L?c.find(J=>J.key===L)??null:null,[L,c]),E=T.useMemo(()=>p==="playoffs"&&y!==null?$[y]??[]:p==="quals"&&C?C.alliances.red.team_keys.map(Ut):U.map(J=>parseInt(J)).filter(J=>!isNaN(J)&&J>0),[p,y,$,C,U]),A=T.useMemo(()=>p==="playoffs"&&N!==null?$[N]??[]:p==="quals"&&C?C.alliances.blue.team_keys.map(Ut):Y.map(J=>parseInt(J)).filter(J=>!isNaN(J)&&J>0),[p,N,$,C,Y]),P=E.length>0,w=A.length>0,j=P&&w,D=C&&C.alliances.red.score>=0&&C.alliances.blue.score>=0,F=D?C.alliances.red.score:null,ue=D?C.alliances.blue.score:null,z=T.useMemo(()=>j?Lh(E,A,e):null,[j,E,A,e]),ee=T.useMemo(()=>{if(p!=="playoffs"||$.length===0)return null;const J=[];for(let X=0;X<$.length;X++){const ye=[];for(let qe=0;qe<$.length;qe++)ye.push(Lh($[X],$[qe],e));J.push(ye)}return J},[p,$,e]),pe=T.useMemo(()=>I?c.filter(J=>J.alliances.red.team_keys.includes(`frc${Tg}`)||J.alliances.blue.team_keys.includes(`frc${Tg}`)):c,[c,I]),H=T.useMemo(()=>p!=="quals"?null:pe.map(J=>{const X=J.alliances.red.team_keys.map(Ut),ye=J.alliances.blue.team_keys.map(Ut),qe=Lh(X,ye,e),Se=J.alliances.red.score>=0&&J.alliances.blue.score>=0;return{match:J,result:qe,played:Se,actualRed:Se?J.alliances.red.score:null,actualBlue:Se?J.alliances.blue.score:null}}),[p,pe,e]),ge=(J,X,ye)=>{if(J==="red"){const qe=[...U];qe[X]=ye,K(qe)}else{const qe=[...Y];qe[X]=ye,Q(qe)}},V=J=>J==="high"?"text-success":J==="medium"?"text-warning":"text-danger",Z=J=>J==="high"?"bg-success/20 text-success":J==="medium"?"bg-warning/20 text-warning":"bg-danger/20 text-danger",oe=J=>n[J]?.name||`Alliance ${J+1}`,xe=J=>{const X=$[J];return X?X.join(", "):""},Ae=p==="playoffs"&&y!==null?oe(y):p==="quals"&&C?`Red (Q${C.match_number})`:"Red Alliance",we=p==="playoffs"&&N!==null?oe(N):p==="quals"&&C?`Blue (Q${C.match_number})`:"Blue Alliance",De=J=>`${(J*100).toFixed(0)}%`;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(mf,{size:28,className:"text-textSecondary"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Alliance Matchup Predictor"}),l.jsx("p",{className:"text-textSecondary text-sm",children:"Predict scores and ranking points for alliance matchups"})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>g("quals"),className:`px-4 py-2 rounded font-medium transition-colors ${p==="quals"?"bg-interactive text-textPrimary":"bg-surface text-textSecondary hover:bg-surfaceElevated"}`,children:"Qualifying"}),l.jsx("button",{onClick:()=>g("playoffs"),className:`px-4 py-2 rounded font-medium transition-colors ${p==="playoffs"?"bg-interactive text-textPrimary":"bg-surface text-textSecondary hover:bg-surfaceElevated"}`,children:"Playoffs"}),l.jsx("button",{onClick:()=>g("custom"),className:`px-4 py-2 rounded font-medium transition-colors ${p==="custom"?"bg-interactive text-textPrimary":"bg-surface text-textSecondary hover:bg-surfaceElevated"}`,children:"Custom"})]}),p==="quals"&&l.jsxs("div",{className:"bg-surface border border-border rounded-lg p-4 space-y-4",children:[!d&&l.jsxs("div",{className:"flex items-center gap-2 text-warning text-sm",children:[l.jsx(Zc,{size:16}),l.jsx("span",{children:"No qualification match data from TBA. Load TBA data from the Event page."})]}),d&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{className:"text-sm font-medium text-textSecondary",children:"Select Match"}),l.jsxs("button",{onClick:()=>B(!I),className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium transition-colors ${I?"bg-warning/20 text-warning":"bg-surfaceElevated text-textSecondary hover:bg-interactive"}`,children:[Tg," Only"]})]}),l.jsxs("select",{value:L??"",onChange:J=>M(J.target.value||null),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary",children:[l.jsx("option",{value:"",children:"Select a qualification match..."}),pe.map(J=>{const X=J.alliances.red.team_keys.map(Ut).join(", "),ye=J.alliances.blue.team_keys.map(Ut).join(", "),qe=J.alliances.red.score>=0;return l.jsxs("option",{value:J.key,children:["Q",J.match_number,"  Red [",X,"] vs Blue [",ye,"]",qe?` (${J.alliances.red.score}-${J.alliances.blue.score})`:""]},J.key)})]}),C&&l.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-textSecondary",children:[l.jsxs("span",{className:"text-redAlliance",children:["Red: ",E.join(", ")]}),l.jsxs("span",{className:"text-blueAlliance",children:["Blue: ",A.join(", ")]}),D&&l.jsxs("span",{className:"text-textMuted",children:["Actual: ",F,"-",ue]})]})]})]}),p==="playoffs"&&l.jsxs("div",{className:"bg-surface border border-border rounded-lg p-4 space-y-4",children:[!i&&l.jsxs("div",{className:"flex items-center gap-2 text-warning text-sm",children:[l.jsx(Zc,{size:16}),l.jsx("span",{children:"No alliance data from TBA. Use Custom mode or load TBA data from the Event page."})]}),i&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-redAlliance mb-1",children:"Red Alliance"}),l.jsxs("select",{value:y??"",onChange:J=>b(J.target.value===""?null:parseInt(J.target.value)),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary",children:[l.jsx("option",{value:"",children:"Select alliance..."}),n.map((J,X)=>l.jsxs("option",{value:X,children:[oe(X),"  ",xe(X)]},X))]}),y!==null&&l.jsxs("p",{className:"text-xs text-textSecondary mt-1",children:["Teams: ",xe(y)]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-blueAlliance mb-1",children:"Blue Alliance"}),l.jsxs("select",{value:N??"",onChange:J=>k(J.target.value===""?null:parseInt(J.target.value)),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary",children:[l.jsx("option",{value:"",children:"Select alliance..."}),n.map((J,X)=>l.jsxs("option",{value:X,children:[oe(X),"  ",xe(X)]},X))]}),N!==null&&l.jsxs("p",{className:"text-xs text-textSecondary mt-1",children:["Teams: ",xe(N)]})]})]})]}),p==="custom"&&l.jsx("div",{className:"bg-surface border border-border rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-redAlliance mb-2",children:"Red Alliance"}),l.jsx("div",{className:"flex gap-2",children:U.map((J,X)=>l.jsx("input",{type:"number",placeholder:`Team ${X+1}`,value:J,onChange:ye=>ge("red",X,ye.target.value),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary placeholder-textMuted"},X))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-blueAlliance mb-2",children:"Blue Alliance"}),l.jsx("div",{className:"flex gap-2",children:Y.map((J,X)=>l.jsx("input",{type:"number",placeholder:`Team ${X+1}`,value:J,onChange:ye=>ge("blue",X,ye.target.value),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary placeholder-textMuted"},X))})]})]})}),e.length===0&&l.jsxs("div",{className:"flex items-center gap-2 text-warning text-sm bg-warning/10 border border-warning/30 rounded-lg px-4 py-3",children:[l.jsx(Zc,{size:16}),l.jsx("span",{children:"No scouting data loaded. Predictions require team statistics to work."})]}),z&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-surface border border-border rounded-lg p-6",children:l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4 md:gap-8 w-full justify-center",children:[l.jsxs("div",{className:"text-center flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-redAlliance mb-1",children:Ae}),l.jsx("p",{className:"text-5xl md:text-6xl font-bold text-redAlliance",children:z.red.totalScore.toFixed(1)}),l.jsx("div",{className:"flex items-center justify-center gap-1 mt-1",children:l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${Z(z.red.confidence)}`,children:[z.red.confidence," confidence"]})})]}),l.jsx("div",{className:"text-textMuted text-2xl font-bold",children:"vs"}),l.jsxs("div",{className:"text-center flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-blueAlliance mb-1",children:we}),l.jsx("p",{className:"text-5xl md:text-6xl font-bold text-blueAlliance",children:z.blue.totalScore.toFixed(1)}),l.jsx("div",{className:"flex items-center justify-center gap-1 mt-1",children:l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${Z(z.blue.confidence)}`,children:[z.blue.confidence," confidence"]})})]})]}),z.favoredAlliance!=="even"?l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${z.favoredAlliance==="red"?"bg-redAlliance/20 text-redAlliance":"bg-blueAlliance/20 text-blueAlliance"}`,children:[l.jsx(GP,{size:16}),l.jsxs("span",{className:"font-medium",children:[z.favoredAlliance==="red"?"Red":"Blue"," favored by ",z.scoreDiff.toFixed(1)," points"]})]}):l.jsx("div",{className:"px-4 py-2 rounded-lg bg-surfaceElevated text-textSecondary",children:"Even matchup (within 1 point)"}),D&&F!==null&&ue!==null&&l.jsxs("div",{className:"w-full bg-surfaceElevated rounded-lg p-3 mt-2",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx(ir,{size:14,className:"text-success"}),l.jsx("span",{className:"text-xs font-medium text-textSecondary uppercase tracking-wider",children:"Actual Result"})]}),l.jsxs("div",{className:"flex items-center justify-center gap-6",children:[l.jsx("span",{className:"text-2xl font-bold text-redAlliance",children:F}),l.jsx("span",{className:"text-textMuted text-sm",children:"vs"}),l.jsx("span",{className:"text-2xl font-bold text-blueAlliance",children:ue})]}),l.jsx("div",{className:"text-center mt-1",children:z.favoredAlliance==="red"&&F>ue||z.favoredAlliance==="blue"&&ue>F||z.favoredAlliance==="even"&&F===ue?l.jsxs("span",{className:"text-xs text-success flex items-center justify-center gap-1",children:[l.jsx(ir,{size:12})," Prediction correct"]}):l.jsxs("span",{className:"text-xs text-danger flex items-center justify-center gap-1",children:[l.jsx(rx,{size:12})," Prediction incorrect"]})})]})]})}),(p==="quals"||p==="custom")&&l.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-surfaceElevated px-4 py-2 border-b border-border flex items-center gap-2",children:[l.jsx(Eo,{size:16,className:"text-warning"}),l.jsx("h3",{className:"font-medium text-textPrimary text-sm",children:"Ranking Point Predictions"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-border",children:[l.jsxs("div",{className:"p-4 space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-redAlliance",children:"Red Alliance RP"}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Win Probability"}),l.jsx("span",{className:z.redRP.winProbability>=.5?"text-success font-medium":"text-textPrimary",children:De(z.redRP.winProbability)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Expected Win RP"}),l.jsx("span",{className:"text-textPrimary",children:z.redRP.expectedWinRP.toFixed(2)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Climb Bonus Prob"}),l.jsx("span",{className:"text-textPrimary",children:De(z.redRP.climbBonusProb)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Scoring Bonus Prob"}),l.jsx("span",{className:"text-textPrimary",children:De(z.redRP.scoringBonusProb)})]}),l.jsxs("div",{className:"flex justify-between text-sm border-t border-border pt-1.5",children:[l.jsx("span",{className:"text-textPrimary font-medium",children:"Expected Total RP"}),l.jsx("span",{className:"text-warning font-bold",children:z.redRP.expectedTotalRP.toFixed(2)})]})]})]}),l.jsxs("div",{className:"p-4 space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-blueAlliance",children:"Blue Alliance RP"}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Win Probability"}),l.jsx("span",{className:z.blueRP.winProbability>=.5?"text-success font-medium":"text-textPrimary",children:De(z.blueRP.winProbability)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Expected Win RP"}),l.jsx("span",{className:"text-textPrimary",children:z.blueRP.expectedWinRP.toFixed(2)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Climb Bonus Prob"}),l.jsx("span",{className:"text-textPrimary",children:De(z.blueRP.climbBonusProb)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-textSecondary",children:"Scoring Bonus Prob"}),l.jsx("span",{className:"text-textPrimary",children:De(z.blueRP.scoringBonusProb)})]}),l.jsxs("div",{className:"flex justify-between text-sm border-t border-border pt-1.5",children:[l.jsx("span",{className:"text-textPrimary font-medium",children:"Expected Total RP"}),l.jsx("span",{className:"text-warning font-bold",children:z.blueRP.expectedTotalRP.toFixed(2)})]})]})]})]})]}),l.jsx("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-surfaceElevated",children:[l.jsx("th",{className:"px-4 py-3 text-left text-textSecondary font-medium",children:"Phase"}),l.jsx("th",{className:"px-4 py-3 text-right text-redAlliance font-medium",children:"Red"}),l.jsx("th",{className:"px-4 py-3 text-right text-blueAlliance font-medium",children:"Blue"}),l.jsx("th",{className:"px-4 py-3 text-right text-textSecondary font-medium",children:"Advantage"})]})}),l.jsxs("tbody",{children:[[{label:"Auto",red:z.red.autoScore,blue:z.blue.autoScore},{label:"Teleop",red:z.red.teleopScore,blue:z.blue.teleopScore},{label:"Endgame",red:z.red.endgameScore,blue:z.blue.endgameScore}].map(J=>{const X=J.red-J.blue,ye=Math.abs(X)<.5?"text-textMuted":X>0?"text-redAlliance":"text-blueAlliance",qe=Math.abs(X)<.5?"Even":`${X>0?"Red":"Blue"} +${Math.abs(X).toFixed(1)}`;return l.jsxs("tr",{className:"border-t border-border",children:[l.jsx("td",{className:"px-4 py-3 text-textPrimary",children:J.label}),l.jsx("td",{className:"px-4 py-3 text-right text-redAlliance",children:J.red.toFixed(1)}),l.jsx("td",{className:"px-4 py-3 text-right text-blueAlliance",children:J.blue.toFixed(1)}),l.jsx("td",{className:`px-4 py-3 text-right font-medium ${ye}`,children:qe})]},J.label)}),l.jsxs("tr",{className:"border-t-2 border-border bg-surfaceElevated",children:[l.jsx("td",{className:"px-4 py-3 font-bold text-textPrimary",children:"TOTAL"}),l.jsx("td",{className:"px-4 py-3 text-right font-bold text-redAlliance",children:z.red.totalScore.toFixed(1)}),l.jsx("td",{className:"px-4 py-3 text-right font-bold text-blueAlliance",children:z.blue.totalScore.toFixed(1)}),l.jsx("td",{className:`px-4 py-3 text-right font-bold ${z.favoredAlliance==="even"?"text-textMuted":z.favoredAlliance==="red"?"text-redAlliance":"text-blueAlliance"}`,children:z.favoredAlliance==="even"?"Even":`${z.favoredAlliance==="red"?"Red":"Blue"} +${z.scoreDiff.toFixed(1)}`})]})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[l.jsx("div",{className:"bg-redAlliance/10 px-4 py-2 border-b border-border",children:l.jsx("h3",{className:"font-medium text-redAlliance text-sm",children:"Red Alliance Breakdown"})}),l.jsxs("table",{className:"w-full text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-surfaceElevated",children:[l.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Team"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Auto"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Teleop"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"End"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Total"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Rel."})]})}),l.jsx("tbody",{children:[...z.red.teams].sort((J,X)=>X.totalPoints-J.totalPoints).map(J=>l.jsxs("tr",{className:"border-t border-border",children:[l.jsx("td",{className:"px-3 py-2 text-textPrimary font-medium",children:J.teamNumber}),l.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.autoPoints.toFixed(1)}),l.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.teleopPoints.toFixed(1)}),l.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.endgamePoints.toFixed(1)}),l.jsx("td",{className:"px-3 py-2 text-right text-textPrimary font-medium",children:J.totalPoints.toFixed(1)}),l.jsxs("td",{className:`px-3 py-2 text-right ${V(J.reliability>=.9?"high":J.reliability>=.75?"medium":"low")}`,children:[(J.reliability*100).toFixed(0),"%"]})]},J.teamNumber))})]})]}),l.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[l.jsx("div",{className:"bg-blueAlliance/10 px-4 py-2 border-b border-border",children:l.jsx("h3",{className:"font-medium text-blueAlliance text-sm",children:"Blue Alliance Breakdown"})}),l.jsxs("table",{className:"w-full text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-surfaceElevated",children:[l.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Team"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Auto"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Teleop"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"End"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Total"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Rel."})]})}),l.jsx("tbody",{children:[...z.blue.teams].sort((J,X)=>X.totalPoints-J.totalPoints).map(J=>l.jsxs("tr",{className:"border-t border-border",children:[l.jsx("td",{className:"px-3 py-2 text-textPrimary font-medium",children:J.teamNumber}),l.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.autoPoints.toFixed(1)}),l.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.teleopPoints.toFixed(1)}),l.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.endgamePoints.toFixed(1)}),l.jsx("td",{className:"px-3 py-2 text-right text-textPrimary font-medium",children:J.totalPoints.toFixed(1)}),l.jsxs("td",{className:`px-3 py-2 text-right ${V(J.reliability>=.9?"high":J.reliability>=.75?"medium":"low")}`,children:[(J.reliability*100).toFixed(0),"%"]})]},J.teamNumber))})]})]})]})]}),p==="quals"&&H&&H.length>0&&l.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-surfaceElevated px-4 py-2 border-b border-border flex items-center gap-2",children:[l.jsx(pf,{size:16,className:"text-textSecondary"}),l.jsx("h3",{className:"font-medium text-textPrimary text-sm",children:"All Qualification Match Predictions"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-surfaceElevated",children:[l.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Match"}),l.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Red Alliance"}),l.jsx("th",{className:"px-3 py-2 text-right text-redAlliance",children:"Pred."}),l.jsx("th",{className:"px-3 py-2 text-right text-blueAlliance",children:"Pred."}),l.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Blue Alliance"}),l.jsx("th",{className:"px-3 py-2 text-center text-textSecondary",children:"Favored"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Red RP"}),l.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Blue RP"}),H.some(J=>J.played)&&l.jsxs(l.Fragment,{children:[l.jsx("th",{className:"px-3 py-2 text-right text-textMuted",children:"Actual"}),l.jsx("th",{className:"px-3 py-2 text-center text-textMuted",children:"Result"})]})]})}),l.jsx("tbody",{children:H.map(({match:J,result:X,played:ye,actualRed:qe,actualBlue:Se})=>{const jt=J.alliances.red.team_keys.map(Ut),ht=J.alliances.blue.team_keys.map(Ut),_t=J.key===L,Ze=ye&&(X.favoredAlliance==="red"&&qe>Se||X.favoredAlliance==="blue"&&Se>qe||X.favoredAlliance==="even"&&qe===Se);return l.jsxs("tr",{onClick:()=>M(J.key),className:`border-t border-border cursor-pointer transition-colors ${_t?"bg-interactive":"hover:bg-surfaceElevated"}`,children:[l.jsxs("td",{className:"px-3 py-2 text-textPrimary font-medium",children:["Q",J.match_number]}),l.jsx("td",{className:"px-3 py-2 text-redAlliance",children:jt.join(", ")}),l.jsx("td",{className:"px-3 py-2 text-right text-redAlliance font-medium",children:X.red.totalScore.toFixed(0)}),l.jsx("td",{className:"px-3 py-2 text-right text-blueAlliance font-medium",children:X.blue.totalScore.toFixed(0)}),l.jsx("td",{className:"px-3 py-2 text-blueAlliance",children:ht.join(", ")}),l.jsx("td",{className:`px-3 py-2 text-center font-medium ${X.favoredAlliance==="even"?"text-textMuted":X.favoredAlliance==="red"?"text-redAlliance":"text-blueAlliance"}`,children:X.favoredAlliance==="even"?"=":`${X.favoredAlliance==="red"?"R":"B"}+${X.scoreDiff.toFixed(0)}`}),l.jsx("td",{className:"px-3 py-2 text-right text-warning",children:X.redRP.expectedTotalRP.toFixed(1)}),l.jsx("td",{className:"px-3 py-2 text-right text-warning",children:X.blueRP.expectedTotalRP.toFixed(1)}),H.some(Kn=>Kn.played)&&l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-3 py-2 text-right text-textMuted",children:ye?`${qe}-${Se}`:""}),l.jsx("td",{className:"px-3 py-2 text-center",children:ye?Ze?l.jsx(ir,{size:14,className:"inline text-success"}):l.jsx(rx,{size:14,className:"inline text-danger"}):l.jsx("span",{className:"text-textMuted",children:""})})]})]},J.key)})})]})}),H.some(J=>J.played)&&(()=>{const J=H.filter(ye=>ye.played),X=J.filter(ye=>ye.result.favoredAlliance==="red"&&ye.actualRed>ye.actualBlue||ye.result.favoredAlliance==="blue"&&ye.actualBlue>ye.actualRed||ye.result.favoredAlliance==="even"&&ye.actualRed===ye.actualBlue);return l.jsxs("div",{className:"px-4 py-2 border-t border-border bg-surfaceElevated flex items-center gap-4 text-xs",children:[l.jsx("span",{className:"text-textSecondary",children:"Prediction Accuracy:"}),l.jsxs("span",{className:"font-medium text-textPrimary",children:[X.length,"/",J.length," correct (",J.length>0?(X.length/J.length*100).toFixed(0):0,"%)"]})]})})()]}),ee&&ee.length>0&&l.jsxs("div",{className:"bg-surface border border-border rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-textPrimary mb-3",children:"Quick Matchups Grid"}),l.jsx("p",{className:"text-xs text-textSecondary mb-3",children:"Rows = Red, Columns = Blue. Click a cell to load that matchup."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-1 text-textMuted"}),$.map((J,X)=>l.jsxs("th",{className:"px-2 py-1 text-blueAlliance font-medium whitespace-nowrap",children:["A",X+1]},X))]})}),l.jsx("tbody",{children:ee.map((J,X)=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-2 py-1 text-redAlliance font-medium whitespace-nowrap",children:["A",X+1]}),J.map((ye,qe)=>{const Se=y===X&&N===qe,jt=ye.favoredAlliance==="even"?"bg-surfaceElevated":ye.favoredAlliance==="red"?"bg-redAlliance/20":"bg-blueAlliance/20",ht=ye.favoredAlliance==="even"?"text-textMuted":ye.favoredAlliance==="red"?"text-redAlliance":"text-blueAlliance";return l.jsx("td",{className:"px-1 py-1",children:l.jsx("button",{onClick:()=>{b(X),k(qe)},className:`w-14 h-10 rounded text-center font-medium transition-all ${jt} ${ht} hover:ring-1 hover:ring-textSecondary ${Se?"ring-2 ring-textPrimary":""}`,children:ye.favoredAlliance==="even"?"=":`${ye.favoredAlliance==="red"?"R":"B"}+${ye.scoreDiff.toFixed(0)}`})},qe)})]},X))})]})})]}),!j&&l.jsxs("div",{className:"bg-surface border border-border rounded-lg p-8 text-center text-textSecondary",children:[l.jsx(mf,{size:48,className:"mx-auto mb-3 opacity-30"}),l.jsx("p",{className:"text-lg font-medium",children:"Select a matchup to predict"}),l.jsx("p",{className:"text-sm mt-1",children:p==="quals"?"Choose a qualification match from the dropdown above":p==="playoffs"?"Choose a red and blue alliance from the dropdowns above":"Enter team numbers for both alliances above"})]})]})}function CN(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t[Math.floor(Math.random()*t.length)];return e}function sV(t,e){const n=t.filter(b=>b.tier==="tier1").sort((b,N)=>b.rank-N.rank),r=t.filter(b=>b.tier==="tier2").sort((b,N)=>b.rank-N.rank),i=t.filter(b=>b.tier==="tier3").sort((b,N)=>b.rank-N.rank),c=t.filter(b=>b.tier==="tier4").sort((b,N)=>b.rank-N.rank),d=new Set(t.map(b=>b.teamNumber)),m=e.filter(b=>!d.has(b)).sort((b,N)=>b-N);let p=1;const g=[];for(const b of[...n,...r,...i,...c])g.push({teamNumber:b.teamNumber,originalTier:b.tier,originalRank:b.rank,globalRank:p++,status:"available",pickedByAlliance:null,notes:b.notes,tags:b.tags,flagged:b.flagged});let y=1;for(const b of m)g.push({teamNumber:b,originalTier:"unranked",originalRank:y++,globalRank:p++,status:"available",pickedByAlliance:null,notes:"",tags:[],flagged:!1});return g}function rV(){return Array.from({length:8},(t,e)=>({number:e+1,captain:null,firstPick:null,secondPick:null,backupPick:null}))}function aV(t,e){const n=e.participants??{},r={};for(const[i,c]of Object.entries(n))r[i]={...c,role:c.role==="admin"?"host":c.role};return{sessionId:t,sessionCode:e.sessionCode,eventKey:e.eventKey,createdBy:e.createdBy,hostUid:e.hostUid??e.createdBy,createdAt:e.createdAt?.toDate?.()?.toISOString?.()??new Date().toISOString(),participants:r,editorUids:e.editorUids??[],teams:e.teams??[],alliances:e.alliances??[],status:e.status??"active",messages:e.messages??[],lastUpdatedBy:e.lastUpdatedBy??""}}function T2(t){const[e,n]=T.useState(null),[r,i]=T.useState(!1),[c,d]=T.useState(null),m=T.useRef(null),p=!e||!t?null:e.participants[t]?.role??null,g=p==="host",y=p==="host"||p==="editor";T.useEffect(()=>()=>{m.current&&m.current()},[]);const b=T.useCallback(A=>{m.current&&m.current();const P=Dn(un,"sessions",A),w=Rh(P,j=>{j.exists()?n(aV(j.id,j.data())):(n(null),d("Session not found")),i(!1)},j=>{d(j.message),i(!1)});m.current=w},[]),N=T.useCallback(async A=>{if(!t)throw new Error("Must be signed in to create a session");i(!0),d(null);try{let P=CN(),w=0;for(;w<5;){const ee=Wg(jh(un,"sessions"),Jg("sessionCode","==",P));if((await Zg(ee)).empty)break;P=CN(),w++}const j=Dn(jh(un,"sessions")),D=sV(A.teams,A.allEventTeamNumbers),F=rV(),ue={displayName:A.displayName,role:"host",joinedAt:new Date().toISOString()};A.teamNumber&&(ue.teamNumber=A.teamNumber);const z={sessionCode:P,eventKey:A.eventKey,createdBy:t,hostUid:t,createdAt:Dt.now(),status:"active",editorUids:[],participants:{[t]:ue},teams:D,alliances:F,messages:[],lastUpdatedBy:t};return await ha(j,z),b(j.id),{sessionCode:P,sessionId:j.id}}catch(P){const w=P instanceof Error?P.message:"Failed to create session";throw d(w),i(!1),P}},[t,b]),k=T.useCallback(async(A,P,w,j="viewer")=>{if(!t)throw new Error("Must be signed in to join a session");i(!0),d(null);try{const D=Wg(jh(un,"sessions"),Jg("sessionCode","==",A.toUpperCase())),F=await Zg(D);if(F.empty)return d("Session not found. Check the code and try again."),i(!1),null;const ue=F.docs[0],z=Dn(un,"sessions",ue.id),ee={displayName:P,role:j,joinedAt:new Date().toISOString()};w&&(ee.teamNumber=w);const pe={[`participants.${t}`]:ee,lastUpdatedBy:t};if(j==="editor"){const ge=ue.data().editorUids??[];ge.includes(t)||(pe.editorUids=[...ge,t])}return await I_(z,pe),b(ue.id),{sessionId:ue.id}}catch(D){const F=D instanceof Error?D.message:"Failed to join session";return d(F),i(!1),null}},[t,b]),L=T.useCallback(()=>{m.current&&(m.current(),m.current=null),n(null),d(null)},[]),M=T.useCallback(async A=>{if(!e||!t)return;const P=Dn(un,"sessions",e.sessionId);await I_(P,{...A,lastUpdatedBy:t})},[e,t]),I=T.useCallback(async(A,P)=>{if(!e||!y)return;const w=e.teams.map(D=>D.teamNumber===A?{...D,status:"picked",pickedByAlliance:P}:D),j=e.alliances.map(D=>D.number!==P?D:D.captain?D.firstPick?D.secondPick?D.backupPick?D:{...D,backupPick:A}:{...D,secondPick:A}:{...D,firstPick:A}:{...D,captain:A});await M({teams:w,alliances:j})},[e,y,M]),B=T.useCallback(async A=>{if(!e||!y)return;const P=e.teams.map(w=>w.teamNumber===A?{...w,status:"declined"}:w);await M({teams:P})},[e,y,M]),U=T.useCallback(async A=>{if(!e||!y)return;const P=e.teams.map(j=>j.teamNumber===A?{...j,status:"available",pickedByAlliance:null}:j),w=e.alliances.map(j=>j.captain===A?{...j,captain:null}:j.firstPick===A?{...j,firstPick:null}:j.secondPick===A?{...j,secondPick:null}:j.backupPick===A?{...j,backupPick:null}:j);await M({teams:P,alliances:w})},[e,y,M]),K=T.useCallback(async A=>{!e||!g||await M({status:A})},[e,g,M]),Y=T.useCallback(async A=>{if(!e||!g)return;const P=e.participants[A];!P||P.role==="host"||await M({[`participants.${A}.role`]:"editor",editorUids:[...e.editorUids,A]})},[e,g,M]),Q=T.useCallback(async A=>{if(!e||!g)return;const P=e.participants[A];!P||P.role==="host"||await M({[`participants.${A}.role`]:"viewer",editorUids:e.editorUids.filter(w=>w!==A)})},[e,g,M]),$=T.useCallback(async A=>{if(!e||!g||!t||!e.participants[A])return;const w={...e.participants};w[t]={...w[t],role:"editor"},w[A]={...w[A],role:"host"},await M({hostUid:A,participants:w})},[e,g,t,M]),C=T.useCallback(async A=>{if(!e||!g||A===t)return;const P={...e.participants};delete P[A],await M({participants:P,editorUids:e.editorUids.filter(w=>w!==A)})},[e,g,t,M]),E=T.useCallback(async A=>{if(!e||!t)return;const P=e.participants[t];if(!P)return;const w={id:`${t}-${Date.now()}`,uid:t,displayName:P.displayName,teamNumber:P.teamNumber,text:A,timestamp:new Date().toISOString()},j=[...e.messages,w].slice(-100);await M({messages:j})},[e,t,M]);return{session:e,loading:r,error:c,myRole:p,isHost:g,isEditor:y,createSession:N,joinSession:k,leaveSession:L,markTeamPicked:I,markTeamDeclined:B,undoTeamStatus:U,setSessionStatus:K,promoteToEditor:Y,demoteToViewer:Q,transferHost:$,removeParticipant:C,sendMessage:E,startListening:b}}function iV({onCreateSession:t,onJoinSession:e,loading:n,error:r,isAdmin:i,userDisplayName:c,liveSession:d}){const m=vt(ee=>ee.pickList),p=$e(ee=>ee.eventCode),g=$e(ee=>ee.teamStatistics),y=dt(ee=>ee.lastSessionCode),b=dt(ee=>ee.activeSessionId),N=dt(ee=>ee.setLastDisplayName),k=dt(ee=>ee.setLastTeamNumber),L=c||"",[M,I]=T.useState(L),[B,U]=T.useState("148"),[K,Y]=T.useState(""),Q=m?.teams.filter(ee=>ee.tier==="tier1").length??0,$=m?.teams.filter(ee=>ee.tier==="tier2").length??0,C=m?.teams.filter(ee=>ee.tier==="tier3").length??0,E=Q+$+C,A=g.length,P=A-E,w=!!b,j=ee=>{const pe=parseInt(ee.trim(),10);return pe&&!isNaN(pe)?pe:void 0},D=async()=>{!M.trim()||!p||(N(M.trim()),B.trim()&&k(B.trim()),await t(p,M.trim(),j(B)))},F=async()=>{!d||!L||(N(L),k("148"),await e(d.sessionCode,L,148))},ue=async()=>{!K.trim()||!L||(N(L),k("148"),await e(K.trim().toUpperCase(),L,148))},z=async()=>{!y||!L||(N(L),k("148"),await e(y,L,148))};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Alliance Selection"}),l.jsx("p",{className:"text-textSecondary mt-1",children:"Create or join a real-time alliance selection session"})]}),r&&l.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg",children:r}),d&&!w&&l.jsxs("div",{className:"bg-blueAlliance/10 border-2 border-blueAlliance/30 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(lx,{size:20,className:"text-blueAlliance animate-pulse"}),l.jsx("h2",{className:"text-xl font-bold text-blueAlliance",children:"Live Session Available"})]}),l.jsxs("p",{className:"text-textSecondary text-sm mb-4",children:[l.jsx("span",{className:"font-semibold text-textPrimary",children:d.createdByName})," started an alliance selection session.",L&&l.jsxs("span",{children:[" Joining as ",l.jsx("span",{className:"font-semibold text-textPrimary",children:L})," (Team 148)."]})]}),l.jsxs("button",{onClick:F,disabled:n||!L,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-blueAlliance text-white font-bold rounded-lg hover:bg-blueAlliance/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg",children:[n?l.jsx(fs,{size:20,className:"animate-spin"}):l.jsx(Jc,{size:20}),"Join Live Session"]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(ml,{size:20}),"Create New Session"]}),i?w?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-start gap-3 bg-warning/10 border border-warning/30 text-warning px-4 py-3 rounded-lg",children:[l.jsx(cf,{size:20,className:"flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:"Session Already Active"}),l.jsx("p",{className:"text-sm text-textSecondary mt-1",children:'You already have an active session. Use the "Live Alliance Selection" banner at the top of any page to rejoin, or use the Rejoin button below.'})]})]})}):p?A===0?l.jsx("p",{className:"text-textSecondary",children:"No teams loaded. Go to the Event page to load event data first."}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-textSecondary mb-1",children:"Event"}),l.jsx("p",{className:"font-semibold",children:p})]}),l.jsxs("div",{className:"flex gap-4 flex-wrap",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-textSecondary",children:"Tier 1"}),l.jsx("p",{className:"text-lg font-bold text-success",children:Q})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-textSecondary",children:"Tier 2"}),l.jsx("p",{className:"text-lg font-bold text-warning",children:$})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-textSecondary",children:"Tier 3"}),l.jsx("p",{className:"text-lg font-bold text-blueAlliance",children:C})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-textSecondary",children:"Unranked"}),l.jsx("p",{className:"text-lg font-bold text-textSecondary",children:P})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-textSecondary",children:"Total"}),l.jsx("p",{className:"text-lg font-bold",children:A})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Your Name *"}),l.jsx("input",{type:"text",value:M,onChange:ee=>I(ee.target.value),placeholder:"Enter your name",className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Team Number"}),l.jsx("input",{type:"text",value:B,onChange:ee=>U(ee.target.value.replace(/\D/g,"")),placeholder:"e.g. 148",maxLength:5,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono"})]})]}),l.jsxs("button",{onClick:D,disabled:n||!M.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n?l.jsx(fs,{size:18,className:"animate-spin"}):l.jsx(ml,{size:18}),"Create Session (",A," teams)"]})]}):l.jsx("p",{className:"text-textSecondary",children:"No event loaded. Go to the Event page to set up an event first."}):l.jsxs("div",{className:"flex items-start gap-3 text-textSecondary",children:[l.jsx(pl,{size:20,className:"flex-shrink-0 mt-0.5 text-textMuted"}),l.jsx("p",{className:"text-sm",children:"Only team admins can create alliance selection sessions. Join an existing session using a session code."})]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[l.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(Jc,{size:20}),"Join by Code"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Session Code *"}),l.jsx("input",{type:"text",value:K,onChange:ee=>Y(ee.target.value.toUpperCase()),placeholder:"e.g. A7K3M2",maxLength:6,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono text-lg tracking-widest uppercase"})]}),L&&l.jsxs("p",{className:"text-sm text-textSecondary",children:["Joining as ",l.jsx("span",{className:"font-semibold text-textPrimary",children:L})," (Team 148)"]}),l.jsxs("button",{onClick:ue,disabled:n||!K.trim()||!L,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blueAlliance text-white font-semibold rounded-lg hover:bg-blueAlliance/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n?l.jsx(fs,{size:18,className:"animate-spin"}):l.jsx(Jc,{size:18}),"Join Session"]}),y&&l.jsxs("button",{onClick:z,disabled:n||!L,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-surfaceElevated border border-border text-textPrimary font-semibold rounded-lg hover:bg-interactive transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(s6,{size:16}),"Rejoin: ",y]})]})]})]})]})}function lV({session:t,myRole:e,onLeave:n,onSetStatus:r,onShowParticipants:i,participantCount:c}){const[d,m]=T.useState(null),[p,g]=T.useState(!1),y=`${window.location.origin}/frc-2026-analytics/alliance-selection/join/${t.sessionCode}`,b=async()=>{await navigator.clipboard.writeText(t.sessionCode),m("code"),setTimeout(()=>m(null),2e3)},N=async()=>{await navigator.clipboard.writeText(y),m("link"),setTimeout(()=>m(null),2e3)},k=`https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(y)}`;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-surface rounded-lg border border-border p-3 sm:p-4",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold uppercase tracking-wide ${t.status==="active"?"bg-success/20 text-success":"bg-textMuted/20 text-textMuted"}`,children:t.status==="active"?"Live":"Completed"}),l.jsxs("button",{onClick:b,className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors",title:"Copy session code",children:[l.jsx("span",{className:"font-mono font-bold tracking-widest",children:t.sessionCode}),d==="code"?l.jsx(Oh,{size:14,className:"text-success"}):l.jsx(gO,{size:14,className:"text-textSecondary"})]}),l.jsxs("button",{onClick:N,className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",title:"Copy invite link",children:[d==="link"?l.jsx(Oh,{size:14,className:"text-success"}):l.jsx(cN,{size:14}),l.jsx("span",{className:"hidden sm:inline",children:d==="link"?"Copied!":"Share Link"})]}),l.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",title:"Show QR code",children:[l.jsx(ZO,{size:14}),l.jsx("span",{className:"hidden sm:inline",children:"QR"})]}),l.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",children:[l.jsx(Qf,{size:14}),l.jsx("span",{children:c})]}),e&&l.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${e==="host"?"bg-warning/20 text-warning":e==="editor"?"bg-blueAlliance/20 text-blueAlliance":"bg-textMuted/20 text-textMuted"}`,children:e}),l.jsx("div",{className:"flex-1"}),e==="host"&&l.jsxs("button",{onClick:()=>r(t.status==="active"?"completed":"active"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",children:[t.status==="active"?l.jsx(KO,{size:14}):l.jsx(hf,{size:14}),l.jsx("span",{className:"hidden sm:inline",children:t.status==="active"?"End":"Resume"})]}),l.jsxs("button",{onClick:n,className:"flex items-center gap-1.5 px-3 py-1.5 bg-danger/10 border border-danger/30 text-danger rounded hover:bg-danger/20 transition-colors text-sm",children:[l.jsx(ix,{size:14}),l.jsx("span",{className:"hidden sm:inline",children:"Leave"})]})]})}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:()=>g(!1),children:l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-6 max-w-sm w-full text-center",onClick:L=>L.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"font-bold text-lg",children:"Scan to Join"}),l.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-interactive rounded transition-colors",children:l.jsx(Rs,{size:18})})]}),l.jsx("div",{className:"bg-white rounded-lg p-4 inline-block mb-4",children:l.jsx("img",{src:k,alt:"QR Code",width:250,height:250})}),l.jsx("p",{className:"text-sm text-textSecondary mb-1",children:"Session Code"}),l.jsx("p",{className:"font-mono font-bold text-2xl tracking-widest mb-3",children:t.sessionCode}),l.jsxs("button",{onClick:N,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blueAlliance text-white rounded-lg hover:bg-blueAlliance/90 transition-colors text-sm font-semibold",children:[d==="link"?l.jsx(Oh,{size:14}):l.jsx(cN,{size:14}),d==="link"?"Link Copied!":"Copy Invite Link"]})]})})]})}function oV({value:t,onChange:e,selectedCount:n,onClearCompare:r}){return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(jy,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-textMuted"}),l.jsx("input",{type:"text",value:t,onChange:i=>e(i.target.value),placeholder:"Search team # or name...",className:"w-full bg-card border border-border rounded-lg pl-9 pr-3 py-2 text-sm text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"}),t&&l.jsx("button",{onClick:()=>e(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-textMuted hover:text-textPrimary",children:l.jsx(Rs,{size:14})})]}),n>0&&l.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-2 bg-blueAlliance/20 border border-blueAlliance/30 text-blueAlliance rounded-lg text-sm font-semibold hover:bg-blueAlliance/30 transition-colors",children:[l.jsx(iN,{size:14}),n,"/2",l.jsx(Rs,{size:12})]}),n===0&&l.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 bg-card border border-border rounded-lg text-sm text-textMuted",children:[l.jsx(iN,{size:14}),"Compare"]})]})}function cV({alliances:t,onSelect:e,onClose:n}){const r=T.useRef(null);T.useEffect(()=>{const c=m=>{r.current&&!r.current.contains(m.target)&&n()},d=m=>{m.key==="Escape"&&n()};return document.addEventListener("mousedown",c),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",d)}},[n]);const i=c=>{let d=0;return c.captain&&d++,c.firstPick&&d++,c.secondPick&&d++,c.backupPick&&d++,d};return l.jsxs("div",{ref:r,className:"absolute right-0 top-full mt-1 z-30 bg-surfaceElevated border border-border rounded-lg shadow-xl p-2 min-w-[200px]",children:[l.jsx("p",{className:"text-xs text-textMuted px-2 py-1 mb-1",children:"Pick for alliance:"}),l.jsx("div",{className:"grid grid-cols-2 gap-1",children:t.map(c=>{const d=i(c),m=d>=4;return l.jsxs("button",{onClick:()=>{m||(e(c.number),n())},disabled:m,className:`px-3 py-2 rounded text-sm font-semibold transition-colors text-left ${m?"bg-card text-textMuted cursor-not-allowed":"bg-card hover:bg-interactive text-textPrimary"}`,children:[l.jsxs("div",{children:["A",c.number]}),l.jsxs("div",{className:"text-xs text-textSecondary",children:[d,"/4 filled"]})]},c.number)})})]})}function uV({team:t,teamStats:e,isEditor:n,isSelectedForCompare:r,alliances:i,onMarkPicked:c,onMarkDeclined:d,onUndoStatus:m,onToggleCompare:p}){const[g,y]=T.useState(!1),b=t.status!=="available",N=t.status==="picked",k=t.status==="declined",L=t.originalTier==="tier1"?"T1":t.originalTier==="tier2"?"T2":t.originalTier==="tier3"?"T3":t.originalTier==="tier4"?"T4":"",M=t.originalTier==="tier1"?"bg-success/20 text-success":t.originalTier==="tier2"?"bg-warning/20 text-warning":t.originalTier==="tier3"?"bg-blueAlliance/20 text-blueAlliance":t.originalTier==="tier4"?"bg-danger/20 text-danger":"bg-surfaceElevated text-textMuted";return l.jsxs("div",{className:`relative flex items-center gap-2 sm:gap-3 px-3 py-2.5 rounded-lg border transition-all cursor-pointer ${r?"border-blueAlliance bg-blueAlliance/10":N?"border-success/30 bg-success/5 opacity-40":k?"border-danger/30 bg-danger/5 opacity-30":"border-border bg-card hover:bg-interactive"}`,onClick:()=>{b||p(t.teamNumber)},children:[l.jsxs("div",{className:`flex-shrink-0 w-8 text-center text-sm font-bold ${b?"text-textMuted line-through":"text-textSecondary"}`,children:["#",t.globalRank]}),l.jsx("span",{className:`flex-shrink-0 px-1.5 py-0.5 rounded text-[10px] font-bold ${M}`,children:L}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`font-bold ${k?"line-through text-textMuted":""}`,children:t.teamNumber}),e?.teamName&&l.jsx("span",{className:"text-sm text-textSecondary truncate",children:e.teamName}),t.flagged&&l.jsx(uf,{size:12,className:"text-danger flex-shrink-0"})]}),e&&!b&&l.jsxs("div",{className:"flex gap-3 text-xs text-textSecondary mt-0.5",children:[l.jsxs("span",{children:[e.avgTotalPoints.toFixed(1)," pts"]}),l.jsxs("span",{children:["L3: ",e.level3ClimbRate.toFixed(0),"%"]}),l.jsxs("span",{children:["Auto: ",e.avgAutoPoints.toFixed(1)]})]}),N&&t.pickedByAlliance&&l.jsxs("div",{className:"text-xs text-success mt-0.5",children:["Picked by Alliance ",t.pickedByAlliance]}),k&&l.jsx("div",{className:"text-xs text-danger mt-0.5",children:"Declined"})]}),n&&l.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",onClick:I=>I.stopPropagation(),children:b?l.jsx("button",{onClick:()=>m(t.teamNumber),className:"p-1.5 rounded bg-surfaceElevated hover:bg-interactive text-textSecondary hover:text-textPrimary transition-colors",title:"Undo",children:l.jsx(j6,{size:14})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>y(!g),className:"flex items-center gap-1 px-2 py-1 rounded bg-success/20 text-success hover:bg-success/30 text-xs font-semibold transition-colors",children:["Pick",l.jsx(Mo,{size:12})]}),g&&l.jsx(cV,{alliances:i,onSelect:I=>c(t.teamNumber,I),onClose:()=>y(!1)})]}),l.jsx("button",{onClick:()=>d(t.teamNumber),className:"p-1.5 rounded bg-danger/10 text-danger hover:bg-danger/20 transition-colors",title:"Mark as declined",children:l.jsx(Ph,{size:14})})]})})]})}function dV({messages:t,onSend:e,myUid:n}){const[r,i]=T.useState(""),[c,d]=T.useState(!1),m=T.useRef(null),p=T.useRef(t.length);T.useEffect(()=>{t.length>p.current&&m.current&&(m.current.scrollTop=m.current.scrollHeight),p.current=t.length},[t.length]);const g=async()=>{const N=r.trim();N&&(i(""),await e(N))},y=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),g())},b=N=>new Date(N).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return l.jsxs("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:[l.jsxs("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-between px-3 py-2 bg-surfaceElevated hover:bg-interactive transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(FO,{size:14}),l.jsx("span",{className:"text-sm font-bold",children:"Chat"}),t.length>0&&l.jsxs("span",{className:"text-xs text-textMuted",children:["(",t.length,")"]})]}),c?l.jsx(Yf,{size:14}):l.jsx(Mo,{size:14})]}),!c&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:m,className:"h-48 overflow-y-auto px-3 py-2 space-y-1.5",style:{WebkitOverflowScrolling:"touch"},children:[t.length===0&&l.jsx("p",{className:"text-textMuted text-xs text-center py-4",children:"No messages yet"}),t.map(N=>{const k=N.uid===n;return l.jsxs("div",{className:`flex flex-col ${k?"items-end":"items-start"}`,children:[l.jsxs("div",{className:`max-w-[85%] rounded-lg px-2.5 py-1.5 ${k?"bg-blueAlliance/20":"bg-card"}`,children:[!k&&l.jsxs("div",{className:"text-[10px] font-semibold text-textSecondary mb-0.5",children:[N.displayName,N.teamNumber&&l.jsxs("span",{className:"text-textMuted ml-1",children:["#",N.teamNumber]})]}),l.jsx("p",{className:"text-sm break-words",children:N.text})]}),l.jsx("span",{className:"text-[10px] text-textMuted mt-0.5 px-1",children:b(N.timestamp)})]},N.id)})]}),l.jsxs("div",{className:"border-t border-border px-2 py-2 flex gap-2",children:[l.jsx("input",{type:"text",value:r,onChange:N=>i(N.target.value),onKeyDown:y,placeholder:"Type a message...",className:"flex-1 bg-card border border-border rounded px-2.5 py-1.5 text-sm text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"}),l.jsx("button",{onClick:g,disabled:!r.trim(),className:"p-1.5 rounded bg-blueAlliance text-white hover:bg-blueAlliance/80 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(YT,{size:14})})]})]})]})}function RN({alliance:t,isHighlighted:e,onHighlight:n}){const r=[{label:"Capt",value:t.captain},{label:"Pick 1",value:t.firstPick},{label:"Pick 2",value:t.secondPick},{label:"Backup",value:t.backupPick}],i=r.filter(c=>c.value!==null).length;return l.jsxs("button",{onClick:n,className:`w-full text-left p-2.5 rounded-lg border transition-colors ${e?"border-success bg-success/10":"border-border bg-card hover:bg-interactive"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[l.jsxs("span",{className:"text-sm font-bold",children:["Alliance ",t.number]}),l.jsxs("span",{className:"text-[10px] text-textMuted",children:[i,"/4"]})]}),l.jsx("div",{className:"space-y-0.5",children:r.map(c=>l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("span",{className:"text-textMuted w-10 flex-shrink-0",children:c.label}),c.value?l.jsx("span",{className:"font-semibold text-textPrimary",children:c.value}):l.jsx("span",{className:"text-textMuted",children:"---"})]},c.label))})]})}function hV({alliances:t,highlightedAlliance:e,onHighlightAlliance:n}){return l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-3 sm:p-4",children:[l.jsx("h3",{className:"text-sm font-bold text-textSecondary mb-3 uppercase tracking-wide",children:"Alliances"}),l.jsx("div",{className:"hidden sm:grid grid-cols-2 gap-2",children:t.map(r=>l.jsx(RN,{alliance:r,isHighlighted:e===r.number,onHighlight:()=>n(e===r.number?null:r.number)},r.number))}),l.jsx("div",{className:"sm:hidden flex gap-2 overflow-x-auto pb-2 -mx-1 px-1",style:{WebkitOverflowScrolling:"touch"},children:t.map(r=>l.jsx("div",{className:"flex-shrink-0 w-[140px]",children:l.jsx(RN,{alliance:r,isHighlighted:e===r.number,onHighlight:()=>n(e===r.number?null:r.number)})},r.number))})]})}function fV({participants:t,myUid:e,isHost:n,onPromote:r,onDemote:i,onTransferHost:c,onRemove:d,onClose:m}){const p=Object.entries(t).sort(([,y],[,b])=>{const N={host:0,editor:1,viewer:2};return(N[y.role]??3)-(N[b.role]??3)}),g=y=>{switch(y){case"host":return l.jsx(pl,{size:14,className:"text-warning"});case"editor":return l.jsx(QO,{size:14,className:"text-blueAlliance"});case"viewer":return l.jsx(fu,{size:14,className:"text-textMuted"})}};return l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("h3",{className:"font-bold",children:["Participants (",p.length,")"]}),l.jsx("button",{onClick:m,className:"p-1 hover:bg-interactive rounded transition-colors",children:l.jsx(Rs,{size:16})})]}),l.jsx("div",{className:"space-y-2",children:p.map(([y,b])=>{const N=y===e,k=n&&!N&&b.role!=="host";return l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded bg-card",children:[g(b.role),l.jsxs("span",{className:"flex-1 text-sm font-semibold",children:[b.displayName,b.teamNumber&&l.jsxs("span",{className:"text-textSecondary font-normal ml-1",children:["#",b.teamNumber]}),N&&l.jsx("span",{className:"text-textMuted font-normal ml-1",children:"(you)"})]}),l.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${b.role==="host"?"bg-warning/20 text-warning":b.role==="editor"?"bg-blueAlliance/20 text-blueAlliance":"bg-textMuted/20 text-textMuted"}`,children:b.role}),k&&l.jsxs("div",{className:"flex items-center gap-1",children:[b.role==="viewer"?l.jsx("button",{onClick:()=>r(y),className:"p-1 rounded hover:bg-interactive text-textSecondary hover:text-success transition-colors",title:"Promote to editor",children:l.jsx(Yf,{size:14})}):l.jsx("button",{onClick:()=>i(y),className:"p-1 rounded hover:bg-interactive text-textSecondary hover:text-warning transition-colors",title:"Demote to viewer",children:l.jsx(Mo,{size:14})}),l.jsx("button",{onClick:()=>{confirm(`Transfer host role to ${b.displayName}? You will become an editor.`)&&c(y)},className:"p-1 rounded hover:bg-interactive text-textSecondary hover:text-warning transition-colors",title:"Transfer host",children:l.jsx(HP,{size:14})}),l.jsx("button",{onClick:()=>d(y),className:"p-1 rounded hover:bg-interactive text-textSecondary hover:text-danger transition-colors",title:"Remove",children:l.jsx(D6,{size:14})})]})]},y)})})]})}function w2({session:t,userId:e,myRole:n,isEditor:r,isHost:i,onMarkPicked:c,onMarkDeclined:d,onUndoStatus:m,onSetStatus:p,onLeave:g,onPromote:y,onDemote:b,onTransferHost:N,onRemoveParticipant:k,onSendMessage:L}){const M=$e(H=>H.teamStatistics),I=dt(H=>H.searchQuery),B=dt(H=>H.setSearchQuery),U=dt(H=>H.selectedTeamsForCompare),K=dt(H=>H.toggleTeamForCompare),Y=dt(H=>H.clearCompareSelection),Q=dt(H=>H.showComparisonModal),$=dt(H=>H.setShowComparisonModal),C=dt(H=>H.highlightedAlliance),E=dt(H=>H.setHighlightedAlliance),A=dt(H=>H.showParticipants),P=dt(H=>H.setShowParticipants),w=T.useMemo(()=>{let H=[...t.teams];if(C){const ge=t.alliances.find(V=>V.number===C);if(ge){const V=[ge.captain,ge.firstPick,ge.secondPick,ge.backupPick].filter(Boolean);H=H.map(Z=>({...Z,_isAllianceMember:V.includes(Z.teamNumber)}))}}if(I){const ge=I.toLowerCase();H=H.filter(V=>{const Z=M.find(oe=>oe.teamNumber===V.teamNumber);return V.teamNumber.toString().includes(ge)||Z?.teamName?.toLowerCase().includes(ge)})}return H.sort((ge,V)=>{const Z=ge.status!=="available"?1:0,oe=V.status!=="available"?1:0;return Z!==oe?Z-oe:ge.globalRank-V.globalRank}),H},[t.teams,I,M,C,t.alliances]),j=t.teams.filter(H=>H.status==="available").length,D=t.teams.filter(H=>H.status==="picked").length,F=t.teams.filter(H=>H.originalTier==="unranked").length,ue=M.find(H=>H.teamNumber===U[0]),z=M.find(H=>H.teamNumber===U[1]),ee=Q&&ue&&z,pe=Object.keys(t.participants).length;return l.jsxs("div",{className:"space-y-3",children:[l.jsx(lV,{session:t,myRole:n,onLeave:g,onSetStatus:p,onShowParticipants:()=>P(!A),participantCount:pe}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsx(oV,{value:I,onChange:B,selectedCount:U.length,onClearCompare:Y}),l.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[l.jsxs("span",{className:"text-textSecondary",children:[l.jsx("span",{className:"font-bold text-textPrimary",children:j})," available"]}),l.jsxs("span",{className:"text-textSecondary",children:[l.jsx("span",{className:"font-bold text-success",children:D})," picked"]}),F>0&&l.jsxs("span",{className:"text-textSecondary",children:[l.jsx("span",{className:"font-bold text-textMuted",children:F})," unranked"]}),U.length>0&&l.jsxs("span",{className:"text-blueAlliance text-xs",children:["Click teams to compare (",U.length,"/2)"]})]}),l.jsxs("div",{className:"space-y-1.5",children:[w.map(H=>l.jsx(uV,{team:H,teamStats:M.find(ge=>ge.teamNumber===H.teamNumber),isEditor:r,isSelectedForCompare:U.includes(H.teamNumber),alliances:t.alliances,onMarkPicked:c,onMarkDeclined:d,onUndoStatus:m,onToggleCompare:K},H.teamNumber)),w.length===0&&l.jsx("div",{className:"text-center py-8 text-textMuted",children:I?"No teams match your search.":"No teams in this session."})]})]}),l.jsxs("div",{className:"lg:w-80 xl:w-96 space-y-3",children:[l.jsx(dV,{messages:t.messages,onSend:L,myUid:e}),l.jsx(hV,{alliances:t.alliances,highlightedAlliance:C,onHighlightAlliance:E})]})]}),A&&l.jsx(fV,{participants:t.participants,myUid:e,isHost:i,onPromote:y,onDemote:b,onTransferHost:N,onRemove:k,onClose:()=>P(!1)}),ee&&l.jsx(JT,{team1:ue,team2:z,onPickTeam:()=>Y(),onClose:()=>{$(!1),Y()}})]})}function kN(){const{sessionCode:t}=xx(),e=vu(),{user:n,loading:r,signIn:i}=Kf(),{isAdmin:c,liveSession:d,setLiveSession:m,clearLiveSession:p}=Do(),g=vt(Se=>Se.pickList),y=$e(Se=>Se.teamStatistics),b=dt(Se=>Se.setLastSessionCode),N=dt(Se=>Se.setLastDisplayName),k=dt(Se=>Se.setLastTeamNumber),L=dt(Se=>Se.lastDisplayName),M=dt(Se=>Se.lastTeamNumber),I=dt(Se=>Se.activeSessionId),B=dt(Se=>Se.setActiveSessionId),[U,K]=T.useState(!1),[Y,Q]=T.useState(L||n?.displayName||""),[$,C]=T.useState(M),{session:E,loading:A,error:P,myRole:w,isHost:j,isEditor:D,createSession:F,joinSession:ue,leaveSession:z,markTeamPicked:ee,markTeamDeclined:pe,undoTeamStatus:H,setSessionStatus:ge,promoteToEditor:V,demoteToViewer:Z,transferHost:oe,removeParticipant:xe,sendMessage:Ae,startListening:we}=T2(n?.uid??null);T.useEffect(()=>{!n&&!r&&i()},[n,r,i]);const De=T.useCallback(async(Se,jt,ht)=>{if(n||await i(),!g)return;const _t=y.map(Kn=>Kn.teamNumber),Ze=await F({eventKey:Se,teams:g.teams,allEventTeamNumbers:_t,displayName:jt,teamNumber:ht});b(Ze.sessionCode),B(Ze.sessionId),await m({sessionCode:Ze.sessionCode,sessionId:Ze.sessionId,createdBy:n.uid,createdByName:jt,startedAt:new Date().toISOString()}),e(`/alliance-selection/${Ze.sessionCode}`)},[n,i,g,y,F,b,B,m,e]),J=T.useCallback(async(Se,jt,ht)=>{n||await i();const _t=await ue(Se,jt,ht,"editor");_t&&(b(Se),B(_t.sessionId),e(`/alliance-selection/${Se}`))},[n,i,ue,b,B,e]);T.useEffect(()=>{!t||!n||E||A||(I?we(I):n.displayName?J(t,n.displayName,148):K(!0))},[t,n,E,A,I,we,J]);const X=T.useCallback(async()=>{if(!t||!Y.trim())return;N(Y.trim());const Se=$.trim()?parseInt($.trim(),10):void 0;$.trim()&&k($.trim()),K(!1),await J(t,Y.trim(),Se&&!isNaN(Se)?Se:void 0)},[t,Y,$,N,k,J]),ye=T.useCallback(async Se=>{await ge(Se),Se==="completed"&&await p()},[ge,p]),qe=T.useCallback(()=>{z(),B(null),e("/alliance-selection")},[z,B,e]);return r?l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:l.jsx(fs,{size:32,className:"animate-spin text-textSecondary"})}):t?U?l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border w-full max-w-md",children:[l.jsx("h2",{className:"text-xl font-bold mb-2",children:"Join Session"}),l.jsxs("p",{className:"text-textSecondary text-sm mb-4",children:["Session ",l.jsx("span",{className:"font-mono font-bold text-textPrimary",children:t})]}),P&&l.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-3 py-2 rounded-lg text-sm mb-4",children:P}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Your Name *"}),l.jsx("input",{type:"text",value:Y,onChange:Se=>Q(Se.target.value),placeholder:"Enter your name",className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Team Number"}),l.jsx("input",{type:"text",value:$,onChange:Se=>C(Se.target.value.replace(/\D/g,"")),placeholder:"e.g. 148",maxLength:5,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono"})]}),l.jsxs("button",{onClick:X,disabled:A||!Y.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blueAlliance text-white font-semibold rounded-lg hover:bg-blueAlliance/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[A?l.jsx(fs,{size:18,className:"animate-spin"}):l.jsx(Jc,{size:18}),"Join Session"]})]})]})}):A||!E?l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-3",children:[l.jsx(fs,{size:32,className:"animate-spin text-textSecondary"}),l.jsxs("p",{className:"text-textSecondary",children:["Connecting to session ",t,"..."]}),P&&l.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg mt-4",children:P})]}):l.jsx(w2,{session:E,userId:n?.uid??"",myRole:w,isEditor:D,isHost:j,onMarkPicked:ee,onMarkDeclined:pe,onUndoStatus:H,onSetStatus:ye,onLeave:qe,onPromote:V,onDemote:Z,onTransferHost:oe,onRemoveParticipant:xe,onSendMessage:Ae}):l.jsx(iV,{onCreateSession:De,onJoinSession:J,loading:A,error:P,isAdmin:c,userDisplayName:n?.displayName??void 0,liveSession:d})}function mV(){const{sessionCode:t}=xx(),{user:e,loading:n,signIn:r}=Kf(),i=$e(oe=>oe.eventCode),c=dt(oe=>oe.lastDisplayName),d=dt(oe=>oe.lastTeamNumber),m=dt(oe=>oe.setLastDisplayName),p=dt(oe=>oe.setLastTeamNumber),g=dt(oe=>oe.activeSessionId),y=dt(oe=>oe.setActiveSessionId),b=dt(oe=>oe.setLastSessionCode),[N,k]=T.useState(c),[L,M]=T.useState(d),[I,B]=T.useState(!1),{session:U,loading:K,error:Y,myRole:Q,isHost:$,isEditor:C,joinSession:E,leaveSession:A,markTeamPicked:P,markTeamDeclined:w,undoTeamStatus:j,setSessionStatus:D,promoteToEditor:F,demoteToViewer:ue,transferHost:z,removeParticipant:ee,sendMessage:pe,startListening:H}=T2(e?.uid??null);T.useEffect(()=>{!e&&!n&&r()},[e,n,r]),T.useEffect(()=>{!t||!e||U||K||(g?H(g):B(!0))},[t,e,U,K,g,H]);const ge=T.useCallback(async()=>{if(!t||!N.trim()||!e)return;m(N.trim());const oe=L.trim()?parseInt(L.trim(),10):void 0;L.trim()&&p(L.trim()),B(!1);const xe=await E(t,N.trim(),oe&&!isNaN(oe)?oe:void 0);xe&&(b(t),y(xe.sessionId))},[t,N,L,e,E,m,p,b,y]),V=T.useCallback(()=>{A(),y(null),B(!0)},[A,y]),Z=l.jsx("header",{className:"bg-surface border-b border-border sticky top-0 z-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(mu,{size:24,className:"text-blueAlliance"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold",children:"Alliance Selection"}),l.jsxs("p",{className:"text-textSecondary text-xs",children:["Team 148  ",i]})]})]})})});return n?l.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[Z,l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:l.jsx(fs,{size:32,className:"animate-spin text-textSecondary"})})]}):I?l.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[Z,l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border w-full max-w-md mx-4",children:[l.jsx("h2",{className:"text-xl font-bold mb-2",children:"Join Session"}),l.jsxs("p",{className:"text-textSecondary text-sm mb-4",children:["Session ",l.jsx("span",{className:"font-mono font-bold text-textPrimary",children:t})]}),Y&&l.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-3 py-2 rounded-lg text-sm mb-4",children:Y}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Your Name *"}),l.jsx("input",{type:"text",value:N,onChange:oe=>k(oe.target.value),placeholder:"Enter your name",className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Team Number"}),l.jsx("input",{type:"text",value:L,onChange:oe=>M(oe.target.value.replace(/\D/g,"")),placeholder:"e.g. 148",maxLength:5,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono"})]}),l.jsxs("button",{onClick:ge,disabled:K||!N.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blueAlliance text-white font-semibold rounded-lg hover:bg-blueAlliance/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[K?l.jsx(fs,{size:18,className:"animate-spin"}):l.jsx(Jc,{size:18}),"Join Session"]})]})]})})]}):K||!U?l.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[Z,l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-3",children:[l.jsx(fs,{size:32,className:"animate-spin text-textSecondary"}),l.jsxs("p",{className:"text-textSecondary",children:["Connecting to session ",t,"..."]}),Y&&l.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg mt-4",children:Y})]})]}):l.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[Z,l.jsx("main",{className:"max-w-7xl mx-auto px-4 py-4 md:py-8",children:l.jsx(w2,{session:U,userId:e?.uid??"",myRole:Q,isEditor:C,isHost:$,onMarkPicked:P,onMarkDeclined:w,onUndoStatus:j,onSetStatus:D,onLeave:V,onPromote:F,onDemote:ue,onTransferHost:z,onRemoveParticipant:ee,onSendMessage:pe})})]})}const pV=Nu()(Su((t,e)=>({entries:[],loading:!1,error:null,lastScoutName:"",setLastScoutName:n=>t({lastScoutName:n}),addEntry:async n=>{t({loading:!0,error:null});try{const r=`${n.eventCode}-${n.teamNumber}`,i={...n,id:r,timestamp:new Date().toISOString()},c=Dn(un,"pitScouting",r);return await ha(c,i),t(d=>({entries:[...d.entries.filter(m=>m.id!==r),i],loading:!1})),r}catch(r){const i=r instanceof Error?r.message:"Failed to save pit scout entry";throw t({error:i,loading:!1}),r}},updateEntry:async(n,r)=>{t({loading:!0,error:null});try{const i=e().entries.find(m=>m.id===n);if(!i)throw new Error("Entry not found");const c={...i,...r},d=Dn(un,"pitScouting",n);await ha(d,c),t(m=>({entries:m.entries.map(p=>p.id===n?c:p),loading:!1}))}catch(i){const c=i instanceof Error?i.message:"Failed to update entry";throw t({error:c,loading:!1}),i}},deleteEntry:async n=>{t({loading:!0,error:null});try{const r=e().entries.find(c=>c.id===n);r?.photoPath&&await e().deletePhoto(r.photoPath);const i=Dn(un,"pitScouting",n);await KE(i),t(c=>({entries:c.entries.filter(d=>d.id!==n),loading:!1}))}catch(r){const i=r instanceof Error?r.message:"Failed to delete entry";throw t({error:i,loading:!1}),r}},uploadPhoto:async(n,r,i)=>{const c=`pitPhotos/${r}/${n}_${Date.now()}.${i.name.split(".").pop()}`,d=tN(nN,c);return await wP(d,i),{url:await AP(d),path:c}},deletePhoto:async n=>{try{const r=tN(nN,n);await jP(r)}catch(r){console.warn("Failed to delete photo:",r)}},loadEntriesFromFirestore:async n=>{t({loading:!0,error:null});try{const r=Wg(jh(un,"pitScouting"),Jg("eventCode","==",n)),c=(await Zg(r)).docs.map(d=>d.data());t({entries:c,loading:!1})}catch(r){const i=r instanceof Error?r.message:"Failed to load entries";throw t({error:i,loading:!1}),r}},getEntryByTeam:n=>e().entries.find(r=>r.teamNumber===n)}),{name:"pit-scout-storage",partialize:t=>({entries:t.entries,lastScoutName:t.lastScoutName})})),gV=(t,e)=>({eventCode:t,teamNumber:0,teamName:"",scoutName:e,photoUrl:null,photoPath:null,driveType:"swerve",fuelIntakeGround:!1,fuelIntakeChute:!0,fuelIntakeOutpost:!1,fuelCapacity:1,fuelCycleTime:0,canScoreActiveHub:!0,canScoreInactiveHub:!1,canCrossBumps:!0,climbLevel:"none",climbTime:0,canAssistClimb:!1,autoMobility:!0,autoFuelCapability:0,autoClimbLevel1:!1,autoNotes:"",coachName:"",batteryCount:4,vibeCheck:"good",specialFeatures:"",concerns:"",notes:""});function xV(){const t=$e(H=>H.eventCode),e=$e(H=>H.teamStatistics),{entries:n,error:r,lastScoutName:i,setLastScoutName:c,addEntry:d,uploadPhoto:m,loadEntriesFromFirestore:p}=pV(),{user:g,loading:y,signIn:b}=Kf();T.useEffect(()=>{!g&&!y&&b()},[g,y,b]);const[N,k]=T.useState(i),[L,M]=T.useState(!!i),[I,B]=T.useState(null),[U,K]=T.useState(null),[Y,Q]=T.useState(null),[$,C]=T.useState(null),[E,A]=T.useState(!1),[P,w]=T.useState(!1),j=T.useRef(null),D=T.useRef(null);T.useEffect(()=>{t&&g&&p(t).catch(console.error)},[t,g,p]),T.useEffect(()=>{if(I&&N){const H=n.find(ge=>ge.teamNumber===I);if(H){const{id:ge,timestamp:V,...Z}=H;K(Z),C(H.photoUrl)}else{const ge=e.find(V=>V.teamNumber===I);K({...gV(t,N),teamNumber:I,teamName:ge?.teamName||""}),C(null)}Q(null)}},[I,N,t,n,e]);const F=H=>{const ge=H.target.files?.[0];if(ge){Q(ge);const V=new FileReader;V.onload=()=>C(V.result),V.readAsDataURL(ge)}},ue=async()=>{if(!(!U||!I)){A(!0);try{let H=U.photoUrl,ge=U.photoPath;if(Y){const V=await m(I,t,Y);H=V.url,ge=V.path}await d({...U,photoUrl:H,photoPath:ge,scoutName:N}),c(N),w(!0),setTimeout(()=>w(!1),2e3)}catch(H){console.error("Failed to save:",H)}finally{A(!1)}}},z=(H,ge)=>{U&&K({...U,[H]:ge})},ee=e.filter(H=>!n.some(ge=>ge.teamNumber===H.teamNumber)),pe=e.filter(H=>n.some(ge=>ge.teamNumber===H.teamNumber));if(y)return l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:l.jsx(fs,{size:32,className:"animate-spin text-textSecondary"})});if(!L){const H=()=>{N.trim()&&(M(!0),c(N.trim()))};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Pit Scouting"}),l.jsxs("p",{className:"text-textSecondary mt-1",children:["REBUILT 2026  ",t]})]}),l.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border max-w-md",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Enter Your Name"}),l.jsx("input",{type:"text",value:N,onChange:ge=>k(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&H(),placeholder:"Scout name",className:"w-full bg-card border border-border rounded-lg px-4 py-3 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success text-lg",autoFocus:!0}),l.jsx("p",{className:"text-textSecondary text-sm mt-2",children:"Your name will be saved with each pit scout entry."}),l.jsx("button",{onClick:H,disabled:!N.trim(),className:"mt-4 w-full px-4 py-3 bg-success text-background font-bold rounded-lg hover:bg-success/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continue"})]})]})}return I?U?l.jsxs("div",{className:"space-y-4 pb-24",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>B(null),className:"p-2 rounded-lg bg-surfaceElevated hover:bg-interactive transition-colors",children:l.jsx(nO,{size:24})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Team ",I]}),l.jsx("p",{className:"text-textSecondary text-sm",children:U.teamName||"Unknown Team"})]})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"Robot Photo"}),$?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:$,alt:"Robot",className:"w-full max-h-64 object-contain rounded-lg bg-card"}),l.jsx("button",{onClick:()=>{Q(null),C(null),z("photoUrl",null),z("photoPath",null)},className:"absolute top-2 right-2 p-2 bg-danger/90 text-white rounded-lg hover:bg-danger transition-colors",children:l.jsx(ci,{size:16})})]}):l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>D.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 bg-card border-2 border-dashed border-border rounded-lg hover:border-success hover:bg-success/5 transition-colors",children:[l.jsx(WP,{size:24}),l.jsx("span",{children:"Take Photo"})]}),l.jsxs("button",{onClick:()=>j.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 bg-card border-2 border-dashed border-border rounded-lg hover:border-success hover:bg-success/5 transition-colors",children:[l.jsx(XT,{size:24}),l.jsx("span",{children:"Upload"})]})]}),l.jsx("input",{ref:D,type:"file",accept:"image/*",capture:"environment",onChange:F,className:"hidden"}),l.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:F,className:"hidden"})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"Drive Type *"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:["swerve","tank","mecanum","other"].map(H=>l.jsx("button",{onClick:()=>z("driveType",H),className:`px-4 py-3 rounded-lg border font-semibold capitalize transition-colors ${U.driveType===H?"bg-success/20 border-success text-success":"bg-card border-border hover:border-success"}`,children:H},H))})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"FUEL Intake"}),l.jsx("div",{className:"space-y-2",children:[{key:"fuelIntakeGround",label:"Ground Pickup"},{key:"fuelIntakeChute",label:"From CHUTE (Human Player)"},{key:"fuelIntakeOutpost",label:"From OUTPOST"}].map(({key:H,label:ge})=>l.jsxs("button",{onClick:()=>z(H,!U[H]),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-colors ${U[H]?"bg-success/20 border-success":"bg-card border-border hover:border-textSecondary"}`,children:[l.jsx("span",{children:ge}),l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${U[H]?"border-success bg-success":"border-textMuted"}`,children:U[H]&&l.jsx(ir,{size:14,className:"text-background"})})]},H))}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Capacity (# FUEL)"}),l.jsx("input",{type:"number",value:U.fuelCapacity,onChange:H=>z("fuelCapacity",parseInt(H.target.value)||0),min:0,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Cycle Time (sec)"}),l.jsx("input",{type:"number",value:U.fuelCycleTime,onChange:H=>z("fuelCycleTime",parseInt(H.target.value)||0),min:0,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]})]})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"Scoring & Obstacles"}),l.jsx("div",{className:"space-y-2",children:[{key:"canScoreActiveHub",label:"Can Score in Active HUB"},{key:"canCrossBumps",label:"Can Cross BUMPS"}].map(({key:H,label:ge})=>l.jsxs("button",{onClick:()=>z(H,!U[H]),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-colors ${U[H]?"bg-success/20 border-success":"bg-card border-border hover:border-textSecondary"}`,children:[l.jsx("span",{children:ge}),l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${U[H]?"border-success bg-success":"border-textMuted"}`,children:U[H]&&l.jsx(ir,{size:14,className:"text-background"})})]},H))})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"TOWER Climb *"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[{value:"level3",label:"Level 3",points:"30pts"},{value:"level2",label:"Level 2",points:"20pts"},{value:"level1",label:"Level 1",points:"10pts"},{value:"none",label:"None",points:""}].map(({value:H,label:ge,points:V})=>l.jsxs("button",{onClick:()=>z("climbLevel",H),className:`px-4 py-3 rounded-lg border transition-colors ${U.climbLevel===H?"bg-success/20 border-success text-success":"bg-card border-border hover:border-success"}`,children:[l.jsx("div",{className:"font-semibold",children:ge}),l.jsx("div",{className:"text-xs text-textSecondary",children:V})]},H))}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Climb Time (sec)"}),l.jsx("input",{type:"number",value:U.climbTime,onChange:H=>z("climbTime",parseInt(H.target.value)||0),min:0,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]}),l.jsx("button",{onClick:()=>z("canAssistClimb",!U.canAssistClimb),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg border transition-colors ${U.canAssistClimb?"bg-success/20 border-success":"bg-card border-border hover:border-success"}`,children:l.jsx("span",{className:"text-sm",children:"Can Assist Climb"})})]})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"Auto Capabilities"}),l.jsx("div",{className:"space-y-2",children:[{key:"autoMobility",label:"Can Leave Starting Zone"},{key:"autoClimbLevel1",label:"Can Reach LEVEL 1 in Auto"}].map(({key:H,label:ge})=>l.jsxs("button",{onClick:()=>z(H,!U[H]),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-colors ${U[H]?"bg-success/20 border-success":"bg-card border-border hover:border-textSecondary"}`,children:[l.jsx("span",{children:ge}),l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${U[H]?"border-success bg-success":"border-textMuted"}`,children:U[H]&&l.jsx(ir,{size:14,className:"text-background"})})]},H))}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Auto FUEL Scored (typical)"}),l.jsx("input",{type:"number",value:U.autoFuelCapability,onChange:H=>z("autoFuelCapability",parseInt(H.target.value)||0),min:0,max:50,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Auto Notes"}),l.jsx("textarea",{value:U.autoNotes,onChange:H=>z("autoNotes",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Starting positions, paths, etc."})]})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"General Info"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Coach Name *"}),l.jsx("input",{type:"text",value:U.coachName,onChange:H=>z("coachName",H.target.value),className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary",placeholder:"Enter coach name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Number of Batteries"}),l.jsx("div",{className:"flex gap-2 flex-wrap",children:[1,2,3,4,5,6,7].map(H=>l.jsxs("button",{onClick:()=>z("batteryCount",H),className:`w-10 h-10 rounded-lg border font-bold transition-colors ${U.batteryCount===H?"bg-success/20 border-success text-success":"bg-card border-border hover:border-success"}`,children:[H,H===7?"+":""]},H))})]})]})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"Vibe Check *"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"good",label:"",color:"success"},{value:"bad",label:"",color:"danger"}].map(({value:H,label:ge,color:V})=>l.jsx("button",{onClick:()=>z("vibeCheck",H),className:`px-6 py-4 rounded-lg border text-3xl font-bold transition-colors ${U.vibeCheck===H?V==="success"?"bg-success/20 border-success text-success":"bg-danger/20 border-danger text-danger":"bg-card border-border hover:border-textSecondary"}`,children:ge},H))})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsx("h2",{className:"font-bold mb-3",children:"Additional Notes"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Special Features"}),l.jsx("textarea",{value:U.specialFeatures,onChange:H=>z("specialFeatures",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Unique capabilities, mechanisms..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Concerns"}),l.jsx("textarea",{value:U.concerns,onChange:H=>z("concerns",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Issues observed, reliability concerns..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Other Notes"}),l.jsx("textarea",{value:U.notes,onChange:H=>z("notes",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Anything else..."})]})]})]}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background border-t border-border",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsx("button",{onClick:ue,disabled:E||!U.coachName.trim(),className:`w-full flex items-center justify-center gap-2 px-6 py-4 font-bold text-lg rounded-lg transition-colors ${P?"bg-success text-background":"bg-success text-background hover:bg-success/90 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:E?l.jsx(fs,{size:24,className:"animate-spin"}):P?l.jsxs(l.Fragment,{children:[l.jsx(ir,{size:24}),"Saved!"]}):l.jsxs(l.Fragment,{children:[l.jsx(KT,{size:24}),"Save Entry"]})})})})]}):l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:l.jsx(fs,{size:32,className:"animate-spin text-textSecondary"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Pit Scouting"}),l.jsxs("p",{className:"text-textSecondary mt-1",children:["Scout: ",l.jsx("span",{className:"text-textPrimary font-semibold",children:N}),l.jsx("button",{onClick:()=>M(!1),className:"text-blueAlliance ml-2 text-sm",children:"(change)"})]})]}),r&&l.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg",children:r}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-textSecondary",children:"Progress"}),l.jsxs("span",{className:"font-bold",children:[n.length," / ",e.length]})]}),l.jsx("div",{className:"w-full bg-card rounded-full h-2",children:l.jsx("div",{className:"bg-success h-2 rounded-full transition-all",style:{width:`${n.length/e.length*100}%`}})})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsxs("h2",{className:"text-lg font-bold mb-3",children:["Unscouted Teams (",ee.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:ee.map(H=>l.jsx("button",{onClick:()=>B(H.teamNumber),className:"px-3 py-2 bg-card border border-border rounded-lg hover:bg-interactive hover:border-success transition-colors text-center",children:l.jsx("span",{className:"font-bold",children:H.teamNumber})},H.teamNumber))}),ee.length===0&&l.jsx("p",{className:"text-textSecondary text-center py-4",children:"All teams scouted!"})]}),pe.length>0&&l.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[l.jsxs("h2",{className:"text-lg font-bold mb-3",children:["Scouted Teams (",pe.length,")"]}),l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:pe.map(H=>l.jsx("button",{onClick:()=>B(H.teamNumber),className:"px-3 py-2 bg-success/10 border border-success/30 rounded-lg hover:bg-success/20 transition-colors text-center",children:l.jsx("span",{className:"font-bold text-success",children:H.teamNumber})},H.teamNumber))})]})]})}function yV(){const{isAdmin:t,accessConfig:e,accessRequests:n,addAllowedEmail:r,removeAllowedEmail:i,addAdminEmail:c,removeAdminEmail:d,approveRequest:m,denyRequest:p,user:g}=Do(),[y,b]=T.useState(""),[N,k]=T.useState(null);if(!t)return l.jsxs("div",{className:"text-center py-16",children:[l.jsx(pl,{size:48,className:"mx-auto mb-4 text-textMuted"}),l.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),l.jsx("p",{className:"text-textSecondary",children:"Only admins can manage access settings."})]});const L=async()=>{const $=y.trim().toLowerCase();if(!$||!$.includes("@")){k("Please enter a valid email address.");return}await r($),b(""),k(`Added ${$} to allowed users.`),setTimeout(()=>k(null),3e3)},M=async $=>{await m($),k(`Approved ${$}.`),setTimeout(()=>k(null),3e3)},I=async $=>{await p($),k(`Denied request from ${$}.`),setTimeout(()=>k(null),3e3)},B=async $=>{confirm(`Make ${$} an admin? They will be able to manage the access list.`)&&(await c($),k(`${$} is now an admin.`),setTimeout(()=>k(null),3e3))},U=async $=>{$.toLowerCase()===g?.email?.toLowerCase()&&!confirm("Are you sure you want to remove your own admin access?")||(await d($),k(`${$} is no longer an admin.`),setTimeout(()=>k(null),3e3))},K=async $=>{confirm(`Remove ${$} from the access list? They will no longer be able to use the app.`)&&(await i($),e?.adminEmails.map(C=>C.toLowerCase()).includes($.toLowerCase())&&await d($),k(`Removed ${$}.`),setTimeout(()=>k(null),3e3))},Y=e?.allowedEmails??[],Q=new Set((e?.adminEmails??[]).map($=>$.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Access Management"}),l.jsx("p",{className:"text-textSecondary text-sm",children:"Manage who can access the Data Wrangler app."})]}),n.length>0&&l.jsxs("div",{className:"bg-warning/10 rounded-lg border-2 border-warning p-4 md:p-6",children:[l.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-warning",children:[l.jsx($T,{size:20}),"Pending Requests (",n.length,")"]}),l.jsx("div",{className:"space-y-3",children:n.map($=>l.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-surface rounded-lg border border-border",children:[$.photoURL?l.jsx("img",{src:$.photoURL,alt:"",className:"h-8 w-8 rounded-full flex-shrink-0"}):l.jsx("div",{className:"h-8 w-8 rounded-full bg-surfaceElevated flex items-center justify-center flex-shrink-0",children:l.jsx(oN,{size:14,className:"text-textMuted"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-semibold truncate",children:$.firstName&&$.lastName?`${$.firstName} ${$.lastName}`:$.displayName}),l.jsx("p",{className:"text-xs text-textSecondary truncate",children:$.email})]}),l.jsx("span",{className:"text-xs text-textMuted hidden sm:block",children:new Date($.requestedAt).toLocaleDateString()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>M($.email),className:"flex items-center gap-1.5 px-3 py-1.5 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors text-sm",children:[l.jsx(k6,{size:14}),"Approve"]}),l.jsxs("button",{onClick:()=>I($.email),className:"flex items-center gap-1.5 px-3 py-1.5 bg-danger/10 text-danger font-semibold rounded-lg hover:bg-danger/20 transition-colors text-sm",children:[l.jsx(O6,{size:14}),"Deny"]})]})]},$.email))})]}),N&&l.jsx("div",{className:"p-3 bg-success/10 border border-success/30 rounded-lg text-success text-sm",children:N}),l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-4 md:p-6",children:[l.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[l.jsx(uN,{size:20}),"Add Team Member"]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"email",value:y,onChange:$=>b($.target.value),onKeyDown:$=>$.key==="Enter"&&L(),placeholder:"teammate@gmail.com",className:"flex-1 px-4 py-2.5 bg-card border border-border rounded-lg text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"}),l.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-6 py-2.5 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:[l.jsx(uN,{size:18}),"Add"]})]})]}),l.jsxs("div",{className:"bg-surface rounded-lg border border-border p-4 md:p-6",children:[l.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[l.jsx(pl,{size:20}),"Approved Users (",Y.length,")"]}),Y.length===0?l.jsx("p",{className:"text-textMuted text-center py-8",children:"No users added yet. Add your first team member above."}):l.jsx("div",{className:"space-y-2",children:Y.map($=>{const C=Q.has($.toLowerCase()),E=$.toLowerCase()===g?.email?.toLowerCase();return l.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-card rounded-lg",children:[l.jsx(oN,{size:16,className:"text-textSecondary flex-shrink-0"}),l.jsxs("span",{className:"flex-1 text-sm font-medium",children:[$,E&&l.jsx("span",{className:"text-textMuted ml-1",children:"(you)"})]}),C&&l.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-warning/20 text-warning rounded text-xs font-semibold",children:[l.jsx(yg,{size:12}),"admin"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[C?Q.size>1&&l.jsx("button",{onClick:()=>U($),className:"p-1.5 rounded text-warning hover:text-textMuted hover:bg-interactive transition-colors",title:"Remove admin",children:l.jsx(yg,{size:14})}):l.jsx("button",{onClick:()=>B($),className:"p-1.5 rounded text-textMuted hover:text-warning hover:bg-interactive transition-colors",title:"Make admin",children:l.jsx(yg,{size:14})}),l.jsx("button",{onClick:()=>K($),className:"p-1.5 rounded text-textMuted hover:text-danger hover:bg-interactive transition-colors",title:"Remove access",children:l.jsx(ci,{size:14})})]})]},$)})})]}),l.jsxs("div",{className:"bg-surfaceElevated rounded-lg border border-border p-4 text-sm text-textSecondary space-y-2",children:[l.jsx("p",{children:l.jsx("strong",{children:"How it works:"})}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 text-textMuted",children:[l.jsx("li",{children:"Only emails on this list can sign in and use the app"}),l.jsx("li",{children:"Team members can request access from the login page"}),l.jsx("li",{children:"Admins can add/remove users and manage the access list"}),l.jsx("li",{children:"Alliance selection join links still work for anyone (no account needed)"}),l.jsx("li",{children:"The first person to sign in automatically becomes admin"})]})]})]})}function bV(){const t=$e(e=>e.loadMockData);return T.useEffect(()=>{t().catch(e=>{console.error("Failed to load mock data:",e)})},[t]),l.jsxs(hj,{children:[l.jsx(ts,{path:"/alliance-selection/join/:sessionCode",element:l.jsx(mV,{})}),l.jsxs(ts,{element:l.jsx(H6,{children:l.jsx(G6,{})}),children:[l.jsx(ts,{path:"/",element:l.jsx(W6,{})}),l.jsx(ts,{path:"/teams",element:l.jsx(K6,{})}),l.jsx(ts,{path:"/teams/:teamNumber",element:l.jsx(Z6,{})}),l.jsx(ts,{path:"/compare",element:l.jsx(Q6,{})}),l.jsx(ts,{path:"/picklist",element:l.jsx(J5,{})}),l.jsx(ts,{path:"/predict",element:l.jsx(nV,{})}),l.jsx(ts,{path:"/alliance-selection",element:l.jsx(kN,{})}),l.jsx(ts,{path:"/alliance-selection/:sessionCode",element:l.jsx(kN,{})}),l.jsx(ts,{path:"/pit-scouting",element:l.jsx(xV,{})}),l.jsx(ts,{path:"/event",element:l.jsx(tV,{})}),l.jsx(ts,{path:"/metrics",element:l.jsx(Z5,{})}),l.jsx(ts,{path:"/admin",element:l.jsx(yV,{})})]})]})}function vV(){return l.jsx(Oj,{basename:"/frc-2026-analytics",children:l.jsx(PP,{children:l.jsx(bV,{})})})}hA.createRoot(document.getElementById("root")).render(l.jsx(T.StrictMode,{children:l.jsx(vV,{})}));
