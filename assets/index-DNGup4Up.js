(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function q2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zp={exports:{}},Ic={};var H0;function $2(){if(H0)return Ic;H0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,c){var d=null;if(c!==void 0&&(d=""+c),i.key!==void 0&&(d=""+i.key),"key"in i){c={};for(var m in i)m!=="key"&&(c[m]=i[m])}else c=i;return i=c.ref,{$$typeof:t,type:r,key:d,ref:i!==void 0?i:null,props:c}}return Ic.Fragment=e,Ic.jsx=n,Ic.jsxs=n,Ic}var q0;function G2(){return q0||(q0=1,zp.exports=$2()),zp.exports}var o=G2(),Fp={exports:{}},Ue={};var $0;function K2(){if($0)return Ue;$0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,k={};function z(V,Q,fe){this.props=V,this.context=Q,this.refs=k,this.updater=fe||L}z.prototype.isReactComponent={},z.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},z.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function U(){}U.prototype=z.prototype;function $(V,Q,fe){this.props=V,this.context=Q,this.refs=k,this.updater=fe||L}var X=$.prototype=new U;X.constructor=$,O(X,z.prototype),X.isPureReactComponent=!0;var K=Array.isArray;function re(){}var j={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(V,Q,fe){var ye=fe.ref;return{$$typeof:t,type:V,key:Q,ref:ye!==void 0?ye:null,props:fe}}function P(V,Q){return C(V.type,Q,V.props)}function w(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function A(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(fe){return Q[fe]})}var D=/\/+/g;function q(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?A(""+V.key):Q.toString(36)}function be(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(re,re):(V.status="pending",V.then(function(Q){V.status==="pending"&&(V.status="fulfilled",V.value=Q)},function(Q){V.status==="pending"&&(V.status="rejected",V.reason=Q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function B(V,Q,fe,ye,Re){var ge=typeof V;(ge==="undefined"||ge==="boolean")&&(V=null);var ke=!1;if(V===null)ke=!0;else switch(ge){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(V.$$typeof){case t:case e:ke=!0;break;case y:return ke=V._init,B(ke(V._payload),Q,fe,ye,Re)}}if(ke)return Re=Re(V),ke=ye===""?"."+q(V,0):ye,K(Re)?(fe="",ke!=null&&(fe=ke.replace(D,"$&/")+"/"),B(Re,Q,fe,"",function(xe){return xe})):Re!=null&&(w(Re)&&(Re=P(Re,fe+(Re.key==null||V&&V.key===Re.key?"":(""+Re.key).replace(D,"$&/")+"/")+ke)),Q.push(Re)),1;ke=0;var J=ye===""?".":ye+":";if(K(V))for(var Y=0;Y<V.length;Y++)ye=V[Y],ge=J+q(ye,Y),ke+=B(ye,Q,fe,ge,Re);else if(Y=I(V),typeof Y=="function")for(V=Y.call(V),Y=0;!(ye=V.next()).done;)ye=ye.value,ge=J+q(ye,Y++),ke+=B(ye,Q,fe,ge,Re);else if(ge==="object"){if(typeof V.then=="function")return B(be(V),Q,fe,ye,Re);throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ce(V,Q,fe){if(V==null)return V;var ye=[],Re=0;return B(V,ye,"","",function(ge){return Q.call(fe,ge,Re++)}),ye}function le(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(fe){(V._status===0||V._status===-1)&&(V._status=1,V._result=fe)},function(fe){(V._status===0||V._status===-1)&&(V._status=2,V._result=fe)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var H=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},pe={map:ce,forEach:function(V,Q,fe){ce(V,function(){Q.apply(this,arguments)},fe)},count:function(V){var Q=0;return ce(V,function(){Q++}),Q},toArray:function(V){return ce(V,function(Q){return Q})||[]},only:function(V){if(!w(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ue.Activity=v,Ue.Children=pe,Ue.Component=z,Ue.Fragment=n,Ue.Profiler=i,Ue.PureComponent=$,Ue.StrictMode=r,Ue.Suspense=p,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(V){return j.H.useMemoCache(V)}},Ue.cache=function(V){return function(){return V.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(V,Q,fe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ye=O({},V.props),Re=V.key;if(Q!=null)for(ge in Q.key!==void 0&&(Re=""+Q.key),Q)!S.call(Q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&Q.ref===void 0||(ye[ge]=Q[ge]);var ge=arguments.length-2;if(ge===1)ye.children=fe;else if(1<ge){for(var ke=Array(ge),J=0;J<ge;J++)ke[J]=arguments[J+2];ye.children=ke}return C(V.type,Re,ye)},Ue.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Ue.createElement=function(V,Q,fe){var ye,Re={},ge=null;if(Q!=null)for(ye in Q.key!==void 0&&(ge=""+Q.key),Q)S.call(Q,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Re[ye]=Q[ye]);var ke=arguments.length-2;if(ke===1)Re.children=fe;else if(1<ke){for(var J=Array(ke),Y=0;Y<ke;Y++)J[Y]=arguments[Y+2];Re.children=J}if(V&&V.defaultProps)for(ye in ke=V.defaultProps,ke)Re[ye]===void 0&&(Re[ye]=ke[ye]);return C(V,ge,Re)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(V){return{$$typeof:m,render:V}},Ue.isValidElement=w,Ue.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:le}},Ue.memo=function(V,Q){return{$$typeof:x,type:V,compare:Q===void 0?null:Q}},Ue.startTransition=function(V){var Q=j.T,fe={};j.T=fe;try{var ye=V(),Re=j.S;Re!==null&&Re(fe,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(re,H)}catch(ge){H(ge)}finally{Q!==null&&fe.types!==null&&(Q.types=fe.types),j.T=Q}},Ue.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ue.use=function(V){return j.H.use(V)},Ue.useActionState=function(V,Q,fe){return j.H.useActionState(V,Q,fe)},Ue.useCallback=function(V,Q){return j.H.useCallback(V,Q)},Ue.useContext=function(V){return j.H.useContext(V)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(V,Q){return j.H.useDeferredValue(V,Q)},Ue.useEffect=function(V,Q){return j.H.useEffect(V,Q)},Ue.useEffectEvent=function(V){return j.H.useEffectEvent(V)},Ue.useId=function(){return j.H.useId()},Ue.useImperativeHandle=function(V,Q,fe){return j.H.useImperativeHandle(V,Q,fe)},Ue.useInsertionEffect=function(V,Q){return j.H.useInsertionEffect(V,Q)},Ue.useLayoutEffect=function(V,Q){return j.H.useLayoutEffect(V,Q)},Ue.useMemo=function(V,Q){return j.H.useMemo(V,Q)},Ue.useOptimistic=function(V,Q){return j.H.useOptimistic(V,Q)},Ue.useReducer=function(V,Q,fe){return j.H.useReducer(V,Q,fe)},Ue.useRef=function(V){return j.H.useRef(V)},Ue.useState=function(V){return j.H.useState(V)},Ue.useSyncExternalStore=function(V,Q,fe){return j.H.useSyncExternalStore(V,Q,fe)},Ue.useTransition=function(){return j.H.useTransition()},Ue.version="19.2.3",Ue}var G0;function ax(){return G0||(G0=1,Fp.exports=K2()),Fp.exports}var E=ax();const St=q2(E);var Bp={exports:{}},Dc={},Hp={exports:{}},qp={};var K0;function Y2(){return K0||(K0=1,(function(t){function e(B,ce){var le=B.length;B.push(ce);e:for(;0<le;){var H=le-1>>>1,pe=B[H];if(0<i(pe,ce))B[H]=ce,B[le]=pe,le=H;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var ce=B[0],le=B.pop();if(le!==ce){B[0]=le;e:for(var H=0,pe=B.length,V=pe>>>1;H<V;){var Q=2*(H+1)-1,fe=B[Q],ye=Q+1,Re=B[ye];if(0>i(fe,le))ye<pe&&0>i(Re,fe)?(B[H]=Re,B[ye]=le,H=ye):(B[H]=fe,B[Q]=le,H=Q);else if(ye<pe&&0>i(Re,le))B[H]=Re,B[ye]=le,H=ye;else break e}}return ce}function i(B,ce){var le=B.sortIndex-ce.sortIndex;return le!==0?le:B.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var p=[],x=[],y=1,v=null,T=3,I=!1,L=!1,O=!1,k=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function X(B){for(var ce=n(x);ce!==null;){if(ce.callback===null)r(x);else if(ce.startTime<=B)r(x),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=n(x)}}function K(B){if(O=!1,X(B),!L)if(n(p)!==null)L=!0,re||(re=!0,A());else{var ce=n(x);ce!==null&&be(K,ce.startTime-B)}}var re=!1,j=-1,S=5,C=-1;function P(){return k?!0:!(t.unstable_now()-C<S)}function w(){if(k=!1,re){var B=t.unstable_now();C=B;var ce=!0;try{e:{L=!1,O&&(O=!1,U(j),j=-1),I=!0;var le=T;try{t:{for(X(B),v=n(p);v!==null&&!(v.expirationTime>B&&P());){var H=v.callback;if(typeof H=="function"){v.callback=null,T=v.priorityLevel;var pe=H(v.expirationTime<=B);if(B=t.unstable_now(),typeof pe=="function"){v.callback=pe,X(B),ce=!0;break t}v===n(p)&&r(p),X(B)}else r(p);v=n(p)}if(v!==null)ce=!0;else{var V=n(x);V!==null&&be(K,V.startTime-B),ce=!1}}break e}finally{v=null,T=le,I=!1}ce=void 0}}finally{ce?A():re=!1}}}var A;if(typeof $=="function")A=function(){$(w)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=w,A=function(){q.postMessage(null)}}else A=function(){z(w,0)};function be(B,ce){j=z(function(){B(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(B){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var le=T;T=ce;try{return B()}finally{T=le}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(B,ce){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var le=T;T=B;try{return ce()}finally{T=le}},t.unstable_scheduleCallback=function(B,ce,le){var H=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?H+le:H):le=H,B){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=le+pe,B={id:y++,callback:ce,priorityLevel:B,startTime:le,expirationTime:pe,sortIndex:-1},le>H?(B.sortIndex=le,e(x,B),n(p)===null&&B===n(x)&&(O?(U(j),j=-1):O=!0,be(K,le-H))):(B.sortIndex=pe,e(p,B),L||I||(L=!0,re||(re=!0,A()))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var ce=T;return function(){var le=T;T=ce;try{return B.apply(this,arguments)}finally{T=le}}}})(qp)),qp}var Y0;function Q2(){return Y0||(Y0=1,Hp.exports=Y2()),Hp.exports}var $p={exports:{}},zn={};var Q0;function X2(){if(Q0)return zn;Q0=1;var t=ax();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(p,x,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:p,containerInfo:x,implementation:y}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,zn.createPortal=function(p,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(p,x,null,y)},zn.flushSync=function(p){var x=d.T,y=r.p;try{if(d.T=null,r.p=2,p)return p()}finally{d.T=x,r.p=y,r.d.f()}},zn.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(p,x))},zn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},zn.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var y=x.as,v=m(y,x.crossOrigin),T=typeof x.integrity=="string"?x.integrity:void 0,I=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?r.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:I}):y==="script"&&r.d.X(p,{crossOrigin:v,integrity:T,fetchPriority:I,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},zn.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=m(x.as,x.crossOrigin);r.d.M(p,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(p)},zn.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,v=m(y,x.crossOrigin);r.d.L(p,y,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},zn.preloadModule=function(p,x){if(typeof p=="string")if(x){var y=m(x.as,x.crossOrigin);r.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(p)},zn.requestFormReset=function(p){r.d.r(p)},zn.unstable_batchedUpdates=function(p,x){return p(x)},zn.useFormState=function(p,x,y){return d.H.useFormState(p,x,y)},zn.useFormStatus=function(){return d.H.useHostTransitionStatus()},zn.version="19.2.3",zn}var X0;function yS(){if(X0)return $p.exports;X0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$p.exports=X2(),$p.exports}var W0;function W2(){if(W0)return Dc;W0=1;var t=Q2(),e=ax(),n=yS();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function d(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function m(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function p(s){if(c(s)!==s)throw Error(r(188))}function x(s){var a=s.alternate;if(!a){if(a=c(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,u=a;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return p(f),s;if(g===u)return p(f),a;g=g.sibling}throw Error(r(188))}if(l.return!==u.return)l=f,u=g;else{for(var _=!1,R=f.child;R;){if(R===l){_=!0,l=f,u=g;break}if(R===u){_=!0,u=f,l=g;break}R=R.sibling}if(!_){for(R=g.child;R;){if(R===l){_=!0,l=g,u=f;break}if(R===u){_=!0,u=g,l=f;break}R=R.sibling}if(!_)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function y(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=y(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),$=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function A(s){return s===null||typeof s!="object"?null:(s=w&&s[w]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function q(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case z:return"Profiler";case k:return"StrictMode";case K:return"Suspense";case re:return"SuspenseList";case C:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case $:return s.displayName||"Context";case U:return(s._context.displayName||"Context")+".Consumer";case X:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case j:return a=s.displayName||null,a!==null?a:q(s.type)||"Memo";case S:a=s._payload,s=s._init;try{return q(s(a))}catch{}}return null}var be=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},H=[],pe=-1;function V(s){return{current:s}}function Q(s){0>pe||(s.current=H[pe],H[pe]=null,pe--)}function fe(s,a){pe++,H[pe]=s.current,s.current=a}var ye=V(null),Re=V(null),ge=V(null),ke=V(null);function J(s,a){switch(fe(ge,a),fe(Re,s),fe(ye,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?h0(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=h0(a),s=f0(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Q(ye),fe(ye,s)}function Y(){Q(ye),Q(Re),Q(ge)}function xe(s){s.memoizedState!==null&&fe(ke,s);var a=ye.current,l=f0(a,s.type);a!==l&&(fe(Re,s),fe(ye,l))}function Le(s){Re.current===s&&(Q(ye),Q(Re)),ke.current===s&&(Q(ke),Cc._currentValue=le)}var ut,dn;function At(s){if(ut===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);ut=a&&a[1]||"",dn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ut+s+dn}var hn=!1;function Kt(s,a){if(!s||hn)return"";hn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ie){var se=ie}Reflect.construct(s,[],de)}else{try{de.call()}catch(ie){se=ie}s.call(de.prototype)}}else{try{throw Error()}catch(ie){se=ie}(de=s())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ie){if(ie&&se&&typeof ie.stack=="string")return[ie.stack,se.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),_=g[0],R=g[1];if(_&&R){var F=_.split(`
`),ne=R.split(`
`);for(f=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(u===F.length||f===ne.length)for(u=F.length-1,f=ne.length-1;1<=u&&0<=f&&F[u]!==ne[f];)f--;for(;1<=u&&0<=f;u--,f--)if(F[u]!==ne[f]){if(u!==1||f!==1)do if(u--,f--,0>f||F[u]!==ne[f]){var oe=`
`+F[u].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=u&&0<=f);break}}}finally{hn=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?At(l):""}function As(s,a){switch(s.tag){case 26:case 27:case 5:return At(s.type);case 16:return At("Lazy");case 13:return s.child!==a&&a!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return Kt(s.type,!1);case 11:return Kt(s.type.render,!1);case 1:return Kt(s.type,!0);case 31:return At("Activity");default:return""}}function wn(s){try{var a="",l=null;do a+=As(s,l),l=s,s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ge=Object.prototype.hasOwnProperty,it=t.unstable_scheduleCallback,bn=t.unstable_cancelCallback,or=t.unstable_shouldYield,cr=t.unstable_requestPaint,Zt=t.unstable_now,hs=t.unstable_getCurrentPriorityLevel,zr=t.unstable_ImmediatePriority,es=t.unstable_UserBlockingPriority,An=t.unstable_NormalPriority,ts=t.unstable_LowPriority,Fr=t.unstable_IdlePriority,$n=t.log,Br=t.unstable_setDisableYieldValue,Gn=null,zt=null;function fn(s){if(typeof $n=="function"&&Br(s),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Gn,s)}catch{}}var Nt=Math.clz32?Math.clz32:Se,Hr=Math.log,Z=Math.LN2;function Se(s){return s>>>=0,s===0?32:31-(Hr(s)/Z|0)|0}var _e=256,Te=262144,Ae=4194304;function Fe(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Tt(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var R=u&134217727;return R!==0?(u=R&~g,u!==0?f=Fe(u):(_&=R,_!==0?f=Fe(_):l||(l=R&~s,l!==0&&(f=Fe(l))))):(R=u&~g,R!==0?f=Fe(R):_!==0?f=Fe(_):l||(l=u&~s,l!==0&&(f=Fe(l)))),f===0?0:a!==0&&a!==f&&(a&g)===0&&(g=f&-f,l=a&-a,g>=l||g===32&&(l&4194048)!==0)?a:f}function mt(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Ft(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ct(){var s=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),s}function st(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Un(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ot(s,a,l,u,f,g){var _=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,F=s.expirationTimes,ne=s.hiddenUpdates;for(l=_&~l;0<l;){var oe=31-Nt(l),de=1<<oe;R[oe]=0,F[oe]=-1;var se=ne[oe];if(se!==null)for(ne[oe]=null,oe=0;oe<se.length;oe++){var ie=se[oe];ie!==null&&(ie.lane&=-536870913)}l&=~de}u!==0&&Dt(s,u,0),g!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=g&~(_&~a))}function Dt(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-Nt(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&261930}function vn(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-Nt(l),f=1<<u;f&a|s[u]&a&&(s[u]|=a),l&=~f}}function Kn(s,a){var l=a&-a;return l=(l&42)!==0?1:fs(l),(l&(s.suspendedLanes|a))!==0?0:l}function fs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Yn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ms(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:O0(s.type))}function Cn(s,a){var l=ce.p;try{return ce.p=s,a()}finally{ce.p=l}}var Qn=Math.random().toString(36).slice(2),en="__reactFiber$"+Qn,_n="__reactProps$"+Qn,ur="__reactContainer$"+Qn,yl="__reactEvents$"+Qn,Gf="__reactListeners$"+Qn,Pu="__reactHandles$"+Qn,Ou="__reactResources$"+Qn,dr="__reactMarker$"+Qn;function bl(s){delete s[en],delete s[_n],delete s[yl],delete s[Gf],delete s[Pu]}function hr(s){var a=s[en];if(a)return a;for(var l=s.parentNode;l;){if(a=l[ur]||l[en]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=v0(s);s!==null;){if(l=s[en])return l;s=v0(s)}return a}s=l,l=s.parentNode}return null}function Cs(s){if(s=s[en]||s[ur]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function ps(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function fr(s){var a=s[Ou];return a||(a=s[Ou]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(s){s[dr]=!0}var Po=new Set,Oo={};function mr(s,a){pr(s,a),pr(s+"Capture",a)}function pr(s,a){for(Oo[s]=a,s=0;s<a.length;s++)Po.add(a[s])}var Lo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vo={},Uo={};function Lu(s){return Ge.call(Uo,s)?!0:Ge.call(Vo,s)?!1:Lo.test(s)?Uo[s]=!0:(Vo[s]=!0,!1)}function vl(s,a,l){if(Lu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function gs(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function nn(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}function Sn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function _a(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zo(s,a,l){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return f.call(this)},set:function(_){l=""+_,g.call(this,_)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function pt(s){if(!s._valueTracker){var a=_a(s)?"checked":"value";s._valueTracker=zo(s,a,""+s[a])}}function Ei(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=_a(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function gr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var wi=/[\n"\\]/g;function ns(s){return s.replace(wi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function _l(s,a,l,u,f,g,_,R){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),a!=null?_==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Sn(a)):s.value!==""+Sn(a)&&(s.value=""+Sn(a)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),a!=null?Fo(s,_,Sn(a)):l!=null?Fo(s,_,Sn(l)):u!=null&&s.removeAttribute("value"),f==null&&g!=null&&(s.defaultChecked=!!g),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Sn(R):s.removeAttribute("name")}function Vu(s,a,l,u,f,g,_,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null)){pt(s);return}l=l!=null?""+Sn(l):"",a=a!=null?""+Sn(a):l,R||a===s.value||(s.value=a),s.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=R?s.checked:!!u,s.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),pt(s)}function Fo(s,a,l){a==="number"&&gr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Sa(s,a,l,u){if(s=s.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<s.length;l++)f=a.hasOwnProperty("$"+s[l].value),s[l].selected!==f&&(s[l].selected=f),f&&u&&(s[l].defaultSelected=!0)}else{for(l=""+Sn(l),a=null,f=0;f<s.length;f++){if(s[f].value===l){s[f].selected=!0,u&&(s[f].defaultSelected=!0);return}a!==null||s[f].disabled||(a=s[f])}a!==null&&(a.selected=!0)}}function Uu(s,a,l){if(a!=null&&(a=""+Sn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Sn(l):""}function Na(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(r(92));if(be(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=Sn(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u),pt(s)}function ss(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bo(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||zu.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Ho(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&l[f]!==u&&Bo(s,f,u)}else for(var g in a)a.hasOwnProperty(g)&&Bo(s,g,a[g])}function Sl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ta=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nl(s){return Ta.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function qs(){}var qo=null;function Rs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ea=null,xr=null;function Ai(s){var a=Cs(s);if(a&&(s=a.stateNode)){var l=s[_n]||null;e:switch(s=a.stateNode,a.type){case"input":if(_l(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ns(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var f=u[_n]||null;if(!f)throw Error(r(90));_l(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&Ei(u)}break e;case"textarea":Uu(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Sa(s,!!l.multiple,a,!1)}}}var Tl=!1;function wa(s,a,l){if(Tl)return s(a,l);Tl=!0;try{var u=s(a);return u}finally{if(Tl=!1,(Ea!==null||xr!==null)&&(Md(),Ea&&(a=Ea,s=xr,xr=Ea=null,Ai(a),s)))for(a=0;a<s.length;a++)Ai(s[a])}}function $s(s,a){var l=s.stateNode;if(l===null)return null;var u=l[_n]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(js)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{Ci=!1}var yr=null,$o=null,Ri=null;function Go(){if(Ri)return Ri;var s,a=$o,l=a.length,u,f="value"in yr?yr.value:yr.textContent,g=f.length;for(s=0;s<l&&a[s]===f[s];s++);var _=l-s;for(u=1;u<=_&&a[l-u]===f[g-u];u++);return Ri=f.slice(s,1<u?1-u:void 0)}function ji(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function qr(){return!0}function Gs(){return!1}function Rn(s){function a(l,u,f,g,_){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?qr:Gs,this.isPropagationStopped=Gs,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),a}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},br=Rn($r),Aa=v({},$r,{view:0,detail:0}),Ko=Rn(Aa),Ca,El,vr,wl=v({},Aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ra,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vr&&(vr&&s.type==="mousemove"?(Ca=s.screenX-vr.screenX,El=s.screenY-vr.screenY):El=Ca=0,vr=s),Ca)},movementY:function(s){return"movementY"in s?s.movementY:El}}),Yo=Rn(wl),ki=v({},wl,{dataTransfer:0}),Bu=Rn(ki),Hu=v({},Aa,{relatedTarget:0}),Ii=Rn(Hu),Qo=v({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=Rn(Qo),Al=v({},$r,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),$u=Rn(Al),Gu=v({},$r,{data:0}),_r=Rn(Gu),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Qu[s])?!!a[s]:!1}function Ra(){return Xu}var Xn=v({},Aa,{key:function(s){if(s.key){var a=Ku[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ji(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Yu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ra,charCode:function(s){return s.type==="keypress"?ji(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ji(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wu=Rn(Xn),Ju=v({},wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gr=Rn(Ju),h=v({},Aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ra}),b=Rn(h),N=v({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),M=Rn(N),ee=v({},wl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=Rn(ee),ve=v({},$r,{newState:0,oldState:0}),Be=Rn(ve),Yt=[9,13,27,32],lt=js&&"CompositionEvent"in window,Mt=null;js&&"documentMode"in document&&(Mt=document.documentMode);var ks=js&&"TextEvent"in window&&!Mt,Sr=js&&(!lt||Mt&&8<Mt&&11>=Mt),Ks=" ",Ys=!1;function Di(s,a){switch(s){case"keyup":return Yt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Rl=!1;function mw(s,a){switch(s){case"compositionend":return Cl(a);case"keypress":return a.which!==32?null:(Ys=!0,Ks);case"textInput":return s=a.data,s===Ks&&Ys?null:s;default:return null}}function pw(s,a){if(Rl)return s==="compositionend"||!lt&&Di(s,a)?(s=Go(),Ri=$o=yr=null,Rl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Sr&&a.locale!=="ko"?null:a.data;default:return null}}var gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!gw[s.type]:a==="textarea"}function Ty(s,a,l,u){Ea?xr?xr.push(u):xr=[u]:Ea=u,a=Fd(a,"onChange"),0<a.length&&(l=new br("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var Xo=null,Wo=null;function xw(s){i0(s,0)}function Zu(s){var a=ps(s);if(Ei(a))return s}function Ey(s,a){if(s==="change")return a}var wy=!1;if(js){var Kf;if(js){var Yf="oninput"in document;if(!Yf){var Ay=document.createElement("div");Ay.setAttribute("oninput","return;"),Yf=typeof Ay.oninput=="function"}Kf=Yf}else Kf=!1;wy=Kf&&(!document.documentMode||9<document.documentMode)}function Cy(){Xo&&(Xo.detachEvent("onpropertychange",Ry),Wo=Xo=null)}function Ry(s){if(s.propertyName==="value"&&Zu(Wo)){var a=[];Ty(a,Wo,s,Rs(s)),wa(xw,a)}}function yw(s,a,l){s==="focusin"?(Cy(),Xo=a,Wo=l,Xo.attachEvent("onpropertychange",Ry)):s==="focusout"&&Cy()}function bw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zu(Wo)}function vw(s,a){if(s==="click")return Zu(a)}function _w(s,a){if(s==="input"||s==="change")return Zu(a)}function Sw(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var xs=typeof Object.is=="function"?Object.is:Sw;function Jo(s,a){if(xs(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!Ge.call(a,f)||!xs(s[f],a[f]))return!1}return!0}function jy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ky(s,a){var l=jy(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=jy(l)}}function Iy(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Iy(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Dy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=gr(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=gr(s.document)}return a}function Qf(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Nw=js&&"documentMode"in document&&11>=document.documentMode,jl=null,Xf=null,Zo=null,Wf=!1;function My(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wf||jl==null||jl!==gr(u)||(u=jl,"selectionStart"in u&&Qf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Zo&&Jo(Zo,u)||(Zo=u,u=Fd(Xf,"onSelect"),0<u.length&&(a=new br("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=jl)))}function Mi(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var kl={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionrun:Mi("Transition","TransitionRun"),transitionstart:Mi("Transition","TransitionStart"),transitioncancel:Mi("Transition","TransitionCancel"),transitionend:Mi("Transition","TransitionEnd")},Jf={},Py={};js&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function Pi(s){if(Jf[s])return Jf[s];if(!kl[s])return s;var a=kl[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in Py)return Jf[s]=a[l];return s}var Oy=Pi("animationend"),Ly=Pi("animationiteration"),Vy=Pi("animationstart"),Tw=Pi("transitionrun"),Ew=Pi("transitionstart"),ww=Pi("transitioncancel"),Uy=Pi("transitionend"),zy=new Map,Zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zf.push("scrollEnd");function Qs(s,a){zy.set(s,a),mr(a,[s])}var ed=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Is=[],Il=0,em=0;function td(){for(var s=Il,a=em=Il=0;a<s;){var l=Is[a];Is[a++]=null;var u=Is[a];Is[a++]=null;var f=Is[a];Is[a++]=null;var g=Is[a];if(Is[a++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}g!==0&&Fy(l,f,g)}}function nd(s,a,l,u){Is[Il++]=s,Is[Il++]=a,Is[Il++]=l,Is[Il++]=u,em|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function tm(s,a,l,u){return nd(s,a,l,u),sd(s)}function Oi(s,a){return nd(s,null,null,a),sd(s)}function Fy(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var f=!1,g=s.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(f=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,f&&a!==null&&(f=31-Nt(l),s=g.hiddenUpdates,u=s[f],u===null?s[f]=[a]:u.push(a),a.lane=l|536870912),g):null}function sd(s){if(50<_c)throw _c=0,up=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Dl={};function Aw(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(s,a,l,u){return new Aw(s,a,l,u)}function nm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Kr(s,a){var l=s.alternate;return l===null?(l=ys(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function By(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function rd(s,a,l,u,f,g){var _=0;if(u=s,typeof s=="function")nm(s)&&(_=1);else if(typeof s=="string")_=I2(s,l,ye.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case C:return s=ys(31,l,a,f),s.elementType=C,s.lanes=g,s;case O:return Li(l.children,f,g,a);case k:_=8,f|=24;break;case z:return s=ys(12,l,a,f|2),s.elementType=z,s.lanes=g,s;case K:return s=ys(13,l,a,f),s.elementType=K,s.lanes=g,s;case re:return s=ys(19,l,a,f),s.elementType=re,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:_=10;break e;case U:_=9;break e;case X:_=11;break e;case j:_=14;break e;case S:_=16,u=null;break e}_=29,l=Error(r(130,s===null?"null":typeof s,"")),u=null}return a=ys(_,l,a,f),a.elementType=s,a.type=u,a.lanes=g,a}function Li(s,a,l,u){return s=ys(7,s,u,a),s.lanes=l,s}function sm(s,a,l){return s=ys(6,s,null,a),s.lanes=l,s}function Hy(s){var a=ys(18,null,null,0);return a.stateNode=s,a}function rm(s,a,l){return a=ys(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var qy=new WeakMap;function Ds(s,a){if(typeof s=="object"&&s!==null){var l=qy.get(s);return l!==void 0?l:(a={value:s,source:a,stack:wn(a)},qy.set(s,a),a)}return{value:s,source:a,stack:wn(a)}}var Ml=[],Pl=0,ad=null,ec=0,Ms=[],Ps=0,ja=null,Nr=1,Tr="";function Yr(s,a){Ml[Pl++]=ec,Ml[Pl++]=ad,ad=s,ec=a}function $y(s,a,l){Ms[Ps++]=Nr,Ms[Ps++]=Tr,Ms[Ps++]=ja,ja=s;var u=Nr;s=Tr;var f=32-Nt(u)-1;u&=~(1<<f),l+=1;var g=32-Nt(a)+f;if(30<g){var _=f-f%5;g=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Nr=1<<32-Nt(a)+f|l<<f|u,Tr=g+s}else Nr=1<<g|l<<f|u,Tr=s}function am(s){s.return!==null&&(Yr(s,1),$y(s,1,0))}function im(s){for(;s===ad;)ad=Ml[--Pl],Ml[Pl]=null,ec=Ml[--Pl],Ml[Pl]=null;for(;s===ja;)ja=Ms[--Ps],Ms[Ps]=null,Tr=Ms[--Ps],Ms[Ps]=null,Nr=Ms[--Ps],Ms[Ps]=null}function Gy(s,a){Ms[Ps++]=Nr,Ms[Ps++]=Tr,Ms[Ps++]=ja,Nr=a.id,Tr=a.overflow,ja=s}var jn=null,kt=null,et=!1,ka=null,Os=!1,lm=Error(r(519));function Ia(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tc(Ds(a,s)),lm}function Ky(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[en]=s,a[_n]=u,l){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(l=0;l<Nc.length;l++)Ye(Nc[l],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Ye("invalid",a),Vu(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ye("invalid",a);break;case"textarea":Ye("invalid",a),Na(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||u0(a.textContent,l)?(u.popover!=null&&(Ye("beforetoggle",a),Ye("toggle",a)),u.onScroll!=null&&Ye("scroll",a),u.onScrollEnd!=null&&Ye("scrollend",a),u.onClick!=null&&(a.onclick=qs),a=!0):a=!1,a||Ia(s,!0)}function Yy(s){for(jn=s.return;jn;)switch(jn.tag){case 5:case 31:case 13:Os=!1;return;case 27:case 3:Os=!0;return;default:jn=jn.return}}function Ol(s){if(s!==jn)return!1;if(!et)return Yy(s),et=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Ep(s.type,s.memoizedProps)),l=!l),l&&kt&&Ia(s),Yy(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kt=b0(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kt=b0(s)}else a===27?(a=kt,Ga(s.type)?(s=jp,jp=null,kt=s):kt=a):kt=jn?Vs(s.stateNode.nextSibling):null;return!0}function Vi(){kt=jn=null,et=!1}function om(){var s=ka;return s!==null&&(ls===null?ls=s:ls.push.apply(ls,s),ka=null),s}function tc(s){ka===null?ka=[s]:ka.push(s)}var cm=V(null),Ui=null,Qr=null;function Da(s,a,l){fe(cm,a._currentValue),a._currentValue=l}function Xr(s){s._currentValue=cm.current,Q(cm)}function um(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function dm(s,a,l,u){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var g=f.dependencies;if(g!==null){var _=f.child;g=g.firstContext;e:for(;g!==null;){var R=g;g=f;for(var F=0;F<a.length;F++)if(R.context===a[F]){g.lanes|=l,R=g.alternate,R!==null&&(R.lanes|=l),um(g.return,l,s),u||(_=null);break e}g=R.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=l,g=_.alternate,g!==null&&(g.lanes|=l),um(_,l,s),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===s){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ll(s,a,l,u){s=null;for(var f=a,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var R=f.type;xs(f.pendingProps.value,_.value)||(s!==null?s.push(R):s=[R])}}else if(f===ke.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(Cc):s=[Cc])}f=f.return}s!==null&&dm(a,s,l,u),a.flags|=262144}function id(s){for(s=s.firstContext;s!==null;){if(!xs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function zi(s){Ui=s,Qr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function kn(s){return Qy(Ui,s)}function ld(s,a){return Ui===null&&zi(s),Qy(s,a)}function Qy(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Qr===null){if(s===null)throw Error(r(308));Qr=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Qr=Qr.next=a;return l}var Cw=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},Rw=t.unstable_scheduleCallback,jw=t.unstable_NormalPriority,sn={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hm(){return{controller:new Cw,data:new Map,refCount:0}}function nc(s){s.refCount--,s.refCount===0&&Rw(jw,function(){s.controller.abort()})}var sc=null,fm=0,Vl=0,Ul=null;function kw(s,a){if(sc===null){var l=sc=[];fm=0,Vl=gp(),Ul={status:"pending",value:void 0,then:function(u){l.push(u)}}}return fm++,a.then(Xy,Xy),a}function Xy(){if(--fm===0&&sc!==null){Ul!==null&&(Ul.status="fulfilled");var s=sc;sc=null,Vl=0,Ul=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Iw(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),u}var Wy=B.S;B.S=function(s,a){Mv=Zt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&kw(s,a),Wy!==null&&Wy(s,a)};var Fi=V(null);function mm(){var s=Fi.current;return s!==null?s:Et.pooledCache}function od(s,a){a===null?fe(Fi,Fi.current):fe(Fi,a.pool)}function Jy(){var s=mm();return s===null?null:{parent:sn._currentValue,pool:s}}var zl=Error(r(460)),pm=Error(r(474)),cd=Error(r(542)),ud={then:function(){}};function Zy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function eb(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(qs,qs),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,nb(s),s;default:if(typeof a.status=="string")a.then(qs,qs);else{if(s=Et,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,nb(s),s}throw Hi=a,zl}}function Bi(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Hi=l,zl):l}}var Hi=null;function tb(){if(Hi===null)throw Error(r(459));var s=Hi;return Hi=null,s}function nb(s){if(s===zl||s===cd)throw Error(r(483))}var Fl=null,rc=0;function dd(s){var a=rc;return rc+=1,Fl===null&&(Fl=[]),eb(Fl,s,a)}function ac(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function hd(s,a){throw a.$$typeof===T?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function sb(s){function a(W,G){if(s){var te=W.deletions;te===null?(W.deletions=[G],W.flags|=16):te.push(G)}}function l(W,G){if(!s)return null;for(;G!==null;)a(W,G),G=G.sibling;return null}function u(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function f(W,G){return W=Kr(W,G),W.index=0,W.sibling=null,W}function g(W,G,te){return W.index=te,s?(te=W.alternate,te!==null?(te=te.index,te<G?(W.flags|=67108866,G):te):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function _(W){return s&&W.alternate===null&&(W.flags|=67108866),W}function R(W,G,te,ue){return G===null||G.tag!==6?(G=sm(te,W.mode,ue),G.return=W,G):(G=f(G,te),G.return=W,G)}function F(W,G,te,ue){var Ie=te.type;return Ie===O?oe(W,G,te.props.children,ue,te.key):G!==null&&(G.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&Bi(Ie)===G.type)?(G=f(G,te.props),ac(G,te),G.return=W,G):(G=rd(te.type,te.key,te.props,null,W.mode,ue),ac(G,te),G.return=W,G)}function ne(W,G,te,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==te.containerInfo||G.stateNode.implementation!==te.implementation?(G=rm(te,W.mode,ue),G.return=W,G):(G=f(G,te.children||[]),G.return=W,G)}function oe(W,G,te,ue,Ie){return G===null||G.tag!==7?(G=Li(te,W.mode,ue,Ie),G.return=W,G):(G=f(G,te),G.return=W,G)}function de(W,G,te){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=sm(""+G,W.mode,te),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return te=rd(G.type,G.key,G.props,null,W.mode,te),ac(te,G),te.return=W,te;case L:return G=rm(G,W.mode,te),G.return=W,G;case S:return G=Bi(G),de(W,G,te)}if(be(G)||A(G))return G=Li(G,W.mode,te,null),G.return=W,G;if(typeof G.then=="function")return de(W,dd(G),te);if(G.$$typeof===$)return de(W,ld(W,G),te);hd(W,G)}return null}function se(W,G,te,ue){var Ie=G!==null?G.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Ie!==null?null:R(W,G,""+te,ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return te.key===Ie?F(W,G,te,ue):null;case L:return te.key===Ie?ne(W,G,te,ue):null;case S:return te=Bi(te),se(W,G,te,ue)}if(be(te)||A(te))return Ie!==null?null:oe(W,G,te,ue,null);if(typeof te.then=="function")return se(W,G,dd(te),ue);if(te.$$typeof===$)return se(W,G,ld(W,te),ue);hd(W,te)}return null}function ie(W,G,te,ue,Ie){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return W=W.get(te)||null,R(G,W,""+ue,Ie);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case I:return W=W.get(ue.key===null?te:ue.key)||null,F(G,W,ue,Ie);case L:return W=W.get(ue.key===null?te:ue.key)||null,ne(G,W,ue,Ie);case S:return ue=Bi(ue),ie(W,G,te,ue,Ie)}if(be(ue)||A(ue))return W=W.get(te)||null,oe(G,W,ue,Ie,null);if(typeof ue.then=="function")return ie(W,G,te,dd(ue),Ie);if(ue.$$typeof===$)return ie(W,G,te,ld(G,ue),Ie);hd(G,ue)}return null}function Ce(W,G,te,ue){for(var Ie=null,rt=null,je=G,qe=G=0,Xe=null;je!==null&&qe<te.length;qe++){je.index>qe?(Xe=je,je=null):Xe=je.sibling;var at=se(W,je,te[qe],ue);if(at===null){je===null&&(je=Xe);break}s&&je&&at.alternate===null&&a(W,je),G=g(at,G,qe),rt===null?Ie=at:rt.sibling=at,rt=at,je=Xe}if(qe===te.length)return l(W,je),et&&Yr(W,qe),Ie;if(je===null){for(;qe<te.length;qe++)je=de(W,te[qe],ue),je!==null&&(G=g(je,G,qe),rt===null?Ie=je:rt.sibling=je,rt=je);return et&&Yr(W,qe),Ie}for(je=u(je);qe<te.length;qe++)Xe=ie(je,W,qe,te[qe],ue),Xe!==null&&(s&&Xe.alternate!==null&&je.delete(Xe.key===null?qe:Xe.key),G=g(Xe,G,qe),rt===null?Ie=Xe:rt.sibling=Xe,rt=Xe);return s&&je.forEach(function(Wa){return a(W,Wa)}),et&&Yr(W,qe),Ie}function Me(W,G,te,ue){if(te==null)throw Error(r(151));for(var Ie=null,rt=null,je=G,qe=G=0,Xe=null,at=te.next();je!==null&&!at.done;qe++,at=te.next()){je.index>qe?(Xe=je,je=null):Xe=je.sibling;var Wa=se(W,je,at.value,ue);if(Wa===null){je===null&&(je=Xe);break}s&&je&&Wa.alternate===null&&a(W,je),G=g(Wa,G,qe),rt===null?Ie=Wa:rt.sibling=Wa,rt=Wa,je=Xe}if(at.done)return l(W,je),et&&Yr(W,qe),Ie;if(je===null){for(;!at.done;qe++,at=te.next())at=de(W,at.value,ue),at!==null&&(G=g(at,G,qe),rt===null?Ie=at:rt.sibling=at,rt=at);return et&&Yr(W,qe),Ie}for(je=u(je);!at.done;qe++,at=te.next())at=ie(je,W,qe,at.value,ue),at!==null&&(s&&at.alternate!==null&&je.delete(at.key===null?qe:at.key),G=g(at,G,qe),rt===null?Ie=at:rt.sibling=at,rt=at);return s&&je.forEach(function(H2){return a(W,H2)}),et&&Yr(W,qe),Ie}function _t(W,G,te,ue){if(typeof te=="object"&&te!==null&&te.type===O&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case I:e:{for(var Ie=te.key;G!==null;){if(G.key===Ie){if(Ie=te.type,Ie===O){if(G.tag===7){l(W,G.sibling),ue=f(G,te.props.children),ue.return=W,W=ue;break e}}else if(G.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&Bi(Ie)===G.type){l(W,G.sibling),ue=f(G,te.props),ac(ue,te),ue.return=W,W=ue;break e}l(W,G);break}else a(W,G);G=G.sibling}te.type===O?(ue=Li(te.props.children,W.mode,ue,te.key),ue.return=W,W=ue):(ue=rd(te.type,te.key,te.props,null,W.mode,ue),ac(ue,te),ue.return=W,W=ue)}return _(W);case L:e:{for(Ie=te.key;G!==null;){if(G.key===Ie)if(G.tag===4&&G.stateNode.containerInfo===te.containerInfo&&G.stateNode.implementation===te.implementation){l(W,G.sibling),ue=f(G,te.children||[]),ue.return=W,W=ue;break e}else{l(W,G);break}else a(W,G);G=G.sibling}ue=rm(te,W.mode,ue),ue.return=W,W=ue}return _(W);case S:return te=Bi(te),_t(W,G,te,ue)}if(be(te))return Ce(W,G,te,ue);if(A(te)){if(Ie=A(te),typeof Ie!="function")throw Error(r(150));return te=Ie.call(te),Me(W,G,te,ue)}if(typeof te.then=="function")return _t(W,G,dd(te),ue);if(te.$$typeof===$)return _t(W,G,ld(W,te),ue);hd(W,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,G!==null&&G.tag===6?(l(W,G.sibling),ue=f(G,te),ue.return=W,W=ue):(l(W,G),ue=sm(te,W.mode,ue),ue.return=W,W=ue),_(W)):l(W,G)}return function(W,G,te,ue){try{rc=0;var Ie=_t(W,G,te,ue);return Fl=null,Ie}catch(je){if(je===zl||je===cd)throw je;var rt=ys(29,je,null,W.mode);return rt.lanes=ue,rt.return=W,rt}}}var qi=sb(!0),rb=sb(!1),Ma=!1;function gm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xm(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Pa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Oa(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(ot&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=sd(s),Fy(s,null,l),a}return nd(s,u,a,l),sd(s)}function ic(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,vn(s,l)}}function ym(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=_:g=g.next=_,l=l.next}while(l!==null);g===null?f=g=a:g=g.next=a}else f=g=a;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var bm=!1;function lc(){if(bm){var s=Ul;if(s!==null)throw s}}function oc(s,a,l,u){bm=!1;var f=s.updateQueue;Ma=!1;var g=f.firstBaseUpdate,_=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var F=R,ne=F.next;F.next=null,_===null?g=ne:_.next=ne,_=F;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,R=oe.lastBaseUpdate,R!==_&&(R===null?oe.firstBaseUpdate=ne:R.next=ne,oe.lastBaseUpdate=F))}if(g!==null){var de=f.baseState;_=0,oe=ne=F=null,R=g;do{var se=R.lane&-536870913,ie=se!==R.lane;if(ie?(Qe&se)===se:(u&se)===se){se!==0&&se===Vl&&(bm=!0),oe!==null&&(oe=oe.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ce=s,Me=R;se=a;var _t=l;switch(Me.tag){case 1:if(Ce=Me.payload,typeof Ce=="function"){de=Ce.call(_t,de,se);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Me.payload,se=typeof Ce=="function"?Ce.call(_t,de,se):Ce,se==null)break e;de=v({},de,se);break e;case 2:Ma=!0}}se=R.callback,se!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[se]:ie.push(se))}else ie={lane:se,tag:R.tag,payload:R.payload,callback:R.callback,next:null},oe===null?(ne=oe=ie,F=de):oe=oe.next=ie,_|=se;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;ie=R,R=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);oe===null&&(F=de),f.baseState=F,f.firstBaseUpdate=ne,f.lastBaseUpdate=oe,g===null&&(f.shared.lanes=0),Fa|=_,s.lanes=_,s.memoizedState=de}}function ab(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function ib(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)ab(l[s],a)}var Bl=V(null),fd=V(0);function lb(s,a){s=aa,fe(fd,s),fe(Bl,a),aa=s|a.baseLanes}function vm(){fe(fd,aa),fe(Bl,Bl.current)}function _m(){aa=fd.current,Q(Bl),Q(fd)}var bs=V(null),Ls=null;function La(s){var a=s.alternate;fe(Qt,Qt.current&1),fe(bs,s),Ls===null&&(a===null||Bl.current!==null||a.memoizedState!==null)&&(Ls=s)}function Sm(s){fe(Qt,Qt.current),fe(bs,s),Ls===null&&(Ls=s)}function ob(s){s.tag===22?(fe(Qt,Qt.current),fe(bs,s),Ls===null&&(Ls=s)):Va()}function Va(){fe(Qt,Qt.current),fe(bs,bs.current)}function vs(s){Q(bs),Ls===s&&(Ls=null),Q(Qt)}var Qt=V(0);function md(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Cp(l)||Rp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Wr=0,He=null,bt=null,rn=null,pd=!1,Hl=!1,$i=!1,gd=0,cc=0,ql=null,Dw=0;function Bt(){throw Error(r(321))}function Nm(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!xs(s[l],a[l]))return!1;return!0}function Tm(s,a,l,u,f,g){return Wr=g,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=s===null||s.memoizedState===null?$b:Um,$i=!1,g=l(u,f),$i=!1,Hl&&(g=ub(a,l,u,f)),cb(s),g}function cb(s){B.H=hc;var a=bt!==null&&bt.next!==null;if(Wr=0,rn=bt=He=null,pd=!1,cc=0,ql=null,a)throw Error(r(300));s===null||an||(s=s.dependencies,s!==null&&id(s)&&(an=!0))}function ub(s,a,l,u){He=s;var f=0;do{if(Hl&&(ql=null),cc=0,Hl=!1,25<=f)throw Error(r(301));if(f+=1,rn=bt=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=Gb,g=a(l,u)}while(Hl);return g}function Mw(){var s=B.H,a=s.useState()[0];return a=typeof a.then=="function"?uc(a):a,s=s.useState()[0],(bt!==null?bt.memoizedState:null)!==s&&(He.flags|=1024),a}function Em(){var s=gd!==0;return gd=0,s}function wm(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Am(s){if(pd){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}pd=!1}Wr=0,rn=bt=He=null,Hl=!1,cc=gd=0,ql=null}function Wn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=s:rn=rn.next=s,rn}function Xt(){if(bt===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=bt.next;var a=rn===null?He.memoizedState:rn.next;if(a!==null)rn=a,bt=s;else{if(s===null)throw He.alternate===null?Error(r(467)):Error(r(310));bt=s,s={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},rn===null?He.memoizedState=rn=s:rn=rn.next=s}return rn}function xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(s){var a=cc;return cc+=1,ql===null&&(ql=[]),s=eb(ql,s,a),a=He,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?$b:Um),s}function yd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return uc(s);if(s.$$typeof===$)return kn(s)}throw Error(r(438,String(s)))}function Cm(s){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=xd(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=P;return a.index++,l}function Jr(s,a){return typeof a=="function"?a(s):a}function bd(s){var a=Xt();return Rm(a,bt,s)}function Rm(s,a,l){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var f=s.baseQueue,g=u.pending;if(g!==null){if(f!==null){var _=f.next;f.next=g.next,g.next=_}a.baseQueue=f=g,u.pending=null}if(g=s.baseState,f===null)s.memoizedState=g;else{a=f.next;var R=_=null,F=null,ne=a,oe=!1;do{var de=ne.lane&-536870913;if(de!==ne.lane?(Qe&de)===de:(Wr&de)===de){var se=ne.revertLane;if(se===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),de===Vl&&(oe=!0);else if((Wr&se)===se){ne=ne.next,se===Vl&&(oe=!0);continue}else de={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},F===null?(R=F=de,_=g):F=F.next=de,He.lanes|=se,Fa|=se;de=ne.action,$i&&l(g,de),g=ne.hasEagerState?ne.eagerState:l(g,de)}else se={lane:de,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},F===null?(R=F=se,_=g):F=F.next=se,He.lanes|=de,Fa|=de;ne=ne.next}while(ne!==null&&ne!==a);if(F===null?_=g:F.next=R,!xs(g,s.memoizedState)&&(an=!0,oe&&(l=Ul,l!==null)))throw l;s.memoizedState=g,s.baseState=_,s.baseQueue=F,u.lastRenderedState=g}return f===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function jm(s){var a=Xt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var u=l.dispatch,f=l.pending,g=a.memoizedState;if(f!==null){l.pending=null;var _=f=f.next;do g=s(g,_.action),_=_.next;while(_!==f);xs(g,a.memoizedState)||(an=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,u]}function db(s,a,l){var u=He,f=Xt(),g=et;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var _=!xs((bt||f).memoizedState,l);if(_&&(f.memoizedState=l,an=!0),f=f.queue,Dm(mb.bind(null,u,f,s),[s]),f.getSnapshot!==a||_||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,$l(9,{destroy:void 0},fb.bind(null,u,f,l,a),null),Et===null)throw Error(r(349));g||(Wr&127)!==0||hb(u,a,l)}return l}function hb(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=xd(),He.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function fb(s,a,l,u){a.value=l,a.getSnapshot=u,pb(a)&&gb(s)}function mb(s,a,l){return l(function(){pb(a)&&gb(s)})}function pb(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!xs(s,l)}catch{return!0}}function gb(s){var a=Oi(s,2);a!==null&&os(a,s,2)}function km(s){var a=Wn();if(typeof s=="function"){var l=s;if(s=l(),$i){fn(!0);try{l()}finally{fn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:s},a}function xb(s,a,l,u){return s.baseState=l,Rm(s,bt,typeof u=="function"?u:Jr)}function Pw(s,a,l,u,f){if(Sd(s))throw Error(r(485));if(s=a.action,s!==null){var g={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){g.listeners.push(_)}};B.T!==null?l(!0):g.isTransition=!1,u(g),l=a.pending,l===null?(g.next=a.pending=g,yb(a,g)):(g.next=l.next,a.pending=l.next=g)}}function yb(s,a){var l=a.action,u=a.payload,f=s.state;if(a.isTransition){var g=B.T,_={};B.T=_;try{var R=l(f,u),F=B.S;F!==null&&F(_,R),bb(s,a,R)}catch(ne){Im(s,a,ne)}finally{g!==null&&_.types!==null&&(g.types=_.types),B.T=g}}else try{g=l(f,u),bb(s,a,g)}catch(ne){Im(s,a,ne)}}function bb(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){vb(s,a,u)},function(u){return Im(s,a,u)}):vb(s,a,l)}function vb(s,a,l){a.status="fulfilled",a.value=l,_b(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,yb(s,l)))}function Im(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,_b(a),a=a.next;while(a!==u)}s.action=null}function _b(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Sb(s,a){return a}function Nb(s,a){if(et){var l=Et.formState;if(l!==null){e:{var u=He;if(et){if(kt){t:{for(var f=kt,g=Os;f.nodeType!==8;){if(!g){f=null;break t}if(f=Vs(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){kt=Vs(f.nextSibling),u=f.data==="F!";break e}}Ia(u)}u=!1}u&&(a=l[0])}}return l=Wn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sb,lastRenderedState:a},l.queue=u,l=Bb.bind(null,He,u),u.dispatch=l,u=km(!1),g=Vm.bind(null,He,!1,u.queue),u=Wn(),f={state:a,dispatch:null,action:s,pending:null},u.queue=f,l=Pw.bind(null,He,f,g,l),f.dispatch=l,u.memoizedState=s,[a,l,!1]}function Tb(s){var a=Xt();return Eb(a,bt,s)}function Eb(s,a,l){if(a=Rm(s,a,Sb)[0],s=bd(Jr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=uc(a)}catch(_){throw _===zl?cd:_}else u=a;a=Xt();var f=a.queue,g=f.dispatch;return l!==a.memoizedState&&(He.flags|=2048,$l(9,{destroy:void 0},Ow.bind(null,f,l),null)),[u,g,s]}function Ow(s,a){s.action=a}function wb(s){var a=Xt(),l=bt;if(l!==null)return Eb(a,l,s);Xt(),a=a.memoizedState,l=Xt();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function $l(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=He.updateQueue,a===null&&(a=xd(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function Ab(){return Xt().memoizedState}function vd(s,a,l,u){var f=Wn();He.flags|=s,f.memoizedState=$l(1|a,{destroy:void 0},l,u===void 0?null:u)}function _d(s,a,l,u){var f=Xt();u=u===void 0?null:u;var g=f.memoizedState.inst;bt!==null&&u!==null&&Nm(u,bt.memoizedState.deps)?f.memoizedState=$l(a,g,l,u):(He.flags|=s,f.memoizedState=$l(1|a,g,l,u))}function Cb(s,a){vd(8390656,8,s,a)}function Dm(s,a){_d(2048,8,s,a)}function Lw(s){He.flags|=4;var a=He.updateQueue;if(a===null)a=xd(),He.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function Rb(s){var a=Xt().memoizedState;return Lw({ref:a,nextImpl:s}),function(){if((ot&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function jb(s,a){return _d(4,2,s,a)}function kb(s,a){return _d(4,4,s,a)}function Ib(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Db(s,a,l){l=l!=null?l.concat([s]):null,_d(4,4,Ib.bind(null,a,s),l)}function Mm(){}function Mb(s,a){var l=Xt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Nm(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function Pb(s,a){var l=Xt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Nm(a,u[1]))return u[0];if(u=s(),$i){fn(!0);try{s()}finally{fn(!1)}}return l.memoizedState=[u,a],u}function Pm(s,a,l){return l===void 0||(Wr&1073741824)!==0&&(Qe&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=Ov(),He.lanes|=s,Fa|=s,l)}function Ob(s,a,l,u){return xs(l,a)?l:Bl.current!==null?(s=Pm(s,l,u),xs(s,a)||(an=!0),s):(Wr&42)===0||(Wr&1073741824)!==0&&(Qe&261930)===0?(an=!0,s.memoizedState=l):(s=Ov(),He.lanes|=s,Fa|=s,a)}function Lb(s,a,l,u,f){var g=ce.p;ce.p=g!==0&&8>g?g:8;var _=B.T,R={};B.T=R,Vm(s,!1,a,l);try{var F=f(),ne=B.S;if(ne!==null&&ne(R,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var oe=Iw(F,u);dc(s,a,oe,Ns(s))}else dc(s,a,u,Ns(s))}catch(de){dc(s,a,{then:function(){},status:"rejected",reason:de},Ns())}finally{ce.p=g,_!==null&&R.types!==null&&(_.types=R.types),B.T=_}}function Vw(){}function Om(s,a,l,u){if(s.tag!==5)throw Error(r(476));var f=Vb(s).queue;Lb(s,f,a,le,l===null?Vw:function(){return Ub(s),l(u)})}function Vb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:le},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Ub(s){var a=Vb(s);a.next===null&&(a=s.alternate.memoizedState),dc(s,a.next.queue,{},Ns())}function Lm(){return kn(Cc)}function zb(){return Xt().memoizedState}function Fb(){return Xt().memoizedState}function Uw(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Ns();s=Pa(l);var u=Oa(a,s,l);u!==null&&(os(u,a,l),ic(u,a,l)),a={cache:hm()},s.payload=a;return}a=a.return}}function zw(s,a,l){var u=Ns();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Sd(s)?Hb(a,l):(l=tm(s,a,l,u),l!==null&&(os(l,s,u),qb(l,a,u)))}function Bb(s,a,l){var u=Ns();dc(s,a,l,u)}function dc(s,a,l,u){var f={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sd(s))Hb(a,f);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var _=a.lastRenderedState,R=g(_,l);if(f.hasEagerState=!0,f.eagerState=R,xs(R,_))return nd(s,a,f,0),Et===null&&td(),!1}catch{}if(l=tm(s,a,f,u),l!==null)return os(l,s,u),qb(l,a,u),!0}return!1}function Vm(s,a,l,u){if(u={lane:2,revertLane:gp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sd(s)){if(a)throw Error(r(479))}else a=tm(s,l,u,2),a!==null&&os(a,s,2)}function Sd(s){var a=s.alternate;return s===He||a!==null&&a===He}function Hb(s,a){Hl=pd=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function qb(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,vn(s,l)}}var hc={readContext:kn,use:yd,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};hc.useEffectEvent=Bt;var $b={readContext:kn,use:yd,useCallback:function(s,a){return Wn().memoizedState=[s,a===void 0?null:a],s},useContext:kn,useEffect:Cb,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,vd(4194308,4,Ib.bind(null,a,s),l)},useLayoutEffect:function(s,a){return vd(4194308,4,s,a)},useInsertionEffect:function(s,a){vd(4,2,s,a)},useMemo:function(s,a){var l=Wn();a=a===void 0?null:a;var u=s();if($i){fn(!0);try{s()}finally{fn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=Wn();if(l!==void 0){var f=l(a);if($i){fn(!0);try{l(a)}finally{fn(!1)}}}else f=a;return u.memoizedState=u.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},u.queue=s,s=s.dispatch=zw.bind(null,He,s),[u.memoizedState,s]},useRef:function(s){var a=Wn();return s={current:s},a.memoizedState=s},useState:function(s){s=km(s);var a=s.queue,l=Bb.bind(null,He,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Mm,useDeferredValue:function(s,a){var l=Wn();return Pm(l,s,a)},useTransition:function(){var s=km(!1);return s=Lb.bind(null,He,s.queue,!0,!1),Wn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=He,f=Wn();if(et){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Et===null)throw Error(r(349));(Qe&127)!==0||hb(u,a,l)}f.memoizedState=l;var g={value:l,getSnapshot:a};return f.queue=g,Cb(mb.bind(null,u,g,s),[s]),u.flags|=2048,$l(9,{destroy:void 0},fb.bind(null,u,g,l,a),null),l},useId:function(){var s=Wn(),a=Et.identifierPrefix;if(et){var l=Tr,u=Nr;l=(u&~(1<<32-Nt(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=gd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Dw++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Lm,useFormState:Nb,useActionState:Nb,useOptimistic:function(s){var a=Wn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Vm.bind(null,He,!0,l),l.dispatch=a,[s,a]},useMemoCache:Cm,useCacheRefresh:function(){return Wn().memoizedState=Uw.bind(null,He)},useEffectEvent:function(s){var a=Wn(),l={impl:s};return a.memoizedState=l,function(){if((ot&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Um={readContext:kn,use:yd,useCallback:Mb,useContext:kn,useEffect:Dm,useImperativeHandle:Db,useInsertionEffect:jb,useLayoutEffect:kb,useMemo:Pb,useReducer:bd,useRef:Ab,useState:function(){return bd(Jr)},useDebugValue:Mm,useDeferredValue:function(s,a){var l=Xt();return Ob(l,bt.memoizedState,s,a)},useTransition:function(){var s=bd(Jr)[0],a=Xt().memoizedState;return[typeof s=="boolean"?s:uc(s),a]},useSyncExternalStore:db,useId:zb,useHostTransitionStatus:Lm,useFormState:Tb,useActionState:Tb,useOptimistic:function(s,a){var l=Xt();return xb(l,bt,s,a)},useMemoCache:Cm,useCacheRefresh:Fb};Um.useEffectEvent=Rb;var Gb={readContext:kn,use:yd,useCallback:Mb,useContext:kn,useEffect:Dm,useImperativeHandle:Db,useInsertionEffect:jb,useLayoutEffect:kb,useMemo:Pb,useReducer:jm,useRef:Ab,useState:function(){return jm(Jr)},useDebugValue:Mm,useDeferredValue:function(s,a){var l=Xt();return bt===null?Pm(l,s,a):Ob(l,bt.memoizedState,s,a)},useTransition:function(){var s=jm(Jr)[0],a=Xt().memoizedState;return[typeof s=="boolean"?s:uc(s),a]},useSyncExternalStore:db,useId:zb,useHostTransitionStatus:Lm,useFormState:wb,useActionState:wb,useOptimistic:function(s,a){var l=Xt();return bt!==null?xb(l,bt,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Cm,useCacheRefresh:Fb};Gb.useEffectEvent=Rb;function zm(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:v({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Fm={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=Ns(),f=Pa(u);f.payload=a,l!=null&&(f.callback=l),a=Oa(s,f,u),a!==null&&(os(a,s,u),ic(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=Ns(),f=Pa(u);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Oa(s,f,u),a!==null&&(os(a,s,u),ic(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Ns(),u=Pa(l);u.tag=2,a!=null&&(u.callback=a),a=Oa(s,u,l),a!==null&&(os(a,s,l),ic(a,s,l))}};function Kb(s,a,l,u,f,g,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,g,_):a.prototype&&a.prototype.isPureReactComponent?!Jo(l,u)||!Jo(f,g):!0}function Yb(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&Fm.enqueueReplaceState(a,a.state,null)}function Gi(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=v({},l));for(var f in s)l[f]===void 0&&(l[f]=s[f])}return l}function Qb(s){ed(s)}function Xb(s){console.error(s)}function Wb(s){ed(s)}function Nd(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Jb(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Bm(s,a,l){return l=Pa(l),l.tag=3,l.payload={element:null},l.callback=function(){Nd(s,a)},l}function Zb(s){return s=Pa(s),s.tag=3,s}function ev(s,a,l,u){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;s.payload=function(){return f(g)},s.callback=function(){Jb(a,l,u)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){Jb(a,l,u),typeof f!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function Fw(s,a,l,u,f){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Ll(a,l,f,!0),l=bs.current,l!==null){switch(l.tag){case 31:case 13:return Ls===null?Pd():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=f,u===ud?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),fp(s,u,f)),!1;case 22:return l.flags|=65536,u===ud?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),fp(s,u,f)),!1}throw Error(r(435,l.tag))}return fp(s,u,f),Pd(),!1}if(et)return a=bs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==lm&&(s=Error(r(422),{cause:u}),tc(Ds(s,l)))):(u!==lm&&(a=Error(r(423),{cause:u}),tc(Ds(a,l))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,u=Ds(u,l),f=Bm(s.stateNode,u,f),ym(s,f),Ht!==4&&(Ht=2)),!1;var g=Error(r(520),{cause:u});if(g=Ds(g,l),vc===null?vc=[g]:vc.push(g),Ht!==4&&(Ht=2),a===null)return!0;u=Ds(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=f&-f,l.lanes|=s,s=Bm(l.stateNode,u,s),ym(l,s),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ba===null||!Ba.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Zb(f),ev(f,s,l,u),ym(l,f),!1}l=l.return}while(l!==null);return!1}var Hm=Error(r(461)),an=!1;function In(s,a,l,u){a.child=s===null?rb(a,null,l,u):qi(a,s.child,l,u)}function tv(s,a,l,u,f){l=l.render;var g=a.ref;if("ref"in u){var _={};for(var R in u)R!=="ref"&&(_[R]=u[R])}else _=u;return zi(a),u=Tm(s,a,l,_,g,f),R=Em(),s!==null&&!an?(wm(s,a,f),Zr(s,a,f)):(et&&R&&am(a),a.flags|=1,In(s,a,u,f),a.child)}function nv(s,a,l,u,f){if(s===null){var g=l.type;return typeof g=="function"&&!nm(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,sv(s,a,g,u,f)):(s=rd(l.type,null,u,a,a.mode,f),s.ref=a.ref,s.return=a,a.child=s)}if(g=s.child,!Wm(s,f)){var _=g.memoizedProps;if(l=l.compare,l=l!==null?l:Jo,l(_,u)&&s.ref===a.ref)return Zr(s,a,f)}return a.flags|=1,s=Kr(g,u),s.ref=a.ref,s.return=a,a.child=s}function sv(s,a,l,u,f){if(s!==null){var g=s.memoizedProps;if(Jo(g,u)&&s.ref===a.ref)if(an=!1,a.pendingProps=u=g,Wm(s,f))(s.flags&131072)!==0&&(an=!0);else return a.lanes=s.lanes,Zr(s,a,f)}return qm(s,a,l,u,f)}function rv(s,a,l,u){var f=u.children,g=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,s!==null){for(u=a.child=s.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~g}else u=0,a.child=null;return av(s,a,g,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&od(a,g!==null?g.cachePool:null),g!==null?lb(a,g):vm(),ob(a);else return u=a.lanes=536870912,av(s,a,g!==null?g.baseLanes|l:l,l,u)}else g!==null?(od(a,g.cachePool),lb(a,g),Va(),a.memoizedState=null):(s!==null&&od(a,null),vm(),Va());return In(s,a,f,l),a.child}function fc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function av(s,a,l,u,f){var g=mm();return g=g===null?null:{parent:sn._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},s!==null&&od(a,null),vm(),ob(a),s!==null&&Ll(s,a,u,!0),a.childLanes=f,null}function Td(s,a){return a=wd({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function iv(s,a,l){return qi(a,s.child,null,l),s=Td(a,a.pendingProps),s.flags|=2,vs(a),a.memoizedState=null,s}function Bw(s,a,l){var u=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(et){if(u.mode==="hidden")return s=Td(a,u),a.lanes=536870912,fc(null,s);if(Sm(a),(s=kt)?(s=y0(s,Os),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:ja!==null?{id:Nr,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},l=Hy(s),l.return=a,a.child=l,jn=a,kt=null)):s=null,s===null)throw Ia(a);return a.lanes=536870912,null}return Td(a,u)}var g=s.memoizedState;if(g!==null){var _=g.dehydrated;if(Sm(a),f)if(a.flags&256)a.flags&=-257,a=iv(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(an||Ll(s,a,l,!1),f=(l&s.childLanes)!==0,an||f){if(u=Et,u!==null&&(_=Kn(u,l),_!==0&&_!==g.retryLane))throw g.retryLane=_,Oi(s,_),os(u,s,_),Hm;Pd(),a=iv(s,a,l)}else s=g.treeContext,kt=Vs(_.nextSibling),jn=a,et=!0,ka=null,Os=!1,s!==null&&Gy(a,s),a=Td(a,u),a.flags|=4096;return a}return s=Kr(s.child,{mode:u.mode,children:u.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Ed(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function qm(s,a,l,u,f){return zi(a),l=Tm(s,a,l,u,void 0,f),u=Em(),s!==null&&!an?(wm(s,a,f),Zr(s,a,f)):(et&&u&&am(a),a.flags|=1,In(s,a,l,f),a.child)}function lv(s,a,l,u,f,g){return zi(a),a.updateQueue=null,l=ub(a,u,l,f),cb(s),u=Em(),s!==null&&!an?(wm(s,a,g),Zr(s,a,g)):(et&&u&&am(a),a.flags|=1,In(s,a,l,g),a.child)}function ov(s,a,l,u,f){if(zi(a),a.stateNode===null){var g=Dl,_=l.contextType;typeof _=="object"&&_!==null&&(g=kn(_)),g=new l(u,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Fm,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=u,g.state=a.memoizedState,g.refs={},gm(a),_=l.contextType,g.context=typeof _=="object"&&_!==null?kn(_):Dl,g.state=a.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(zm(a,l,_,u),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(_=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),_!==g.state&&Fm.enqueueReplaceState(g,g.state,null),oc(a,u,g,f),lc(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){g=a.stateNode;var R=a.memoizedProps,F=Gi(l,R);g.props=F;var ne=g.context,oe=l.contextType;_=Dl,typeof oe=="object"&&oe!==null&&(_=kn(oe));var de=l.getDerivedStateFromProps;oe=typeof de=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||ne!==_)&&Yb(a,g,u,_),Ma=!1;var se=a.memoizedState;g.state=se,oc(a,u,g,f),lc(),ne=a.memoizedState,R||se!==ne||Ma?(typeof de=="function"&&(zm(a,l,de,u),ne=a.memoizedState),(F=Ma||Kb(a,l,F,u,se,ne,_))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=ne),g.props=u,g.state=ne,g.context=_,u=F):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{g=a.stateNode,xm(s,a),_=a.memoizedProps,oe=Gi(l,_),g.props=oe,de=a.pendingProps,se=g.context,ne=l.contextType,F=Dl,typeof ne=="object"&&ne!==null&&(F=kn(ne)),R=l.getDerivedStateFromProps,(ne=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==de||se!==F)&&Yb(a,g,u,F),Ma=!1,se=a.memoizedState,g.state=se,oc(a,u,g,f),lc();var ie=a.memoizedState;_!==de||se!==ie||Ma||s!==null&&s.dependencies!==null&&id(s.dependencies)?(typeof R=="function"&&(zm(a,l,R,u),ie=a.memoizedState),(oe=Ma||Kb(a,l,oe,u,se,ie,F)||s!==null&&s.dependencies!==null&&id(s.dependencies))?(ne||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ie,F),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ie,F)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ie),g.props=u,g.state=ie,g.context=F,u=oe):(typeof g.componentDidUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),u=!1)}return g=u,Ed(s,a),u=(a.flags&128)!==0,g||u?(g=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,s!==null&&u?(a.child=qi(a,s.child,null,f),a.child=qi(a,null,l,f)):In(s,a,l,f),a.memoizedState=g.state,s=a.child):s=Zr(s,a,f),s}function cv(s,a,l,u){return Vi(),a.flags|=256,In(s,a,l,u),a.child}var $m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gm(s){return{baseLanes:s,cachePool:Jy()}}function Km(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Ss),s}function uv(s,a,l){var u=a.pendingProps,f=!1,g=(a.flags&128)!==0,_;if((_=g)||(_=s!==null&&s.memoizedState===null?!1:(Qt.current&2)!==0),_&&(f=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,s===null){if(et){if(f?La(a):Va(),(s=kt)?(s=y0(s,Os),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:ja!==null?{id:Nr,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},l=Hy(s),l.return=a,a.child=l,jn=a,kt=null)):s=null,s===null)throw Ia(a);return Rp(s)?a.lanes=32:a.lanes=536870912,null}var R=u.children;return u=u.fallback,f?(Va(),f=a.mode,R=wd({mode:"hidden",children:R},f),u=Li(u,f,l,null),R.return=a,u.return=a,R.sibling=u,a.child=R,u=a.child,u.memoizedState=Gm(l),u.childLanes=Km(s,_,l),a.memoizedState=$m,fc(null,u)):(La(a),Ym(a,R))}var F=s.memoizedState;if(F!==null&&(R=F.dehydrated,R!==null)){if(g)a.flags&256?(La(a),a.flags&=-257,a=Qm(s,a,l)):a.memoizedState!==null?(Va(),a.child=s.child,a.flags|=128,a=null):(Va(),R=u.fallback,f=a.mode,u=wd({mode:"visible",children:u.children},f),R=Li(R,f,l,null),R.flags|=2,u.return=a,R.return=a,u.sibling=R,a.child=u,qi(a,s.child,null,l),u=a.child,u.memoizedState=Gm(l),u.childLanes=Km(s,_,l),a.memoizedState=$m,a=fc(null,u));else if(La(a),Rp(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var ne=_.dgst;_=ne,u=Error(r(419)),u.stack="",u.digest=_,tc({value:u,source:null,stack:null}),a=Qm(s,a,l)}else if(an||Ll(s,a,l,!1),_=(l&s.childLanes)!==0,an||_){if(_=Et,_!==null&&(u=Kn(_,l),u!==0&&u!==F.retryLane))throw F.retryLane=u,Oi(s,u),os(_,s,u),Hm;Cp(R)||Pd(),a=Qm(s,a,l)}else Cp(R)?(a.flags|=192,a.child=s.child,a=null):(s=F.treeContext,kt=Vs(R.nextSibling),jn=a,et=!0,ka=null,Os=!1,s!==null&&Gy(a,s),a=Ym(a,u.children),a.flags|=4096);return a}return f?(Va(),R=u.fallback,f=a.mode,F=s.child,ne=F.sibling,u=Kr(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,ne!==null?R=Kr(ne,R):(R=Li(R,f,l,null),R.flags|=2),R.return=a,u.return=a,u.sibling=R,a.child=u,fc(null,u),u=a.child,R=s.child.memoizedState,R===null?R=Gm(l):(f=R.cachePool,f!==null?(F=sn._currentValue,f=f.parent!==F?{parent:F,pool:F}:f):f=Jy(),R={baseLanes:R.baseLanes|l,cachePool:f}),u.memoizedState=R,u.childLanes=Km(s,_,l),a.memoizedState=$m,fc(s.child,u)):(La(a),l=s.child,s=l.sibling,l=Kr(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(_=a.deletions,_===null?(a.deletions=[s],a.flags|=16):_.push(s)),a.child=l,a.memoizedState=null,l)}function Ym(s,a){return a=wd({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function wd(s,a){return s=ys(22,s,null,a),s.lanes=0,s}function Qm(s,a,l){return qi(a,s.child,null,l),s=Ym(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function dv(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),um(s.return,a,l)}function Xm(s,a,l,u,f,g){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f,treeForkCount:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=l,_.tailMode=f,_.treeForkCount=g)}function hv(s,a,l){var u=a.pendingProps,f=u.revealOrder,g=u.tail;u=u.children;var _=Qt.current,R=(_&2)!==0;if(R?(_=_&1|2,a.flags|=128):_&=1,fe(Qt,_),In(s,a,u,l),u=et?ec:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&dv(s,l,a);else if(s.tag===19)dv(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)s=l.alternate,s!==null&&md(s)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),Xm(a,!1,f,l,g,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(s=f.alternate,s!==null&&md(s)===null){a.child=f;break}s=f.sibling,f.sibling=l,l=f,f=s}Xm(a,!0,l,null,g,u);break;case"together":Xm(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Zr(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Fa|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Ll(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=Kr(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Kr(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Wm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&id(s)))}function Hw(s,a,l){switch(a.tag){case 3:J(a,a.stateNode.containerInfo),Da(a,sn,s.memoizedState.cache),Vi();break;case 27:case 5:xe(a);break;case 4:J(a,a.stateNode.containerInfo);break;case 10:Da(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Sm(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(La(a),a.flags|=128,null):(l&a.child.childLanes)!==0?uv(s,a,l):(La(a),s=Zr(s,a,l),s!==null?s.sibling:null);La(a);break;case 19:var f=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Ll(s,a,l,!1),u=(l&a.childLanes)!==0),f){if(u)return hv(s,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),fe(Qt,Qt.current),u)break;return null;case 22:return a.lanes=0,rv(s,a,l,a.pendingProps);case 24:Da(a,sn,s.memoizedState.cache)}return Zr(s,a,l)}function fv(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)an=!0;else{if(!Wm(s,l)&&(a.flags&128)===0)return an=!1,Hw(s,a,l);an=(s.flags&131072)!==0}else an=!1,et&&(a.flags&1048576)!==0&&$y(a,ec,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(s=Bi(a.elementType),a.type=s,typeof s=="function")nm(s)?(u=Gi(s,u),a.tag=1,a=ov(null,a,s,u,l)):(a.tag=0,a=qm(null,a,s,u,l));else{if(s!=null){var f=s.$$typeof;if(f===X){a.tag=11,a=tv(null,a,s,u,l);break e}else if(f===j){a.tag=14,a=nv(null,a,s,u,l);break e}}throw a=q(s)||s,Error(r(306,a,""))}}return a;case 0:return qm(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,f=Gi(u,a.pendingProps),ov(s,a,u,f,l);case 3:e:{if(J(a,a.stateNode.containerInfo),s===null)throw Error(r(387));u=a.pendingProps;var g=a.memoizedState;f=g.element,xm(s,a),oc(a,u,null,l);var _=a.memoizedState;if(u=_.cache,Da(a,sn,u),u!==g.cache&&dm(a,[sn],l,!0),lc(),u=_.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=cv(s,a,u,l);break e}else if(u!==f){f=Ds(Error(r(424)),a),tc(f),a=cv(s,a,u,l);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,kt=Vs(s.firstChild),jn=a,et=!0,ka=null,Os=!0,l=rb(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Vi(),u===f){a=Zr(s,a,l);break e}In(s,a,u,l)}a=a.child}return a;case 26:return Ed(s,a),s===null?(l=T0(a.type,null,a.pendingProps,null))?a.memoizedState=l:et||(l=a.type,s=a.pendingProps,u=Bd(ge.current).createElement(l),u[en]=a,u[_n]=s,Dn(u,l,s),tn(u),a.stateNode=u):a.memoizedState=T0(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return xe(a),s===null&&et&&(u=a.stateNode=_0(a.type,a.pendingProps,ge.current),jn=a,Os=!0,f=kt,Ga(a.type)?(jp=f,kt=Vs(u.firstChild)):kt=f),In(s,a,a.pendingProps.children,l),Ed(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&et&&((f=u=kt)&&(u=b2(u,a.type,a.pendingProps,Os),u!==null?(a.stateNode=u,jn=a,kt=Vs(u.firstChild),Os=!1,f=!0):f=!1),f||Ia(a)),xe(a),f=a.type,g=a.pendingProps,_=s!==null?s.memoizedProps:null,u=g.children,Ep(f,g)?u=null:_!==null&&Ep(f,_)&&(a.flags|=32),a.memoizedState!==null&&(f=Tm(s,a,Mw,null,null,l),Cc._currentValue=f),Ed(s,a),In(s,a,u,l),a.child;case 6:return s===null&&et&&((s=l=kt)&&(l=v2(l,a.pendingProps,Os),l!==null?(a.stateNode=l,jn=a,kt=null,s=!0):s=!1),s||Ia(a)),null;case 13:return uv(s,a,l);case 4:return J(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=qi(a,null,u,l):In(s,a,u,l),a.child;case 11:return tv(s,a,a.type,a.pendingProps,l);case 7:return In(s,a,a.pendingProps,l),a.child;case 8:return In(s,a,a.pendingProps.children,l),a.child;case 12:return In(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Da(a,a.type,u.value),In(s,a,u.children,l),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,zi(a),f=kn(f),u=u(f),a.flags|=1,In(s,a,u,l),a.child;case 14:return nv(s,a,a.type,a.pendingProps,l);case 15:return sv(s,a,a.type,a.pendingProps,l);case 19:return hv(s,a,l);case 31:return Bw(s,a,l);case 22:return rv(s,a,l,a.pendingProps);case 24:return zi(a),u=kn(sn),s===null?(f=mm(),f===null&&(f=Et,g=hm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),a.memoizedState={parent:u,cache:f},gm(a),Da(a,sn,f)):((s.lanes&l)!==0&&(xm(s,a),oc(a,null,null,l),lc()),f=s.memoizedState,g=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Da(a,sn,u)):(u=g.cache,Da(a,sn,u),u!==f.cache&&dm(a,[sn],l,!0))),In(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ea(s){s.flags|=4}function Jm(s,a,l,u,f){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(f&335544128)===f)if(s.stateNode.complete)s.flags|=8192;else if(zv())s.flags|=8192;else throw Hi=ud,pm}else s.flags&=-16777217}function mv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!R0(a))if(zv())s.flags|=8192;else throw Hi=ud,pm}function Ad(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ct():536870912,s.lanes|=a,Ql|=a)}function mc(s,a){if(!et)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function It(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var f=s.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function qw(s,a,l){var u=a.pendingProps;switch(im(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(a),null;case 1:return It(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Xr(sn),Y(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ol(a)?ea(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,om())),It(a),null;case 26:var f=a.type,g=a.memoizedState;return s===null?(ea(a),g!==null?(It(a),mv(a,g)):(It(a),Jm(a,f,null,u,l))):g?g!==s.memoizedState?(ea(a),It(a),mv(a,g)):(It(a),a.flags&=-16777217):(s=s.memoizedProps,s!==u&&ea(a),It(a),Jm(a,f,s,u,l)),null;case 27:if(Le(a),l=ge.current,f=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ea(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return It(a),null}s=ye.current,Ol(a)?Ky(a):(s=_0(f,u,l),a.stateNode=s,ea(a))}return It(a),null;case 5:if(Le(a),f=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ea(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return It(a),null}if(g=ye.current,Ol(a))Ky(a);else{var _=Bd(ge.current);switch(g){case 1:g=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=_.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}g[en]=a,g[_n]=u;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)g.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=g;e:switch(Dn(g,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ea(a)}}return It(a),Jm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&ea(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(s=ge.current,Ol(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,f=jn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}s[en]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||u0(s.nodeValue,l)),s||Ia(a,!0)}else s=Bd(s).createTextNode(u),s[en]=a,a.stateNode=s}return It(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(u=Ol(a),l!==null){if(s===null){if(!u)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[en]=a}else Vi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;It(a),s=!1}else l=om(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(vs(a),a):(vs(a),null);if((a.flags&128)!==0)throw Error(r(558))}return It(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=Ol(a),u!==null&&u.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[en]=a}else Vi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;It(a),f=!1}else f=om(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(vs(a),a):(vs(a),null)}return vs(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,s=s!==null&&s.memoizedState!==null,l&&(u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Ad(a,a.updateQueue),It(a),null);case 4:return Y(),s===null&&vp(a.stateNode.containerInfo),It(a),null;case 10:return Xr(a.type),It(a),null;case 19:if(Q(Qt),u=a.memoizedState,u===null)return It(a),null;if(f=(a.flags&128)!==0,g=u.rendering,g===null)if(f)mc(u,!1);else{if(Ht!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(g=md(s),g!==null){for(a.flags|=128,mc(u,!1),s=g.updateQueue,a.updateQueue=s,Ad(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)By(l,s),l=l.sibling;return fe(Qt,Qt.current&1|2),et&&Yr(a,u.treeForkCount),a.child}s=s.sibling}u.tail!==null&&Zt()>Id&&(a.flags|=128,f=!0,mc(u,!1),a.lanes=4194304)}else{if(!f)if(s=md(g),s!==null){if(a.flags|=128,f=!0,s=s.updateQueue,a.updateQueue=s,Ad(a,s),mc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!et)return It(a),null}else 2*Zt()-u.renderingStartTime>Id&&l!==536870912&&(a.flags|=128,f=!0,mc(u,!1),a.lanes=4194304);u.isBackwards?(g.sibling=a.child,a.child=g):(s=u.last,s!==null?s.sibling=g:a.child=g,u.last=g)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Zt(),s.sibling=null,l=Qt.current,fe(Qt,f?l&1|2:l&1),et&&Yr(a,u.treeForkCount),s):(It(a),null);case 22:case 23:return vs(a),_m(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(It(a),a.subtreeFlags&6&&(a.flags|=8192)):It(a),l=a.updateQueue,l!==null&&Ad(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&Q(Fi),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Xr(sn),It(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function $w(s,a){switch(im(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Xr(sn),Y(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Le(a),null;case 31:if(a.memoizedState!==null){if(vs(a),a.alternate===null)throw Error(r(340));Vi()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(vs(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Vi()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Q(Qt),null;case 4:return Y(),null;case 10:return Xr(a.type),null;case 22:case 23:return vs(a),_m(),s!==null&&Q(Fi),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Xr(sn),null;case 25:return null;default:return null}}function pv(s,a){switch(im(a),a.tag){case 3:Xr(sn),Y();break;case 26:case 27:case 5:Le(a);break;case 4:Y();break;case 31:a.memoizedState!==null&&vs(a);break;case 13:vs(a);break;case 19:Q(Qt);break;case 10:Xr(a.type);break;case 22:case 23:vs(a),_m(),s!==null&&Q(Fi);break;case 24:Xr(sn)}}function pc(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&s)===s){u=void 0;var g=l.create,_=l.inst;u=g(),_.destroy=u}l=l.next}while(l!==f)}}catch(R){xt(a,a.return,R)}}function Ua(s,a,l){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&s)===s){var _=u.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,f=a;var F=l,ne=R;try{ne()}catch(oe){xt(f,F,oe)}}}u=u.next}while(u!==g)}}catch(oe){xt(a,a.return,oe)}}function gv(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{ib(a,l)}catch(u){xt(s,s.return,u)}}}function xv(s,a,l){l.props=Gi(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){xt(s,a,u)}}function gc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(f){xt(s,a,f)}}function Er(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(f){xt(s,a,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){xt(s,a,f)}else l.current=null}function yv(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(f){xt(s,s.return,f)}}function Zm(s,a,l){try{var u=s.stateNode;f2(u,s.type,l,a),u[_n]=a}catch(f){xt(s,s.return,f)}}function bv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ga(s.type)||s.tag===4}function ep(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||bv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ga(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function tp(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=qs));else if(u!==4&&(u===27&&Ga(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(tp(s,a,l),s=s.sibling;s!==null;)tp(s,a,l),s=s.sibling}function Cd(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&Ga(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Cd(s,a,l),s=s.sibling;s!==null;)Cd(s,a,l),s=s.sibling}function vv(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);Dn(a,u,l),a[en]=s,a[_n]=l}catch(g){xt(s,s.return,g)}}var ta=!1,ln=!1,np=!1,_v=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function Gw(s,a){if(s=s.containerInfo,Np=Qd,s=Dy(s),Qf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var _=0,R=-1,F=-1,ne=0,oe=0,de=s,se=null;t:for(;;){for(var ie;de!==l||f!==0&&de.nodeType!==3||(R=_+f),de!==g||u!==0&&de.nodeType!==3||(F=_+u),de.nodeType===3&&(_+=de.nodeValue.length),(ie=de.firstChild)!==null;)se=de,de=ie;for(;;){if(de===s)break t;if(se===l&&++ne===f&&(R=_),se===g&&++oe===u&&(F=_),(ie=de.nextSibling)!==null)break;de=se,se=de.parentNode}de=ie}l=R===-1||F===-1?null:{start:R,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Tp={focusedElem:s,selectionRange:l},Qd=!1,Nn=a;Nn!==null;)if(a=Nn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Nn=s;else for(;Nn!==null;){switch(a=Nn,g=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)f=s[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,l=a,f=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var Ce=Gi(l.type,f);s=u.getSnapshotBeforeUpdate(Ce,g),u.__reactInternalSnapshotBeforeUpdate=s}catch(Me){xt(l,l.return,Me)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Ap(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ap(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Nn=s;break}Nn=a.return}}function Sv(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:sa(s,l),u&4&&pc(5,l);break;case 1:if(sa(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(_){xt(l,l.return,_)}else{var f=Gi(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(f,a,s.__reactInternalSnapshotBeforeUpdate)}catch(_){xt(l,l.return,_)}}u&64&&gv(l),u&512&&gc(l,l.return);break;case 3:if(sa(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{ib(s,a)}catch(_){xt(l,l.return,_)}}break;case 27:a===null&&u&4&&vv(l);case 26:case 5:sa(s,l),a===null&&u&4&&yv(l),u&512&&gc(l,l.return);break;case 12:sa(s,l);break;case 31:sa(s,l),u&4&&Ev(s,l);break;case 13:sa(s,l),u&4&&wv(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=t2.bind(null,l),_2(s,l))));break;case 22:if(u=l.memoizedState!==null||ta,!u){a=a!==null&&a.memoizedState!==null||ln,f=ta;var g=ln;ta=u,(ln=a)&&!g?ra(s,l,(l.subtreeFlags&8772)!==0):sa(s,l),ta=f,ln=g}break;case 30:break;default:sa(s,l)}}function Nv(s){var a=s.alternate;a!==null&&(s.alternate=null,Nv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&bl(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Pt=null,rs=!1;function na(s,a,l){for(l=l.child;l!==null;)Tv(s,a,l),l=l.sibling}function Tv(s,a,l){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Gn,l)}catch{}switch(l.tag){case 26:ln||Er(l,a),na(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ln||Er(l,a);var u=Pt,f=rs;Ga(l.type)&&(Pt=l.stateNode,rs=!1),na(s,a,l),Ec(l.stateNode),Pt=u,rs=f;break;case 5:ln||Er(l,a);case 6:if(u=Pt,f=rs,Pt=null,na(s,a,l),Pt=u,rs=f,Pt!==null)if(rs)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(l.stateNode)}catch(g){xt(l,a,g)}else try{Pt.removeChild(l.stateNode)}catch(g){xt(l,a,g)}break;case 18:Pt!==null&&(rs?(s=Pt,g0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),so(s)):g0(Pt,l.stateNode));break;case 4:u=Pt,f=rs,Pt=l.stateNode.containerInfo,rs=!0,na(s,a,l),Pt=u,rs=f;break;case 0:case 11:case 14:case 15:Ua(2,l,a),ln||Ua(4,l,a),na(s,a,l);break;case 1:ln||(Er(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&xv(l,a,u)),na(s,a,l);break;case 21:na(s,a,l);break;case 22:ln=(u=ln)||l.memoizedState!==null,na(s,a,l),ln=u;break;default:na(s,a,l)}}function Ev(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{so(s)}catch(l){xt(a,a.return,l)}}}function wv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{so(s)}catch(l){xt(a,a.return,l)}}function Kw(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new _v),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new _v),a;default:throw Error(r(435,s.tag))}}function Rd(s,a){var l=Kw(s);a.forEach(function(u){if(!l.has(u)){l.add(u);var f=n2.bind(null,s,u);u.then(f,f)}})}function as(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u],g=s,_=a,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(Ga(R.type)){Pt=R.stateNode,rs=!1;break e}break;case 5:Pt=R.stateNode,rs=!1;break e;case 3:case 4:Pt=R.stateNode.containerInfo,rs=!0;break e}R=R.return}if(Pt===null)throw Error(r(160));Tv(g,_,f),Pt=null,rs=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Av(a,s),a=a.sibling}var Xs=null;function Av(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:as(a,s),is(s),u&4&&(Ua(3,s,s.return),pc(3,s),Ua(5,s,s.return));break;case 1:as(a,s),is(s),u&512&&(ln||l===null||Er(l,l.return)),u&64&&ta&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var f=Xs;if(as(a,s),is(s),u&512&&(ln||l===null||Er(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[dr]||g[en]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Dn(g,u,l),g[en]=s,tn(g),u=g;break e;case"link":var _=A0("link","href",f).get(u+(l.href||""));if(_){for(var R=0;R<_.length;R++)if(g=_[R],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(R,1);break t}}g=f.createElement(u),Dn(g,u,l),f.head.appendChild(g);break;case"meta":if(_=A0("meta","content",f).get(u+(l.content||""))){for(R=0;R<_.length;R++)if(g=_[R],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(R,1);break t}}g=f.createElement(u),Dn(g,u,l),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[en]=s,tn(g),u=g}s.stateNode=u}else C0(f,s.type,s.stateNode);else s.stateNode=w0(f,u,s.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?C0(f,s.type,s.stateNode):w0(f,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Zm(s,s.memoizedProps,l.memoizedProps)}break;case 27:as(a,s),is(s),u&512&&(ln||l===null||Er(l,l.return)),l!==null&&u&4&&Zm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(as(a,s),is(s),u&512&&(ln||l===null||Er(l,l.return)),s.flags&32){f=s.stateNode;try{ss(f,"")}catch(Ce){xt(s,s.return,Ce)}}u&4&&s.stateNode!=null&&(f=s.memoizedProps,Zm(s,f,l!==null?l.memoizedProps:f)),u&1024&&(np=!0);break;case 6:if(as(a,s),is(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Ce){xt(s,s.return,Ce)}}break;case 3:if($d=null,f=Xs,Xs=Hd(a.containerInfo),as(a,s),Xs=f,is(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{so(a.containerInfo)}catch(Ce){xt(s,s.return,Ce)}np&&(np=!1,Cv(s));break;case 4:u=Xs,Xs=Hd(s.stateNode.containerInfo),as(a,s),is(s),Xs=u;break;case 12:as(a,s),is(s);break;case 31:as(a,s),is(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rd(s,u)));break;case 13:as(a,s),is(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(kd=Zt()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rd(s,u)));break;case 22:f=s.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,ne=ta,oe=ln;if(ta=ne||f,ln=oe||F,as(a,s),ln=oe,ta=ne,is(s),u&8192)e:for(a=s.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||F||ta||ln||Ki(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(g=F.stateNode,f)_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=F.stateNode;var de=F.memoizedProps.style,se=de!=null&&de.hasOwnProperty("display")?de.display:null;R.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ce){xt(F,F.return,Ce)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=f?"":F.memoizedProps}catch(Ce){xt(F,F.return,Ce)}}}else if(a.tag===18){if(l===null){F=a;try{var ie=F.stateNode;f?x0(ie,!0):x0(F.stateNode,!1)}catch(Ce){xt(F,F.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Rd(s,l))));break;case 19:as(a,s),is(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rd(s,u)));break;case 30:break;case 21:break;default:as(a,s),is(s)}}function is(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(bv(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var f=l.stateNode,g=ep(s);Cd(s,g,f);break;case 5:var _=l.stateNode;l.flags&32&&(ss(_,""),l.flags&=-33);var R=ep(s);Cd(s,R,_);break;case 3:case 4:var F=l.stateNode.containerInfo,ne=ep(s);tp(s,ne,F);break;default:throw Error(r(161))}}catch(oe){xt(s,s.return,oe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Cv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Cv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function sa(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sv(s,a.alternate,a),a=a.sibling}function Ki(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ua(4,a,a.return),Ki(a);break;case 1:Er(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&xv(a,a.return,l),Ki(a);break;case 27:Ec(a.stateNode);case 26:case 5:Er(a,a.return),Ki(a);break;case 22:a.memoizedState===null&&Ki(a);break;case 30:Ki(a);break;default:Ki(a)}s=s.sibling}}function ra(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=s,g=a,_=g.flags;switch(g.tag){case 0:case 11:case 15:ra(f,g,l),pc(4,g);break;case 1:if(ra(f,g,l),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){xt(u,u.return,ne)}if(u=g,f=u.updateQueue,f!==null){var R=u.stateNode;try{var F=f.shared.hiddenCallbacks;if(F!==null)for(f.shared.hiddenCallbacks=null,f=0;f<F.length;f++)ab(F[f],R)}catch(ne){xt(u,u.return,ne)}}l&&_&64&&gv(g),gc(g,g.return);break;case 27:vv(g);case 26:case 5:ra(f,g,l),l&&u===null&&_&4&&yv(g),gc(g,g.return);break;case 12:ra(f,g,l);break;case 31:ra(f,g,l),l&&_&4&&Ev(f,g);break;case 13:ra(f,g,l),l&&_&4&&wv(f,g);break;case 22:g.memoizedState===null&&ra(f,g,l),gc(g,g.return);break;case 30:break;default:ra(f,g,l)}a=a.sibling}}function sp(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&nc(l))}function rp(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&nc(s))}function Ws(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Rv(s,a,l,u),a=a.sibling}function Rv(s,a,l,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Ws(s,a,l,u),f&2048&&pc(9,a);break;case 1:Ws(s,a,l,u);break;case 3:Ws(s,a,l,u),f&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&nc(s)));break;case 12:if(f&2048){Ws(s,a,l,u),s=a.stateNode;try{var g=a.memoizedProps,_=g.id,R=g.onPostCommit;typeof R=="function"&&R(_,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){xt(a,a.return,F)}}else Ws(s,a,l,u);break;case 31:Ws(s,a,l,u);break;case 13:Ws(s,a,l,u);break;case 23:break;case 22:g=a.stateNode,_=a.alternate,a.memoizedState!==null?g._visibility&2?Ws(s,a,l,u):xc(s,a):g._visibility&2?Ws(s,a,l,u):(g._visibility|=2,Gl(s,a,l,u,(a.subtreeFlags&10256)!==0||!1)),f&2048&&sp(_,a);break;case 24:Ws(s,a,l,u),f&2048&&rp(a.alternate,a);break;default:Ws(s,a,l,u)}}function Gl(s,a,l,u,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var g=s,_=a,R=l,F=u,ne=_.flags;switch(_.tag){case 0:case 11:case 15:Gl(g,_,R,F,f),pc(8,_);break;case 23:break;case 22:var oe=_.stateNode;_.memoizedState!==null?oe._visibility&2?Gl(g,_,R,F,f):xc(g,_):(oe._visibility|=2,Gl(g,_,R,F,f)),f&&ne&2048&&sp(_.alternate,_);break;case 24:Gl(g,_,R,F,f),f&&ne&2048&&rp(_.alternate,_);break;default:Gl(g,_,R,F,f)}a=a.sibling}}function xc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,f=u.flags;switch(u.tag){case 22:xc(l,u),f&2048&&sp(u.alternate,u);break;case 24:xc(l,u),f&2048&&rp(u.alternate,u);break;default:xc(l,u)}a=a.sibling}}var yc=8192;function Kl(s,a,l){if(s.subtreeFlags&yc)for(s=s.child;s!==null;)jv(s,a,l),s=s.sibling}function jv(s,a,l){switch(s.tag){case 26:Kl(s,a,l),s.flags&yc&&s.memoizedState!==null&&D2(l,Xs,s.memoizedState,s.memoizedProps);break;case 5:Kl(s,a,l);break;case 3:case 4:var u=Xs;Xs=Hd(s.stateNode.containerInfo),Kl(s,a,l),Xs=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=yc,yc=16777216,Kl(s,a,l),yc=u):Kl(s,a,l));break;default:Kl(s,a,l)}}function kv(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function bc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Nn=u,Dv(u,s)}kv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Iv(s),s=s.sibling}function Iv(s){switch(s.tag){case 0:case 11:case 15:bc(s),s.flags&2048&&Ua(9,s,s.return);break;case 3:bc(s);break;case 12:bc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,jd(s)):bc(s);break;default:bc(s)}}function jd(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Nn=u,Dv(u,s)}kv(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ua(8,a,a.return),jd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,jd(a));break;default:jd(a)}s=s.sibling}}function Dv(s,a){for(;Nn!==null;){var l=Nn;switch(l.tag){case 0:case 11:case 15:Ua(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:nc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Nn=u;else e:for(l=s;Nn!==null;){u=Nn;var f=u.sibling,g=u.return;if(Nv(u),u===l){Nn=null;break e}if(f!==null){f.return=g,Nn=f;break e}Nn=g}}}var Yw={getCacheForType:function(s){var a=kn(sn),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return kn(sn).controller.signal}},Qw=typeof WeakMap=="function"?WeakMap:Map,ot=0,Et=null,Ke=null,Qe=0,gt=0,_s=null,za=!1,Yl=!1,ap=!1,aa=0,Ht=0,Fa=0,Yi=0,ip=0,Ss=0,Ql=0,vc=null,ls=null,lp=!1,kd=0,Mv=0,Id=1/0,Dd=null,Ba=null,mn=0,Ha=null,Xl=null,ia=0,op=0,cp=null,Pv=null,_c=0,up=null;function Ns(){return(ot&2)!==0&&Qe!==0?Qe&-Qe:B.T!==null?gp():ms()}function Ov(){if(Ss===0)if((Qe&536870912)===0||et){var s=Te;Te<<=1,(Te&3932160)===0&&(Te=262144),Ss=s}else Ss=536870912;return s=bs.current,s!==null&&(s.flags|=32),Ss}function os(s,a,l){(s===Et&&(gt===2||gt===9)||s.cancelPendingCommit!==null)&&(Wl(s,0),qa(s,Qe,Ss,!1)),Un(s,l),((ot&2)===0||s!==Et)&&(s===Et&&((ot&2)===0&&(Yi|=l),Ht===4&&qa(s,Qe,Ss,!1)),wr(s))}function Lv(s,a,l){if((ot&6)!==0)throw Error(r(327));var u=!l&&(a&127)===0&&(a&s.expiredLanes)===0||mt(s,a),f=u?Jw(s,a):hp(s,a,!0),g=u;do{if(f===0){Yl&&!u&&qa(s,a,0,!1);break}else{if(l=s.current.alternate,g&&!Xw(l)){f=hp(s,a,!1),g=!1;continue}if(f===2){if(g=a,s.errorRecoveryDisabledLanes&g)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var R=s;f=vc;var F=R.current.memoizedState.isDehydrated;if(F&&(Wl(R,_).flags|=256),_=hp(R,_,!1),_!==2){if(ap&&!F){R.errorRecoveryDisabledLanes|=g,Yi|=g,f=4;break e}g=ls,ls=f,g!==null&&(ls===null?ls=g:ls.push.apply(ls,g))}f=_}if(g=!1,f!==2)continue}}if(f===1){Wl(s,0),qa(s,a,0,!0);break}e:{switch(u=s,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:qa(u,a,Ss,!za);break e;case 2:ls=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=kd+300-Zt(),10<f)){if(qa(u,a,Ss,!za),Tt(u,0,!0)!==0)break e;ia=a,u.timeoutHandle=m0(Vv.bind(null,u,l,ls,Dd,lp,a,Ss,Yi,Ql,za,g,"Throttled",-0,0),f);break e}Vv(u,l,ls,Dd,lp,a,Ss,Yi,Ql,za,g,null,-0,0)}}break}while(!0);wr(s)}function Vv(s,a,l,u,f,g,_,R,F,ne,oe,de,se,ie){if(s.timeoutHandle=-1,de=a.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qs},jv(a,g,de);var Ce=(g&62914560)===g?kd-Zt():(g&4194048)===g?Mv-Zt():0;if(Ce=M2(de,Ce),Ce!==null){ia=g,s.cancelPendingCommit=Ce(Gv.bind(null,s,a,g,l,u,f,_,R,F,oe,de,null,se,ie)),qa(s,g,_,!ne);return}}Gv(s,a,g,l,u,f,_,R,F)}function Xw(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var f=l[u],g=f.getSnapshot;f=f.value;try{if(!xs(g(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function qa(s,a,l,u){a&=~ip,a&=~Yi,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var f=a;0<f;){var g=31-Nt(f),_=1<<g;u[g]=-1,f&=~_}l!==0&&Dt(s,l,a)}function Md(){return(ot&6)===0?(Sc(0),!1):!0}function dp(){if(Ke!==null){if(gt===0)var s=Ke.return;else s=Ke,Qr=Ui=null,Am(s),Fl=null,rc=0,s=Ke;for(;s!==null;)pv(s.alternate,s),s=s.return;Ke=null}}function Wl(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,g2(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ia=0,dp(),Et=s,Ke=l=Kr(s.current,null),Qe=a,gt=0,_s=null,za=!1,Yl=mt(s,a),ap=!1,Ql=Ss=ip=Yi=Fa=Ht=0,ls=vc=null,lp=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var f=31-Nt(u),g=1<<f;a|=s[f],u&=~g}return aa=a,td(),l}function Uv(s,a){He=null,B.H=hc,a===zl||a===cd?(a=tb(),gt=3):a===pm?(a=tb(),gt=4):gt=a===Hm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,_s=a,Ke===null&&(Ht=1,Nd(s,Ds(a,s.current)))}function zv(){var s=bs.current;return s===null?!0:(Qe&4194048)===Qe?Ls===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?s===Ls:!1}function Fv(){var s=B.H;return B.H=hc,s===null?hc:s}function Bv(){var s=B.A;return B.A=Yw,s}function Pd(){Ht=4,za||(Qe&4194048)!==Qe&&bs.current!==null||(Yl=!0),(Fa&134217727)===0&&(Yi&134217727)===0||Et===null||qa(Et,Qe,Ss,!1)}function hp(s,a,l){var u=ot;ot|=2;var f=Fv(),g=Bv();(Et!==s||Qe!==a)&&(Dd=null,Wl(s,a)),a=!1;var _=Ht;e:do try{if(gt!==0&&Ke!==null){var R=Ke,F=_s;switch(gt){case 8:dp(),_=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(a=!0);var ne=gt;if(gt=0,_s=null,Jl(s,R,F,ne),l&&Yl){_=0;break e}break;default:ne=gt,gt=0,_s=null,Jl(s,R,F,ne)}}Ww(),_=Ht;break}catch(oe){Uv(s,oe)}while(!0);return a&&s.shellSuspendCounter++,Qr=Ui=null,ot=u,B.H=f,B.A=g,Ke===null&&(Et=null,Qe=0,td()),_}function Ww(){for(;Ke!==null;)Hv(Ke)}function Jw(s,a){var l=ot;ot|=2;var u=Fv(),f=Bv();Et!==s||Qe!==a?(Dd=null,Id=Zt()+500,Wl(s,a)):Yl=mt(s,a);e:do try{if(gt!==0&&Ke!==null){a=Ke;var g=_s;t:switch(gt){case 1:gt=0,_s=null,Jl(s,a,g,1);break;case 2:case 9:if(Zy(g)){gt=0,_s=null,qv(a);break}a=function(){gt!==2&&gt!==9||Et!==s||(gt=7),wr(s)},g.then(a,a);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Zy(g)?(gt=0,_s=null,qv(a)):(gt=0,_s=null,Jl(s,a,g,7));break;case 5:var _=null;switch(Ke.tag){case 26:_=Ke.memoizedState;case 5:case 27:var R=Ke;if(_?R0(_):R.stateNode.complete){gt=0,_s=null;var F=R.sibling;if(F!==null)Ke=F;else{var ne=R.return;ne!==null?(Ke=ne,Od(ne)):Ke=null}break t}}gt=0,_s=null,Jl(s,a,g,5);break;case 6:gt=0,_s=null,Jl(s,a,g,6);break;case 8:dp(),Ht=6;break e;default:throw Error(r(462))}}Zw();break}catch(oe){Uv(s,oe)}while(!0);return Qr=Ui=null,B.H=u,B.A=f,ot=l,Ke!==null?0:(Et=null,Qe=0,td(),Ht)}function Zw(){for(;Ke!==null&&!or();)Hv(Ke)}function Hv(s){var a=fv(s.alternate,s,aa);s.memoizedProps=s.pendingProps,a===null?Od(s):Ke=a}function qv(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=lv(l,a,a.pendingProps,a.type,void 0,Qe);break;case 11:a=lv(l,a,a.pendingProps,a.type.render,a.ref,Qe);break;case 5:Am(a);default:pv(l,a),a=Ke=By(a,aa),a=fv(l,a,aa)}s.memoizedProps=s.pendingProps,a===null?Od(s):Ke=a}function Jl(s,a,l,u){Qr=Ui=null,Am(a),Fl=null,rc=0;var f=a.return;try{if(Fw(s,f,a,l,Qe)){Ht=1,Nd(s,Ds(l,s.current)),Ke=null;return}}catch(g){if(f!==null)throw Ke=f,g;Ht=1,Nd(s,Ds(l,s.current)),Ke=null;return}a.flags&32768?(et||u===1?s=!0:Yl||(Qe&536870912)!==0?s=!1:(za=s=!0,(u===2||u===9||u===3||u===6)&&(u=bs.current,u!==null&&u.tag===13&&(u.flags|=16384))),$v(a,s)):Od(a)}function Od(s){var a=s;do{if((a.flags&32768)!==0){$v(a,za);return}s=a.return;var l=qw(a.alternate,a,aa);if(l!==null){Ke=l;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=s}while(a!==null);Ht===0&&(Ht=5)}function $v(s,a){do{var l=$w(s.alternate,s);if(l!==null){l.flags&=32767,Ke=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=l}while(s!==null);Ht=6,Ke=null}function Gv(s,a,l,u,f,g,_,R,F){s.cancelPendingCommit=null;do Ld();while(mn!==0);if((ot&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(g=a.lanes|a.childLanes,g|=em,Ot(s,l,g,_,R,F),s===Et&&(Ke=Et=null,Qe=0),Xl=a,Ha=s,ia=l,op=g,cp=f,Pv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,s2(An,function(){return Wv(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,f=ce.p,ce.p=2,_=ot,ot|=4;try{Gw(s,a,l)}finally{ot=_,ce.p=f,B.T=u}}mn=1,Kv(),Yv(),Qv()}}function Kv(){if(mn===1){mn=0;var s=Ha,a=Xl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var u=ce.p;ce.p=2;var f=ot;ot|=4;try{Av(a,s);var g=Tp,_=Dy(s.containerInfo),R=g.focusedElem,F=g.selectionRange;if(_!==R&&R&&R.ownerDocument&&Iy(R.ownerDocument.documentElement,R)){if(F!==null&&Qf(R)){var ne=F.start,oe=F.end;if(oe===void 0&&(oe=ne),"selectionStart"in R)R.selectionStart=ne,R.selectionEnd=Math.min(oe,R.value.length);else{var de=R.ownerDocument||document,se=de&&de.defaultView||window;if(se.getSelection){var ie=se.getSelection(),Ce=R.textContent.length,Me=Math.min(F.start,Ce),_t=F.end===void 0?Me:Math.min(F.end,Ce);!ie.extend&&Me>_t&&(_=_t,_t=Me,Me=_);var W=ky(R,Me),G=ky(R,_t);if(W&&G&&(ie.rangeCount!==1||ie.anchorNode!==W.node||ie.anchorOffset!==W.offset||ie.focusNode!==G.node||ie.focusOffset!==G.offset)){var te=de.createRange();te.setStart(W.node,W.offset),ie.removeAllRanges(),Me>_t?(ie.addRange(te),ie.extend(G.node,G.offset)):(te.setEnd(G.node,G.offset),ie.addRange(te))}}}}for(de=[],ie=R;ie=ie.parentNode;)ie.nodeType===1&&de.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<de.length;R++){var ue=de[R];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Qd=!!Np,Tp=Np=null}finally{ot=f,ce.p=u,B.T=l}}s.current=a,mn=2}}function Yv(){if(mn===2){mn=0;var s=Ha,a=Xl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var u=ce.p;ce.p=2;var f=ot;ot|=4;try{Sv(s,a.alternate,a)}finally{ot=f,ce.p=u,B.T=l}}mn=3}}function Qv(){if(mn===4||mn===3){mn=0,cr();var s=Ha,a=Xl,l=ia,u=Pv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?mn=5:(mn=0,Xl=Ha=null,Xv(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(Ba=null),Yn(l),a=a.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Gn,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=B.T,f=ce.p,ce.p=2,B.T=null;try{for(var g=s.onRecoverableError,_=0;_<u.length;_++){var R=u[_];g(R.value,{componentStack:R.stack})}}finally{B.T=a,ce.p=f}}(ia&3)!==0&&Ld(),wr(s),f=s.pendingLanes,(l&261930)!==0&&(f&42)!==0?s===up?_c++:(_c=0,up=s):_c=0,Sc(0)}}function Xv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,nc(a)))}function Ld(){return Kv(),Yv(),Qv(),Wv()}function Wv(){if(mn!==5)return!1;var s=Ha,a=op;op=0;var l=Yn(ia),u=B.T,f=ce.p;try{ce.p=32>l?32:l,B.T=null,l=cp,cp=null;var g=Ha,_=ia;if(mn=0,Xl=Ha=null,ia=0,(ot&6)!==0)throw Error(r(331));var R=ot;if(ot|=4,Iv(g.current),Rv(g,g.current,_,l),ot=R,Sc(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Gn,g)}catch{}return!0}finally{ce.p=f,B.T=u,Xv(s,a)}}function Jv(s,a,l){a=Ds(l,a),a=Bm(s.stateNode,a,2),s=Oa(s,a,2),s!==null&&(Un(s,2),wr(s))}function xt(s,a,l){if(s.tag===3)Jv(s,s,l);else for(;a!==null;){if(a.tag===3){Jv(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ba===null||!Ba.has(u))){s=Ds(l,s),l=Zb(2),u=Oa(a,l,2),u!==null&&(ev(l,u,a,s),Un(u,2),wr(u));break}}a=a.return}}function fp(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new Qw;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(l)||(ap=!0,f.add(l),s=e2.bind(null,s,a,l),a.then(s,s))}function e2(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,Et===s&&(Qe&l)===l&&(Ht===4||Ht===3&&(Qe&62914560)===Qe&&300>Zt()-kd?(ot&2)===0&&Wl(s,0):ip|=l,Ql===Qe&&(Ql=0)),wr(s)}function Zv(s,a){a===0&&(a=Ct()),s=Oi(s,a),s!==null&&(Un(s,a),wr(s))}function t2(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),Zv(s,l)}function n2(s,a){var l=0;switch(s.tag){case 31:case 13:var u=s.stateNode,f=s.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),Zv(s,l)}function s2(s,a){return it(s,a)}var Vd=null,Zl=null,mp=!1,Ud=!1,pp=!1,$a=0;function wr(s){s!==Zl&&s.next===null&&(Zl===null?Vd=Zl=s:Zl=Zl.next=s),Ud=!0,mp||(mp=!0,a2())}function Sc(s,a){if(!pp&&Ud){pp=!0;do for(var l=!1,u=Vd;u!==null;){if(s!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var _=u.suspendedLanes,R=u.pingedLanes;g=(1<<31-Nt(42|s)+1)-1,g&=f&~(_&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,s0(u,g))}else g=Qe,g=Tt(u,u===Et?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||mt(u,g)||(l=!0,s0(u,g));u=u.next}while(l);pp=!1}}function r2(){e0()}function e0(){Ud=mp=!1;var s=0;$a!==0&&p2()&&(s=$a);for(var a=Zt(),l=null,u=Vd;u!==null;){var f=u.next,g=t0(u,a);g===0?(u.next=null,l===null?Vd=f:l.next=f,f===null&&(Zl=l)):(l=u,(s!==0||(g&3)!==0)&&(Ud=!0)),u=f}mn!==0&&mn!==5||Sc(s),$a!==0&&($a=0)}function t0(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,f=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var _=31-Nt(g),R=1<<_,F=f[_];F===-1?((R&l)===0||(R&u)!==0)&&(f[_]=Ft(R,a)):F<=a&&(s.expiredLanes|=R),g&=~R}if(a=Et,l=Qe,l=Tt(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(gt===2||gt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&bn(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||mt(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&bn(u),Yn(l)){case 2:case 8:l=es;break;case 32:l=An;break;case 268435456:l=Fr;break;default:l=An}return u=n0.bind(null,s),l=it(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&bn(u),s.callbackPriority=2,s.callbackNode=null,2}function n0(s,a){if(mn!==0&&mn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Ld()&&s.callbackNode!==l)return null;var u=Qe;return u=Tt(s,s===Et?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Lv(s,u,a),t0(s,Zt()),s.callbackNode!=null&&s.callbackNode===l?n0.bind(null,s):null)}function s0(s,a){if(Ld())return null;Lv(s,a,!0)}function a2(){x2(function(){(ot&6)!==0?it(zr,r2):e0()})}function gp(){if($a===0){var s=Vl;s===0&&(s=_e,_e<<=1,(_e&261888)===0&&(_e=256)),$a=s}return $a}function r0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Nl(""+s)}function a0(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function i2(s,a,l,u,f){if(a==="submit"&&l&&l.stateNode===f){var g=r0((f[_n]||null).action),_=u.submitter;_&&(a=(a=_[_n]||null)?r0(a.formAction):_.getAttribute("formAction"),a!==null&&(g=a,_=null));var R=new br("action","action",null,u,f);s.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($a!==0){var F=_?a0(f,_):new FormData(f);Om(l,{pending:!0,data:F,method:f.method,action:g},null,F)}}else typeof g=="function"&&(R.preventDefault(),F=_?a0(f,_):new FormData(f),Om(l,{pending:!0,data:F,method:f.method,action:g},g,F))},currentTarget:f}]})}}for(var xp=0;xp<Zf.length;xp++){var yp=Zf[xp],l2=yp.toLowerCase(),o2=yp[0].toUpperCase()+yp.slice(1);Qs(l2,"on"+o2)}Qs(Oy,"onAnimationEnd"),Qs(Ly,"onAnimationIteration"),Qs(Vy,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(Tw,"onTransitionRun"),Qs(Ew,"onTransitionStart"),Qs(ww,"onTransitionCancel"),Qs(Uy,"onTransitionEnd"),pr("onMouseEnter",["mouseout","mouseover"]),pr("onMouseLeave",["mouseout","mouseover"]),pr("onPointerEnter",["pointerout","pointerover"]),pr("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nc));function i0(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],f=u.event;u=u.listeners;e:{var g=void 0;if(a)for(var _=u.length-1;0<=_;_--){var R=u[_],F=R.instance,ne=R.currentTarget;if(R=R.listener,F!==g&&f.isPropagationStopped())break e;g=R,f.currentTarget=ne;try{g(f)}catch(oe){ed(oe)}f.currentTarget=null,g=F}else for(_=0;_<u.length;_++){if(R=u[_],F=R.instance,ne=R.currentTarget,R=R.listener,F!==g&&f.isPropagationStopped())break e;g=R,f.currentTarget=ne;try{g(f)}catch(oe){ed(oe)}f.currentTarget=null,g=F}}}}function Ye(s,a){var l=a[yl];l===void 0&&(l=a[yl]=new Set);var u=s+"__bubble";l.has(u)||(l0(a,s,2,!1),l.add(u))}function bp(s,a,l){var u=0;a&&(u|=4),l0(l,s,u,a)}var zd="_reactListening"+Math.random().toString(36).slice(2);function vp(s){if(!s[zd]){s[zd]=!0,Po.forEach(function(l){l!=="selectionchange"&&(c2.has(l)||bp(l,!1,s),bp(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[zd]||(a[zd]=!0,bp("selectionchange",!1,a))}}function l0(s,a,l,u){switch(O0(a)){case 2:var f=L2;break;case 8:f=V2;break;default:f=Pp}l=f.bind(null,a,l,s),f=void 0,!Ci||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?s.addEventListener(a,l,{capture:!0,passive:f}):s.addEventListener(a,l,!0):f!==void 0?s.addEventListener(a,l,{passive:f}):s.addEventListener(a,l,!1)}function _p(s,a,l,u,f){var g=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===f)break;if(_===4)for(_=u.return;_!==null;){var F=_.tag;if((F===3||F===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;R!==null;){if(_=hr(R),_===null)return;if(F=_.tag,F===5||F===6||F===26||F===27){u=g=_;continue e}R=R.parentNode}}u=u.return}wa(function(){var ne=g,oe=Rs(l),de=[];e:{var se=zy.get(s);if(se!==void 0){var ie=br,Ce=s;switch(s){case"keypress":if(ji(l)===0)break e;case"keydown":case"keyup":ie=Wu;break;case"focusin":Ce="focus",ie=Ii;break;case"focusout":Ce="blur",ie=Ii;break;case"beforeblur":case"afterblur":ie=Ii;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=b;break;case Oy:case Ly:case Vy:ie=qu;break;case Uy:ie=M;break;case"scroll":case"scrollend":ie=Ko;break;case"wheel":ie=ae;break;case"copy":case"cut":case"paste":ie=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Gr;break;case"toggle":case"beforetoggle":ie=Be}var Me=(a&4)!==0,_t=!Me&&(s==="scroll"||s==="scrollend"),W=Me?se!==null?se+"Capture":null:se;Me=[];for(var G=ne,te;G!==null;){var ue=G;if(te=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||te===null||W===null||(ue=$s(G,W),ue!=null&&Me.push(Tc(G,ue,te))),_t)break;G=G.return}0<Me.length&&(se=new ie(se,Ce,null,l,oe),de.push({event:se,listeners:Me}))}}if((a&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",se&&l!==qo&&(Ce=l.relatedTarget||l.fromElement)&&(hr(Ce)||Ce[ur]))break e;if((ie||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,ie?(Ce=l.relatedTarget||l.toElement,ie=ne,Ce=Ce?hr(Ce):null,Ce!==null&&(_t=c(Ce),Me=Ce.tag,Ce!==_t||Me!==5&&Me!==27&&Me!==6)&&(Ce=null)):(ie=null,Ce=ne),ie!==Ce)){if(Me=Yo,ue="onMouseLeave",W="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Me=Gr,ue="onPointerLeave",W="onPointerEnter",G="pointer"),_t=ie==null?se:ps(ie),te=Ce==null?se:ps(Ce),se=new Me(ue,G+"leave",ie,l,oe),se.target=_t,se.relatedTarget=te,ue=null,hr(oe)===ne&&(Me=new Me(W,G+"enter",Ce,l,oe),Me.target=te,Me.relatedTarget=_t,ue=Me),_t=ue,ie&&Ce)t:{for(Me=u2,W=ie,G=Ce,te=0,ue=W;ue;ue=Me(ue))te++;ue=0;for(var Ie=G;Ie;Ie=Me(Ie))ue++;for(;0<te-ue;)W=Me(W),te--;for(;0<ue-te;)G=Me(G),ue--;for(;te--;){if(W===G||G!==null&&W===G.alternate){Me=W;break t}W=Me(W),G=Me(G)}Me=null}else Me=null;ie!==null&&o0(de,se,ie,Me,!1),Ce!==null&&_t!==null&&o0(de,_t,Ce,Me,!0)}}e:{if(se=ne?ps(ne):window,ie=se.nodeName&&se.nodeName.toLowerCase(),ie==="select"||ie==="input"&&se.type==="file")var rt=Ey;else if(Ny(se))if(wy)rt=_w;else{rt=bw;var je=yw}else ie=se.nodeName,!ie||ie.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&Sl(ne.elementType)&&(rt=Ey):rt=vw;if(rt&&(rt=rt(s,ne))){Ty(de,rt,l,oe);break e}je&&je(s,se,ne),s==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&Fo(se,"number",se.value)}switch(je=ne?ps(ne):window,s){case"focusin":(Ny(je)||je.contentEditable==="true")&&(jl=je,Xf=ne,Zo=null);break;case"focusout":Zo=Xf=jl=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,My(de,l,oe);break;case"selectionchange":if(Nw)break;case"keydown":case"keyup":My(de,l,oe)}var qe;if(lt)e:{switch(s){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Rl?Di(s,l)&&(Xe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Xe="onCompositionStart");Xe&&(Sr&&l.locale!=="ko"&&(Rl||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Rl&&(qe=Go()):(yr=oe,$o="value"in yr?yr.value:yr.textContent,Rl=!0)),je=Fd(ne,Xe),0<je.length&&(Xe=new _r(Xe,s,null,l,oe),de.push({event:Xe,listeners:je}),qe?Xe.data=qe:(qe=Cl(l),qe!==null&&(Xe.data=qe)))),(qe=ks?mw(s,l):pw(s,l))&&(Xe=Fd(ne,"onBeforeInput"),0<Xe.length&&(je=new _r("onBeforeInput","beforeinput",null,l,oe),de.push({event:je,listeners:Xe}),je.data=qe)),i2(de,s,ne,l,oe)}i0(de,a)})}function Tc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Fd(s,a){for(var l=a+"Capture",u=[];s!==null;){var f=s,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=$s(s,l),f!=null&&u.unshift(Tc(s,f,g)),f=$s(s,a),f!=null&&u.push(Tc(s,f,g))),s.tag===3)return u;s=s.return}return[]}function u2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function o0(s,a,l,u,f){for(var g=a._reactName,_=[];l!==null&&l!==u;){var R=l,F=R.alternate,ne=R.stateNode;if(R=R.tag,F!==null&&F===u)break;R!==5&&R!==26&&R!==27||ne===null||(F=ne,f?(ne=$s(l,g),ne!=null&&_.unshift(Tc(l,ne,F))):f||(ne=$s(l,g),ne!=null&&_.push(Tc(l,ne,F)))),l=l.return}_.length!==0&&s.push({event:a,listeners:_})}var d2=/\r\n?/g,h2=/\u0000|\uFFFD/g;function c0(s){return(typeof s=="string"?s:""+s).replace(d2,`
`).replace(h2,"")}function u0(s,a){return a=c0(a),c0(s)===a}function vt(s,a,l,u,f,g){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||ss(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&ss(s,""+u);break;case"className":gs(s,"class",u);break;case"tabIndex":gs(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":gs(s,l,u);break;case"style":Ho(s,u,g);break;case"data":if(a!=="object"){gs(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Nl(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&vt(s,a,"name",f.name,f,null),vt(s,a,"formEncType",f.formEncType,f,null),vt(s,a,"formMethod",f.formMethod,f,null),vt(s,a,"formTarget",f.formTarget,f,null)):(vt(s,a,"encType",f.encType,f,null),vt(s,a,"method",f.method,f,null),vt(s,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Nl(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=qs);break;case"onScroll":u!=null&&Ye("scroll",s);break;case"onScrollEnd":u!=null&&Ye("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Nl(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Ye("beforetoggle",s),Ye("toggle",s),vl(s,"popover",u);break;case"xlinkActuate":nn(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":nn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":nn(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":nn(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":nn(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":nn(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":nn(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":nn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":nn(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":vl(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Fu.get(l)||l,vl(s,l,u))}}function Sp(s,a,l,u,f,g){switch(l){case"style":Ho(s,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof u=="string"?ss(s,u):(typeof u=="number"||typeof u=="bigint")&&ss(s,""+u);break;case"onScroll":u!=null&&Ye("scroll",s);break;case"onScrollEnd":u!=null&&Ye("scrollend",s);break;case"onClick":u!=null&&(s.onclick=qs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),g=s[_n]||null,g=g!=null?g[l]:null,typeof g=="function"&&s.removeEventListener(a,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,f);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):vl(s,l,u)}}}function Dn(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",s),Ye("load",s);var u=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var _=l[g];if(_!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:vt(s,a,g,_,l,null)}}f&&vt(s,a,"srcSet",l.srcSet,l,null),u&&vt(s,a,"src",l.src,l,null);return;case"input":Ye("invalid",s);var R=g=_=f=null,F=null,ne=null;for(u in l)if(l.hasOwnProperty(u)){var oe=l[u];if(oe!=null)switch(u){case"name":f=oe;break;case"type":_=oe;break;case"checked":F=oe;break;case"defaultChecked":ne=oe;break;case"value":g=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,a));break;default:vt(s,a,u,oe,l,null)}}Vu(s,g,R,F,ne,_,f,!1);return;case"select":Ye("invalid",s),u=_=g=null;for(f in l)if(l.hasOwnProperty(f)&&(R=l[f],R!=null))switch(f){case"value":g=R;break;case"defaultValue":_=R;break;case"multiple":u=R;default:vt(s,a,f,R,l,null)}a=g,l=_,s.multiple=!!u,a!=null?Sa(s,!!u,a,!1):l!=null&&Sa(s,!!u,l,!0);return;case"textarea":Ye("invalid",s),g=f=u=null;for(_ in l)if(l.hasOwnProperty(_)&&(R=l[_],R!=null))switch(_){case"value":u=R;break;case"defaultValue":f=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:vt(s,a,_,R,l,null)}Na(s,u,f,g);return;case"option":for(F in l)l.hasOwnProperty(F)&&(u=l[F],u!=null)&&(F==="selected"?s.selected=u&&typeof u!="function"&&typeof u!="symbol":vt(s,a,F,u,l,null));return;case"dialog":Ye("beforetoggle",s),Ye("toggle",s),Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":Ye("load",s);break;case"video":case"audio":for(u=0;u<Nc.length;u++)Ye(Nc[u],s);break;case"image":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"embed":case"source":case"link":Ye("error",s),Ye("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in l)if(l.hasOwnProperty(ne)&&(u=l[ne],u!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:vt(s,a,ne,u,l,null)}return;default:if(Sl(a)){for(oe in l)l.hasOwnProperty(oe)&&(u=l[oe],u!==void 0&&Sp(s,a,oe,u,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(u=l[R],u!=null&&vt(s,a,R,u,l,null))}function f2(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,_=null,R=null,F=null,ne=null,oe=null;for(ie in l){var de=l[ie];if(l.hasOwnProperty(ie)&&de!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":F=de;default:u.hasOwnProperty(ie)||vt(s,a,ie,null,u,de)}}for(var se in u){var ie=u[se];if(de=l[se],u.hasOwnProperty(se)&&(ie!=null||de!=null))switch(se){case"type":g=ie;break;case"name":f=ie;break;case"checked":ne=ie;break;case"defaultChecked":oe=ie;break;case"value":_=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,a));break;default:ie!==de&&vt(s,a,se,ie,u,de)}}_l(s,_,R,F,ne,oe,g,f);return;case"select":ie=_=R=se=null;for(g in l)if(F=l[g],l.hasOwnProperty(g)&&F!=null)switch(g){case"value":break;case"multiple":ie=F;default:u.hasOwnProperty(g)||vt(s,a,g,null,u,F)}for(f in u)if(g=u[f],F=l[f],u.hasOwnProperty(f)&&(g!=null||F!=null))switch(f){case"value":se=g;break;case"defaultValue":R=g;break;case"multiple":_=g;default:g!==F&&vt(s,a,f,g,u,F)}a=R,l=_,u=ie,se!=null?Sa(s,!!l,se,!1):!!u!=!!l&&(a!=null?Sa(s,!!l,a,!0):Sa(s,!!l,l?[]:"",!1));return;case"textarea":ie=se=null;for(R in l)if(f=l[R],l.hasOwnProperty(R)&&f!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:vt(s,a,R,null,u,f)}for(_ in u)if(f=u[_],g=l[_],u.hasOwnProperty(_)&&(f!=null||g!=null))switch(_){case"value":se=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&vt(s,a,_,f,u,g)}Uu(s,se,ie);return;case"option":for(var Ce in l)se=l[Ce],l.hasOwnProperty(Ce)&&se!=null&&!u.hasOwnProperty(Ce)&&(Ce==="selected"?s.selected=!1:vt(s,a,Ce,null,u,se));for(F in u)se=u[F],ie=l[F],u.hasOwnProperty(F)&&se!==ie&&(se!=null||ie!=null)&&(F==="selected"?s.selected=se&&typeof se!="function"&&typeof se!="symbol":vt(s,a,F,se,u,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)se=l[Me],l.hasOwnProperty(Me)&&se!=null&&!u.hasOwnProperty(Me)&&vt(s,a,Me,null,u,se);for(ne in u)if(se=u[ne],ie=l[ne],u.hasOwnProperty(ne)&&se!==ie&&(se!=null||ie!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,a));break;default:vt(s,a,ne,se,u,ie)}return;default:if(Sl(a)){for(var _t in l)se=l[_t],l.hasOwnProperty(_t)&&se!==void 0&&!u.hasOwnProperty(_t)&&Sp(s,a,_t,void 0,u,se);for(oe in u)se=u[oe],ie=l[oe],!u.hasOwnProperty(oe)||se===ie||se===void 0&&ie===void 0||Sp(s,a,oe,se,u,ie);return}}for(var W in l)se=l[W],l.hasOwnProperty(W)&&se!=null&&!u.hasOwnProperty(W)&&vt(s,a,W,null,u,se);for(de in u)se=u[de],ie=l[de],!u.hasOwnProperty(de)||se===ie||se==null&&ie==null||vt(s,a,de,se,u,ie)}function d0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var f=l[u],g=f.transferSize,_=f.initiatorType,R=f.duration;if(g&&R&&d0(_)){for(_=0,R=f.responseEnd,u+=1;u<l.length;u++){var F=l[u],ne=F.startTime;if(ne>R)break;var oe=F.transferSize,de=F.initiatorType;oe&&d0(de)&&(F=F.responseEnd,_+=oe*(F<R?1:(R-ne)/(F-ne)))}if(--u,a+=8*(g+_)/(f.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Np=null,Tp=null;function Bd(s){return s.nodeType===9?s:s.ownerDocument}function h0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f0(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Ep(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var wp=null;function p2(){var s=window.event;return s&&s.type==="popstate"?s===wp?!1:(wp=s,!0):(wp=null,!1)}var m0=typeof setTimeout=="function"?setTimeout:void 0,g2=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,x2=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(s){return p0.resolve(null).then(s).catch(y2)}:m0;function y2(s){setTimeout(function(){throw s})}function Ga(s){return s==="head"}function g0(s,a){var l=a,u=0;do{var f=l.nextSibling;if(s.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(u===0){s.removeChild(f),so(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Ec(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Ec(l);for(var g=l.firstChild;g;){var _=g.nextSibling,R=g.nodeName;g[dr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=_}}else l==="body"&&Ec(s.ownerDocument.body);l=f}while(l);so(a)}function x0(s,a){var l=s;s=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=u}while(l)}function Ap(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ap(l),bl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function b2(s,a,l,u){for(;s.nodeType===1;){var f=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[dr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=Vs(s.nextSibling),s===null)break}return null}function v2(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Vs(s.nextSibling),s===null))return null;return s}function y0(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Vs(s.nextSibling),s===null))return null;return s}function Cp(s){return s.data==="$?"||s.data==="$~"}function Rp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function _2(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Vs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var jp=null;function b0(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return Vs(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function v0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function _0(s,a,l){switch(a=Bd(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Ec(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);bl(s)}var Us=new Map,S0=new Set;function Hd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var la=ce.d;ce.d={f:S2,r:N2,D:T2,C:E2,L:w2,m:A2,X:R2,S:C2,M:j2};function S2(){var s=la.f(),a=Md();return s||a}function N2(s){var a=Cs(s);a!==null&&a.tag===5&&a.type==="form"?Ub(a):la.r(s)}var eo=typeof document>"u"?null:document;function N0(s,a,l){var u=eo;if(u&&typeof a=="string"&&a){var f=ns(a);f='link[rel="'+s+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),S0.has(f)||(S0.add(f),s={rel:s,crossOrigin:l,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),Dn(a,"link",s),tn(a),u.head.appendChild(a)))}}function T2(s){la.D(s),N0("dns-prefetch",s,null)}function E2(s,a){la.C(s,a),N0("preconnect",s,a)}function w2(s,a,l){la.L(s,a,l);var u=eo;if(u&&s&&a){var f='link[rel="preload"][as="'+ns(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+ns(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+ns(l.imageSizes)+'"]')):f+='[href="'+ns(s)+'"]';var g=f;switch(a){case"style":g=to(s);break;case"script":g=no(s)}Us.has(g)||(s=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Us.set(g,s),u.querySelector(f)!==null||a==="style"&&u.querySelector(wc(g))||a==="script"&&u.querySelector(Ac(g))||(a=u.createElement("link"),Dn(a,"link",s),tn(a),u.head.appendChild(a)))}}function A2(s,a){la.m(s,a);var l=eo;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+ns(u)+'"][href="'+ns(s)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=no(s)}if(!Us.has(g)&&(s=v({rel:"modulepreload",href:s},a),Us.set(g,s),l.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ac(g)))return}u=l.createElement("link"),Dn(u,"link",s),tn(u),l.head.appendChild(u)}}}function C2(s,a,l){la.S(s,a,l);var u=eo;if(u&&s){var f=fr(u).hoistableStyles,g=to(s);a=a||"default";var _=f.get(g);if(!_){var R={loading:0,preload:null};if(_=u.querySelector(wc(g)))R.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Us.get(g))&&kp(s,l);var F=_=u.createElement("link");tn(F),Dn(F,"link",s),F._p=new Promise(function(ne,oe){F.onload=ne,F.onerror=oe}),F.addEventListener("load",function(){R.loading|=1}),F.addEventListener("error",function(){R.loading|=2}),R.loading|=4,qd(_,a,u)}_={type:"stylesheet",instance:_,count:1,state:R},f.set(g,_)}}}function R2(s,a){la.X(s,a);var l=eo;if(l&&s){var u=fr(l).hoistableScripts,f=no(s),g=u.get(f);g||(g=l.querySelector(Ac(f)),g||(s=v({src:s,async:!0},a),(a=Us.get(f))&&Ip(s,a),g=l.createElement("script"),tn(g),Dn(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function j2(s,a){la.M(s,a);var l=eo;if(l&&s){var u=fr(l).hoistableScripts,f=no(s),g=u.get(f);g||(g=l.querySelector(Ac(f)),g||(s=v({src:s,async:!0,type:"module"},a),(a=Us.get(f))&&Ip(s,a),g=l.createElement("script"),tn(g),Dn(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function T0(s,a,l,u){var f=(f=ge.current)?Hd(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=to(l.href),l=fr(f).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=to(l.href);var g=fr(f).hoistableStyles,_=g.get(s);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,_),(g=f.querySelector(wc(s)))&&!g._p&&(_.instance=g,_.state.loading=5),Us.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Us.set(s,l),g||k2(f,s,l,_.state))),a&&u===null)throw Error(r(528,""));return _}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=no(l),l=fr(f).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function to(s){return'href="'+ns(s)+'"'}function wc(s){return'link[rel="stylesheet"]['+s+"]"}function E0(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function k2(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Dn(a,"link",l),tn(a),s.head.appendChild(a))}function no(s){return'[src="'+ns(s)+'"]'}function Ac(s){return"script[async]"+s}function w0(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+ns(l.href)+'"]');if(u)return a.instance=u,tn(u),u;var f=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),tn(u),Dn(u,"style",f),qd(u,l.precedence,s),a.instance=u;case"stylesheet":f=to(l.href);var g=s.querySelector(wc(f));if(g)return a.state.loading|=4,a.instance=g,tn(g),g;u=E0(l),(f=Us.get(f))&&kp(u,f),g=(s.ownerDocument||s).createElement("link"),tn(g);var _=g;return _._p=new Promise(function(R,F){_.onload=R,_.onerror=F}),Dn(g,"link",u),a.state.loading|=4,qd(g,l.precedence,s),a.instance=g;case"script":return g=no(l.src),(f=s.querySelector(Ac(g)))?(a.instance=f,tn(f),f):(u=l,(f=Us.get(g))&&(u=v({},l),Ip(u,f)),s=s.ownerDocument||s,f=s.createElement("script"),tn(f),Dn(f,"link",u),s.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,qd(u,l.precedence,s));return a.instance}function qd(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,_=0;_<u.length;_++){var R=u[_];if(R.dataset.precedence===a)g=R;else if(g!==f)break}g?g.parentNode.insertBefore(s,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function kp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Ip(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var $d=null;function A0(s,a,l){if($d===null){var u=new Map,f=$d=new Map;f.set(l,u)}else f=$d,u=f.get(l),u||(u=new Map,f.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),f=0;f<l.length;f++){var g=l[f];if(!(g[dr]||g[en]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var _=g.getAttribute(a)||"";_=s+_;var R=u.get(_);R?R.push(g):u.set(_,[g])}}return u}function C0(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function I2(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function R0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function D2(s,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=to(u.href),g=a.querySelector(wc(f));if(g){a=g._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Gd.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=g,tn(g);return}g=a.ownerDocument||a,u=E0(u),(f=Us.get(f))&&kp(u,f),g=g.createElement("link"),tn(g);var _=g;_._p=new Promise(function(R,F){_.onload=R,_.onerror=F}),Dn(g,"link",u),l.instance=g}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Gd.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Dp=0;function M2(s,a){return s.stylesheets&&s.count===0&&Yd(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var u=setTimeout(function(){if(s.stylesheets&&Yd(s,s.stylesheets),s.unsuspend){var g=s.unsuspend;s.unsuspend=null,g()}},6e4+a);0<s.imgBytes&&Dp===0&&(Dp=62500*m2());var f=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Yd(s,s.stylesheets),s.unsuspend)){var g=s.unsuspend;s.unsuspend=null,g()}},(s.imgBytes>Dp?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Kd=null;function Yd(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Kd=new Map,a.forEach(P2,s),Kd=null,Gd.call(s))}function P2(s,a){if(!(a.state.loading&4)){var l=Kd.get(s);if(l)var u=l.get(null);else{l=new Map,Kd.set(s,l);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var _=f[g];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),u=_)}u&&l.set(null,u)}f=a.instance,_=f.getAttribute("data-precedence"),g=l.get(_)||u,g===u&&l.set(null,f),l.set(_,f),this.count++,u=Gd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),a.state.loading|=4}}var Cc={$$typeof:$,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function O2(s,a,l,u,f,g,_,R,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=st(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.hiddenUpdates=st(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function j0(s,a,l,u,f,g,_,R,F,ne,oe,de){return s=new O2(s,a,l,_,F,ne,oe,de,R),a=1,g===!0&&(a|=24),g=ys(3,null,null,a),s.current=g,g.stateNode=s,a=hm(),a.refCount++,s.pooledCache=a,a.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:a},gm(g),s}function k0(s){return s?(s=Dl,s):Dl}function I0(s,a,l,u,f,g){f=k0(f),u.context===null?u.context=f:u.pendingContext=f,u=Pa(a),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Oa(s,u,a),l!==null&&(os(l,s,a),ic(l,s,a))}function D0(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Mp(s,a){D0(s,a),(s=s.alternate)&&D0(s,a)}function M0(s){if(s.tag===13||s.tag===31){var a=Oi(s,67108864);a!==null&&os(a,s,67108864),Mp(s,67108864)}}function P0(s){if(s.tag===13||s.tag===31){var a=Ns();a=fs(a);var l=Oi(s,a);l!==null&&os(l,s,a),Mp(s,a)}}var Qd=!0;function L2(s,a,l,u){var f=B.T;B.T=null;var g=ce.p;try{ce.p=2,Pp(s,a,l,u)}finally{ce.p=g,B.T=f}}function V2(s,a,l,u){var f=B.T;B.T=null;var g=ce.p;try{ce.p=8,Pp(s,a,l,u)}finally{ce.p=g,B.T=f}}function Pp(s,a,l,u){if(Qd){var f=Op(u);if(f===null)_p(s,a,u,Xd,l),L0(s,u);else if(z2(f,s,a,l,u))u.stopPropagation();else if(L0(s,u),a&4&&-1<U2.indexOf(s)){for(;f!==null;){var g=Cs(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var _=Fe(g.pendingLanes);if(_!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var F=1<<31-Nt(_);R.entanglements[1]|=F,_&=~F}wr(g),(ot&6)===0&&(Id=Zt()+500,Sc(0))}}break;case 31:case 13:R=Oi(g,2),R!==null&&os(R,g,2),Md(),Mp(g,2)}if(g=Op(u),g===null&&_p(s,a,u,Xd,l),g===f)break;f=g}f!==null&&u.stopPropagation()}else _p(s,a,u,null,l)}}function Op(s){return s=Rs(s),Lp(s)}var Xd=null;function Lp(s){if(Xd=null,s=hr(s),s!==null){var a=c(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=d(a),s!==null)return s;s=null}else if(l===31){if(s=m(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Xd=s,null}function O0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hs()){case zr:return 2;case es:return 8;case An:case ts:return 32;case Fr:return 268435456;default:return 32}default:return 32}}var Vp=!1,Ka=null,Ya=null,Qa=null,Rc=new Map,jc=new Map,Xa=[],U2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L0(s,a){switch(s){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Rc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(a.pointerId)}}function kc(s,a,l,u,f,g){return s===null||s.nativeEvent!==g?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},a!==null&&(a=Cs(a),a!==null&&M0(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),s)}function z2(s,a,l,u,f){switch(a){case"focusin":return Ka=kc(Ka,s,a,l,u,f),!0;case"dragenter":return Ya=kc(Ya,s,a,l,u,f),!0;case"mouseover":return Qa=kc(Qa,s,a,l,u,f),!0;case"pointerover":var g=f.pointerId;return Rc.set(g,kc(Rc.get(g)||null,s,a,l,u,f)),!0;case"gotpointercapture":return g=f.pointerId,jc.set(g,kc(jc.get(g)||null,s,a,l,u,f)),!0}return!1}function V0(s){var a=hr(s.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){s.blockedOn=a,Cn(s.priority,function(){P0(l)});return}}else if(a===31){if(a=m(l),a!==null){s.blockedOn=a,Cn(s.priority,function(){P0(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Op(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);qo=u,l.target.dispatchEvent(u),qo=null}else return a=Cs(l),a!==null&&M0(a),s.blockedOn=l,!1;a.shift()}return!0}function U0(s,a,l){Wd(s)&&l.delete(a)}function F2(){Vp=!1,Ka!==null&&Wd(Ka)&&(Ka=null),Ya!==null&&Wd(Ya)&&(Ya=null),Qa!==null&&Wd(Qa)&&(Qa=null),Rc.forEach(U0),jc.forEach(U0)}function Jd(s,a){s.blockedOn===a&&(s.blockedOn=null,Vp||(Vp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,F2)))}var Zd=null;function z0(s){Zd!==s&&(Zd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Zd===s&&(Zd=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],f=s[a+2];if(typeof u!="function"){if(Lp(u||l)===null)continue;break}var g=Cs(l);g!==null&&(s.splice(a,3),a-=3,Om(g,{pending:!0,data:f,method:l.method,action:u},u,f))}}))}function so(s){function a(F){return Jd(F,s)}Ka!==null&&Jd(Ka,s),Ya!==null&&Jd(Ya,s),Qa!==null&&Jd(Qa,s),Rc.forEach(a),jc.forEach(a);for(var l=0;l<Xa.length;l++){var u=Xa[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Xa.length&&(l=Xa[0],l.blockedOn===null);)V0(l),l.blockedOn===null&&Xa.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],_=f[_n]||null;if(typeof g=="function")_||z0(l);else if(_){var R=null;if(g&&g.hasAttribute("formAction")){if(f=g,_=g[_n]||null)R=_.formAction;else if(Lp(f)!==null)continue}else R=_.action;typeof R=="function"?l[u+1]=R:(l.splice(u,3),u-=3),z0(l)}}}function F0(){function s(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Up(s){this._internalRoot=s}eh.prototype.render=Up.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,u=Ns();I0(l,u,s,a,null,null)},eh.prototype.unmount=Up.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;I0(s.current,2,null,s,null,null),Md(),a[ur]=null}};function eh(s){this._internalRoot=s}eh.prototype.unstable_scheduleHydration=function(s){if(s){var a=ms();s={blockedOn:null,target:s,priority:a};for(var l=0;l<Xa.length&&a!==0&&a<Xa[l].priority;l++);Xa.splice(l,0,s),l===0&&V0(s)}};var B0=e.version;if(B0!=="19.2.3")throw Error(r(527,B0,"19.2.3"));ce.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=x(a),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var B2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Gn=th.inject(B2),zt=th}catch{}}return Dc.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,u="",f=Qb,g=Xb,_=Wb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=j0(s,1,!1,null,null,l,u,null,f,g,_,F0),s[ur]=a.current,vp(s),new Up(a)},Dc.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var u=!1,f="",g=Qb,_=Xb,R=Wb,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=j0(s,1,!0,a,l??null,u,f,F,g,_,R,F0),a.context=k0(null),l=a.current,u=Ns(),u=fs(u),f=Pa(u),f.callback=null,Oa(l,f,u),l=u,a.current.lanes=l,Un(a,l),wr(a),s[ur]=a.current,vp(s),new eh(a)},Dc.version="19.2.3",Dc}var J0;function J2(){if(J0)return Bp.exports;J0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bp.exports=W2(),Bp.exports}var Z2=J2();var Z0="popstate";function eA(t={}){function e(r,i){let{pathname:c,search:d,hash:m}=r.location;return gg("",{pathname:c,search:d,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Zc(i)}return nA(e,n,null,t)}function Vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tA(){return Math.random().toString(36).substring(2,10)}function e_(t,e){return{usr:t.state,key:t.key,idx:e}}function gg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?To(e):e,state:n,key:e&&e.key||r||tA()}}function Zc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function To(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function nA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:c=!1}=r,d=i.history,m="POP",p=null,x=y();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function y(){return(d.state||{idx:null}).idx}function v(){m="POP";let k=y(),z=k==null?null:k-x;x=k,p&&p({action:m,location:O.location,delta:z})}function T(k,z){m="PUSH";let U=gg(O.location,k,z);x=y()+1;let $=e_(U,x),X=O.createHref(U);try{d.pushState($,"",X)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(X)}c&&p&&p({action:m,location:O.location,delta:1})}function I(k,z){m="REPLACE";let U=gg(O.location,k,z);x=y();let $=e_(U,x),X=O.createHref(U);d.replaceState($,"",X),c&&p&&p({action:m,location:O.location,delta:0})}function L(k){return sA(k)}let O={get action(){return m},get location(){return t(i,d)},listen(k){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(Z0,v),p=k,()=>{i.removeEventListener(Z0,v),p=null}},createHref(k){return e(i,k)},createURL:L,encodeLocation(k){let z=L(k);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:I,go(k){return d.go(k)}};return O}function sA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Vt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Zc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function bS(t,e,n="/"){return rA(t,e,n,!1)}function rA(t,e,n,r){let i=typeof e=="string"?To(e):e,c=pa(i.pathname||"/",n);if(c==null)return null;let d=vS(t);aA(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let x=gA(c);m=mA(d[p],x,r)}return m}function vS(t,e=[],n=[],r="",i=!1){let c=(d,m,p=i,x)=>{let y={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&p)return;Vt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let v=ma([r,y.relativePath]),T=n.concat(y);d.children&&d.children.length>0&&(Vt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),vS(d.children,e,T,v,p)),!(d.path==null&&!d.index)&&e.push({path:v,score:hA(v,d.index),routesMeta:T})};return t.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let p of _S(d.path))c(d,m,!0,p)}),e}function _S(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return i?[c,""]:[c];let d=_S(r.join("/")),m=[];return m.push(...d.map(p=>p===""?c:[c,p].join("/"))),i&&m.push(...d),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function aA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var iA=/^:[\w-]+$/,lA=3,oA=2,cA=1,uA=10,dA=-2,t_=t=>t==="*";function hA(t,e){let n=t.split("/"),r=n.length;return n.some(t_)&&(r+=dA),e&&(r+=oA),n.filter(i=>!t_(i)).reduce((i,c)=>i+(iA.test(c)?lA:c===""?cA:uA),r)}function fA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function mA(t,e,n=!1){let{routesMeta:r}=t,i={},c="/",d=[];for(let m=0;m<r.length;++m){let p=r[m],x=m===r.length-1,y=c==="/"?e:e.slice(c.length)||"/",v=kh({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},y),T=p.route;if(!v&&x&&n&&!r[r.length-1].route.index&&(v=kh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!v)return null;Object.assign(i,v.params),d.push({params:i,pathname:ma([c,v.pathname]),pathnameBase:vA(ma([c,v.pathnameBase])),route:T}),v.pathnameBase!=="/"&&(c=ma([c,v.pathnameBase]))}return d}function kh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let c=i[0],d=c.replace(/(.)\/+$/,"$1"),m=i.slice(1);return{params:r.reduce((x,{paramName:y,isOptional:v},T)=>{if(y==="*"){let L=m[T]||"";d=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const I=m[T];return v&&!I?x[y]=void 0:x[y]=(I||"").replace(/%2F/g,"/"),x},{}),pathname:c,pathnameBase:d,pattern:t}}function pA(t,e=!1,n=!0){sr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(r.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function gA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function pa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var SS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xA=t=>SS.test(t);function yA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?To(t):t,c;if(n)if(xA(n))c=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),sr(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?c=n_(n.substring(1),"/"):c=n_(n,e)}else c=e;return{pathname:c,search:_A(r),hash:SA(i)}}function n_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function NS(t){let e=bA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function TS(t,e,n,r=!1){let i;typeof t=="string"?i=To(t):(i={...t},Vt(!i.pathname||!i.pathname.includes("?"),Gp("?","pathname","search",i)),Vt(!i.pathname||!i.pathname.includes("#"),Gp("#","pathname","hash",i)),Vt(!i.search||!i.search.includes("#"),Gp("#","search","hash",i)));let c=t===""||i.pathname==="",d=c?"/":i.pathname,m;if(d==null)m=n;else{let v=e.length-1;if(!r&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),v-=1;i.pathname=T.join("/")}m=v>=0?e[v]:"/"}let p=yA(i,m),x=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(x||y)&&(p.pathname+="/"),p}var ma=t=>t.join("/").replace(/\/\/+/g,"/"),vA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_A=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,NA=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function TA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function EA(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ES=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wS(t,e){let n=t;if(typeof n!="string"||!SS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(ES)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),m=pa(d.pathname,e);d.origin===c.origin&&m!=null?n=m+d.search+d.hash:i=!0}catch{sr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var AS=["POST","PUT","PATCH","DELETE"];new Set(AS);var wA=["GET",...AS];new Set(wA);var Eo=E.createContext(null);Eo.displayName="DataRouter";var mf=E.createContext(null);mf.displayName="DataRouterState";var AA=E.createContext(!1),CS=E.createContext({isTransitioning:!1});CS.displayName="ViewTransition";var CA=E.createContext(new Map);CA.displayName="Fetchers";var RA=E.createContext(null);RA.displayName="Await";var Hs=E.createContext(null);Hs.displayName="Navigation";var fu=E.createContext(null);fu.displayName="Location";var lr=E.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var ix=E.createContext(null);ix.displayName="RouteError";var RS="REACT_ROUTER_ERROR",jA="REDIRECT",kA="ROUTE_ERROR_RESPONSE";function IA(t){if(t.startsWith(`${RS}:${jA}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function DA(t){if(t.startsWith(`${RS}:${kA}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new NA(e.status,e.statusText,e.data)}catch{}}function MA(t,{relative:e}={}){Vt(mu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=E.useContext(Hs),{hash:i,pathname:c,search:d}=gu(t,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:ma([n,c])),r.createHref({pathname:m,search:d,hash:i})}function mu(){return E.useContext(fu)!=null}function _i(){return Vt(mu(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(fu).location}var jS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kS(t){E.useContext(Hs).static||E.useLayoutEffect(t)}function pu(){let{isDataRoute:t}=E.useContext(lr);return t?QA():PA()}function PA(){Vt(mu(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(Eo),{basename:e,navigator:n}=E.useContext(Hs),{matches:r}=E.useContext(lr),{pathname:i}=_i(),c=JSON.stringify(NS(r)),d=E.useRef(!1);return kS(()=>{d.current=!0}),E.useCallback((p,x={})=>{if(sr(d.current,jS),!d.current)return;if(typeof p=="number"){n.go(p);return}let y=TS(p,JSON.parse(c),i,x.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ma([e,y.pathname])),(x.replace?n.replace:n.push)(y,x.state,x)},[e,n,c,i,t])}var OA=E.createContext(null);function LA(t){let e=E.useContext(lr).outlet;return E.useMemo(()=>e&&E.createElement(OA.Provider,{value:t},e),[e,t])}function lx(){let{matches:t}=E.useContext(lr),e=t[t.length-1];return e?e.params:{}}function gu(t,{relative:e}={}){let{matches:n}=E.useContext(lr),{pathname:r}=_i(),i=JSON.stringify(NS(n));return E.useMemo(()=>TS(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function VA(t,e){return IS(t,e)}function IS(t,e,n,r,i){Vt(mu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=E.useContext(Hs),{matches:d}=E.useContext(lr),m=d[d.length-1],p=m?m.params:{},x=m?m.pathname:"/",y=m?m.pathnameBase:"/",v=m&&m.route;{let U=v&&v.path||"";MS(x,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let T=_i(),I;if(e){let U=typeof e=="string"?To(e):e;Vt(y==="/"||U.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${U.pathname}" was given in the \`location\` prop.`),I=U}else I=T;let L=I.pathname||"/",O=L;if(y!=="/"){let U=y.replace(/^\//,"").split("/");O="/"+L.replace(/^\//,"").split("/").slice(U.length).join("/")}let k=bS(t,{pathname:O});sr(v||k!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),sr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=HA(k&&k.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:ma([y,c.encodeLocation?c.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?y:ma([y,c.encodeLocation?c.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),d,n,r,i);return e&&z?E.createElement(fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},z):z}function UA(){let t=YA(),e=TA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:c},"ErrorBoundary")," or"," ",E.createElement("code",{style:c},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:i},n):null,d)}var zA=E.createElement(UA,null),DS=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=DA(t.digest);n&&(t=n)}let e=t!==void 0?E.createElement(lr.Provider,{value:this.props.routeContext},E.createElement(ix.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?E.createElement(FA,{error:t},e):e}};DS.contextType=AA;var Kp=new WeakMap;function FA({children:t,error:e}){let{basename:n}=E.useContext(Hs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=IA(e.digest);if(r){let i=Kp.get(e);if(i)throw i;let c=wS(r.location,n);if(ES&&!Kp.get(e))if(c.isExternal||r.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:r.replace}));throw Kp.set(e,d),d}return E.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return t}function BA({routeContext:t,match:e,children:n}){let r=E.useContext(Eo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(lr.Provider,{value:t},n)}function HA(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,d=n?.errors;if(d!=null){let y=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);Vt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let m=!1,p=-1;if(n)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:T,errors:I}=n,L=v.route.loader&&!T.hasOwnProperty(v.route.id)&&(!I||I[v.route.id]===void 0);if(v.route.lazy||L){m=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let x=n&&r?(y,v)=>{r(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:EA(n.matches),errorInfo:v})}:void 0;return c.reduceRight((y,v,T)=>{let I,L=!1,O=null,k=null;n&&(I=d&&v.route.id?d[v.route.id]:void 0,O=v.route.errorElement||zA,m&&(p<0&&T===0?(MS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,k=null):p===T&&(L=!0,k=v.route.hydrateFallbackElement||null)));let z=e.concat(c.slice(0,T+1)),U=()=>{let $;return I?$=O:L?$=k:v.route.Component?$=E.createElement(v.route.Component,null):v.route.element?$=v.route.element:$=y,E.createElement(BA,{match:v,routeContext:{outlet:y,matches:z,isDataRoute:n!=null},children:$})};return n&&(v.route.ErrorBoundary||v.route.errorElement||T===0)?E.createElement(DS,{location:n.location,revalidation:n.revalidation,component:O,error:I,children:U(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:x}):U()},null)}function ox(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qA(t){let e=E.useContext(Eo);return Vt(e,ox(t)),e}function $A(t){let e=E.useContext(mf);return Vt(e,ox(t)),e}function GA(t){let e=E.useContext(lr);return Vt(e,ox(t)),e}function cx(t){let e=GA(t),n=e.matches[e.matches.length-1];return Vt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function KA(){return cx("useRouteId")}function YA(){let t=E.useContext(ix),e=$A("useRouteError"),n=cx("useRouteError");return t!==void 0?t:e.errors?.[n]}function QA(){let{router:t}=qA("useNavigate"),e=cx("useNavigate"),n=E.useRef(!1);return kS(()=>{n.current=!0}),E.useCallback(async(i,c={})=>{sr(n.current,jS),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...c}))},[t,e])}var s_={};function MS(t,e,n){!e&&!s_[t]&&(s_[t]=!0,sr(!1,n))}E.memo(XA);function XA({routes:t,future:e,state:n,onError:r}){return IS(t,void 0,n,r,e)}function WA(t){return LA(t.context)}function cs(t){Vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JA({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:c=!1,unstable_useTransitions:d}){Vt(!mu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:m,navigator:i,static:c,unstable_useTransitions:d,future:{}}),[m,i,c,d]);typeof n=="string"&&(n=To(n));let{pathname:x="/",search:y="",hash:v="",state:T=null,key:I="default"}=n,L=E.useMemo(()=>{let O=pa(x,m);return O==null?null:{location:{pathname:O,search:y,hash:v,state:T,key:I},navigationType:r}},[m,x,y,v,T,I,r]);return sr(L!=null,`<Router basename="${m}"> is not able to match the URL "${x}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:E.createElement(Hs.Provider,{value:p},E.createElement(fu.Provider,{children:e,value:L}))}function ZA({children:t,location:e}){return VA(xg(t),e)}function xg(t,e=[]){let n=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let c=[...e,i];if(r.type===E.Fragment){n.push.apply(n,xg(r.props.children,c));return}Vt(r.type===cs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=xg(r.props.children,c)),n.push(d)}),n}var mh="get",ph="application/x-www-form-urlencoded";function pf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function eC(t){return pf(t)&&t.tagName.toLowerCase()==="button"}function tC(t){return pf(t)&&t.tagName.toLowerCase()==="form"}function nC(t){return pf(t)&&t.tagName.toLowerCase()==="input"}function sC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rC(t,e){return t.button===0&&(!e||e==="_self")&&!sC(t)}var nh=null;function aC(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var iC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yp(t){return t!=null&&!iC.has(t)?(sr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ph}"`),null):t}function lC(t,e){let n,r,i,c,d;if(tC(t)){let m=t.getAttribute("action");r=m?pa(m,e):null,n=t.getAttribute("method")||mh,i=Yp(t.getAttribute("enctype"))||ph,c=new FormData(t)}else if(eC(t)||nC(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||m.getAttribute("action");if(r=p?pa(p,e):null,n=t.getAttribute("formmethod")||m.getAttribute("method")||mh,i=Yp(t.getAttribute("formenctype"))||Yp(m.getAttribute("enctype"))||ph,c=new FormData(m,t),!aC()){let{name:x,type:y,value:v}=t;if(y==="image"){let T=x?`${x}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else x&&c.append(x,v)}}else{if(pf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mh,r=null,i=ph,d=t}return c&&i==="text/plain"&&(d=c,c=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ux(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oC(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&pa(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function cC(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function dC(t,e,n){let r=await Promise.all(t.map(async i=>{let c=e.routes[i.route.id];if(c){let d=await cC(c,n);return d.links?d.links():[]}return[]}));return pC(r.flat(1).filter(uC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function r_(t,e,n,r,i,c){let d=(p,x)=>n[x]?p.route.id!==n[x].route.id:!0,m=(p,x)=>n[x].pathname!==p.pathname||n[x].route.path?.endsWith("*")&&n[x].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,x)=>d(p,x)||m(p,x)):c==="data"?e.filter((p,x)=>{let y=r.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(d(p,x)||m(p,x))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function hC(t,e,{includeHydrateFallback:n}={}){return fC(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function fC(t){return[...new Set(t)]}function mC(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function pC(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let c=JSON.stringify(mC(i));return n.has(c)||(n.add(c),r.push({key:c,link:i})),r},[])}function PS(){let t=E.useContext(Eo);return ux(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function gC(){let t=E.useContext(mf);return ux(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dx=E.createContext(void 0);dx.displayName="FrameworkContext";function OS(){let t=E.useContext(dx);return ux(t,"You must render this element inside a <HydratedRouter> element"),t}function xC(t,e){let n=E.useContext(dx),[r,i]=E.useState(!1),[c,d]=E.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:x,onMouseLeave:y,onTouchStart:v}=e,T=E.useRef(null);E.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let O=z=>{z.forEach(U=>{d(U.isIntersecting)})},k=new IntersectionObserver(O,{threshold:.5});return T.current&&k.observe(T.current),()=>{k.disconnect()}}},[t]),E.useEffect(()=>{if(r){let O=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(O)}}},[r]);let I=()=>{i(!0)},L=()=>{i(!1),d(!1)};return n?t!=="intent"?[c,T,{}]:[c,T,{onFocus:Mc(m,I),onBlur:Mc(p,L),onMouseEnter:Mc(x,I),onMouseLeave:Mc(y,L),onTouchStart:Mc(v,I)}]:[!1,T,{}]}function Mc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function yC({page:t,...e}){let{router:n}=PS(),r=E.useMemo(()=>bS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?E.createElement(vC,{page:t,matches:r,...e}):null}function bC(t){let{manifest:e,routeModules:n}=OS(),[r,i]=E.useState([]);return E.useEffect(()=>{let c=!1;return dC(t,e,n).then(d=>{c||i(d)}),()=>{c=!0}},[t,e,n]),r}function vC({page:t,matches:e,...n}){let r=_i(),{future:i,manifest:c,routeModules:d}=OS(),{basename:m}=PS(),{loaderData:p,matches:x}=gC(),y=E.useMemo(()=>r_(t,e,x,c,r,"data"),[t,e,x,c,r]),v=E.useMemo(()=>r_(t,e,x,c,r,"assets"),[t,e,x,c,r]),T=E.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let O=new Set,k=!1;if(e.forEach(U=>{let $=c.routes[U.route.id];!$||!$.hasLoader||(!y.some(X=>X.route.id===U.route.id)&&U.route.id in p&&d[U.route.id]?.shouldRevalidate||$.hasClientLoader?k=!0:O.add(U.route.id))}),O.size===0)return[];let z=oC(t,m,i.unstable_trailingSlashAwareDataRequests,"data");return k&&O.size>0&&z.searchParams.set("_routes",e.filter(U=>O.has(U.route.id)).map(U=>U.route.id).join(",")),[z.pathname+z.search]},[m,i.unstable_trailingSlashAwareDataRequests,p,r,c,y,e,t,d]),I=E.useMemo(()=>hC(v,c),[v,c]),L=bC(v);return E.createElement(E.Fragment,null,T.map(O=>E.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...n})),I.map(O=>E.createElement("link",{key:O,rel:"modulepreload",href:O,...n})),L.map(({key:O,link:k})=>E.createElement("link",{key:O,nonce:n.nonce,...k})))}function _C(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var SC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SC&&(window.__reactRouterVersion="7.12.0")}catch{}function NC({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=E.useRef();i.current==null&&(i.current=eA({window:r,v5Compat:!0}));let c=i.current,[d,m]=E.useState({action:c.action,location:c.location}),p=E.useCallback(x=>{n===!1?m(x):E.startTransition(()=>m(x))},[n]);return E.useLayoutEffect(()=>c.listen(p),[c,p]),E.createElement(JA,{basename:t,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var LS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,On=E.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:c,replace:d,state:m,target:p,to:x,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:T,...I},L){let{basename:O,unstable_useTransitions:k}=E.useContext(Hs),z=typeof x=="string"&&LS.test(x),U=wS(x,O);x=U.to;let $=MA(x,{relative:i}),[X,K,re]=xC(r,I),j=AC(x,{replace:d,state:m,target:p,preventScrollReset:y,relative:i,viewTransition:v,unstable_defaultShouldRevalidate:T,unstable_useTransitions:k});function S(P){e&&e(P),P.defaultPrevented||j(P)}let C=E.createElement("a",{...I,...re,href:U.absoluteURL||$,onClick:U.isExternal||c?e:S,ref:_C(L,K),target:p,"data-discover":!z&&n==="render"?"true":void 0});return X&&!z?E.createElement(E.Fragment,null,C,E.createElement(yC,{page:$})):C});On.displayName="Link";var TC=E.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:c,to:d,viewTransition:m,children:p,...x},y){let v=gu(d,{relative:x.relative}),T=_i(),I=E.useContext(mf),{navigator:L,basename:O}=E.useContext(Hs),k=I!=null&&IC(v)&&m===!0,z=L.encodeLocation?L.encodeLocation(v).pathname:v.pathname,U=T.pathname,$=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(U=U.toLowerCase(),$=$?$.toLowerCase():null,z=z.toLowerCase()),$&&O&&($=pa($,O)||$);const X=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let K=U===z||!i&&U.startsWith(z)&&U.charAt(X)==="/",re=$!=null&&($===z||!i&&$.startsWith(z)&&$.charAt(z.length)==="/"),j={isActive:K,isPending:re,isTransitioning:k},S=K?e:void 0,C;typeof r=="function"?C=r(j):C=[r,K?"active":null,re?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let P=typeof c=="function"?c(j):c;return E.createElement(On,{...x,"aria-current":S,className:C,ref:y,style:P,to:d,viewTransition:m},typeof p=="function"?p(j):p)});TC.displayName="NavLink";var EC=E.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:c,method:d=mh,action:m,onSubmit:p,relative:x,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:T,...I},L)=>{let{unstable_useTransitions:O}=E.useContext(Hs),k=jC(),z=kC(m,{relative:x}),U=d.toLowerCase()==="get"?"get":"post",$=typeof m=="string"&&LS.test(m),X=K=>{if(p&&p(K),K.defaultPrevented)return;K.preventDefault();let re=K.nativeEvent.submitter,j=re?.getAttribute("formmethod")||d,S=()=>k(re||K.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:i,state:c,relative:x,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:T});O&&n!==!1?E.startTransition(()=>S()):S()};return E.createElement("form",{ref:L,method:U,action:z,onSubmit:r?p:X,...I,"data-discover":!$&&t==="render"?"true":void 0})});EC.displayName="Form";function wC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VS(t){let e=E.useContext(Eo);return Vt(e,wC(t)),e}function AC(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let x=pu(),y=_i(),v=gu(t,{relative:c});return E.useCallback(T=>{if(rC(T,e)){T.preventDefault();let I=n!==void 0?n:Zc(y)===Zc(v),L=()=>x(t,{replace:I,state:r,preventScrollReset:i,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m});p?E.startTransition(()=>L()):L()}},[y,x,v,n,r,e,t,i,c,d,m,p])}var CC=0,RC=()=>`__${String(++CC)}__`;function jC(){let{router:t}=VS("useSubmit"),{basename:e}=E.useContext(Hs),n=KA(),r=t.fetch,i=t.navigate;return E.useCallback(async(c,d={})=>{let{action:m,method:p,encType:x,formData:y,body:v}=lC(c,e);if(d.navigate===!1){let T=d.fetcherKey||RC();await r(T,n,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||p,formEncType:d.encType||x,flushSync:d.flushSync})}else await i(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||p,formEncType:d.encType||x,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,i,e,n])}function kC(t,{relative:e}={}){let{basename:n}=E.useContext(Hs),r=E.useContext(lr);Vt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),c={...gu(t||".",{relative:e})},d=_i();if(t==null){c.search=d.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(v=>v).forEach(v=>m.append("index",v));let y=m.toString();c.search=y?`?${y}`:""}}return(!t||t===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:ma([n,c.pathname])),Zc(c)}function IC(t,{relative:e}={}){let n=E.useContext(CS);Vt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=VS("useViewTransitionState"),i=gu(t,{relative:e});if(!n.isTransitioning)return!1;let c=pa(n.currentLocation.pathname,r)||n.currentLocation.pathname,d=pa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return kh(i.pathname,d)!=null||kh(i.pathname,c)!=null}var Lc=yS();const a_=t=>{let e;const n=new Set,r=(x,y)=>{const v=typeof x=="function"?x(e):x;if(!Object.is(v,e)){const T=e;e=y??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(I=>I(e,T))}},i=()=>e,m={setState:r,getState:i,getInitialState:()=>p,subscribe:x=>(n.add(x),()=>n.delete(x))},p=e=t(r,i,m);return m},DC=(t=>t?a_(t):a_),MC=t=>t;function PC(t,e=MC){const n=St.useSyncExternalStore(t.subscribe,St.useCallback(()=>e(t.getState()),[t,e]),St.useCallback(()=>e(t.getInitialState()),[t,e]));return St.useDebugValue(n),n}const OC=t=>{const e=DC(t),n=r=>PC(e,r);return Object.assign(n,e),n},xu=(t=>OC);function LC(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var c;const d=p=>p===null?null:JSON.parse(p,void 0),m=(c=n.getItem(i))!=null?c:null;return m instanceof Promise?m.then(d):d(m)},setItem:(i,c)=>n.setItem(i,JSON.stringify(c,void 0)),removeItem:i=>n.removeItem(i)}}const yg=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return yg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return yg(r)(n)}}}},VC=(t,e)=>(n,r,i)=>{let c={storage:LC(()=>localStorage),partialize:k=>k,version:0,merge:(k,z)=>({...z,...k}),...e},d=!1,m=0;const p=new Set,x=new Set;let y=c.storage;if(!y)return t((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(...k)},r,i);const v=()=>{const k=c.partialize({...r()});return y.setItem(c.name,{state:k,version:c.version})},T=i.setState;i.setState=(k,z)=>(T(k,z),v());const I=t((...k)=>(n(...k),v()),r,i);i.getInitialState=()=>I;let L;const O=()=>{var k,z;if(!y)return;const U=++m;d=!1,p.forEach(X=>{var K;return X((K=r())!=null?K:I)});const $=((z=c.onRehydrateStorage)==null?void 0:z.call(c,(k=r())!=null?k:I))||void 0;return yg(y.getItem.bind(y))(c.name).then(X=>{if(X)if(typeof X.version=="number"&&X.version!==c.version){if(c.migrate){const K=c.migrate(X.state,X.version);return K instanceof Promise?K.then(re=>[!0,re]):[!0,K]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,X.state];return[!1,void 0]}).then(X=>{var K;if(U!==m)return;const[re,j]=X;if(L=c.merge(j,(K=r())!=null?K:I),n(L,!0),re)return v()}).then(()=>{U===m&&($?.(L,void 0),L=r(),d=!0,x.forEach(X=>X(L)))}).catch(X=>{U===m&&$?.(void 0,X)})};return i.persist={setOptions:k=>{c={...c,...k},k.storage&&(y=k.storage)},clearStorage:()=>{y?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>O(),hasHydrated:()=>d,onHydrate:k=>(p.add(k),()=>{p.delete(k)}),onFinishHydration:k=>(x.add(k),()=>{x.delete(k)})},c.skipHydration||O(),L||I},yu=VC,UC="https://www.thebluealliance.com/api/v3",zC="Gfxopzs8Vao3biyJ1TYRBbZWzhcX9LOBB64ta8i45X4Zvim6iSTMESj2xhrS2ake";async function wo(t,e){const n=await fetch(`${UC}${t}`,{headers:{"X-TBA-Auth-Key":e||zC}});if(!n.ok)throw new Error(`TBA API error: ${n.statusText}`);return n.json()}async function FC(t,e){return wo(`/event/${t}`,e)}async function US(t,e){return wo(`/event/${t}/teams/simple`,e)}async function BC(t,e){return wo(`/event/${t}/rankings`,e)}async function zS(t,e){return wo(`/event/${t}/matches`,e)}async function FS(t,e,n){return wo(`/team/${t}/event/${e}/matches`,n)}async function HC(t,e){return wo(`/event/${t}/alliances`,e)}async function qC(t,e){const[n,r,i,c,d]=await Promise.all([FC(t,e).catch(()=>null),US(t,e).catch(()=>[]),zS(t,e).catch(()=>[]),BC(t,e).catch(()=>null),HC(t,e).catch(()=>[])]);return{event:n,teams:r,matches:i,rankings:c,alliances:d,lastUpdated:new Date().toISOString()}}function BS(t){const e=t.videos.find(n=>n.type==="youtube");return e?`https://www.youtube.com/watch?v=${e.key}`:null}function HS(t){return`frc${t}`}function Lt(t){return parseInt(t.replace("frc",""))}const dt=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,gn=t=>t[dt(0,t.length-1)],wt=(t=.5)=>Math.random()<t;let Xi=null,Wi=null,ua=null;const qS=["Alex","Jordan","Taylor","Morgan","Casey","Riley"];function $S(){Xi=null,Wi=null,ua=null}function i_(t,e,n,r="qualification"){const i=gn(["red","blue"]),c=gn([1,2,3]),d=.5+Math.random()*1.5,m=Math.floor(dt(0,8)*d),p=dt(0,3),x=Math.floor(dt(10,40)*d),y=dt(5,20),v=Math.floor(x*(.6+Math.random()*.3)),T=x-v,I=gn(["none","none","level1","level1","level2","level2","level3"]);return{id:`${t}-${r}-${e}-${Date.now()}-${Math.random()}`,eventCode:n,matchType:r,matchNumber:e,teamNumber:t,alliance:i,driverStation:c,scoutName:gn(qS),timestamp:new Date(2026,2,20+Math.floor(e/10),9+e%8,dt(0,59)).toISOString(),preloadedFuel:dt(0,5),startingPosition:gn(["left","center","right"]),noShow:wt(.02),autoMobility:wt(.85),autoFuelScored:m,autoFuelMissed:p,autoFuelFromDepot:dt(0,5),autoFuelFromNeutral:dt(0,3),autoFuelFromHuman:dt(0,2),autoClimbAttempted:wt(.15),autoClimbSuccess:wt(.1),autoCrossedBump:wt(.7),autoUsedTrench:wt(.4),teleopTotalScored:x,teleopTotalMissed:y,teleopScoresDuringActive:v,teleopScoresDuringInactive:T,teleopFuelFromDepot:dt(5,15),teleopFuelFromNeutral:dt(8,20),teleopFuelFromHuman:dt(3,12),teleopFuelToHuman:dt(0,5),cycleCount:dt(3,12),playedDefense:wt(.25),defenseEffectiveness:gn(["none","none","poor","fair","good","excellent"]),wasDefended:wt(.3),defenseEvasion:gn(["none","poor","fair","good","excellent"]),climbAttempted:I!=="none",climbLevel:I,climbTime:I!=="none"?dt(5,25):0,climbAssisted:wt(.15),climbAssistedOther:wt(.15),parked:I==="none"&&wt(.6),endgameFuelScored:dt(0,8),driverSkill:dt(2,5),intakeSpeed:dt(2,5),shootingAccuracy:dt(2,5),shootingSpeed:dt(2,5),humanPlayerRating:gn(["poor","average","good","excellent"]),robotDied:wt(.05),robotTipped:wt(.03),cardReceived:gn(["none","none","none","none","none","yellow","red"]),mechanicalIssues:wt(.1),commentsAuto:wt(.3)?"Good auto routine":"",commentsTeleop:wt(.3)?"Strong teleop performance":"",commentsOverall:wt(.2)?"Solid all-around robot":"",synced:!0,syncedAt:new Date().toISOString()}}function $C(t,e){return{id:`pit-${t}-${Date.now()}`,teamNumber:t,teamName:e,scoutName:gn(qS),timestamp:new Date(2026,2,19,dt(10,16),dt(0,59)).toISOString(),drivetrainType:gn(["tank","swerve","swerve","mecanum","other"]),drivetrainMotors:gn(["4x NEO","4x Falcon 500","6x CIM","4x Kraken X60"]),robotWeight:dt(100,125),robotHeight:dt(42,72),robotWidth:dt(24,32),robotLength:dt(28,36),maxFuelCapacity:dt(4,12),intakeType:gn(["Roller","Wheeled","Conveyor","Gripper"]),intakeGround:wt(.9),intakeHumanPlayer:wt(.8),intakeDepot:wt(.85),shooterType:gn(["Flywheel","Catapult","Puncher","Hood"]),shooterAdjustable:wt(.7),maxShootingRange:dt(10,30),canScoreInactive:wt(.3),canUseTrench:wt(.6),canCrossBump:wt(.8),climbCapability:gn(["none","level1","level1","level2","level2","level3"]),climbTime:dt(8,20),canAssistClimb:wt(.4),canBeAssisted:wt(.5),preferredRole:gn(["scorer","scorer","scorer","defender","hybrid"]),autoCapabilities:gn(["Simple 2-ball auto","3-ball auto with mobility","5-ball auto","Defensive auto","Mobility only"]),preferredStartPosition:gn(["left","center","right","any"]),driverExperience:gn(["1 year","2 years","3+ years","Rookie"]),comments:wt(.4)?"Well-built robot with good driving":"",synced:!0,syncedAt:new Date().toISOString()}}async function GC(t){if(ua&&ua!==t&&$S(),Xi&&ua===t)return Xi;try{return Xi=(await US(t)).map(n=>({number:n.team_number,name:n.nickname||`Team ${n.team_number}`})),ua=t,Xi}catch(e){return console.error("Failed to fetch teams from TBA, using fallback:",e),Xi=[{number:148,name:"Robowranglers"},{number:118,name:"Robonauts"},{number:1477,name:"Texas Torque"}],ua=t,Xi}}async function KC(t){if(ua&&ua!==t&&$S(),Wi&&ua===t)return Wi;try{return Wi=await zS(t),Wi}catch(e){return console.error("Failed to fetch matches from TBA:",e),Wi=[],Wi}}async function YC(t){const e=[],n=[],r=await GC(t),i=await KC(t);return r.forEach(c=>{n.push($C(c.number,c.name))}),i.forEach(c=>{c.comp_level==="qm"&&[...c.alliances.red.team_keys,...c.alliances.blue.team_keys].forEach(m=>{const p=Lt(m);r.some(x=>x.number===p)&&e.push(i_(p,c.match_number,t,"qualification"))})}),e.length===0&&r.forEach(c=>{for(let d=1;d<=6;d++)e.push(i_(c.number,d,t,"qualification"))}),{matchEntries:e,pitEntries:n}}const pn=t=>t.length===0?0:t.reduce((e,n)=>e+n,0)/t.length,Qi=t=>t.length===0?0:Math.max(...t),QC=t=>{const e=t.filter(n=>n>0);return e.length===0?0:Math.min(...e)},XC=t=>t.length===0?0:Math.min(...t),Mn=(t,e)=>e===0?0:t/e*100,l_=t=>({none:0,poor:1,fair:2,good:3,excellent:4})[t]||0;function WC(t){const e=t.autoFuelScored*1,n=t.autoClimbSuccess?15:0,r=e+n,i=t.teleopScoresDuringActive*1,d={none:0,level1:10,level2:20,level3:30}[t.climbLevel]||0,m=t.endgameFuelScored*1,p=d+m;return{autoPoints:r,teleopPoints:i,endgamePoints:p,total:r+i+p}}function JC(t,e,n){const r=e.filter(Y=>Y.teamNumber===t&&!Y.noShow),i=r.length;if(i===0)return{teamNumber:t,teamName:n?.teamName,matchesPlayed:0,avgAutoFuelScored:0,avgAutoFuelMissed:0,autoAccuracy:0,autoMobilityRate:0,autoClimbRate:0,autoClimbSuccessRate:0,avgTeleopFuelScored:0,avgTeleopFuelMissed:0,teleopAccuracy:0,avgCycleCount:0,avgActiveHubScores:0,avgInactiveHubScores:0,climbAttemptRate:0,level1ClimbRate:0,level2ClimbRate:0,level3ClimbRate:0,avgClimbTime:0,avgEndgameFuelScored:0,defensePlayedRate:0,avgDefenseEffectiveness:0,wasDefendedRate:0,avgDefenseEvasion:0,avgDriverSkill:0,avgIntakeSpeed:0,avgShootingAccuracy:0,avgShootingSpeed:0,noShowRate:0,diedRate:0,tippedRate:0,mechanicalIssuesRate:0,yellowCardRate:0,redCardRate:0,avgTotalPoints:0,avgAutoPoints:0,avgTeleopPoints:0,avgEndgamePoints:0,maxTotalPoints:0,maxAutoPoints:0,maxTeleopPoints:0,maxEndgamePoints:0,maxAutoFuelScored:0,maxTeleopFuelScored:0,maxCycleCount:0,minTotalPoints:0,minClimbTime:0,pitData:n};const c=r.map(Y=>Y.autoFuelScored),d=r.map(Y=>Y.autoFuelMissed),m=r.reduce((Y,xe)=>Y+xe.autoFuelScored+xe.autoFuelMissed,0),p=r.reduce((Y,xe)=>Y+xe.autoFuelScored,0),x=r.filter(Y=>Y.autoMobility).length,y=r.filter(Y=>Y.autoClimbAttempted).length,v=r.filter(Y=>Y.autoClimbSuccess).length,T=r.map(Y=>Y.teleopTotalScored),I=r.map(Y=>Y.teleopTotalMissed),L=r.reduce((Y,xe)=>Y+xe.teleopTotalScored+xe.teleopTotalMissed,0),O=r.reduce((Y,xe)=>Y+xe.teleopTotalScored,0),k=r.map(Y=>Y.cycleCount),z=r.map(Y=>Y.teleopScoresDuringActive),U=r.map(Y=>Y.teleopScoresDuringInactive),$=r.filter(Y=>Y.climbAttempted).length,X=r.filter(Y=>Y.climbLevel==="level1").length,K=r.filter(Y=>Y.climbLevel==="level2").length,re=r.filter(Y=>Y.climbLevel==="level3").length,j=r.filter(Y=>Y.climbTime>0).map(Y=>Y.climbTime),S=r.map(Y=>Y.endgameFuelScored),C=r.filter(Y=>Y.playedDefense).length,P=r.map(Y=>l_(Y.defenseEffectiveness)),w=r.filter(Y=>Y.wasDefended).length,A=r.map(Y=>l_(Y.defenseEvasion)),D=r.map(Y=>Y.driverSkill),q=r.map(Y=>Y.intakeSpeed),be=r.map(Y=>Y.shootingAccuracy),B=r.map(Y=>Y.shootingSpeed),ce=e.filter(Y=>Y.teamNumber===t),le=ce.filter(Y=>Y.noShow).length,H=r.filter(Y=>Y.robotDied).length,pe=r.filter(Y=>Y.robotTipped).length,V=r.filter(Y=>Y.mechanicalIssues).length,Q=r.filter(Y=>Y.cardReceived==="yellow").length,fe=r.filter(Y=>Y.cardReceived==="red").length,ye=r.map(Y=>WC(Y)),Re=ye.map(Y=>Y.autoPoints),ge=ye.map(Y=>Y.teleopPoints),ke=ye.map(Y=>Y.endgamePoints),J=ye.map(Y=>Y.total);return{teamNumber:t,teamName:n?.teamName,matchesPlayed:i,avgAutoFuelScored:pn(c),avgAutoFuelMissed:pn(d),autoAccuracy:Mn(p,m),autoMobilityRate:Mn(x,i),autoClimbRate:Mn(v,i),autoClimbSuccessRate:Mn(v,y),avgTeleopFuelScored:pn(T),avgTeleopFuelMissed:pn(I),teleopAccuracy:Mn(O,L),avgCycleCount:pn(k),avgActiveHubScores:pn(z),avgInactiveHubScores:pn(U),climbAttemptRate:Mn($,i),level1ClimbRate:Mn(X,i),level2ClimbRate:Mn(K,i),level3ClimbRate:Mn(re,i),avgClimbTime:pn(j),avgEndgameFuelScored:pn(S),defensePlayedRate:Mn(C,i),avgDefenseEffectiveness:pn(P),wasDefendedRate:Mn(w,i),avgDefenseEvasion:pn(A),avgDriverSkill:pn(D),avgIntakeSpeed:pn(q),avgShootingAccuracy:pn(be),avgShootingSpeed:pn(B),noShowRate:Mn(le,ce.length),diedRate:Mn(H,i),tippedRate:Mn(pe,i),mechanicalIssuesRate:Mn(V,i),yellowCardRate:Mn(Q,i),redCardRate:Mn(fe,i),avgTotalPoints:pn(J),avgAutoPoints:pn(Re),avgTeleopPoints:pn(ge),avgEndgamePoints:pn(ke),maxTotalPoints:Qi(J),maxAutoPoints:Qi(Re),maxTeleopPoints:Qi(ge),maxEndgamePoints:Qi(ke),maxAutoFuelScored:Qi(c),maxTeleopFuelScored:Qi(T),maxCycleCount:Qi(k),minTotalPoints:XC(J),minClimbTime:QC(j),pitData:n}}function ZC(t,e){return Array.from(new Set(t.map(r=>r.teamNumber))).map(r=>{const i=e.find(c=>c.teamNumber===r);return JC(r,t,i)})}const $e=xu()(yu((t,e)=>({matchEntries:[],pitEntries:[],teamStatistics:[],selectedTeams:[],eventCode:"2025txcmp1",tbaData:null,tbaLoading:!1,tbaError:null,autoRefreshEnabled:!1,loadMockData:async()=>{const{eventCode:n}=e(),{matchEntries:r,pitEntries:i}=await YC(n);t({matchEntries:r,pitEntries:i}),e().calculateStats()},calculateStats:()=>{const{matchEntries:n,pitEntries:r}=e(),i=ZC(n,r);t({teamStatistics:i})},toggleTeamSelection:n=>{const{selectedTeams:r}=e();r.includes(n)?t({selectedTeams:r.filter(i=>i!==n)}):t({selectedTeams:[...r,n]})},clearTeamSelection:()=>{t({selectedTeams:[]})},setEventCode:n=>{t({eventCode:n})},fetchTBAData:async n=>{const r=n||e().eventCode;t({tbaLoading:!0,tbaError:null});try{const i=await qC(r);return t({tbaData:i,tbaLoading:!1}),i}catch(i){const c=i instanceof Error?i.message:"Failed to fetch TBA data";return t({tbaError:c,tbaLoading:!1}),null}},setAutoRefresh:n=>{t({autoRefreshEnabled:n})},clearTBAData:()=>{t({tbaData:null,tbaError:null})}}),{name:"frc-analytics-storage",partialize:t=>({eventCode:t.eventCode,selectedTeams:t.selectedTeams,tbaData:t.tbaData,autoRefreshEnabled:t.autoRefreshEnabled})}));const eR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tR=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),o_=t=>{const e=tR(t);return e.charAt(0).toUpperCase()+e.slice(1)},GS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),nR=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var sR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rR=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:d,...m},p)=>E.createElement("svg",{ref:p,...sR,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:GS("lucide",i),...!c&&!nR(m)&&{"aria-hidden":"true"},...m},[...d.map(([x,y])=>E.createElement(x,y)),...Array.isArray(c)?c:[c]]));const Ne=(t,e)=>{const n=E.forwardRef(({className:r,...i},c)=>E.createElement(rR,{ref:c,iconNode:e,className:GS(`lucide-${eR(o_(t))}`,`lucide-${t}`,r),...i}));return n.displayName=o_(t),n};const aR=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],eu=Ne("arrow-down",aR);const iR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],KS=Ne("arrow-left",iR);const lR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],oR=Ne("arrow-right",lR);const cR=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],da=Ne("arrow-up",cR);const uR=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gh=Ne("ban",uR);const dR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ih=Ne("calendar",dR);const hR=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],fR=Ne("camera",hR);const mR=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],c_=Ne("chart-column",mR);const pR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xh=Ne("check",pR);const gR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fl=Ne("chevron-down",gR);const xR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],yR=Ne("chevron-left",xR);const bR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gf=Ne("chevron-up",bR);const vR=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],_R=Ne("chevrons-down",vR);const SR=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],u_=Ne("chevrons-up",SR);const NR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Dh=Ne("circle-alert",NR);const TR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jr=Ne("circle-check-big",TR);const ER=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bg=Ne("circle-x",ER);const wR=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],AR=Ne("clipboard-check",wR);const CR=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],RR=Ne("clipboard-list",CR);const jR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kR=Ne("clock",jR);const IR=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],DR=Ne("copy",IR);const MR=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],YS=Ne("download",MR);const PR=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],OR=Ne("eye-off",PR);const LR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tu=Ne("eye",LR);const VR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],UR=Ne("file-text",VR);const zR=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Mh=Ne("flag",zR);const FR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],BR=Ne("funnel",FR);const HR=[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"M12 18H7a2 2 0 0 1-2-2V9",key:"16sdep"}],["path",{d:"m9 15 3 3-3 3",key:"1m3kbl"}]],d_=Ne("git-compare-arrows",HR);const qR=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],vg=Ne("git-compare",qR);const $R=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ph=Ne("grip-vertical",$R);const GR=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],xf=Ne("handshake",GR);const KR=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],YR=Ne("layout-grid",KR);const QR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zs=Ne("loader-circle",QR);const XR=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],h_=Ne("loader",XR);const WR=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Oh=Ne("log-in",WR);const JR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ZR=Ne("log-out",JR);const ej=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],tj=Ne("menu",ej);const nj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],sj=Ne("message-square",nj);const rj=[["path",{d:"M5 12h14",key:"1ays0h"}]],aj=Ne("minus",rj);const ij=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],lj=Ne("mountain",ij);const oj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],cj=Ne("pause",oj);const uj=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],dj=Ne("pen-line",uj);const hj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Lh=Ne("play",hj);const fj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],al=Ne("plus",fj);const mj=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],pj=Ne("qr-code",mj);const gj=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xj=Ne("radio",gj);const yj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],hx=Ne("refresh-cw",yj);const bj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],vj=Ne("rotate-ccw",bj);const _j=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],QS=Ne("save",_j);const Sj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fx=Ne("search",Sj);const Nj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Tj=Ne("send",Nj);const Ej=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vh=Ne("settings",Ej);const wj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],f_=Ne("share-2",wj);const Aj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],XS=Ne("shield",Aj);const Cj=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Rj=Ne("sliders-horizontal",Cj);const jj=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],WS=Ne("sliders-vertical",jj);const kj=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_g=Ne("square-check-big",kj);const Ij=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Sg=Ne("square",Ij);const Dj=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],Mj=Ne("sticky-note",Dj);const Pj=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],Uh=Ne("swords",Pj);const Oj=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],Lj=Ne("table-2",Oj);const Vj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],nu=Ne("target",Vj);const Uj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zi=Ne("trash-2",Uj);const zj=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Fj=Ne("trending-down",zj);const Bj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zh=Ne("trending-up",Bj);const Hj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bc=Ne("triangle-alert",Hj);const qj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],go=Ne("trophy",qj);const $j=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Gj=Ne("undo-2",$j);const Kj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],JS=Ne("upload",Kj);const Yj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Qj=Ne("user-minus",Yj);const Xj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yf=Ne("users",Xj);const Wj=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Jj=Ne("wrench",Wj);const Zj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ws=Ne("x",Zj);const ek=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],tk=Ne("zap",ek),nt=xu()(yu((t,e)=>({lastSessionCode:null,lastDisplayName:"",lastTeamNumber:"",activeSessionId:null,searchQuery:"",selectedTeamsForCompare:[],showComparisonModal:!1,highlightedAlliance:null,showParticipants:!1,setLastSessionCode:n=>t({lastSessionCode:n}),setLastDisplayName:n=>t({lastDisplayName:n}),setLastTeamNumber:n=>t({lastTeamNumber:n}),setActiveSessionId:n=>t({activeSessionId:n}),setSearchQuery:n=>t({searchQuery:n}),toggleTeamForCompare:n=>{const{selectedTeamsForCompare:r}=e();if(r.includes(n))t({selectedTeamsForCompare:r.filter(i=>i!==n)});else if(r.length<2){const i=[...r,n];t({selectedTeamsForCompare:i,showComparisonModal:i.length===2})}},clearCompareSelection:()=>t({selectedTeamsForCompare:[],showComparisonModal:!1}),setShowComparisonModal:n=>t({showComparisonModal:n}),setHighlightedAlliance:n=>t({highlightedAlliance:n}),setShowParticipants:n=>t({showParticipants:n})}),{name:"frc-alliance-selection-ui",partialize:t=>({lastSessionCode:t.lastSessionCode,lastDisplayName:t.lastDisplayName,lastTeamNumber:t.lastTeamNumber,activeSessionId:t.activeSessionId})}));function nk(){const t=nt(n=>n.lastSessionCode),e=nt(n=>n.activeSessionId);return!t||!e?null:o.jsxs(On,{to:`/alliance-selection/${t}`,className:"flex items-center gap-3 px-4 py-3 mb-4 bg-success/10 border border-success/30 rounded-lg hover:bg-success/20 transition-colors",children:[o.jsx(xj,{size:18,className:"text-success animate-pulse"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"font-semibold text-success",children:"Live Alliance Selection"}),o.jsx("span",{className:"text-textSecondary text-sm ml-2 font-mono",children:t})]}),o.jsx(xf,{size:18,className:"text-success"})]})}function m_({label:t,icon:e,items:n,isActive:r}){const[i,c]=E.useState(!1),d=E.useRef(null);return E.useEffect(()=>{const m=p=>{d.current&&!d.current.contains(p.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),o.jsxs("div",{className:"relative",ref:d,children:[o.jsxs("button",{onClick:()=>c(!i),className:`flex items-center gap-2 px-3 xl:px-4 py-2 rounded transition-colors text-sm xl:text-base ${r?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[o.jsx(e,{size:20}),o.jsx("span",{children:t}),o.jsx(fl,{size:16,className:`transition-transform ${i?"rotate-180":""}`})]}),i&&o.jsx("div",{className:"absolute top-full left-0 mt-1 bg-surface border border-border rounded-lg shadow-lg py-1 min-w-[160px] z-50",children:n.map(({to:m,icon:p,label:x})=>o.jsxs(On,{to:m,onClick:()=>c(!1),className:"flex items-center gap-3 px-4 py-2.5 hover:bg-interactive transition-colors",children:[o.jsx(p,{size:18}),o.jsx("span",{children:x})]},m))})]})}const Qp=[{to:"/teams",icon:yf,label:"Teams"},{to:"/pit-scouting",icon:AR,label:"Pit Scout"}],Xp=[{to:"/picklist",icon:RR,label:"Pick List"},{to:"/predict",icon:Uh,label:"Predict"},{to:"/alliance-selection",icon:xf,label:"Alliance"}];function sk(){const t=$e(m=>m.eventCode),[e,n]=E.useState(!1),r=_i(),i=()=>n(!1),c=Qp.some(m=>r.pathname===m.to||r.pathname.startsWith(m.to+"/")),d=Xp.some(m=>r.pathname===m.to||r.pathname.startsWith(m.to+"/"));return o.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[o.jsx("header",{className:"bg-surface border-b border-border sticky top-0 z-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[o.jsx("img",{src:"/frc-2026-analytics/team-logo.png",alt:"Team 148 Logo",className:"h-10 w-10 md:h-12 md:w-12 object-contain"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg md:text-2xl font-bold",children:"Team 148 - Data Wrangler"}),o.jsxs("p",{className:"text-textSecondary text-xs md:text-sm",children:["REBUILT 2026  ",t]})]})]}),o.jsxs("nav",{className:"hidden lg:flex gap-2 xl:gap-3",children:[o.jsxs(On,{to:"/",className:`flex items-center gap-2 px-3 xl:px-4 py-2 rounded transition-colors text-sm xl:text-base ${r.pathname==="/"?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[o.jsx(c_,{size:20}),o.jsx("span",{children:"Dashboard"})]}),o.jsx(m_,{label:"Scouting",icon:fx,items:Qp,isActive:c}),o.jsx(m_,{label:"Strategy",icon:nu,items:Xp,isActive:d}),o.jsxs(On,{to:"/event",className:`flex items-center gap-2 px-3 xl:px-4 py-2 rounded transition-colors text-sm xl:text-base ${r.pathname==="/event"?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[o.jsx(Ih,{size:20}),o.jsx("span",{children:"Event"})]})]}),o.jsx("button",{onClick:()=>n(!e),className:"lg:hidden p-2 rounded hover:bg-interactive transition-colors","aria-label":"Toggle menu",children:e?o.jsx(ws,{size:24}):o.jsx(tj,{size:24})})]}),e&&o.jsxs("nav",{className:"lg:hidden mt-4 pt-4 border-t border-border space-y-1",children:[o.jsxs(On,{to:"/",onClick:i,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${r.pathname==="/"?"bg-success/20 text-success":"bg-surfaceElevated hover:bg-interactive"}`,children:[o.jsx(c_,{size:20}),o.jsx("span",{children:"Dashboard"})]}),o.jsxs("div",{className:"pt-2",children:[o.jsx("p",{className:"px-4 py-1 text-xs font-semibold text-textMuted uppercase tracking-wider",children:"Scouting"}),Qp.map(({to:m,icon:p,label:x})=>o.jsxs(On,{to:m,onClick:i,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${r.pathname===m?"bg-success/20 text-success":"hover:bg-interactive"}`,children:[o.jsx(p,{size:20}),o.jsx("span",{children:x})]},m))]}),o.jsxs("div",{className:"pt-2",children:[o.jsx("p",{className:"px-4 py-1 text-xs font-semibold text-textMuted uppercase tracking-wider",children:"Strategy"}),Xp.map(({to:m,icon:p,label:x})=>o.jsxs(On,{to:m,onClick:i,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${r.pathname===m||r.pathname.startsWith(m+"/")?"bg-success/20 text-success":"hover:bg-interactive"}`,children:[o.jsx(p,{size:20}),o.jsx("span",{children:x})]},m))]}),o.jsx("div",{className:"pt-2",children:o.jsxs(On,{to:"/event",onClick:i,className:`flex items-center gap-3 px-4 py-3 rounded transition-colors ${r.pathname==="/event"?"bg-success/20 text-success":"hover:bg-interactive"}`,children:[o.jsx(Ih,{size:20}),o.jsx("span",{children:"Event Setup"})]})})]})]})}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-4 md:py-8",children:[o.jsx(nk,{}),o.jsx(WA,{})]})]})}const Ng={diedRate:20,mechanicalIssuesRate:25,tippedRate:15,noShowRate:10},ht=xu()(yu((t,e)=>({pickList:null,tbaApiKey:"",redFlagThresholds:Ng,initializePickList:(n,r="Steak",i="Potatoes",c="Chicken Nuggets",d="All Teams")=>{const m={eventKey:n,tier1Name:r,tier2Name:i,tier3Name:c,tier4Name:d,lastUpdated:new Date().toISOString()};t({pickList:{config:m,teams:[]}})},setTierNames:(n,r,i,c)=>{const{pickList:d}=e();d&&t({pickList:{...d,config:{...d.config,tier1Name:n,tier2Name:r,tier3Name:i,tier4Name:c,lastUpdated:new Date().toISOString()}}})},setTBAApiKey:n=>{t({tbaApiKey:n})},addTeamToTier:(n,r,i="")=>{const{pickList:c}=e();if(!c||c.teams.find(x=>x.teamNumber===n))return;const d=c.teams.filter(x=>x.tier===r),m=d.length>0?Math.max(...d.map(x=>x.rank)):0,p={teamNumber:n,tier:r,rank:m+1,notes:i,isPicked:!1,tags:[],flagged:!1,onWatchlist:!1};t({pickList:{...c,teams:[...c.teams,p],config:{...c.config,lastUpdated:new Date().toISOString()}}})},moveTeam:(n,r,i)=>{const{pickList:c}=e();if(!c)return;const d=c.teams.map(m=>m.teamNumber===n?{...m,tier:r,rank:i}:m.tier===r&&m.rank>=i?{...m,rank:m.rank+1}:m);t({pickList:{...c,teams:d,config:{...c.config,lastUpdated:new Date().toISOString()}}})},removeTeam:n=>{const{pickList:r}=e();r&&t({pickList:{...r,teams:r.teams.filter(i=>i.teamNumber!==n)}})},swapTeamRanks:(n,r)=>{const{pickList:i}=e();if(!i)return;const c=i.teams.find(p=>p.teamNumber===n),d=i.teams.find(p=>p.teamNumber===r);if(!c||!d||c.tier!==d.tier)return;const m=i.teams.map(p=>p.teamNumber===n?{...p,rank:d.rank}:p.teamNumber===r?{...p,rank:c.rank}:p);t({pickList:{...i,teams:m,config:{...i.config,lastUpdated:new Date().toISOString()}}})},moveTeamAbove:(n,r)=>{const{pickList:i,moveTeam:c}=e();if(!i)return;const d=i.teams.find(x=>x.teamNumber===n),m=i.teams.find(x=>x.teamNumber===r);if(!d||!m)return;const p={tier1:1,tier2:2,tier3:3,tier4:4};if(d.tier===m.tier){const x=i.teams.filter(T=>T.tier===d.tier).sort((T,I)=>T.rank-I.rank),y=x.findIndex(T=>T.teamNumber===n),v=x.findIndex(T=>T.teamNumber===r);y>v&&c(n,d.tier,m.rank)}else p[d.tier]>p[m.tier]&&c(n,m.tier,m.rank)},updateNotes:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,notes:r}:c)}})},togglePicked:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,isPicked:!c.isPicked,pickedBy:c.isPicked?void 0:r}:c)}})},addTag:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n&&!c.tags.includes(r)?{...c,tags:[...c.tags,r]}:c)}})},removeTag:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,tags:c.tags.filter(d=>d!==r)}:c)}})},toggleFlag:n=>{const{pickList:r}=e();r&&t({pickList:{...r,teams:r.teams.map(i=>i.teamNumber===n?{...i,flagged:!i.flagged}:i)}})},setRedFlagThresholds:n=>{t({redFlagThresholds:n})},autoFlagTeams:n=>{const{pickList:r,redFlagThresholds:i}=e();if(!r)return 0;let c=0;const d=r.teams.map(m=>{const p=n.find(y=>y.teamNumber===m.teamNumber);if(!p)return m;const x=p.diedRate>=i.diedRate||p.mechanicalIssuesRate>=i.mechanicalIssuesRate||p.tippedRate>=i.tippedRate||p.noShowRate>=i.noShowRate;return x&&!m.flagged&&c++,x?{...m,flagged:!0}:m});return t({pickList:{...r,teams:d}}),c},clearAllFlags:()=>{const{pickList:n}=e();n&&t({pickList:{...n,teams:n.teams.map(r=>({...r,flagged:!1}))}})},toggleWatchlist:n=>{const{pickList:r}=e();if(!r)return;const i=r.teams.find(d=>d.teamNumber===n);if(!i)return;if(i.onWatchlist)t({pickList:{...r,teams:r.teams.map(d=>d.teamNumber===n?{...d,onWatchlist:!1,watchlistRank:void 0,watchlistNotes:void 0}:d)}});else{const m=r.teams.filter(p=>p.onWatchlist).length+1;t({pickList:{...r,teams:r.teams.map(p=>p.teamNumber===n?{...p,onWatchlist:!0,watchlistRank:m,watchlistNotes:""}:p)}})}},updateWatchlistNotes:(n,r)=>{const{pickList:i}=e();i&&t({pickList:{...i,teams:i.teams.map(c=>c.teamNumber===n?{...c,watchlistNotes:r}:c)}})},reorderWatchlist:(n,r)=>{const{pickList:i}=e();if(!i)return;const c=i.teams.filter(x=>x.onWatchlist).sort((x,y)=>(x.watchlistRank||0)-(y.watchlistRank||0)),d=c.findIndex(x=>x.teamNumber===n);if(d===-1)return;const[m]=c.splice(d,1);c.splice(r-1,0,m);const p={};c.forEach((x,y)=>{p[x.teamNumber]=y+1}),t({pickList:{...i,teams:i.teams.map(x=>x.onWatchlist?{...x,watchlistRank:p[x.teamNumber]}:x)}})},finalizeWatchlist:n=>{const{pickList:r}=e();if(!r)return;const i=r.teams.filter(y=>y.onWatchlist).sort((y,v)=>(y.watchlistRank||0)-(v.watchlistRank||0));if(i.length===0)return;const c=r.teams.filter(y=>y.tier==="tier2"&&!y.onWatchlist).sort((y,v)=>y.rank-v.rank),d=c.slice(0,n-1),m=c.slice(n-1),p=[...d,...i,...m],x=r.teams.map(y=>{if(y.onWatchlist){const v=p.findIndex(T=>T.teamNumber===y.teamNumber)+1;return{...y,tier:"tier2",rank:v,onWatchlist:!1,watchlistRank:void 0,notes:y.watchlistNotes?`${y.notes}
[Watchlist] ${y.watchlistNotes}`.trim():y.notes,watchlistNotes:void 0}}if(y.tier==="tier2"){const v=p.findIndex(T=>T.teamNumber===y.teamNumber)+1;return{...y,rank:v}}return y});t({pickList:{...r,teams:x,config:{...r.config,lastUpdated:new Date().toISOString()}}})},clearWatchlist:()=>{const{pickList:n}=e();n&&t({pickList:{...n,teams:n.teams.map(r=>({...r,onWatchlist:!1,watchlistRank:void 0,watchlistNotes:void 0}))}})},getWatchlistTeams:()=>{const{pickList:n}=e();return n?n.teams.filter(r=>r.onWatchlist).sort((r,i)=>(r.watchlistRank||0)-(i.watchlistRank||0)):[]},importFromTBARankings:n=>{const{pickList:r}=e();if(!r)return;const i=r.teams.filter(x=>x.tier==="tier1"),c=[...n.rankings].sort((x,y)=>x.rank-y.rank),d=x=>{let y=`Event Rank ${x.rank}`;return x.record&&typeof x.record.wins=="number"&&typeof x.record.losses=="number"&&(y+=` - ${x.record.wins}W/${x.record.losses}L`,x.record.ties>0&&(y+=`/${x.record.ties}T`)),y},m=c.slice(0,12).map((x,y)=>({teamNumber:Lt(x.team_key),tier:"tier2",rank:y+1,notes:d(x),isPicked:!1,tags:[],flagged:!1,onWatchlist:!1})),p=c.slice(12).map((x,y)=>({teamNumber:Lt(x.team_key),tier:"tier3",rank:y+1,notes:d(x),isPicked:!1,tags:[],flagged:!1,onWatchlist:!1}));t({pickList:{...r,teams:[...i,...m,...p],config:{...r.config,lastUpdated:new Date().toISOString()}}})},sortTier:(n,r)=>{const{pickList:i}=e();if(!i)return;const c=i.teams.filter(m=>m.tier===n),d=i.teams.filter(m=>m.tier!==n);c.sort((m,p)=>r==="teamNumber"?m.teamNumber-p.teamNumber:m.rank-p.rank),c.forEach((m,p)=>{m.rank=p+1}),t({pickList:{...i,teams:[...d,...c]}})},clearPickList:()=>{t({pickList:null})},exportPickList:()=>{const{pickList:n}=e();return JSON.stringify(n,null,2)},importPickList:n=>{try{const r=JSON.parse(n);t({pickList:r})}catch(r){console.error("Failed to import pick list:",r)}}}),{name:"frc-picklist-storage",partialize:t=>({pickList:t.pickList,tbaApiKey:t.tbaApiKey})})),Tg=[{id:"avgTotalPoints",label:"Avg Points",field:"avgTotalPoints",aggregation:"avg",format:"number",decimals:1,enabled:!0,description:"Average total points per match",category:"overall"},{id:"maxTotalPoints",label:"Max Points",field:"maxTotalPoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum total points in a single match",category:"overall"},{id:"minTotalPoints",label:"Min Points",field:"minTotalPoints",aggregation:"min",format:"number",decimals:0,enabled:!1,description:"Minimum total points in a single match",category:"overall"},{id:"avgAutoPoints",label:"Avg Auto Pts",field:"avgAutoPoints",aggregation:"avg",format:"number",decimals:1,enabled:!0,description:"Average autonomous points",category:"overall"},{id:"maxAutoPoints",label:"Max Auto Pts",field:"maxAutoPoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum auto points in a single match",category:"overall"},{id:"avgTeleopPoints",label:"Avg Teleop Pts",field:"avgTeleopPoints",aggregation:"avg",format:"number",decimals:1,enabled:!0,description:"Average teleop points",category:"overall"},{id:"maxTeleopPoints",label:"Max Teleop Pts",field:"maxTeleopPoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum teleop points in a single match",category:"overall"},{id:"avgEndgamePoints",label:"Avg Endgame Pts",field:"avgEndgamePoints",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average endgame points",category:"overall"},{id:"maxEndgamePoints",label:"Max Endgame Pts",field:"maxEndgamePoints",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum endgame points in a single match",category:"overall"},{id:"avgAutoFuelScored",label:"Avg Auto FUEL",field:"avgAutoFuelScored",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL scored in auto",category:"auto"},{id:"maxAutoFuelScored",label:"Max Auto FUEL",field:"maxAutoFuelScored",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum FUEL scored in auto",category:"auto"},{id:"avgAutoFuelMissed",label:"Avg Auto Missed",field:"avgAutoFuelMissed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL missed in auto",category:"auto"},{id:"autoAccuracy",label:"Auto Accuracy",field:"autoAccuracy",aggregation:"avg",format:"percentage",decimals:0,enabled:!0,description:"Auto shooting accuracy percentage",category:"auto"},{id:"autoMobilityRate",label:"Mobility Rate",field:"autoMobilityRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with auto mobility",category:"auto"},{id:"autoClimbRate",label:"Auto Climb Rate",field:"autoClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches attempting auto climb",category:"auto"},{id:"autoClimbSuccessRate",label:"Auto Climb Success",field:"autoClimbSuccessRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Success rate of auto climb attempts",category:"auto"},{id:"avgTeleopFuelScored",label:"Avg Teleop FUEL",field:"avgTeleopFuelScored",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL scored in teleop",category:"teleop"},{id:"maxTeleopFuelScored",label:"Max Teleop FUEL",field:"maxTeleopFuelScored",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum FUEL scored in teleop",category:"teleop"},{id:"avgTeleopFuelMissed",label:"Avg Teleop Missed",field:"avgTeleopFuelMissed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL missed in teleop",category:"teleop"},{id:"teleopAccuracy",label:"Teleop Accuracy",field:"teleopAccuracy",aggregation:"avg",format:"percentage",decimals:0,enabled:!0,description:"Teleop shooting accuracy percentage",category:"teleop"},{id:"avgCycleCount",label:"Avg Cycles",field:"avgCycleCount",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average cycles per match",category:"teleop"},{id:"maxCycleCount",label:"Max Cycles",field:"maxCycleCount",aggregation:"max",format:"number",decimals:0,enabled:!1,description:"Maximum cycles in a single match",category:"teleop"},{id:"avgActiveHubScores",label:"Avg Active Hub",field:"avgActiveHubScores",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average scores during active hub",category:"teleop"},{id:"avgInactiveHubScores",label:"Avg Inactive Hub",field:"avgInactiveHubScores",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average scores during inactive hub",category:"teleop"},{id:"climbAttemptRate",label:"Climb Attempt %",field:"climbAttemptRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with climb attempt",category:"endgame"},{id:"level1ClimbRate",label:"L1 Climb %",field:"level1ClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with Level 1 climb",category:"endgame"},{id:"level2ClimbRate",label:"L2 Climb %",field:"level2ClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with Level 2 climb",category:"endgame"},{id:"level3ClimbRate",label:"L3 Climb %",field:"level3ClimbRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!0,description:"Percentage of matches with Level 3 climb",category:"endgame"},{id:"avgClimbTime",label:"Avg Climb Time",field:"avgClimbTime",aggregation:"avg",format:"time",decimals:1,enabled:!1,description:"Average climb time in seconds",category:"endgame"},{id:"minClimbTime",label:"Best Climb Time",field:"minClimbTime",aggregation:"min",format:"time",decimals:1,enabled:!1,description:"Fastest climb time",category:"endgame"},{id:"avgEndgameFuelScored",label:"Avg Endgame FUEL",field:"avgEndgameFuelScored",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average FUEL scored in endgame",category:"endgame"},{id:"defensePlayedRate",label:"Plays Defense %",field:"defensePlayedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches playing defense",category:"defense"},{id:"avgDefenseEffectiveness",label:"Defense Effect.",field:"avgDefenseEffectiveness",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average defense effectiveness (0-4)",category:"defense"},{id:"wasDefendedRate",label:"Was Defended %",field:"wasDefendedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches team was defended",category:"defense"},{id:"avgDefenseEvasion",label:"Defense Evasion",field:"avgDefenseEvasion",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average defense evasion rating (0-4)",category:"defense"},{id:"avgDriverSkill",label:"Driver Skill",field:"avgDriverSkill",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average driver skill rating (1-5)",category:"performance"},{id:"avgIntakeSpeed",label:"Intake Speed",field:"avgIntakeSpeed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average intake speed rating (1-5)",category:"performance"},{id:"avgShootingAccuracy",label:"Shooting Acc Rating",field:"avgShootingAccuracy",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average shooting accuracy rating (1-5)",category:"performance"},{id:"avgShootingSpeed",label:"Shooting Speed",field:"avgShootingSpeed",aggregation:"avg",format:"number",decimals:1,enabled:!1,description:"Average shooting speed rating (1-5)",category:"performance"},{id:"noShowRate",label:"No Show %",field:"noShowRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with no show",category:"reliability"},{id:"diedRate",label:"Died %",field:"diedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches robot died",category:"reliability"},{id:"tippedRate",label:"Tipped %",field:"tippedRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches robot tipped",category:"reliability"},{id:"mechanicalIssuesRate",label:"Mech Issues %",field:"mechanicalIssuesRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with mechanical issues",category:"reliability"},{id:"yellowCardRate",label:"Yellow Card %",field:"yellowCardRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with yellow card",category:"reliability"},{id:"redCardRate",label:"Red Card %",field:"redCardRate",aggregation:"rate",format:"percentage",decimals:0,enabled:!1,description:"Percentage of matches with red card",category:"reliability"}],ZS={overall:"Overall Scoring",auto:"Autonomous",teleop:"Teleop",endgame:"Endgame & Climbing",defense:"Defense",performance:"Performance Ratings",reliability:"Reliability"},ca=xu()(yu((t,e)=>({config:{columns:Tg,lastUpdated:new Date().toISOString()},toggleColumn:n=>{const{config:r}=e();t({config:{...r,columns:r.columns.map(i=>i.id===n?{...i,enabled:!i.enabled}:i),lastUpdated:new Date().toISOString()}})},updateColumn:(n,r)=>{const{config:i}=e();t({config:{...i,columns:i.columns.map(c=>c.id===n?{...c,...r}:c),lastUpdated:new Date().toISOString()}})},addColumn:n=>{const{config:r}=e();t({config:{...r,columns:[...r.columns,n],lastUpdated:new Date().toISOString()}})},deleteColumn:n=>{const{config:r}=e();t({config:{...r,columns:r.columns.filter(i=>i.id!==n),lastUpdated:new Date().toISOString()}})},reorderColumns:(n,r)=>{const{config:i}=e(),c=[...i.columns],[d]=c.splice(n,1);c.splice(r,0,d),t({config:{...i,columns:c,lastUpdated:new Date().toISOString()}})},resetToDefaults:()=>{t({config:{columns:Tg,lastUpdated:new Date().toISOString()}})},getEnabledColumns:()=>{const{config:n}=e();return n.columns.filter(r=>r.enabled)}}),{name:"frc-metrics-storage"}));function rk(){const t=pu(),e=$e(S=>S.teamStatistics),n=$e(S=>S.selectedTeams),r=$e(S=>S.toggleTeamSelection),i=$e(S=>S.tbaData),c=ht(S=>S.addTeamToTier),d=ht(S=>S.pickList),m={tier1:d?.config?.tier1Name||"Steak",tier2:d?.config?.tier2Name||"Potatoes",tier3:d?.config?.tier3Name||"Chicken Nuggets"},p=ca(S=>S.getEnabledColumns),x=E.useMemo(()=>{const S=new Map;return i?.rankings?.rankings&&i.rankings.rankings.forEach(C=>{S.set(Lt(C.team_key),C.rank)}),S},[i]),y=p(),[v,T]=E.useState(""),[I,L]=E.useState([{field:"avgTotalPoints",direction:"desc"}]),[O,k]=E.useState(null),[z,U]=E.useState("table"),$=E.useMemo(()=>{let S=[...e];return v&&(S=S.filter(C=>C.teamNumber.toString().includes(v)||C.teamName?.toLowerCase().includes(v.toLowerCase()))),S.sort((C,P)=>{for(const w of I){let A,D;if(w.field==="eventRank"?(A=x.get(C.teamNumber)??999,D=x.get(P.teamNumber)??999):(A=C[w.field],D=P[w.field]),A===void 0&&(A=0),D===void 0&&(D=0),A!==D)return w.direction==="asc"?A>D?1:-1:A<D?1:-1}return 0}),S},[e,v,I,x]),X=(S,C)=>{L(P=>{const w=P.findIndex(A=>A.field===S);if(w!==-1){const A=[...P];return A[w]={...A[w],direction:A[w].direction==="asc"?"desc":"asc"},A}return C&&P.length<3?[...P,{field:S,direction:"desc"}]:[{field:S,direction:"desc"}]})},K=(S,C)=>{C.stopPropagation(),L(P=>{const w=P.filter(A=>A.field!==S);return w.length>0?w:[{field:"avgTotalPoints",direction:"desc"}]})},re=({field:S,label:C})=>{const P=I.findIndex(q=>q.field===S),w=P!==-1,A=w?I[P]:null,D=P+1;return o.jsxs("button",{onClick:q=>X(S,q.shiftKey),className:"flex items-center gap-1 hover:text-textPrimary transition-colors group",title:w?"Click to toggle direction, Shift+click to add secondary sort":"Click to sort, Shift+click to add as secondary sort",children:[C,w&&o.jsxs("span",{className:"flex items-center gap-0.5",children:[I.length>1&&o.jsx("span",{className:"text-xs text-warning font-bold",children:D}),A?.direction==="desc"?o.jsx(eu,{size:14,className:"text-warning"}):o.jsx(da,{size:14,className:"text-warning"}),I.length>1&&o.jsx("button",{onClick:q=>K(S,q),className:"ml-0.5 opacity-0 group-hover:opacity-100 hover:text-danger transition-opacity",title:"Remove this sort",children:o.jsx(ws,{size:12})})]})]})},j=(S,C,P)=>{const w=S.toFixed(P);switch(C){case"percentage":return`${w}%`;case"time":return`${w}s`;default:return w}};return o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Team List"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[o.jsxs("span",{className:"text-textSecondary text-sm md:text-base",children:[n.length," team",n.length!==1?"s":""," selected"]}),n.length>=2&&o.jsxs("button",{onClick:()=>t("/compare"),className:"flex items-center gap-2 px-3 py-2 bg-blueAlliance hover:bg-blueAlliance/80 text-white rounded-lg transition-colors text-sm font-medium",children:[o.jsx(vg,{size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Compare Selected"}),o.jsx("span",{className:"sm:hidden",children:"Compare"})]}),o.jsxs("div",{className:"flex gap-1 bg-surface border border-border rounded-lg p-1",children:[o.jsx("button",{onClick:()=>U("cards"),className:`p-2 rounded transition-colors ${z==="cards"?"bg-interactive":"hover:bg-surfaceElevated"}`,title:"Card view",children:o.jsx(YR,{size:18})}),o.jsx("button",{onClick:()=>U("table"),className:`p-2 rounded transition-colors ${z==="table"?"bg-interactive":"hover:bg-surfaceElevated"}`,title:"Table view",children:o.jsx(Lj,{size:18})})]}),o.jsxs(On,{to:"/metrics",className:"flex items-center gap-2 px-3 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm border border-border",children:[o.jsx(WS,{size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Customize Columns"}),o.jsx("span",{className:"sm:hidden",children:"Columns"})]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(fx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-textMuted",size:20}),o.jsx("input",{type:"text",placeholder:"Search by team number or name...",value:v,onChange:S=>T(S.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-border rounded-lg text-textPrimary placeholder-textMuted focus:outline-none focus:ring-2 focus:ring-white"})]}),I.length>0&&o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Sorting by:"}),I.map((S,C)=>o.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-surface border border-border rounded",children:[o.jsxs("span",{className:"text-warning font-bold",children:[C+1,"."]}),o.jsx("span",{children:S.field==="eventRank"?"Rank":S.field==="teamNumber"?"Team":S.field==="matchesPlayed"?"Matches":y.find(P=>P.field===S.field)?.label||S.field}),S.direction==="desc"?o.jsx(eu,{size:12,className:"text-textSecondary"}):o.jsx(da,{size:12,className:"text-textSecondary"}),o.jsx("button",{onClick:P=>K(S.field,P),className:"ml-1 hover:text-danger transition-colors",title:"Remove this sort",children:o.jsx(ws,{size:12})})]},S.field)),I.length<3&&o.jsx("span",{className:"text-textMuted text-xs",children:"(Shift+click column to add)"})]}),z==="table"?o.jsx("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-surfaceElevated border-b border-border",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:"Select"}),o.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:o.jsx(re,{field:"teamNumber",label:"Team"})}),o.jsx("th",{className:"px-3 py-3 text-center text-textSecondary text-sm font-semibold",children:o.jsx(re,{field:"eventRank",label:"Rank"})}),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:o.jsx(re,{field:"matchesPlayed",label:"Matches"})}),y.map(S=>o.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:o.jsx(re,{field:S.field,label:S.label})},S.id)),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:$.map(S=>o.jsxs("tr",{className:`hover:bg-interactive transition-colors ${n.includes(S.teamNumber)?"bg-surfaceElevated":""}`,children:[o.jsx("td",{className:"px-4 py-4",children:o.jsx("button",{onClick:()=>r(S.teamNumber),className:"text-textPrimary hover:text-success transition-colors",children:n.includes(S.teamNumber)?o.jsx(_g,{size:20,className:"text-success"}):o.jsx(Sg,{size:20})})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs(On,{to:`/teams/${S.teamNumber}`,className:"block hover:text-blueAlliance transition-colors",children:[o.jsx("p",{className:"font-bold",children:S.teamNumber}),S.teamName&&o.jsx("p",{className:"text-sm text-textSecondary",children:S.teamName})]})}),o.jsx("td",{className:"px-3 py-4 text-center",children:x.get(S.teamNumber)?o.jsxs("span",{className:"font-bold text-warning",children:["#",x.get(S.teamNumber)]}):o.jsx("span",{className:"text-textMuted",children:"-"})}),o.jsx("td",{className:"px-4 py-4 text-center text-textSecondary",children:S.matchesPlayed}),y.map(C=>{const P=S[C.field];return o.jsx("td",{className:"px-4 py-4 text-right",children:j(P||0,C.format,C.decimals)},C.id)}),o.jsxs("td",{className:"px-4 py-4 text-center relative",children:[o.jsx("button",{onClick:()=>k(O===S.teamNumber?null:S.teamNumber),className:"p-2 text-textMuted hover:text-success rounded transition-colors",title:"Add to Pick List",children:o.jsx(al,{size:20})}),O===S.teamNumber&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-surface border border-border rounded-lg shadow-lg z-10",children:[o.jsxs("button",{onClick:()=>{c(S.teamNumber,"tier1"),k(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier1]}),o.jsxs("button",{onClick:()=>{c(S.teamNumber,"tier2"),k(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier2]}),o.jsxs("button",{onClick:()=>{c(S.teamNumber,"tier3"),k(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier3]})]})]})]},S.teamNumber))})]})})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(S=>o.jsxs("div",{className:`bg-surface rounded-lg border border-border p-4 space-y-3 ${n.includes(S.teamNumber)?"ring-2 ring-success":""}`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs(On,{to:`/teams/${S.teamNumber}`,className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-xl font-bold hover:text-blueAlliance transition-colors",children:S.teamNumber}),x.get(S.teamNumber)&&o.jsxs("span",{className:"text-sm font-bold text-warning",children:["#",x.get(S.teamNumber)]})]}),S.teamName&&o.jsx("p",{className:"text-sm text-textSecondary line-clamp-1",children:S.teamName})]}),o.jsx("button",{onClick:()=>r(S.teamNumber),className:"text-textPrimary hover:text-success transition-colors p-1",children:n.includes(S.teamNumber)?o.jsx(_g,{size:24,className:"text-success"}):o.jsx(Sg,{size:24})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-surfaceElevated rounded p-2",children:[o.jsx("p",{className:"text-textSecondary text-xs",children:"Matches"}),o.jsx("p",{className:"font-semibold",children:S.matchesPlayed})]}),y.slice(0,3).map(C=>{const P=S[C.field];return o.jsxs("div",{className:"bg-surfaceElevated rounded p-2",children:[o.jsx("p",{className:"text-textSecondary text-xs truncate",children:C.label}),o.jsx("p",{className:"font-semibold",children:j(P||0,C.format,C.decimals)})]},C.id)})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>k(O===S.teamNumber?null:S.teamNumber),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-surfaceElevated hover:bg-interactive rounded transition-colors text-sm",children:[o.jsx(al,{size:16}),"Add to Pick List"]}),O===S.teamNumber&&o.jsxs("div",{className:"absolute bottom-full mb-2 w-full bg-surface border border-border rounded-lg shadow-lg z-10",children:[o.jsxs("button",{onClick:()=>{c(S.teamNumber,"tier1"),k(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors rounded-t-lg",children:["Add to ",m.tier1]}),o.jsxs("button",{onClick:()=>{c(S.teamNumber,"tier2"),k(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors",children:["Add to ",m.tier2]}),o.jsxs("button",{onClick:()=>{c(S.teamNumber,"tier3"),k(null)},className:"w-full px-4 py-2 text-left hover:bg-interactive transition-colors rounded-b-lg",children:["Add to ",m.tier3]})]})]})]},S.teamNumber))}),o.jsxs("div",{className:"text-center text-textSecondary",children:["Showing ",$.length," of ",e.length," teams"]})]})}const ak=["noShowRate","diedRate","tippedRate","mechanicalIssuesRate","yellowCardRate","redCardRate","avgClimbTime","minClimbTime","avgAutoFuelMissed","avgTeleopFuelMissed","wasDefendedRate"];function ik(){const t=pu(),e=$e(O=>O.teamStatistics),n=$e(O=>O.selectedTeams),r=$e(O=>O.toggleTeamSelection),i=$e(O=>O.eventCode),c=ht(O=>O.tbaApiKey),d=ca(O=>O.getEnabledColumns),[m,p]=E.useState(null),[x,y]=E.useState({}),v=e.filter(O=>n.includes(O.teamNumber)),T=d(),I=E.useMemo(()=>{const O={overall:[],auto:[],teleop:[],endgame:[],defense:[],performance:[],reliability:[]};return T.forEach(k=>{O[k.category].push(k)}),O},[T]);if(E.useEffect(()=>{v.length===0&&t("/teams")},[v.length,t]),E.useEffect(()=>{async function O(){const k={};for(const z of v)try{const U=HS(z.teamNumber),X=(await FS(U,i,c)).filter(K=>K.videos&&K.videos.length>0);X.length>0&&(k[z.teamNumber]=X)}catch(U){console.error(`Failed to load videos for team ${z.teamNumber}:`,U)}y(k)}v.length>0&&O()},[v,i,c]),v.length===0)return o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx(Dh,{size:64,className:"text-textMuted mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Teams Selected"}),o.jsx("p",{className:"text-textSecondary mb-6",children:"Go to the Teams page and select teams to compare"}),o.jsx("button",{onClick:()=>t("/teams"),className:"px-6 py-3 bg-white text-background font-semibold rounded-lg hover:bg-textSecondary transition-colors",children:"Go to Teams"})]});const L=({column:O})=>{const k=!ak.includes(O.field),z=j=>j[O.field]||0,U=v.map(z),$=Math.max(...U),X=Math.min(...U),K=j=>{switch(O.format){case"percentage":return`${j.toFixed(O.decimals)}%`;case"time":return`${j.toFixed(O.decimals)}s`;default:return j.toFixed(O.decimals)}},re=j=>{if($===X)return"text-textPrimary";const S=k?j===$:j===X,C=k?j===X:j===$;return S?"text-success font-bold":C?"text-danger":"text-textPrimary"};return o.jsxs("tr",{className:"border-b border-border hover:bg-interactive",children:[o.jsx("td",{className:"px-4 py-3 font-medium text-textSecondary",title:O.description,children:O.label}),v.map(j=>{const S=z(j);return o.jsx("td",{className:`px-4 py-3 text-center ${re(S)}`,children:K(S)},j.teamNumber)})]})};return o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>t("/teams"),className:"p-2 text-textSecondary hover:text-textPrimary hover:bg-interactive rounded-lg transition-colors",title:"Back to Teams",children:o.jsx(KS,{size:24})}),o.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Team Comparison"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("p",{className:"text-textSecondary text-sm md:text-base",children:["Comparing ",v.length," team",v.length!==1?"s":"","  ",T.length," metrics"]}),o.jsxs(On,{to:"/settings/metrics",className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-surface border border-border rounded-lg hover:bg-interactive transition-colors",children:[o.jsx(WS,{size:16}),"Customize"]})]})]}),o.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:`200px repeat(${v.length}, 1fr)`},children:[o.jsx("div",{}),v.map(O=>{const k=x[O.teamNumber]||[];return o.jsxs("div",{className:"bg-surface rounded-lg border border-border p-4 relative",children:[o.jsx("button",{onClick:()=>r(O.teamNumber),className:"absolute top-2 right-2 text-textMuted hover:text-danger transition-colors",children:o.jsx(ws,{size:20})}),o.jsx("p",{className:"text-2xl font-bold",children:O.teamNumber}),O.teamName&&o.jsx("p",{className:"text-sm text-textSecondary mt-1",children:O.teamName}),o.jsxs("p",{className:"text-xs text-textMuted mt-2",children:[O.matchesPlayed," matches"]}),k.length>0&&o.jsxs("button",{onClick:()=>p(O.teamNumber),className:"mt-3 flex items-center gap-1 text-xs text-danger hover:underline",children:[o.jsx(Lh,{size:12,fill:"currentColor"}),k.length," video",k.length!==1?"s":""]})]},O.teamNumber)})]}),o.jsx("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsxs("colgroup",{children:[o.jsx("col",{style:{width:"200px"}}),v.map(O=>o.jsx("col",{},O.teamNumber))]}),Object.keys(I).map(O=>{const k=I[O];return k.length===0?null:o.jsxs(St.Fragment,{children:[o.jsx("thead",{className:"bg-surfaceElevated",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:ZS[O]}),v.map(z=>o.jsx("th",{className:"px-4 py-3"},z.teamNumber))]})}),o.jsx("tbody",{children:k.map(z=>o.jsx(L,{column:z},z.id))})]},O)}),T.length===0&&o.jsx("tbody",{children:o.jsx("tr",{children:o.jsxs("td",{colSpan:v.length+1,className:"px-4 py-8 text-center text-textSecondary",children:["No metrics enabled. ",o.jsx(On,{to:"/settings/metrics",className:"text-success hover:underline",children:"Click here"})," to customize which metrics to display."]})})})]})})}),o.jsxs("div",{className:"flex items-center gap-6 text-sm text-textSecondary justify-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 bg-success rounded"}),o.jsx("span",{children:"Best Performance"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 bg-danger rounded"}),o.jsx("span",{children:"Worst Performance"})]})]}),m&&x[m]&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>p(null),children:o.jsxs("div",{className:"bg-surface rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",onClick:O=>O.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-surface flex items-center justify-between p-4 border-b border-border",children:[o.jsxs("h3",{className:"font-bold",children:["Team ",m," - Match Videos"]}),o.jsx("button",{onClick:()=>p(null),className:"p-1 hover:bg-interactive rounded transition-colors",children:o.jsx(ws,{size:20})})]}),o.jsx("div",{className:"p-4 space-y-3",children:x[m].sort((O,k)=>{const z={f:5,sf:4,qf:3,ef:2,qm:1};return z[O.comp_level]!==z[k.comp_level]?z[k.comp_level]-z[O.comp_level]:k.match_number-O.match_number}).map(O=>{const k=BS(O);if(!k)return null;const z=O.comp_level==="qm"?`Qual ${O.match_number}`:`${O.comp_level.toUpperCase()} ${O.set_number}-${O.match_number}`;return o.jsxs("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-surfaceElevated hover:bg-interactive rounded-lg transition-colors border border-border",children:[o.jsx(Lh,{size:20,className:"text-danger",fill:"currentColor"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold",children:z}),o.jsxs("p",{className:"text-xs text-textSecondary",children:[O.alliances.red.score," - ",O.alliances.blue.score]})]}),o.jsx("span",{className:"text-xs text-textMuted",children:"Watch on YouTube"})]},O.key)})})]})})]})}function p_(t,e){const n=t.map(y=>{const v=e.find(I=>I.teamNumber===y);if(!v)return{teamNumber:y,autoPoints:0,teleopPoints:0,endgamePoints:0,totalPoints:0,reliability:.5,matchesPlayed:0,climbRate:0};const T=1-Math.min((v.diedRate+v.noShowRate)/100,.5);return{teamNumber:y,teamName:v.teamName,autoPoints:v.avgAutoPoints*T,teleopPoints:v.avgTeleopPoints*T,endgamePoints:v.avgEndgamePoints*T,totalPoints:v.avgTotalPoints*T,reliability:T,matchesPlayed:v.matchesPlayed,climbRate:v.climbAttemptRate*(v.level1ClimbRate+v.level2ClimbRate+v.level3ClimbRate)/100}}),r=n.reduce((y,v)=>y+v.autoPoints,0),i=n.reduce((y,v)=>y+v.teleopPoints,0),c=n.reduce((y,v)=>y+v.endgamePoints,0),d=r+i+c,m=n.length>0?n.reduce((y,v)=>y+v.reliability,0)/n.length:0,p=n.length>0?Math.min(...n.map(y=>y.matchesPlayed)):0,x=p>=6?"high":p>=3?"medium":"low";return{totalScore:d,autoScore:r,teleopScore:i,endgameScore:c,reliability:m,confidence:x,teams:n}}function lk(t,e){const n=t-e;return 1/(1+Math.exp(-.1*n))}function g_(t,e){const n=lk(t.totalScore,e.totalScore),r=Math.max(0,1-Math.abs(t.totalScore-e.totalScore)/5)*.1,i=n*2+r*1,c=t.teams.map(y=>Math.min(y.climbRate/100,1)),d=c.length===3?c[0]*c[1]*c[2]:0,m=t.autoScore+t.teleopScore,p=1/(1+Math.exp(-.15*(m-50))),x=i+d+p;return{winProbability:n,expectedWinRP:i,climbBonusProb:d,scoringBonusProb:p,expectedTotalRP:x}}function yh(t,e,n){const r=p_(t,n),i=p_(e,n),c=Math.abs(r.totalScore-i.totalScore),d=c<1?"even":r.totalScore>i.totalScore?"red":"blue",m=g_(r,i),p=g_(i,r);return{red:r,blue:i,scoreDiff:c,favoredAlliance:d,redRP:m,blueRP:p}}const Ar=148,x_=3;function ok(){const t=$e(w=>w.teamStatistics),e=$e(w=>w.matchEntries),n=$e(w=>w.pitEntries),r=$e(w=>w.tbaData),i=$e(w=>w.tbaLoading),c=$e(w=>w.fetchTBAData);E.useEffect(()=>{r||c()},[r,c]);const d=r?.matches?.filter(w=>w.alliances.red.team_keys.includes(`frc${Ar}`)||w.alliances.blue.team_keys.includes(`frc${Ar}`)).sort((w,A)=>{const D={qm:0,ef:1,qf:2,sf:3,f:4};return D[w.comp_level]!==D[A.comp_level]?D[w.comp_level]-D[A.comp_level]:w.match_number-A.match_number})||[],m=d.filter(w=>w.alliances.red.score>=0),p=d.filter(w=>w.alliances.red.score<0),x=m.reduce((w,A)=>{const D=A.alliances.red.team_keys.includes(`frc${Ar}`),q=D?A.alliances.red.score:A.alliances.blue.score,be=D?A.alliances.blue.score:A.alliances.red.score;return q>be?w.wins++:q<be?w.losses++:w.ties++,w},{wins:0,losses:0,ties:0}),y=r?.rankings?.rankings.find(w=>w.team_key===`frc${Ar}`),v=p[0],T=e.length,I=t.length,L=t.length>0?t.reduce((w,A)=>w+A.avgTotalPoints,0)/t.length:0,O=[...t].sort((w,A)=>A.avgTotalPoints-w.avgTotalPoints).slice(0,5),k=[...t].sort((w,A)=>A.level3ClimbRate-w.level3ClimbRate).slice(0,5),z=[...t].sort((w,A)=>A.avgAutoPoints-w.avgAutoPoints).slice(0,5),[U,$]=E.useState(!1),X=E.useMemo(()=>{if(!t.length||!d.length)return new Map;const w=new Map;for(const A of d){const D=A.alliances.red.team_keys.map(Lt),q=A.alliances.blue.team_keys.map(Lt);w.set(A.key,yh(D,q,t))}return w},[d,t]),K=w=>`${{qm:"Q",ef:"E",qf:"QF",sf:"SF",f:"F"}[w.comp_level]}${w.match_number}`,re=m.slice(-x_),j=p.slice(0,x_),S=U?d:[...re,...j],C=d.length>S.length,P=({match:w})=>{const A=w.alliances.red.team_keys.includes(`frc${Ar}`),D=w.alliances.red.score>=0,q=A?w.alliances.red.score:w.alliances.blue.score,be=A?w.alliances.blue.score:w.alliances.red.score,B=q>be,ce=q<be,le=X.get(w.key),H=le?A?le.redRP:le.blueRP:null,pe=H?.winProbability??0;return o.jsxs("tr",{className:`border-b border-border/50 hover:bg-surfaceElevated ${D?"":"bg-surfaceElevated/50"}`,children:[o.jsx("td",{className:"py-2 px-2 font-bold",children:K(w)}),o.jsx("td",{className:`py-2 px-2 text-center ${A?"font-bold":""}`,children:w.alliances.red.team_keys.map(V=>{const Q=Lt(V);return o.jsx("span",{className:Q===Ar?"text-warning font-bold":"text-redAlliance",children:Q},V)}).reduce((V,Q,fe)=>fe===0?[Q]:[...V,", ",Q],[])}),o.jsx("td",{className:"py-2 px-2 text-center font-mono",children:D?o.jsxs("span",{children:[o.jsx("span",{className:w.alliances.red.score>w.alliances.blue.score?"text-success font-bold":"",children:w.alliances.red.score})," - ",o.jsx("span",{className:w.alliances.blue.score>w.alliances.red.score?"text-success font-bold":"",children:w.alliances.blue.score})]}):o.jsx("span",{className:"text-textMuted",children:"--"})}),o.jsx("td",{className:`py-2 px-2 text-center ${A?"":"font-bold"}`,children:w.alliances.blue.team_keys.map(V=>{const Q=Lt(V);return o.jsx("span",{className:Q===Ar?"text-warning font-bold":"text-blueAlliance",children:Q},V)}).reduce((V,Q,fe)=>fe===0?[Q]:[...V,", ",Q],[])}),o.jsx("td",{className:"py-2 px-2 text-center",children:D?o.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${B?"bg-success/20 text-success":ce?"bg-danger/20 text-danger":"bg-textMuted/20 text-textMuted"}`,children:B?"W":ce?"L":"T"}):o.jsx("span",{className:"text-textMuted text-xs",children:"Upcoming"})}),o.jsx("td",{className:"py-2 px-2 text-center font-mono text-xs",children:le?o.jsxs("span",{children:[o.jsx("span",{className:"text-redAlliance",children:le.red.totalScore.toFixed(0)}),o.jsx("span",{className:"text-textMuted",children:"-"}),o.jsx("span",{className:"text-blueAlliance",children:le.blue.totalScore.toFixed(0)})]}):o.jsx("span",{className:"text-textMuted",children:"--"})}),o.jsx("td",{className:"py-2 px-2 text-center text-xs",children:H?o.jsxs("span",{className:`font-medium ${pe>=.6?"text-success":pe<=.4?"text-danger":"text-warning"}`,children:[(pe*100).toFixed(0),"%"]}):o.jsx("span",{className:"text-textMuted",children:"--"})}),o.jsx("td",{className:"py-2 px-2 text-center text-xs",children:H?o.jsx("span",{className:"text-warning font-medium",children:H.expectedTotalRP.toFixed(1)}):o.jsx("span",{className:"text-textMuted",children:"--"})})]})};return o.jsxs("div",{className:"space-y-6",children:[r&&o.jsx("div",{className:"bg-gradient-to-r from-warning/20 to-warning/5 p-6 rounded-lg border border-warning/30",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-5xl font-bold text-warning",children:Ar}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Robowranglers"}),o.jsx("p",{className:"text-textSecondary",children:r.event?.name||"Event Data Loading..."})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-4 md:gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-textSecondary uppercase tracking-wide",children:"Rank"}),o.jsx("p",{className:"text-3xl font-bold",children:y?`#${y.rank}`:"--"}),y&&o.jsxs("p",{className:"text-xs text-textSecondary",children:["of ",r.rankings?.rankings.length]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-textSecondary uppercase tracking-wide",children:"Record"}),o.jsxs("p",{className:"text-3xl font-bold",children:[o.jsx("span",{className:"text-success",children:x.wins}),o.jsx("span",{className:"text-textMuted",children:"-"}),o.jsx("span",{className:"text-danger",children:x.losses}),x.ties>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-textMuted",children:"-"}),o.jsx("span",{className:"text-textSecondary",children:x.ties})]})]}),o.jsxs("p",{className:"text-xs text-textSecondary",children:[m.length," played"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-textSecondary uppercase tracking-wide",children:"Next Match"}),v?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-3xl font-bold",children:K(v)}),o.jsxs("p",{className:"text-xs text-textSecondary",children:["vs ",v.alliances.red.team_keys.includes(`frc${Ar}`)?v.alliances.blue.team_keys.map(w=>Lt(w)).join(", "):v.alliances.red.team_keys.map(w=>Lt(w)).join(", ")]})]}):o.jsx("p",{className:"text-2xl font-bold text-textMuted",children:"--"})]})]})]})}),r&&d.length>0&&o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Ih,{className:"text-warning",size:20}),"Team ",Ar," Matches"]}),o.jsxs("button",{onClick:()=>c(),disabled:i,className:"flex items-center gap-1 px-3 py-1 text-sm bg-surfaceElevated hover:bg-interactive rounded transition-colors",children:[o.jsx(hx,{size:14,className:i?"animate-spin":""}),"Refresh"]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-border",children:[o.jsx("th",{className:"text-left py-2 px-2",children:"Match"}),o.jsx("th",{className:"text-center py-2 px-2 text-redAlliance",children:"Red Alliance"}),o.jsx("th",{className:"text-center py-2 px-2",children:"Score"}),o.jsx("th",{className:"text-center py-2 px-2 text-blueAlliance",children:"Blue Alliance"}),o.jsx("th",{className:"text-center py-2 px-2",children:"Result"}),o.jsx("th",{className:"text-center py-2 px-2 text-textSecondary",children:o.jsxs("span",{className:"flex items-center justify-center gap-1",children:[o.jsx(Uh,{size:12}),"Pred."]})}),o.jsx("th",{className:"text-center py-2 px-2 text-textSecondary",children:"Win%"}),o.jsx("th",{className:"text-center py-2 px-2 text-textSecondary",children:"xRP"})]})}),o.jsx("tbody",{children:S.map(w=>o.jsx(P,{match:w},w.key))})]})}),(C||U)&&o.jsx("button",{onClick:()=>$(!U),className:"w-full mt-4 flex items-center justify-center gap-2 py-2 text-sm text-textSecondary hover:text-textPrimary hover:bg-surfaceElevated rounded transition-colors",children:U?o.jsxs(o.Fragment,{children:[o.jsx(gf,{size:16}),"Show Less"]}):o.jsxs(o.Fragment,{children:[o.jsx(fl,{size:16}),"Show All ",d.length," Matches (",m.length-re.length," more completed)"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Total Teams"}),o.jsx("p",{className:"text-3xl font-bold mt-1",children:I})]}),o.jsx(yf,{className:"text-textMuted",size:32})]})}),o.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Total Matches"}),o.jsx("p",{className:"text-3xl font-bold mt-1",children:T})]}),o.jsx(nu,{className:"text-textMuted",size:32})]})}),o.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Points/Match"}),o.jsx("p",{className:"text-3xl font-bold mt-1",children:L.toFixed(1)})]}),o.jsx(zh,{className:"text-textMuted",size:32})]})}),o.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Pit Reports"}),o.jsx("p",{className:"text-3xl font-bold mt-1",children:n.length})]}),o.jsx(go,{className:"text-textMuted",size:32})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[o.jsx(go,{className:"text-warning",size:20}),"Top Scorers"]}),o.jsx("div",{className:"space-y-3",children:O.map((w,A)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-textMuted font-mono",children:["#",A+1]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:w.teamNumber}),w.teamName&&o.jsx("p",{className:"text-sm text-textSecondary",children:w.teamName})]})]}),o.jsxs("span",{className:"font-bold text-success",children:[w.avgTotalPoints.toFixed(1)," pts"]})]},w.teamNumber))})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[o.jsx(zh,{className:"text-blueAlliance",size:20}),"Top Climbers (L3)"]}),o.jsx("div",{className:"space-y-3",children:k.map((w,A)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-textMuted font-mono",children:["#",A+1]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:w.teamNumber}),w.teamName&&o.jsx("p",{className:"text-sm text-textSecondary",children:w.teamName})]})]}),o.jsxs("span",{className:"font-bold text-blueAlliance",children:[w.level3ClimbRate.toFixed(0),"%"]})]},w.teamNumber))})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[o.jsx(nu,{className:"text-redAlliance",size:20}),"Top Auto"]}),o.jsx("div",{className:"space-y-3",children:z.map((w,A)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-textMuted font-mono",children:["#",A+1]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:w.teamNumber}),w.teamName&&o.jsx("p",{className:"text-sm text-textSecondary",children:w.teamName})]})]}),o.jsxs("span",{className:"font-bold text-redAlliance",children:[w.avgAutoPoints.toFixed(1)," pts"]})]},w.teamNumber))})]})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"Event Statistics"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Auto Accuracy"}),o.jsxs("p",{className:"text-2xl font-bold mt-1",children:[t.length>0?(t.reduce((w,A)=>w+A.autoAccuracy,0)/t.length).toFixed(1):0,"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Teleop Accuracy"}),o.jsxs("p",{className:"text-2xl font-bold mt-1",children:[t.length>0?(t.reduce((w,A)=>w+A.teleopAccuracy,0)/t.length).toFixed(1):0,"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Climb Attempt Rate"}),o.jsxs("p",{className:"text-2xl font-bold mt-1",children:[t.length>0?(t.reduce((w,A)=>w+A.climbAttemptRate,0)/t.length).toFixed(1):0,"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Cycles/Match"}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:t.length>0?(t.reduce((w,A)=>w+A.avgCycleCount,0)/t.length).toFixed(1):0})]})]})]})]})}function ck({match:t,onClose:e}){E.useEffect(()=>{const d=m=>{m.key==="Escape"&&e()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e]);const n=({value:d,label:m})=>o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${d?"bg-success/20 text-success":"bg-surface text-textMuted"}`,children:[d?o.jsx(jr,{size:12}):o.jsx(bg,{size:12}),m]}),r=({label:d,value:m,suffix:p=""})=>o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-xs",children:d}),o.jsxs("p",{className:"font-semibold",children:[m,p]})]}),i=({label:d,value:m,max:p=5})=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsx("span",{className:"text-textSecondary",children:d}),o.jsxs("span",{className:"font-semibold",children:[m,"/",p]})]}),o.jsx("div",{className:"h-2 bg-surface rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-success rounded-full transition-all",style:{width:`${m/p*100}%`}})})]}),c=({title:d})=>o.jsx("h3",{className:"text-sm font-bold text-textSecondary uppercase tracking-wide border-b border-border pb-2 mb-3",children:d});return o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:e,children:o.jsxs("div",{className:"bg-surface rounded-lg w-full max-w-[700px] max-h-[90vh] relative flex flex-col",onClick:d=>d.stopPropagation(),style:{WebkitOverflowScrolling:"touch"},children:[o.jsxs("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-b border-border flex justify-between items-center rounded-t-lg",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold",children:[t.matchType==="qualification"?"Qual":t.matchType==="playoff"?"Playoff":"Practice"," ",t.matchNumber]}),o.jsxs("p",{className:"text-sm text-textSecondary",children:["Team ",t.teamNumber,"  ",t.alliance.toUpperCase()," Alliance  Station ",t.driverStation]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-interactive rounded transition-colors",title:"Close (ESC)",children:o.jsx(ws,{size:20})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 min-h-0 space-y-6",style:{WebkitOverflowScrolling:"touch"},children:[(t.noShow||t.robotDied||t.robotTipped||t.mechanicalIssues||t.cardReceived!=="none")&&o.jsxs("div",{className:"bg-danger/10 border border-danger/30 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-danger font-semibold mb-2",children:[o.jsx(Bc,{size:16}),"Issues Reported"]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.noShow&&o.jsx("span",{className:"px-2 py-1 bg-danger/20 text-danger text-xs rounded font-medium",children:"NO SHOW"}),t.robotDied&&o.jsx("span",{className:"px-2 py-1 bg-danger/20 text-danger text-xs rounded font-medium",children:"ROBOT DIED"}),t.robotTipped&&o.jsx("span",{className:"px-2 py-1 bg-warning/20 text-warning text-xs rounded font-medium",children:"ROBOT TIPPED"}),t.mechanicalIssues&&o.jsx("span",{className:"px-2 py-1 bg-warning/20 text-warning text-xs rounded font-medium",children:"MECHANICAL ISSUES"}),t.cardReceived==="yellow"&&o.jsx("span",{className:"px-2 py-1 bg-warning/20 text-warning text-xs rounded font-medium",children:"YELLOW CARD"}),t.cardReceived==="red"&&o.jsx("span",{className:"px-2 py-1 bg-danger/20 text-danger text-xs rounded font-medium",children:"RED CARD"})]})]}),o.jsxs("div",{children:[o.jsx(c,{title:"Pre-Match"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx(r,{label:"Starting Position",value:t.startingPosition.toUpperCase()}),o.jsx(r,{label:"Preloaded FUEL",value:t.preloadedFuel}),o.jsx(r,{label:"No Show",value:t.noShow?"Yes":"No"})]})]}),o.jsxs("div",{children:[o.jsx(c,{title:"Autonomous"}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3",children:[o.jsx(r,{label:"FUEL Scored",value:t.autoFuelScored}),o.jsx(r,{label:"FUEL Missed",value:t.autoFuelMissed}),o.jsx(r,{label:"Accuracy",value:t.autoFuelScored+t.autoFuelMissed>0?Math.round(t.autoFuelScored/(t.autoFuelScored+t.autoFuelMissed)*100):0,suffix:"%"}),o.jsx(r,{label:"Climb Success",value:t.autoClimbSuccess?"Yes":"No"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[o.jsx(n,{value:t.autoMobility,label:"Mobility"}),o.jsx(n,{value:t.autoClimbAttempted,label:"Climb Attempted"}),o.jsx(n,{value:t.autoCrossedBump,label:"Crossed Bump"}),o.jsx(n,{value:t.autoUsedTrench,label:"Used Trench"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[o.jsx(r,{label:"From Depot",value:t.autoFuelFromDepot}),o.jsx(r,{label:"From Neutral",value:t.autoFuelFromNeutral}),o.jsx(r,{label:"From Human",value:t.autoFuelFromHuman})]}),t.commentsAuto&&o.jsxs("div",{className:"mt-3 p-3 bg-surfaceElevated rounded text-sm",children:[o.jsx("p",{className:"text-textSecondary text-xs mb-1",children:"Auto Comments"}),o.jsx("p",{children:t.commentsAuto})]})]}),o.jsxs("div",{children:[o.jsx(c,{title:"Teleop"}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3",children:[o.jsx(r,{label:"FUEL Scored",value:t.teleopTotalScored}),o.jsx(r,{label:"FUEL Missed",value:t.teleopTotalMissed}),o.jsx(r,{label:"Accuracy",value:t.teleopTotalScored+t.teleopTotalMissed>0?Math.round(t.teleopTotalScored/(t.teleopTotalScored+t.teleopTotalMissed)*100):0,suffix:"%"}),o.jsx(r,{label:"Cycles",value:t.cycleCount})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3 text-sm",children:[o.jsx(r,{label:"Active Hub",value:t.teleopScoresDuringActive}),o.jsx(r,{label:"Inactive Hub",value:t.teleopScoresDuringInactive}),o.jsx(r,{label:"To Human Player",value:t.teleopFuelToHuman}),o.jsx("div",{})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[o.jsx(r,{label:"From Depot",value:t.teleopFuelFromDepot}),o.jsx(r,{label:"From Neutral",value:t.teleopFuelFromNeutral}),o.jsx(r,{label:"From Human",value:t.teleopFuelFromHuman})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(n,{value:t.playedDefense,label:"Played Defense"}),o.jsx(n,{value:t.wasDefended,label:"Was Defended"})]}),t.playedDefense&&o.jsx("div",{className:"mt-2",children:o.jsx(r,{label:"Defense Effectiveness",value:t.defenseEffectiveness.toUpperCase()})}),t.wasDefended&&o.jsx("div",{className:"mt-2",children:o.jsx(r,{label:"Defense Evasion",value:t.defenseEvasion.toUpperCase()})}),t.commentsTeleop&&o.jsxs("div",{className:"mt-3 p-3 bg-surfaceElevated rounded text-sm",children:[o.jsx("p",{className:"text-textSecondary text-xs mb-1",children:"Teleop Comments"}),o.jsx("p",{children:t.commentsTeleop})]})]}),o.jsxs("div",{children:[o.jsx(c,{title:"Endgame"}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-3",children:[o.jsx(r,{label:"Climb Level",value:t.climbLevel==="none"?"None":t.climbLevel.replace("level","Level ")}),o.jsx(r,{label:"Climb Time",value:t.climbTime>0?t.climbTime:"-",suffix:t.climbTime>0?"s":""}),o.jsx(r,{label:"Endgame FUEL",value:t.endgameFuelScored}),o.jsx(r,{label:"Parked",value:t.parked?"Yes":"No"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(n,{value:t.climbAttempted,label:"Climb Attempted"}),o.jsx(n,{value:t.climbAssisted,label:"Was Assisted"}),o.jsx(n,{value:t.climbAssistedOther,label:"Assisted Others"})]})]}),o.jsxs("div",{children:[o.jsx(c,{title:"Performance Ratings"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsx(i,{label:"Driver Skill",value:t.driverSkill}),o.jsx(i,{label:"Intake Speed",value:t.intakeSpeed}),o.jsx(i,{label:"Shooting Accuracy",value:t.shootingAccuracy}),o.jsx(i,{label:"Shooting Speed",value:t.shootingSpeed})]}),o.jsx("div",{className:"mt-3",children:o.jsx(r,{label:"Human Player Rating",value:t.humanPlayerRating.toUpperCase()})})]}),t.commentsOverall&&o.jsxs("div",{children:[o.jsx(c,{title:"Overall Comments"}),o.jsx("div",{className:"p-3 bg-surfaceElevated rounded",children:o.jsx("p",{children:t.commentsOverall})})]}),o.jsxs("div",{className:"text-xs text-textMuted border-t border-border pt-4",children:[o.jsxs("p",{children:["Scouted by: ",t.scoutName]}),o.jsxs("p",{children:["Recorded: ",new Date(t.timestamp).toLocaleString()]})]})]}),o.jsx("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-t border-border rounded-b-lg",children:o.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors font-medium",children:"Close"})})]})})}function uk(){const{teamNumber:t}=lx(),e=pu(),n=$e(K=>K.teamStatistics),r=$e(K=>K.matchEntries),i=$e(K=>K.pitEntries),c=$e(K=>K.eventCode),d=ht(K=>K.tbaApiKey),[m,p]=E.useState([]),[x,y]=E.useState(null),[v,T]=E.useState(null),I=parseInt(t||"0"),L=n.find(K=>K.teamNumber===I),O=r.filter(K=>K.teamNumber===I).sort((K,re)=>K.matchNumber-re.matchNumber),k=i.find(K=>K.teamNumber===I);if(E.useEffect(()=>{async function K(){try{const re=HS(I),j=await FS(re,c,d);p(j)}catch(re){console.error("Failed to load TBA matches:",re)}}K()},[I,c,d]),!L)return o.jsxs("div",{className:"text-center py-20",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Team Not Found"}),o.jsx("button",{onClick:()=>e(-1),className:"text-blueAlliance hover:underline",children:"Go Back"})]});const z=K=>{const re=K.autoFuelScored*1,j=K.autoClimbSuccess?15:0,S=re+j,C=K.teleopScoresDuringActive*1,w={none:0,level1:10,level2:20,level3:30}[K.climbLevel]||0,A=K.endgameFuelScored*1,D=w+A;return{auto:S,teleop:C,endgame:D,total:S+C+D}},U=O.map(K=>({match:K,points:z(K)})),X=(()=>{if(U.length<3)return"stable";const K=U.slice(-3).map(C=>C.points.total),re=U.slice(0,3).map(C=>C.points.total),j=K.reduce((C,P)=>C+P,0)/K.length,S=re.reduce((C,P)=>C+P,0)/re.length;return j>S*1.1?"up":j<S*.9?"down":"stable"})();return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>e(-1),className:"p-2 bg-surface hover:bg-interactive rounded-lg transition-colors",title:"Go back",children:o.jsx(KS,{size:20})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h1",{className:"text-4xl font-bold",children:L.teamNumber}),X==="up"&&o.jsx(zh,{className:"text-success",size:32}),X==="down"&&o.jsx(Fj,{className:"text-danger",size:32}),X==="stable"&&o.jsx(aj,{className:"text-textMuted",size:32})]}),L.teamName&&o.jsx("p",{className:"text-xl text-textSecondary mt-1",children:L.teamName})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Avg Total Points"}),o.jsx("p",{className:"text-3xl font-bold mt-1",children:L.avgTotalPoints.toFixed(1)})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Matches Played"}),o.jsx("p",{className:"text-3xl font-bold mt-1",children:L.matchesPlayed})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Auto Accuracy"}),o.jsxs("p",{className:"text-3xl font-bold mt-1",children:[L.autoAccuracy.toFixed(0),"%"]})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"L3 Climb Rate"}),o.jsxs("p",{className:"text-3xl font-bold mt-1",children:[L.level3ClimbRate.toFixed(0),"%"]})]})]}),k&&o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"Pit Scouting Info"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Drivetrain"}),o.jsx("p",{className:"font-semibold mt-1 capitalize",children:k.drivetrainType})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Shooter Type"}),o.jsx("p",{className:"font-semibold mt-1",children:k.shooterType})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Max Capacity"}),o.jsxs("p",{className:"font-semibold mt-1",children:[k.maxFuelCapacity," FUEL"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Climb Capability"}),o.jsx("p",{className:"font-semibold mt-1 capitalize",children:k.climbCapability})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Max Range"}),o.jsxs("p",{className:"font-semibold mt-1",children:[k.maxShootingRange," ft"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Preferred Role"}),o.jsx("p",{className:"font-semibold mt-1 capitalize",children:k.preferredRole})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Weight"}),o.jsxs("p",{className:"font-semibold mt-1",children:[k.robotWeight," lbs"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Driver Experience"}),o.jsx("p",{className:"font-semibold mt-1",children:k.driverExperience})]})]}),k.comments&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[o.jsx("p",{className:"text-textSecondary text-sm",children:"Comments"}),o.jsx("p",{className:"mt-1",children:k.comments})]})]}),o.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[o.jsx("div",{className:"p-6 border-b border-border",children:o.jsx("h2",{className:"text-xl font-bold",children:"Match History"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-surfaceElevated border-b border-border",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:"Match"}),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Video"}),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Alliance"}),o.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Total Pts"}),o.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Auto"}),o.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Teleop"}),o.jsx("th",{className:"px-4 py-3 text-right text-textSecondary text-sm font-semibold",children:"Endgame"}),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Auto Fuel"}),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Teleop Fuel"}),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Climb"}),o.jsx("th",{className:"px-4 py-3 text-center text-textSecondary text-sm font-semibold",children:"Cycles"}),o.jsx("th",{className:"px-4 py-3 text-left text-textSecondary text-sm font-semibold",children:"Notes"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:U.map(({match:K,points:re})=>{const j=m.find(C=>C.comp_level==="qm"&&C.match_number===K.matchNumber),S=j?BS(j):null;return o.jsxs("tr",{className:"hover:bg-interactive transition-colors",children:[o.jsx("td",{className:"px-4 py-4",children:o.jsxs("button",{onClick:()=>T(K),className:"flex items-center gap-1 font-semibold text-textPrimary hover:text-blueAlliance transition-colors",title:"View full scouting data",children:[K.matchType==="qualification"?"Q":K.matchType==="playoff"?"P":"Pr",K.matchNumber,o.jsx(UR,{size:14,className:"text-textMuted"})]})}),o.jsx("td",{className:"px-4 py-4 text-center",children:S?o.jsx("button",{onClick:()=>y({matchNumber:K.matchNumber,videoUrl:S}),className:"p-1 text-danger hover:bg-danger/10 rounded transition-colors",title:"Watch match video",children:o.jsx(Lh,{size:18,fill:"currentColor"})}):o.jsx("span",{className:"text-textMuted text-xs",children:"-"})}),o.jsx("td",{className:"px-4 py-4 text-center",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${K.alliance==="red"?"bg-redAlliance/20 text-redAlliance":"bg-blueAlliance/20 text-blueAlliance"}`,children:K.alliance.toUpperCase()})}),o.jsx("td",{className:"px-4 py-4 text-right font-bold",children:re.total}),o.jsx("td",{className:"px-4 py-4 text-right text-textSecondary",children:re.auto}),o.jsx("td",{className:"px-4 py-4 text-right text-textSecondary",children:re.teleop}),o.jsx("td",{className:"px-4 py-4 text-right text-textSecondary",children:re.endgame}),o.jsxs("td",{className:"px-4 py-4 text-center",children:[o.jsx("span",{className:"text-success",children:K.autoFuelScored}),o.jsx("span",{className:"text-textMuted",children:"/"}),o.jsx("span",{className:"text-danger",children:K.autoFuelMissed})]}),o.jsxs("td",{className:"px-4 py-4 text-center",children:[o.jsx("span",{className:"text-success",children:K.teleopTotalScored}),o.jsx("span",{className:"text-textMuted",children:"/"}),o.jsx("span",{className:"text-danger",children:K.teleopTotalMissed})]}),o.jsx("td",{className:"px-4 py-4 text-center",children:K.climbLevel==="none"?o.jsx("span",{className:"text-textMuted",children:"-"}):o.jsx("span",{className:"font-semibold capitalize",children:K.climbLevel.replace("level","L")})}),o.jsx("td",{className:"px-4 py-4 text-center",children:K.cycleCount}),o.jsxs("td",{className:"px-4 py-4 text-sm text-textSecondary max-w-xs truncate",children:[K.robotDied&&o.jsx("span",{className:"text-danger mr-2",children:"DIED"}),K.robotTipped&&o.jsx("span",{className:"text-warning mr-2",children:"TIPPED"}),K.cardReceived!=="none"&&o.jsxs("span",{className:K.cardReceived==="yellow"?"text-warning mr-2":"text-danger mr-2",children:[K.cardReceived.toUpperCase()," CARD"]}),K.commentsOverall]})]},K.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"Auto Performance"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Avg FUEL Scored"}),o.jsx("span",{className:"font-semibold",children:L.avgAutoFuelScored.toFixed(1)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Accuracy"}),o.jsxs("span",{className:"font-semibold",children:[L.autoAccuracy.toFixed(1),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Mobility Rate"}),o.jsxs("span",{className:"font-semibold",children:[L.autoMobilityRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Auto Climb Rate"}),o.jsxs("span",{className:"font-semibold",children:[L.autoClimbRate.toFixed(0),"%"]})]})]})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"Teleop Performance"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Avg FUEL Scored"}),o.jsx("span",{className:"font-semibold",children:L.avgTeleopFuelScored.toFixed(1)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Accuracy"}),o.jsxs("span",{className:"font-semibold",children:[L.teleopAccuracy.toFixed(1),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Avg Cycles"}),o.jsx("span",{className:"font-semibold",children:L.avgCycleCount.toFixed(1)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Active HUB Scoring"}),o.jsx("span",{className:"font-semibold",children:L.avgActiveHubScores.toFixed(1)})]})]})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"Endgame Performance"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Climb Attempt Rate"}),o.jsxs("span",{className:"font-semibold",children:[L.climbAttemptRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Level 1 Rate"}),o.jsxs("span",{className:"font-semibold",children:[L.level1ClimbRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Level 2 Rate"}),o.jsxs("span",{className:"font-semibold",children:[L.level2ClimbRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Level 3 Rate"}),o.jsxs("span",{className:"font-semibold text-success",children:[L.level3ClimbRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Avg Climb Time"}),o.jsxs("span",{className:"font-semibold",children:[L.avgClimbTime.toFixed(1),"s"]})]})]})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"Reliability"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Robot Died"}),o.jsxs("span",{className:L.diedRate>10?"text-danger font-semibold":"font-semibold",children:[L.diedRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Robot Tipped"}),o.jsxs("span",{className:L.tippedRate>10?"text-warning font-semibold":"font-semibold",children:[L.tippedRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Mechanical Issues"}),o.jsxs("span",{className:L.mechanicalIssuesRate>15?"text-danger font-semibold":"font-semibold",children:[L.mechanicalIssuesRate.toFixed(0),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-textSecondary",children:"Driver Skill (1-5)"}),o.jsx("span",{className:"font-semibold",children:L.avgDriverSkill.toFixed(1)})]})]})]})]}),x&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>y(null),children:o.jsxs("div",{className:"bg-surface rounded-lg max-w-4xl w-full overflow-hidden",onClick:K=>K.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[o.jsxs("h3",{className:"font-bold",children:["Match Q",x.matchNumber," - Team ",I]}),o.jsx("button",{onClick:()=>y(null),className:"p-1 hover:bg-interactive rounded transition-colors",children:o.jsx(ws,{size:20})})]}),o.jsx("div",{className:"aspect-video w-full",children:o.jsx("iframe",{width:"100%",height:"100%",src:x.videoUrl.replace("watch?v=","embed/"),title:`Match Q${x.matchNumber}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})})]})}),v&&o.jsx(ck,{match:v,onClose:()=>T(null)})]})}function dk(){const[t,e]=E.useState(!1),[n,r]=E.useState([]),i=()=>{e(!t),t&&r([])},c=p=>{r(x=>x.includes(p)?x.filter(y=>y!==p):x.length>=2?x:[...x,p])},d=()=>{r([])},m=n.length===2;return{isCompareMode:t,selectedTeams:n,toggleCompareMode:i,toggleTeamSelection:c,clearSelection:d,canCompare:m}}function eN({team1:t,team2:e,onPickTeam:n,onClose:r}){E.useEffect(()=>{const d=m=>{m.key==="Escape"&&r()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[r]);const i=({label:d,getValue:m,format:p="number",higherIsBetter:x=!0,decimals:y=1})=>{const v=m(t),T=m(e),I=Math.max(v,T),L=Math.min(v,T),O=z=>{switch(p){case"percentage":return`${z.toFixed(y)}%`;case"time":return`${z.toFixed(y)}s`;case"level":return z===0?"None":`Level ${z}`;default:return z.toFixed(y)}},k=z=>{if(I===L)return"text-textPrimary";const U=x?z===I:z===L,$=x?z===L:z===I;return U?"text-success font-bold":$?"text-danger":"text-textPrimary"};return o.jsxs("div",{className:"grid grid-cols-[1fr_80px_80px] sm:grid-cols-[1fr_100px_100px] gap-2 py-2 border-b border-border",children:[o.jsx("div",{className:"text-sm text-textSecondary",children:d}),o.jsx("div",{className:`text-sm text-center ${k(v)}`,children:O(v)}),o.jsx("div",{className:`text-sm text-center ${k(T)}`,children:O(T)})]})},c=({title:d})=>o.jsx("div",{className:"bg-surfaceElevated px-3 py-2 font-bold text-sm mt-4 first:mt-0",children:d});return o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-surface rounded-lg w-full max-w-[900px] max-h-[90vh] relative flex flex-col",onClick:d=>d.stopPropagation(),style:{WebkitOverflowScrolling:"touch"},children:[o.jsxs("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-b border-border flex justify-between items-center rounded-t-lg",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Team Comparison"}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-interactive rounded transition-colors",title:"Close (ESC)",children:o.jsx(ws,{size:20})})]}),o.jsxs("div",{className:"flex-shrink-0 grid grid-cols-[1fr_80px_80px] sm:grid-cols-[1fr_100px_100px] gap-2 p-4 border-b border-border bg-surface",children:[o.jsx("div",{className:"text-sm font-semibold text-textSecondary",children:"Metric"}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold",children:t.teamNumber}),t.teamName&&o.jsx("div",{className:"text-xs text-textSecondary truncate",children:t.teamName})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold",children:e.teamNumber}),e.teamName&&o.jsx("div",{className:"text-xs text-textSecondary truncate",children:e.teamName})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",style:{WebkitOverflowScrolling:"touch"},children:[o.jsx(c,{title:"Overall Scoring"}),o.jsx(i,{label:"Avg Total Points",getValue:d=>d.avgTotalPoints}),o.jsx(i,{label:"Avg Auto Points",getValue:d=>d.avgAutoPoints}),o.jsx(i,{label:"Avg Teleop Points",getValue:d=>d.avgTeleopPoints}),o.jsx(i,{label:"Avg Endgame Points",getValue:d=>d.avgEndgamePoints}),o.jsx(c,{title:"Climbing Performance"}),o.jsx(i,{label:"Max Endgame Level",getValue:d=>d.level3ClimbRate>0?3:d.level2ClimbRate>0?2:d.level1ClimbRate>0?1:0,format:"level"}),o.jsx(i,{label:"Level 3 Climb Rate",getValue:d=>d.level3ClimbRate,format:"percentage"}),o.jsx(i,{label:"Avg Climb Time",getValue:d=>d.avgClimbTime,format:"time",higherIsBetter:!1}),o.jsx(i,{label:"Climb Attempt Rate",getValue:d=>d.climbAttemptRate,format:"percentage"}),o.jsx(c,{title:"Autonomous Performance"}),o.jsx(i,{label:"Avg Auto FUEL Scored",getValue:d=>d.avgAutoFuelScored,decimals:1}),o.jsx(i,{label:"Auto Accuracy",getValue:d=>d.autoAccuracy,format:"percentage"}),o.jsx(i,{label:"Mobility Rate",getValue:d=>d.autoMobilityRate,format:"percentage"}),o.jsx(i,{label:"Auto Climb Success Rate",getValue:d=>d.autoClimbRate,format:"percentage"}),o.jsx(c,{title:"Reliability"}),o.jsx(i,{label:"No Show Rate",getValue:d=>d.noShowRate,format:"percentage",higherIsBetter:!1}),o.jsx(i,{label:"Robot Died Rate",getValue:d=>d.diedRate,format:"percentage",higherIsBetter:!1}),o.jsx(i,{label:"Mechanical Issues Rate",getValue:d=>d.mechanicalIssuesRate,format:"percentage",higherIsBetter:!1})]}),o.jsxs("div",{className:"flex-shrink-0 bg-surfaceElevated p-4 border-t border-border rounded-b-lg",children:[o.jsx("p",{className:"text-center text-sm text-textSecondary mb-3",children:"Which team should rank higher?"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:()=>n(t.teamNumber),className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-3 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors min-h-[48px] text-sm sm:text-base",children:[o.jsx(da,{size:18}),t.teamNumber]}),o.jsxs("button",{onClick:()=>n(e.teamNumber),className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-3 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors min-h-[48px] text-sm sm:text-base",children:[o.jsx(da,{size:18}),e.teamNumber]})]})]})]})})}function hk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return E.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const bf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ao(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function mx(t){return"nodeType"in t}function Zn(t){var e,n;return t?Ao(t)?t:mx(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function px(t){const{Document:e}=Zn(t);return t instanceof e}function bu(t){return Ao(t)?!1:t instanceof Zn(t).HTMLElement}function tN(t){return t instanceof Zn(t).SVGElement}function Co(t){return t?Ao(t)?t.document:mx(t)?px(t)?t:bu(t)||tN(t)?t.ownerDocument:document:document:document}const rr=bf?E.useLayoutEffect:E.useEffect;function vf(t){const e=E.useRef(t);return rr(()=>{e.current=t}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function fk(){const t=E.useRef(null),e=E.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=E.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function su(t,e){e===void 0&&(e=[t]);const n=E.useRef(t);return rr(()=>{n.current!==t&&(n.current=t)},e),n}function vu(t,e){const n=E.useRef();return E.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Fh(t){const e=vf(t),n=E.useRef(null),r=E.useCallback(i=>{i!==n.current&&e?.(i,n.current),n.current=i},[]);return[n,r]}function Bh(t){const e=E.useRef();return E.useEffect(()=>{e.current=t},[t]),e.current}let Wp={};function _u(t,e){return E.useMemo(()=>{if(e)return e;const n=Wp[t]==null?0:Wp[t]+1;return Wp[t]=n,t+"-"+n},[t,e])}function nN(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((c,d)=>{const m=Object.entries(d);for(const[p,x]of m){const y=c[p];y!=null&&(c[p]=y+t*x)}return c},{...e})}}const co=nN(1),Hh=nN(-1);function mk(t){return"clientX"in t&&"clientY"in t}function _f(t){if(!t)return!1;const{KeyboardEvent:e}=Zn(t.target);return e&&t instanceof e}function pk(t){if(!t)return!1;const{TouchEvent:e}=Zn(t.target);return e&&t instanceof e}function qh(t){if(pk(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return mk(t)?{x:t.clientX,y:t.clientY}:null}const hi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[hi.Translate.toString(t),hi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),y_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gk(t){return t.matches(y_)?t:t.querySelector(y_)}const xk={display:"none"};function yk(t){let{id:e,value:n}=t;return St.createElement("div",{id:e,style:xk},n)}function bk(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return St.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function vk(){const[t,e]=E.useState("");return{announce:E.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const sN=E.createContext(null);function _k(t){const e=E.useContext(sN);E.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Sk(){const[t]=E.useState(()=>new Set),e=E.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[E.useCallback(r=>{let{type:i,event:c}=r;t.forEach(d=>{var m;return(m=d[i])==null?void 0:m.call(d,c)})},[t]),e]}const Nk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Tk={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Ek(t){let{announcements:e=Tk,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Nk}=t;const{announce:c,announcement:d}=vk(),m=_u("DndLiveRegion"),[p,x]=E.useState(!1);if(E.useEffect(()=>{x(!0)},[]),_k(E.useMemo(()=>({onDragStart(v){let{active:T}=v;c(e.onDragStart({active:T}))},onDragMove(v){let{active:T,over:I}=v;e.onDragMove&&c(e.onDragMove({active:T,over:I}))},onDragOver(v){let{active:T,over:I}=v;c(e.onDragOver({active:T,over:I}))},onDragEnd(v){let{active:T,over:I}=v;c(e.onDragEnd({active:T,over:I}))},onDragCancel(v){let{active:T,over:I}=v;c(e.onDragCancel({active:T,over:I}))}}),[c,e])),!p)return null;const y=St.createElement(St.Fragment,null,St.createElement(yk,{id:r,value:i.draggable}),St.createElement(bk,{id:m,announcement:d}));return n?Lc.createPortal(y,n):y}var xn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(xn||(xn={}));function $h(){}function wk(t,e){return E.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Ak(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return E.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const ar=Object.freeze({x:0,y:0});function Ck(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Rk(t,e){const n=qh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function jk(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function kk(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Ik(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function b_(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Dk=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=b_(e,e.left,e.top),c=[];for(const d of r){const{id:m}=d,p=n.get(m);if(p){const x=Ck(b_(p),i);c.push({id:m,data:{droppableContainer:d,value:x}})}}return c.sort(jk)};function Mk(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),c=Math.min(e.top+e.height,t.top+t.height),d=i-r,m=c-n;if(r<i&&n<c){const p=e.width*e.height,x=t.width*t.height,y=d*m,v=y/(p+x-y);return Number(v.toFixed(4))}return 0}const Pk=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const c of r){const{id:d}=c,m=n.get(d);if(m){const p=Mk(m,e);p>0&&i.push({id:d,data:{droppableContainer:c,value:p}})}}return i.sort(kk)};function Ok(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function rN(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ar}function Lk(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return i.reduce((d,m)=>({...d,top:d.top+t*m.y,bottom:d.bottom+t*m.y,left:d.left+t*m.x,right:d.right+t*m.x}),{...n})}}const Vk=Lk(1);function aN(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Uk(t,e,n){const r=aN(e);if(!r)return t;const{scaleX:i,scaleY:c,x:d,y:m}=r,p=t.left-d-(1-i)*parseFloat(n),x=t.top-m-(1-c)*parseFloat(n.slice(n.indexOf(" ")+1)),y=i?t.width/i:t.width,v=c?t.height/c:t.height;return{width:y,height:v,top:x,right:p+y,bottom:x+v,left:p}}const zk={ignoreTransform:!1};function Ro(t,e){e===void 0&&(e=zk);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:x,transformOrigin:y}=Zn(t).getComputedStyle(t);x&&(n=Uk(n,x,y))}const{top:r,left:i,width:c,height:d,bottom:m,right:p}=n;return{top:r,left:i,width:c,height:d,bottom:m,right:p}}function v_(t){return Ro(t,{ignoreTransform:!0})}function Fk(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Bk(t,e){return e===void 0&&(e=Zn(t).getComputedStyle(t)),e.position==="fixed"}function Hk(t,e){e===void 0&&(e=Zn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const c=e[i];return typeof c=="string"?n.test(c):!1})}function gx(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(px(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!bu(i)||tN(i)||n.includes(i))return n;const c=Zn(t).getComputedStyle(i);return i!==t&&Hk(i,c)&&n.push(i),Bk(i,c)?n:r(i.parentNode)}return t?r(t):n}function iN(t){const[e]=gx(t,1);return e??null}function Jp(t){return!bf||!t?null:Ao(t)?t:mx(t)?px(t)||t===Co(t).scrollingElement?window:bu(t)?t:null:null}function lN(t){return Ao(t)?t.scrollX:t.scrollLeft}function oN(t){return Ao(t)?t.scrollY:t.scrollTop}function Eg(t){return{x:lN(t),y:oN(t)}}var En;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(En||(En={}));function cN(t){return!bf||!t?!1:t===document.scrollingElement}function uN(t){const e={x:0,y:0},n=cN(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,c=t.scrollLeft<=e.x,d=t.scrollTop>=r.y,m=t.scrollLeft>=r.x;return{isTop:i,isLeft:c,isBottom:d,isRight:m,maxScroll:r,minScroll:e}}const qk={x:.2,y:.2};function $k(t,e,n,r,i){let{top:c,left:d,right:m,bottom:p}=n;r===void 0&&(r=10),i===void 0&&(i=qk);const{isTop:x,isBottom:y,isLeft:v,isRight:T}=uN(t),I={x:0,y:0},L={x:0,y:0},O={height:e.height*i.y,width:e.width*i.x};return!x&&c<=e.top+O.height?(I.y=En.Backward,L.y=r*Math.abs((e.top+O.height-c)/O.height)):!y&&p>=e.bottom-O.height&&(I.y=En.Forward,L.y=r*Math.abs((e.bottom-O.height-p)/O.height)),!T&&m>=e.right-O.width?(I.x=En.Forward,L.x=r*Math.abs((e.right-O.width-m)/O.width)):!v&&d<=e.left+O.width&&(I.x=En.Backward,L.x=r*Math.abs((e.left+O.width-d)/O.width)),{direction:I,speed:L}}function Gk(t){if(t===document.scrollingElement){const{innerWidth:c,innerHeight:d}=window;return{top:0,left:0,right:c,bottom:d,width:c,height:d}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function dN(t){return t.reduce((e,n)=>co(e,Eg(n)),ar)}function Kk(t){return t.reduce((e,n)=>e+lN(n),0)}function Yk(t){return t.reduce((e,n)=>e+oN(n),0)}function hN(t,e){if(e===void 0&&(e=Ro),!t)return;const{top:n,left:r,bottom:i,right:c}=e(t);iN(t)&&(i<=0||c<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Qk=[["x",["left","right"],Kk],["y",["top","bottom"],Yk]];class xx{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=gx(n),i=dN(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,d,m]of Qk)for(const p of d)Object.defineProperty(this,p,{get:()=>{const x=m(r),y=i[c]-x;return this.rect[p]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Xk(t){const{EventTarget:e}=Zn(t);return t instanceof e?t:Co(t)}function Zp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var zs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(zs||(zs={}));function __(t){t.preventDefault()}function Wk(t){t.stopPropagation()}var ct;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ct||(ct={}));const fN={start:[ct.Space,ct.Enter],cancel:[ct.Esc],end:[ct.Space,ct.Enter,ct.Tab]},Jk=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ct.Right:return{...n,x:n.x+25};case ct.Left:return{...n,x:n.x-25};case ct.Down:return{...n,y:n.y+25};case ct.Up:return{...n,y:n.y-25}}};class mN{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Hc(Co(n)),this.windowListeners=new Hc(Zn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zs.Resize,this.handleCancel),this.windowListeners.add(zs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&hN(r),n(ar)}handleKeyDown(e){if(_f(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:c=fN,coordinateGetter:d=Jk,scrollBehavior:m="smooth"}=i,{code:p}=e;if(c.end.includes(p)){this.handleEnd(e);return}if(c.cancel.includes(p)){this.handleCancel(e);return}const{collisionRect:x}=r.current,y=x?{x:x.left,y:x.top}:ar;this.referenceCoordinates||(this.referenceCoordinates=y);const v=d(e,{active:n,context:r.current,currentCoordinates:y});if(v){const T=Hh(v,y),I={x:0,y:0},{scrollableAncestors:L}=r.current;for(const O of L){const k=e.code,{isTop:z,isRight:U,isLeft:$,isBottom:X,maxScroll:K,minScroll:re}=uN(O),j=Gk(O),S={x:Math.min(k===ct.Right?j.right-j.width/2:j.right,Math.max(k===ct.Right?j.left:j.left+j.width/2,v.x)),y:Math.min(k===ct.Down?j.bottom-j.height/2:j.bottom,Math.max(k===ct.Down?j.top:j.top+j.height/2,v.y))},C=k===ct.Right&&!U||k===ct.Left&&!$,P=k===ct.Down&&!X||k===ct.Up&&!z;if(C&&S.x!==v.x){const w=O.scrollLeft+T.x,A=k===ct.Right&&w<=K.x||k===ct.Left&&w>=re.x;if(A&&!T.y){O.scrollTo({left:w,behavior:m});return}A?I.x=O.scrollLeft-w:I.x=k===ct.Right?O.scrollLeft-K.x:O.scrollLeft-re.x,I.x&&O.scrollBy({left:-I.x,behavior:m});break}else if(P&&S.y!==v.y){const w=O.scrollTop+T.y,A=k===ct.Down&&w<=K.y||k===ct.Up&&w>=re.y;if(A&&!T.x){O.scrollTo({top:w,behavior:m});return}A?I.y=O.scrollTop-w:I.y=k===ct.Down?O.scrollTop-K.y:O.scrollTop-re.y,I.y&&O.scrollBy({top:-I.y,behavior:m});break}}this.handleMove(e,co(Hh(v,this.referenceCoordinates),I))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}mN.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=fN,onActivation:i}=e,{active:c}=n;const{code:d}=t.nativeEvent;if(r.start.includes(d)){const m=c.activatorNode.current;return m&&t.target!==m?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function S_(t){return!!(t&&"distance"in t)}function N_(t){return!!(t&&"delay"in t)}class yx{constructor(e,n,r){var i;r===void 0&&(r=Xk(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:c}=e,{target:d}=c;this.props=e,this.events=n,this.document=Co(d),this.documentListeners=new Hc(this.document),this.listeners=new Hc(r),this.windowListeners=new Hc(Zn(d)),this.initialCoordinates=(i=qh(c))!=null?i:ar,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(zs.Resize,this.handleCancel),this.windowListeners.add(zs.DragStart,__),this.windowListeners.add(zs.VisibilityChange,this.handleCancel),this.windowListeners.add(zs.ContextMenu,__),this.documentListeners.add(zs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(N_(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(S_(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(zs.Click,Wk,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zs.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:c}=this,{onMove:d,options:{activationConstraint:m}}=c;if(!i)return;const p=(n=qh(e))!=null?n:ar,x=Hh(i,p);if(!r&&m){if(S_(m)){if(m.tolerance!=null&&Zp(x,m.tolerance))return this.handleCancel();if(Zp(x,m.distance))return this.handleStart()}if(N_(m)&&Zp(x,m.tolerance))return this.handleCancel();this.handlePending(m,x);return}e.cancelable&&e.preventDefault(),d(p)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ct.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Zk={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class bx extends yx{constructor(e){const{event:n}=e,r=Co(n.target);super(e,Zk,r)}}bx.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const eI={move:{name:"mousemove"},end:{name:"mouseup"}};var wg;(function(t){t[t.RightClick=2]="RightClick"})(wg||(wg={}));class tI extends yx{constructor(e){super(e,eI,Co(e.event.target))}}tI.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===wg.RightClick?!1:(r?.({event:n}),!0)}}];const eg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class nI extends yx{constructor(e){super(e,eg)}static setup(){return window.addEventListener(eg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eg.move.name,e)};function e(){}}}nI.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var qc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(qc||(qc={}));var Gh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gh||(Gh={}));function sI(t){let{acceleration:e,activator:n=qc.Pointer,canScroll:r,draggingRect:i,enabled:c,interval:d=5,order:m=Gh.TreeOrder,pointerCoordinates:p,scrollableAncestors:x,scrollableAncestorRects:y,delta:v,threshold:T}=t;const I=aI({delta:v,disabled:!c}),[L,O]=fk(),k=E.useRef({x:0,y:0}),z=E.useRef({x:0,y:0}),U=E.useMemo(()=>{switch(n){case qc.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case qc.DraggableRect:return i}},[n,i,p]),$=E.useRef(null),X=E.useCallback(()=>{const re=$.current;if(!re)return;const j=k.current.x*z.current.x,S=k.current.y*z.current.y;re.scrollBy(j,S)},[]),K=E.useMemo(()=>m===Gh.TreeOrder?[...x].reverse():x,[m,x]);E.useEffect(()=>{if(!c||!x.length||!U){O();return}for(const re of K){if(r?.(re)===!1)continue;const j=x.indexOf(re),S=y[j];if(!S)continue;const{direction:C,speed:P}=$k(re,S,U,e,T);for(const w of["x","y"])I[w][C[w]]||(P[w]=0,C[w]=0);if(P.x>0||P.y>0){O(),$.current=re,L(X,d),k.current=P,z.current=C;return}}k.current={x:0,y:0},z.current={x:0,y:0},O()},[e,X,r,O,c,d,JSON.stringify(U),JSON.stringify(I),L,x,K,y,JSON.stringify(T)])}const rI={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function aI(t){let{delta:e,disabled:n}=t;const r=Bh(e);return vu(i=>{if(n||!r||!i)return rI;const c={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[En.Backward]:i.x[En.Backward]||c.x===-1,[En.Forward]:i.x[En.Forward]||c.x===1},y:{[En.Backward]:i.y[En.Backward]||c.y===-1,[En.Forward]:i.y[En.Forward]||c.y===1}}},[n,e,r])}function iI(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return vu(i=>{var c;return e==null?null:(c=r??i)!=null?c:null},[r,e])}function lI(t,e){return E.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,c=i.activators.map(d=>({eventName:d.eventName,handler:e(d.handler,r)}));return[...n,...c]},[]),[t,e])}var ru;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ru||(ru={}));var Ag;(function(t){t.Optimized="optimized"})(Ag||(Ag={}));const T_=new Map;function oI(t,e){let{dragging:n,dependencies:r,config:i}=e;const[c,d]=E.useState(null),{frequency:m,measure:p,strategy:x}=i,y=E.useRef(t),v=k(),T=su(v),I=E.useCallback(function(z){z===void 0&&(z=[]),!T.current&&d(U=>U===null?z:U.concat(z.filter($=>!U.includes($))))},[T]),L=E.useRef(null),O=vu(z=>{if(v&&!n)return T_;if(!z||z===T_||y.current!==t||c!=null){const U=new Map;for(let $ of t){if(!$)continue;if(c&&c.length>0&&!c.includes($.id)&&$.rect.current){U.set($.id,$.rect.current);continue}const X=$.node.current,K=X?new xx(p(X),X):null;$.rect.current=K,K&&U.set($.id,K)}return U}return z},[t,c,n,v,p]);return E.useEffect(()=>{y.current=t},[t]),E.useEffect(()=>{v||I()},[n,v]),E.useEffect(()=>{c&&c.length>0&&d(null)},[JSON.stringify(c)]),E.useEffect(()=>{v||typeof m!="number"||L.current!==null||(L.current=setTimeout(()=>{I(),L.current=null},m))},[m,v,I,...r]),{droppableRects:O,measureDroppableContainers:I,measuringScheduled:c!=null};function k(){switch(x){case ru.Always:return!1;case ru.BeforeDragging:return n;default:return!n}}}function vx(t,e){return vu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function cI(t,e){return vx(t,e)}function uI(t){let{callback:e,disabled:n}=t;const r=vf(e),i=E.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(r)},[r,n]);return E.useEffect(()=>()=>i?.disconnect(),[i]),i}function Sf(t){let{callback:e,disabled:n}=t;const r=vf(e),i=E.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(r)},[n]);return E.useEffect(()=>()=>i?.disconnect(),[i]),i}function dI(t){return new xx(Ro(t),t)}function E_(t,e,n){e===void 0&&(e=dI);const[r,i]=E.useState(null);function c(){i(p=>{if(!t)return null;if(t.isConnected===!1){var x;return(x=p??n)!=null?x:null}const y=e(t);return JSON.stringify(p)===JSON.stringify(y)?p:y})}const d=uI({callback(p){if(t)for(const x of p){const{type:y,target:v}=x;if(y==="childList"&&v instanceof HTMLElement&&v.contains(t)){c();break}}}}),m=Sf({callback:c});return rr(()=>{c(),t?(m?.observe(t),d?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),d?.disconnect())},[t]),r}function hI(t){const e=vx(t);return rN(t,e)}const w_=[];function fI(t){const e=E.useRef(t),n=vu(r=>t?r&&r!==w_&&t&&e.current&&t.parentNode===e.current.parentNode?r:gx(t):w_,[t]);return E.useEffect(()=>{e.current=t},[t]),n}function mI(t){const[e,n]=E.useState(null),r=E.useRef(t),i=E.useCallback(c=>{const d=Jp(c.target);d&&n(m=>m?(m.set(d,Eg(d)),new Map(m)):null)},[]);return E.useEffect(()=>{const c=r.current;if(t!==c){d(c);const m=t.map(p=>{const x=Jp(p);return x?(x.addEventListener("scroll",i,{passive:!0}),[x,Eg(x)]):null}).filter(p=>p!=null);n(m.length?new Map(m):null),r.current=t}return()=>{d(t),d(c)};function d(m){m.forEach(p=>{const x=Jp(p);x?.removeEventListener("scroll",i)})}},[i,t]),E.useMemo(()=>t.length?e?Array.from(e.values()).reduce((c,d)=>co(c,d),ar):dN(t):ar,[t,e])}function A_(t,e){e===void 0&&(e=[]);const n=E.useRef(null);return E.useEffect(()=>{n.current=null},e),E.useEffect(()=>{const r=t!==ar;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Hh(t,n.current):ar}function pI(t){E.useEffect(()=>{if(!bf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function gI(t,e){return E.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:c}=r;return n[i]=d=>{c(d,e)},n},{}),[t,e])}function pN(t){return E.useMemo(()=>t?Fk(t):null,[t])}const C_=[];function xI(t,e){e===void 0&&(e=Ro);const[n]=t,r=pN(n?Zn(n):null),[i,c]=E.useState(C_);function d(){c(()=>t.length?t.map(p=>cN(p)?r:new xx(e(p),p)):C_)}const m=Sf({callback:d});return rr(()=>{m?.disconnect(),d(),t.forEach(p=>m?.observe(p))},[t]),i}function gN(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return bu(e)?e:t}function yI(t){let{measure:e}=t;const[n,r]=E.useState(null),i=E.useCallback(x=>{for(const{target:y}of x)if(bu(y)){r(v=>{const T=e(y);return v?{...v,width:T.width,height:T.height}:T});break}},[e]),c=Sf({callback:i}),d=E.useCallback(x=>{const y=gN(x);c?.disconnect(),y&&c?.observe(y),r(y?e(y):null)},[e,c]),[m,p]=Fh(d);return E.useMemo(()=>({nodeRef:m,rect:n,setRef:p}),[n,m,p])}const bI=[{sensor:bx,options:{}},{sensor:mN,options:{}}],vI={current:{}},bh={draggable:{measure:v_},droppable:{measure:v_,strategy:ru.WhileDragging,frequency:Ag.Optimized},dragOverlay:{measure:Ro}};class $c extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const _I={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $c,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$h},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bh,measureDroppableContainers:$h,windowRect:null,measuringScheduled:!1},xN={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$h,draggableNodes:new Map,over:null,measureDroppableContainers:$h},Su=E.createContext(xN),yN=E.createContext(_I);function SI(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $c}}}function NI(t,e){switch(e.type){case xn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case xn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case xn.DragEnd:case xn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xn.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new $c(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case xn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,c=t.droppable.containers.get(n);if(!c||r!==c.key)return t;const d=new $c(t.droppable.containers);return d.set(n,{...c,disabled:i}),{...t,droppable:{...t.droppable,containers:d}}}case xn.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const c=new $c(t.droppable.containers);return c.delete(n),{...t,droppable:{...t.droppable,containers:c}}}default:return t}}function TI(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=E.useContext(Su),c=Bh(r),d=Bh(n?.id);return E.useEffect(()=>{if(!e&&!r&&c&&d!=null){if(!_f(c)||document.activeElement===c.target)return;const m=i.get(d);if(!m)return;const{activatorNode:p,node:x}=m;if(!p.current&&!x.current)return;requestAnimationFrame(()=>{for(const y of[p.current,x.current]){if(!y)continue;const v=gk(y);if(v){v.focus();break}}})}},[r,e,i,d,c]),null}function bN(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,c)=>c({transform:i,...r}),n):n}function EI(t){return E.useMemo(()=>({draggable:{...bh.draggable,...t?.draggable},droppable:{...bh.droppable,...t?.droppable},dragOverlay:{...bh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function wI(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const c=E.useRef(!1),{x:d,y:m}=typeof i=="boolean"?{x:i,y:i}:i;rr(()=>{if(!d&&!m||!e){c.current=!1;return}if(c.current||!r)return;const x=e?.node.current;if(!x||x.isConnected===!1)return;const y=n(x),v=rN(y,r);if(d||(v.x=0),m||(v.y=0),c.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const T=iN(x);T&&T.scrollBy({top:v.y,left:v.x})}},[e,d,m,r,n])}const Nf=E.createContext({...ar,scaleX:1,scaleY:1});var Za;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Za||(Za={}));const AI=E.memo(function(e){var n,r,i,c;let{id:d,accessibility:m,autoScroll:p=!0,children:x,sensors:y=bI,collisionDetection:v=Pk,measuring:T,modifiers:I,...L}=e;const O=E.useReducer(NI,void 0,SI),[k,z]=O,[U,$]=Sk(),[X,K]=E.useState(Za.Uninitialized),re=X===Za.Initialized,{draggable:{active:j,nodes:S,translate:C},droppable:{containers:P}}=k,w=j!=null?S.get(j):null,A=E.useRef({initial:null,translated:null}),D=E.useMemo(()=>{var Ae;return j!=null?{id:j,data:(Ae=w?.data)!=null?Ae:vI,rect:A}:null},[j,w]),q=E.useRef(null),[be,B]=E.useState(null),[ce,le]=E.useState(null),H=su(L,Object.values(L)),pe=_u("DndDescribedBy",d),V=E.useMemo(()=>P.getEnabled(),[P]),Q=EI(T),{droppableRects:fe,measureDroppableContainers:ye,measuringScheduled:Re}=oI(V,{dragging:re,dependencies:[C.x,C.y],config:Q.droppable}),ge=iI(S,j),ke=E.useMemo(()=>ce?qh(ce):null,[ce]),J=Te(),Y=cI(ge,Q.draggable.measure);wI({activeNode:j!=null?S.get(j):null,config:J.layoutShiftCompensation,initialRect:Y,measure:Q.draggable.measure});const xe=E_(ge,Q.draggable.measure,Y),Le=E_(ge?ge.parentElement:null),ut=E.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),dn=P.getNodeFor((n=ut.current.over)==null?void 0:n.id),At=yI({measure:Q.dragOverlay.measure}),hn=(r=At.nodeRef.current)!=null?r:ge,Kt=re?(i=At.rect)!=null?i:xe:null,As=!!(At.nodeRef.current&&At.rect),wn=hI(As?null:xe),Ge=pN(hn?Zn(hn):null),it=fI(re?dn??ge:null),bn=xI(it),or=bN(I,{transform:{x:C.x-wn.x,y:C.y-wn.y,scaleX:1,scaleY:1},activatorEvent:ce,active:D,activeNodeRect:xe,containerNodeRect:Le,draggingNodeRect:Kt,over:ut.current.over,overlayNodeRect:At.rect,scrollableAncestors:it,scrollableAncestorRects:bn,windowRect:Ge}),cr=ke?co(ke,C):null,Zt=mI(it),hs=A_(Zt),zr=A_(Zt,[xe]),es=co(or,hs),An=Kt?Vk(Kt,or):null,ts=D&&An?v({active:D,collisionRect:An,droppableRects:fe,droppableContainers:V,pointerCoordinates:cr}):null,Fr=Ik(ts,"id"),[$n,Br]=E.useState(null),Gn=As?or:co(or,zr),zt=Ok(Gn,(c=$n?.rect)!=null?c:null,xe),fn=E.useRef(null),Nt=E.useCallback((Ae,Fe)=>{let{sensor:Tt,options:mt}=Fe;if(q.current==null)return;const Ft=S.get(q.current);if(!Ft)return;const Ct=Ae.nativeEvent,st=new Tt({active:q.current,activeNode:Ft,event:Ct,options:mt,context:ut,onAbort(Ot){if(!S.get(Ot))return;const{onDragAbort:vn}=H.current,Kn={id:Ot};vn?.(Kn),U({type:"onDragAbort",event:Kn})},onPending(Ot,Dt,vn,Kn){if(!S.get(Ot))return;const{onDragPending:Yn}=H.current,ms={id:Ot,constraint:Dt,initialCoordinates:vn,offset:Kn};Yn?.(ms),U({type:"onDragPending",event:ms})},onStart(Ot){const Dt=q.current;if(Dt==null)return;const vn=S.get(Dt);if(!vn)return;const{onDragStart:Kn}=H.current,fs={activatorEvent:Ct,active:{id:Dt,data:vn.data,rect:A}};Lc.unstable_batchedUpdates(()=>{Kn?.(fs),K(Za.Initializing),z({type:xn.DragStart,initialCoordinates:Ot,active:Dt}),U({type:"onDragStart",event:fs}),B(fn.current),le(Ct)})},onMove(Ot){z({type:xn.DragMove,coordinates:Ot})},onEnd:Un(xn.DragEnd),onCancel:Un(xn.DragCancel)});fn.current=st;function Un(Ot){return async function(){const{active:vn,collisions:Kn,over:fs,scrollAdjustedTranslate:Yn}=ut.current;let ms=null;if(vn&&Yn){const{cancelDrop:Cn}=H.current;ms={activatorEvent:Ct,active:vn,collisions:Kn,delta:Yn,over:fs},Ot===xn.DragEnd&&typeof Cn=="function"&&await Promise.resolve(Cn(ms))&&(Ot=xn.DragCancel)}q.current=null,Lc.unstable_batchedUpdates(()=>{z({type:Ot}),K(Za.Uninitialized),Br(null),B(null),le(null),fn.current=null;const Cn=Ot===xn.DragEnd?"onDragEnd":"onDragCancel";if(ms){const Qn=H.current[Cn];Qn?.(ms),U({type:Cn,event:ms})}})}}},[S]),Hr=E.useCallback((Ae,Fe)=>(Tt,mt)=>{const Ft=Tt.nativeEvent,Ct=S.get(mt);if(q.current!==null||!Ct||Ft.dndKit||Ft.defaultPrevented)return;const st={active:Ct};Ae(Tt,Fe.options,st)===!0&&(Ft.dndKit={capturedBy:Fe.sensor},q.current=mt,Nt(Tt,Fe))},[S,Nt]),Z=lI(y,Hr);pI(y),rr(()=>{xe&&X===Za.Initializing&&K(Za.Initialized)},[xe,X]),E.useEffect(()=>{const{onDragMove:Ae}=H.current,{active:Fe,activatorEvent:Tt,collisions:mt,over:Ft}=ut.current;if(!Fe||!Tt)return;const Ct={active:Fe,activatorEvent:Tt,collisions:mt,delta:{x:es.x,y:es.y},over:Ft};Lc.unstable_batchedUpdates(()=>{Ae?.(Ct),U({type:"onDragMove",event:Ct})})},[es.x,es.y]),E.useEffect(()=>{const{active:Ae,activatorEvent:Fe,collisions:Tt,droppableContainers:mt,scrollAdjustedTranslate:Ft}=ut.current;if(!Ae||q.current==null||!Fe||!Ft)return;const{onDragOver:Ct}=H.current,st=mt.get(Fr),Un=st&&st.rect.current?{id:st.id,rect:st.rect.current,data:st.data,disabled:st.disabled}:null,Ot={active:Ae,activatorEvent:Fe,collisions:Tt,delta:{x:Ft.x,y:Ft.y},over:Un};Lc.unstable_batchedUpdates(()=>{Br(Un),Ct?.(Ot),U({type:"onDragOver",event:Ot})})},[Fr]),rr(()=>{ut.current={activatorEvent:ce,active:D,activeNode:ge,collisionRect:An,collisions:ts,droppableRects:fe,draggableNodes:S,draggingNode:hn,draggingNodeRect:Kt,droppableContainers:P,over:$n,scrollableAncestors:it,scrollAdjustedTranslate:es},A.current={initial:Kt,translated:An}},[D,ge,ts,An,S,hn,Kt,fe,P,$n,it,es]),sI({...J,delta:C,draggingRect:An,pointerCoordinates:cr,scrollableAncestors:it,scrollableAncestorRects:bn});const Se=E.useMemo(()=>({active:D,activeNode:ge,activeNodeRect:xe,activatorEvent:ce,collisions:ts,containerNodeRect:Le,dragOverlay:At,draggableNodes:S,droppableContainers:P,droppableRects:fe,over:$n,measureDroppableContainers:ye,scrollableAncestors:it,scrollableAncestorRects:bn,measuringConfiguration:Q,measuringScheduled:Re,windowRect:Ge}),[D,ge,xe,ce,ts,Le,At,S,P,fe,$n,ye,it,bn,Q,Re,Ge]),_e=E.useMemo(()=>({activatorEvent:ce,activators:Z,active:D,activeNodeRect:xe,ariaDescribedById:{draggable:pe},dispatch:z,draggableNodes:S,over:$n,measureDroppableContainers:ye}),[ce,Z,D,xe,z,pe,S,$n,ye]);return St.createElement(sN.Provider,{value:$},St.createElement(Su.Provider,{value:_e},St.createElement(yN.Provider,{value:Se},St.createElement(Nf.Provider,{value:zt},x)),St.createElement(TI,{disabled:m?.restoreFocus===!1})),St.createElement(Ek,{...m,hiddenTextDescribedById:pe}));function Te(){const Ae=be?.autoScrollEnabled===!1,Fe=typeof p=="object"?p.enabled===!1:p===!1,Tt=re&&!Ae&&!Fe;return typeof p=="object"?{...p,enabled:Tt}:{enabled:Tt}}}),CI=E.createContext(null),R_="button",RI="Draggable";function jI(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const c=_u(RI),{activators:d,activatorEvent:m,active:p,activeNodeRect:x,ariaDescribedById:y,draggableNodes:v,over:T}=E.useContext(Su),{role:I=R_,roleDescription:L="draggable",tabIndex:O=0}=i??{},k=p?.id===e,z=E.useContext(k?Nf:CI),[U,$]=Fh(),[X,K]=Fh(),re=gI(d,e),j=su(n);rr(()=>(v.set(e,{id:e,key:c,node:U,activatorNode:X,data:j}),()=>{const C=v.get(e);C&&C.key===c&&v.delete(e)}),[v,e]);const S=E.useMemo(()=>({role:I,tabIndex:O,"aria-disabled":r,"aria-pressed":k&&I===R_?!0:void 0,"aria-roledescription":L,"aria-describedby":y.draggable}),[r,I,O,k,L,y.draggable]);return{active:p,activatorEvent:m,activeNodeRect:x,attributes:S,isDragging:k,listeners:r?void 0:re,node:U,over:T,setNodeRef:$,setActivatorNodeRef:K,transform:z}}function vN(){return E.useContext(yN)}const kI="Droppable",II={timeout:25};function _N(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const c=_u(kI),{active:d,dispatch:m,over:p,measureDroppableContainers:x}=E.useContext(Su),y=E.useRef({disabled:n}),v=E.useRef(!1),T=E.useRef(null),I=E.useRef(null),{disabled:L,updateMeasurementsFor:O,timeout:k}={...II,...i},z=su(O??r),U=E.useCallback(()=>{if(!v.current){v.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{x(Array.isArray(z.current)?z.current:[z.current]),I.current=null},k)},[k]),$=Sf({callback:U,disabled:L||!d}),X=E.useCallback((S,C)=>{$&&(C&&($.unobserve(C),v.current=!1),S&&$.observe(S))},[$]),[K,re]=Fh(X),j=su(e);return E.useEffect(()=>{!$||!K.current||($.disconnect(),v.current=!1,$.observe(K.current))},[K,$]),E.useEffect(()=>(m({type:xn.RegisterDroppable,element:{id:r,key:c,disabled:n,node:K,rect:T,data:j}}),()=>m({type:xn.UnregisterDroppable,key:c,id:r})),[r]),E.useEffect(()=>{n!==y.current.disabled&&(m({type:xn.SetDroppableDisabled,id:r,key:c,disabled:n}),y.current.disabled=n)},[r,c,n,m]),{active:d,rect:T,isOver:p?.id===r,node:K,over:p,setNodeRef:re}}function DI(t){let{animation:e,children:n}=t;const[r,i]=E.useState(null),[c,d]=E.useState(null),m=Bh(n);return!n&&!r&&m&&i(m),rr(()=>{if(!c)return;const p=r?.key,x=r?.props.id;if(p==null||x==null){i(null);return}Promise.resolve(e(x,c)).then(()=>{i(null)})},[e,r,c]),St.createElement(St.Fragment,null,n,r?E.cloneElement(r,{ref:d}):null)}const MI={x:0,y:0,scaleX:1,scaleY:1};function PI(t){let{children:e}=t;return St.createElement(Su.Provider,{value:xN},St.createElement(Nf.Provider,{value:MI},e))}const OI={position:"fixed",touchAction:"none"},LI=t=>_f(t)?"transform 250ms ease":void 0,VI=E.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:c,className:d,rect:m,style:p,transform:x,transition:y=LI}=t;if(!m)return null;const v=i?x:{...x,scaleX:1,scaleY:1},T={...OI,width:m.width,height:m.height,top:m.top,left:m.left,transform:hi.Transform.toString(v),transformOrigin:i&&r?Rk(r,m):void 0,transition:typeof y=="function"?y(r):y,...p};return St.createElement(n,{className:d,style:T,ref:e},c)}),UI=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:c,className:d}=t;if(c!=null&&c.active)for(const[m,p]of Object.entries(c.active))p!==void 0&&(i[m]=n.node.style.getPropertyValue(m),n.node.style.setProperty(m,p));if(c!=null&&c.dragOverlay)for(const[m,p]of Object.entries(c.dragOverlay))p!==void 0&&r.node.style.setProperty(m,p);return d!=null&&d.active&&n.node.classList.add(d.active),d!=null&&d.dragOverlay&&r.node.classList.add(d.dragOverlay),function(){for(const[p,x]of Object.entries(i))n.node.style.setProperty(p,x);d!=null&&d.active&&n.node.classList.remove(d.active)}},zI=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:hi.Transform.toString(e)},{transform:hi.Transform.toString(n)}]},FI={duration:250,easing:"ease",keyframes:zI,sideEffects:UI({styles:{active:{opacity:"0"}}})};function BI(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return vf((c,d)=>{if(e===null)return;const m=n.get(c);if(!m)return;const p=m.node.current;if(!p)return;const x=gN(d);if(!x)return;const{transform:y}=Zn(d).getComputedStyle(d),v=aN(y);if(!v)return;const T=typeof e=="function"?e:HI(e);return hN(p,i.draggable.measure),T({active:{id:c,data:m.data,node:p,rect:i.draggable.measure(p)},draggableNodes:n,dragOverlay:{node:d,rect:i.dragOverlay.measure(x)},droppableContainers:r,measuringConfiguration:i,transform:v})})}function HI(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...FI,...t};return c=>{let{active:d,dragOverlay:m,transform:p,...x}=c;if(!e)return;const y={x:m.rect.left-d.rect.left,y:m.rect.top-d.rect.top},v={scaleX:p.scaleX!==1?d.rect.width*p.scaleX/m.rect.width:1,scaleY:p.scaleY!==1?d.rect.height*p.scaleY/m.rect.height:1},T={x:p.x-y.x,y:p.y-y.y,...v},I=i({...x,active:d,dragOverlay:m,transform:{initial:p,final:T}}),[L]=I,O=I[I.length-1];if(JSON.stringify(L)===JSON.stringify(O))return;const k=r?.({active:d,dragOverlay:m,...x}),z=m.node.animate(I,{duration:e,easing:n,fill:"forwards"});return new Promise(U=>{z.onfinish=()=>{k?.(),U()}})}}let j_=0;function qI(t){return E.useMemo(()=>{if(t!=null)return j_++,j_},[t])}const $I=St.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:c,modifiers:d,wrapperElement:m="div",className:p,zIndex:x=999}=t;const{activatorEvent:y,active:v,activeNodeRect:T,containerNodeRect:I,draggableNodes:L,droppableContainers:O,dragOverlay:k,over:z,measuringConfiguration:U,scrollableAncestors:$,scrollableAncestorRects:X,windowRect:K}=vN(),re=E.useContext(Nf),j=qI(v?.id),S=bN(d,{activatorEvent:y,active:v,activeNodeRect:T,containerNodeRect:I,draggingNodeRect:k.rect,over:z,overlayNodeRect:k.rect,scrollableAncestors:$,scrollableAncestorRects:X,transform:re,windowRect:K}),C=vx(T),P=BI({config:r,draggableNodes:L,droppableContainers:O,measuringConfiguration:U}),w=C?k.setRef:void 0;return St.createElement(PI,null,St.createElement(DI,{animation:P},v&&j?St.createElement(VI,{key:j,id:v.id,ref:w,as:m,activatorEvent:y,adjustScale:e,className:p,transition:c,rect:C,style:{zIndex:x,...i},transform:S},n):null))});function SN(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function GI(t,e){return t.reduce((n,r,i)=>{const c=e.get(r);return c&&(n[i]=c),n},Array(t.length))}function sh(t){return t!==null&&t>=0}function KI(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function YI(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const NN=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const c=SN(e,r,n),d=e[i],m=c[i];return!m||!d?null:{x:m.left-d.left,y:m.top-d.top,scaleX:m.width/d.width,scaleY:m.height/d.height}},rh={scaleX:1,scaleY:1},QI=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:c,overIndex:d}=t;const m=(e=c[n])!=null?e:r;if(!m)return null;if(i===n){const x=c[d];return x?{x:0,y:n<d?x.top+x.height-(m.top+m.height):x.top-m.top,...rh}:null}const p=XI(c,i,n);return i>n&&i<=d?{x:0,y:-m.height-p,...rh}:i<n&&i>=d?{x:0,y:m.height+p,...rh}:{x:0,y:0,...rh}};function XI(t,e,n){const r=t[e],i=t[e-1],c=t[e+1];return r?n<e?i?r.top-(i.top+i.height):c?c.top-(r.top+r.height):0:c?c.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const TN="Sortable",EN=St.createContext({activeIndex:-1,containerId:TN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:NN,disabled:{draggable:!1,droppable:!1}});function WI(t){let{children:e,id:n,items:r,strategy:i=NN,disabled:c=!1}=t;const{active:d,dragOverlay:m,droppableRects:p,over:x,measureDroppableContainers:y}=vN(),v=_u(TN,n),T=m.rect!==null,I=E.useMemo(()=>r.map(re=>typeof re=="object"&&"id"in re?re.id:re),[r]),L=d!=null,O=d?I.indexOf(d.id):-1,k=x?I.indexOf(x.id):-1,z=E.useRef(I),U=!KI(I,z.current),$=k!==-1&&O===-1||U,X=YI(c);rr(()=>{U&&L&&y(I)},[U,I,L,y]),E.useEffect(()=>{z.current=I},[I]);const K=E.useMemo(()=>({activeIndex:O,containerId:v,disabled:X,disableTransforms:$,items:I,overIndex:k,useDragOverlay:T,sortedRects:GI(I,p),strategy:i}),[O,v,X.draggable,X.droppable,$,I,k,p,T,i]);return St.createElement(EN.Provider,{value:K},e)}const JI=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return SN(n,r,i).indexOf(e)},ZI=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:c,newIndex:d,previousItems:m,previousContainerId:p,transition:x}=t;return!x||!r||m!==c&&i===d?!1:n?!0:d!==i&&e===p},e4={duration:200,easing:"ease"},wN="transform",t4=hi.Transition.toString({property:wN,duration:0,easing:"linear"}),n4={roleDescription:"sortable"};function s4(t){let{disabled:e,index:n,node:r,rect:i}=t;const[c,d]=E.useState(null),m=E.useRef(n);return rr(()=>{if(!e&&n!==m.current&&r.current){const p=i.current;if(p){const x=Ro(r.current,{ignoreTransform:!0}),y={x:p.left-x.left,y:p.top-x.top,scaleX:p.width/x.width,scaleY:p.height/x.height};(y.x||y.y)&&d(y)}}n!==m.current&&(m.current=n)},[e,n,r,i]),E.useEffect(()=>{c&&d(null)},[c]),c}function r4(t){let{animateLayoutChanges:e=ZI,attributes:n,disabled:r,data:i,getNewIndex:c=JI,id:d,strategy:m,resizeObserverConfig:p,transition:x=e4}=t;const{items:y,containerId:v,activeIndex:T,disabled:I,disableTransforms:L,sortedRects:O,overIndex:k,useDragOverlay:z,strategy:U}=E.useContext(EN),$=a4(r,I),X=y.indexOf(d),K=E.useMemo(()=>({sortable:{containerId:v,index:X,items:y},...i}),[v,i,X,y]),re=E.useMemo(()=>y.slice(y.indexOf(d)),[y,d]),{rect:j,node:S,isOver:C,setNodeRef:P}=_N({id:d,data:K,disabled:$.droppable,resizeObserverConfig:{updateMeasurementsFor:re,...p}}),{active:w,activatorEvent:A,activeNodeRect:D,attributes:q,setNodeRef:be,listeners:B,isDragging:ce,over:le,setActivatorNodeRef:H,transform:pe}=jI({id:d,data:K,attributes:{...n4,...n},disabled:$.draggable}),V=hk(P,be),Q=!!w,fe=Q&&!L&&sh(T)&&sh(k),ye=!z&&ce,Re=ye&&fe?pe:null,ke=fe?Re??(m??U)({rects:O,activeNodeRect:D,activeIndex:T,overIndex:k,index:X}):null,J=sh(T)&&sh(k)?c({id:d,items:y,activeIndex:T,overIndex:k}):X,Y=w?.id,xe=E.useRef({activeId:Y,items:y,newIndex:J,containerId:v}),Le=y!==xe.current.items,ut=e({active:w,containerId:v,isDragging:ce,isSorting:Q,id:d,index:X,items:y,newIndex:xe.current.newIndex,previousItems:xe.current.items,previousContainerId:xe.current.containerId,transition:x,wasDragging:xe.current.activeId!=null}),dn=s4({disabled:!ut,index:X,node:S,rect:j});return E.useEffect(()=>{Q&&xe.current.newIndex!==J&&(xe.current.newIndex=J),v!==xe.current.containerId&&(xe.current.containerId=v),y!==xe.current.items&&(xe.current.items=y)},[Q,J,v,y]),E.useEffect(()=>{if(Y===xe.current.activeId)return;if(Y!=null&&xe.current.activeId==null){xe.current.activeId=Y;return}const hn=setTimeout(()=>{xe.current.activeId=Y},50);return()=>clearTimeout(hn)},[Y]),{active:w,activeIndex:T,attributes:q,data:K,rect:j,index:X,newIndex:J,items:y,isOver:C,isSorting:Q,isDragging:ce,listeners:B,node:S,overIndex:k,over:le,setNodeRef:V,setActivatorNodeRef:H,setDroppableNodeRef:P,setDraggableNodeRef:be,transform:dn??ke,transition:At()};function At(){if(dn||Le&&xe.current.newIndex===X)return t4;if(!(ye&&!_f(A)||!x)&&(Q||ut))return hi.Transition.toString({...x,property:wN})}}function a4(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(r=t?.droppable)!=null?r:e.droppable}}ct.Down,ct.Right,ct.Up,ct.Left;const k_={mountain:lj,zap:tk,shield:XS,trophy:go,target:nu,wrench:Jj},i4=[{value:"avgTotalPoints",label:"Avg Total Points"},{value:"avgAutoPoints",label:"Avg Auto Points"},{value:"avgTeleopPoints",label:"Avg Teleop Points"},{value:"avgEndgamePoints",label:"Avg Endgame Points"},{value:"level3ClimbRate",label:"L3 Climb Rate (%)"},{value:"level2ClimbRate",label:"L2 Climb Rate (%)"},{value:"climbAttemptRate",label:"Climb Attempt Rate (%)"},{value:"avgClimbTime",label:"Avg Climb Time (s)"},{value:"autoMobilityRate",label:"Auto Mobility Rate (%)"},{value:"autoAccuracy",label:"Auto Accuracy (%)"},{value:"avgAutoFuelScored",label:"Avg Auto Fuel Scored"},{value:"diedRate",label:"Died Rate (%)"},{value:"noShowRate",label:"No Show Rate (%)"},{value:"mechanicalIssuesRate",label:"Mech Issues Rate (%)"},{value:"tippedRate",label:"Tipped Rate (%)"},{value:"avgDriverSkill",label:"Avg Driver Skill (1-5)"},{value:"avgDefenseEffectiveness",label:"Avg Defense (0-4)"}],l4=[{id:"l3Climber",label:"L3 Climber",icon:"mountain",field:"level3ClimbRate",operator:">=",threshold:20,active:!1},{id:"strongAuto",label:"Strong Auto",icon:"zap",field:"avgAutoPoints",operator:">=",threshold:10,active:!1},{id:"reliable",label:"Reliable",icon:"shield",field:"diedRate",operator:"<=",threshold:15,active:!1},{id:"highScorer",label:"High Scorer",icon:"trophy",field:"avgTotalPoints",operator:">=",threshold:35,active:!1}];function o4({team:t,currentTier:e,tierNames:n,onMoveTier:r,onUpdateNotes:i,onToggleFlag:c,onToggleWatchlist:d,isCompareMode:m,isSelected:p,onToggleSelection:x,passesFilters:y,hasActiveFilters:v}){const{attributes:T,listeners:I,setNodeRef:L,transform:O,transition:k,isDragging:z}=r4({id:`team-${t.teamNumber}`}),U={transform:hi.Transform.toString(O),transition:k,opacity:z?.5:1},$="tier"in t,X=$e(P=>P.teamStatistics.find(w=>w.teamNumber===t.teamNumber)),[K,re]=E.useState(!1),[j,S]=E.useState($?t.notes:""),C=X||t;return o.jsx("div",{ref:L,style:U,className:`border rounded-lg p-2 mb-2 transition-all ${$&&t.onWatchlist?"bg-warning/10 border-warning ring-1 ring-warning":$&&t.flagged?"bg-surface border-danger":p?"bg-surface border-success ring-2 ring-success":v&&y!==!1?"bg-success/10 border-success":"bg-surface border-border"} ${y===!1?"opacity-20":""}`,children:o.jsxs("div",{className:"flex items-start gap-2",children:[m?o.jsx("button",{onClick:x,className:"p-1 mt-1 text-textPrimary hover:text-success transition-colors",title:"Select for comparison",children:p?o.jsx(_g,{size:20,className:"text-success"}):o.jsx(Sg,{size:20})}):o.jsx("div",{...I,...T,className:"cursor-grab active:cursor-grabbing text-textMuted hover:text-textPrimary mt-1 touch-none",children:o.jsx(Ph,{size:16})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(On,{to:`/teams/${t.teamNumber}`,className:"font-bold text-sm text-textPrimary hover:text-blueAlliance transition-colors",title:"View team details",children:t.teamNumber}),X?.teamName&&o.jsx("span",{className:"text-xs text-textSecondary truncate",children:X.teamName})]}),o.jsxs("div",{className:"flex gap-2 text-xs text-textSecondary",children:[o.jsxs("span",{children:[C.avgTotalPoints?.toFixed(0)??"0"," pts"]}),o.jsxs("span",{children:["L3: ",C.level3ClimbRate?.toFixed(0)??"0","%"]}),o.jsxs("span",{children:["A: ",C.avgAutoPoints?.toFixed(0)??"0"]})]}),e&&$&&K?o.jsx("input",{type:"text",value:j,onChange:P=>S(P.target.value),onBlur:()=>{re(!1),i?.(j)},onKeyDown:P=>{P.key==="Enter"&&(re(!1),i?.(j))},className:"w-full mt-1 bg-background border border-border rounded px-2 py-1 text-xs",autoFocus:!0}):e&&$&&t.notes&&o.jsx("p",{className:"text-xs text-textSecondary italic mt-1 truncate",children:t.notes}),e&&n&&r&&o.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[e==="tier1"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>r("tier2"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Demote to ${n.tier2}`,children:[o.jsx(eu,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier2})]}),o.jsxs("button",{onClick:()=>r("tier3"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Demote to ${n.tier3}`,children:[o.jsx(_R,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier3})]}),o.jsxs("button",{onClick:()=>r("tier4"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-danger/20 text-danger hover:bg-danger/30 rounded transition-colors",title:`Demote to ${n.tier4}`,children:[o.jsx(gh,{size:14}),o.jsx("span",{children:"DNP"})]})]}),e==="tier2"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>r("tier1"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier1}`,children:[o.jsx(da,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier1})]}),o.jsxs("button",{onClick:()=>r("tier3"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Demote to ${n.tier3}`,children:[o.jsx(eu,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier3})]}),o.jsxs("button",{onClick:()=>r("tier4"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-danger/20 text-danger hover:bg-danger/30 rounded transition-colors",title:`Demote to ${n.tier4}`,children:[o.jsx(gh,{size:14}),o.jsx("span",{children:"DNP"})]})]}),e==="tier3"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>r("tier2"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier2}`,children:[o.jsx(da,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier2})]}),o.jsxs("button",{onClick:()=>r("tier1"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier1}`,children:[o.jsx(u_,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier1})]}),o.jsxs("button",{onClick:()=>r("tier4"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-danger/20 text-danger hover:bg-danger/30 rounded transition-colors",title:`Demote to ${n.tier4}`,children:[o.jsx(gh,{size:14}),o.jsx("span",{children:"DNP"})]})]}),e==="tier4"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>r("tier3"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier3}`,children:[o.jsx(da,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier3})]}),o.jsxs("button",{onClick:()=>r("tier2"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier2}`,children:[o.jsx(da,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier2})]}),o.jsxs("button",{onClick:()=>r("tier1"),className:"flex items-center gap-1 px-2 py-1 text-xs bg-surfaceElevated hover:bg-interactive rounded transition-colors",title:`Promote to ${n.tier1}`,children:[o.jsx(u_,{size:14}),o.jsx("span",{className:"truncate max-w-[60px]",children:n.tier1})]})]})]})]}),e&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("button",{onClick:()=>d?.(),className:`p-1 rounded transition-colors ${$&&t.onWatchlist?"text-warning":"text-textMuted hover:text-warning"}`,title:$&&t.onWatchlist?"Remove from watchlist":"Add to watchlist",children:o.jsx(tu,{size:14})}),o.jsx("button",{onClick:()=>c?.(),className:`p-1 rounded transition-colors ${$&&t.flagged?"text-danger":"text-textMuted hover:text-danger"}`,title:"Flag team",children:o.jsx(Mh,{size:14})}),o.jsx("button",{onClick:()=>re(!0),className:"p-1 text-textMuted hover:text-textPrimary rounded transition-colors",title:"Add note",children:o.jsx(Mj,{size:14})})]})]})})}function ah({id:t,title:e,teams:n,tier:r,tierNames:i,onMoveTier:c,isCompareMode:d,selectedTeams:m,onToggleTeamSelection:p,teamPassesFilters:x,hasActiveFilters:y}){const{setNodeRef:v,isOver:T}=_N({id:t}),I=ht(k=>k.updateNotes),L=ht(k=>k.toggleFlag),O=ht(k=>k.toggleWatchlist);return o.jsxs("div",{ref:v,className:`flex-1 bg-surfaceElevated rounded-lg p-3 md:p-4 min-h-[600px] transition-colors ${T?"ring-2 ring-success bg-interactive":""}`,children:[o.jsx("h2",{className:"text-base md:text-lg font-bold mb-3",children:e}),o.jsx(WI,{items:n.map(k=>`team-${k.teamNumber}`),strategy:QI,children:o.jsxs("div",{className:"space-y-0 min-h-[500px]",children:[n.map(k=>o.jsx(o4,{team:k,currentTier:r,tierNames:i,onMoveTier:r&&c?z=>c(k.teamNumber,z):void 0,onUpdateNotes:r?z=>I(k.teamNumber,z):void 0,onToggleFlag:r?()=>L(k.teamNumber):void 0,onToggleWatchlist:r?()=>O(k.teamNumber):void 0,isCompareMode:d,isSelected:m?.includes(k.teamNumber),onToggleSelection:p?()=>p(k.teamNumber):void 0,passesFilters:x?x(k.teamNumber):!0,hasActiveFilters:y},k.teamNumber)),n.length===0&&o.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:o.jsx("p",{className:"text-textMuted text-sm text-center",children:r?"Drag teams here or use buttons":"No teams available"})})]})})]})}function c4(){const t=ht(Z=>Z.pickList),e=ht(Z=>Z.initializePickList),n=ht(Z=>Z.setTierNames),r=ht(Z=>Z.exportPickList),i=ht(Z=>Z.importPickList),c=ht(Z=>Z.addTeamToTier),d=ht(Z=>Z.moveTeam),m=ht(Z=>Z.moveTeamAbove),p=ht(Z=>Z.redFlagThresholds),x=ht(Z=>Z.setRedFlagThresholds),y=ht(Z=>Z.autoFlagTeams),v=ht(Z=>Z.clearAllFlags),T=ht(Z=>Z.toggleWatchlist),I=ht(Z=>Z.updateWatchlistNotes),L=ht(Z=>Z.reorderWatchlist),O=ht(Z=>Z.finalizeWatchlist),k=ht(Z=>Z.clearWatchlist),z=ht(Z=>Z.getWatchlistTeams),U=$e(Z=>Z.eventCode),$=$e(Z=>Z.teamStatistics),[X,K]=E.useState(!1),[re,j]=E.useState("Steak"),[S,C]=E.useState("Potatoes"),[P,w]=E.useState("Chicken Nuggets"),[A,D]=E.useState("All Teams"),[q,be]=E.useState(null),[B,ce]=E.useState(!1),[le,H]=E.useState(p||Ng),[pe,V]=E.useState(null),[Q,fe]=E.useState(!0),[ye,Re]=E.useState(1),[ge,ke]=E.useState(l4),[J,Y]=E.useState(!1),xe=Z=>{ke(Se=>Se.map(_e=>_e.id===Z?{..._e,active:!_e.active}:_e))},Le=(Z,Se)=>{ke(_e=>_e.map(Te=>Te.id===Z?{...Te,...Se}:Te))},ut=()=>{const Z=`custom-${Date.now()}`;ke(Se=>[...Se,{id:Z,label:"New Filter",icon:"target",field:"avgTotalPoints",operator:">=",threshold:0,active:!1}])},dn=Z=>{ke(Se=>Se.filter(_e=>_e.id!==Z))},At=Z=>t?t.teams.filter(Se=>{const _e=$.find(Ae=>Ae.teamNumber===Se.teamNumber);if(!_e)return!1;const Te=_e[Z.field];switch(Z.operator){case">=":return Te>=Z.threshold;case"<=":return Te<=Z.threshold;case">":return Te>Z.threshold;case"<":return Te<Z.threshold}}).length:0,hn=Z=>{const Se=ge.filter(Te=>Te.active);if(Se.length===0)return!0;const _e=$.find(Te=>Te.teamNumber===Z);return _e?Se.every(Te=>{const Ae=_e[Te.field];switch(Te.operator){case">=":return Ae>=Te.threshold;case"<=":return Ae<=Te.threshold;case">":return Ae>Te.threshold;case"<":return Ae<Te.threshold}}):!1},Kt=ge.some(Z=>Z.active),As=t?.teams.filter(Z=>Z.tier==="tier1"||Z.tier==="tier2").length||0,{isCompareMode:wn,selectedTeams:Ge,toggleCompareMode:it,toggleTeamSelection:bn,clearSelection:or,canCompare:cr}=dk(),[Zt,hs]=E.useState(!1),zr=Ak(wk(bx,{activationConstraint:{distance:8}}));E.useEffect(()=>{if(!t)e(U);else if(j(t.config.tier1Name),C(t.config.tier2Name),w(t.config.tier3Name),D(t.config.tier4Name||"All Teams"),!B&&$.length>0){const Z=new Set(t.teams.map(_e=>_e.teamNumber));[...$].filter(_e=>!Z.has(_e.teamNumber)).sort((_e,Te)=>Te.avgTotalPoints!==_e.avgTotalPoints?Te.avgTotalPoints-_e.avgTotalPoints:Te.level3ClimbRate!==_e.level3ClimbRate?Te.level3ClimbRate-_e.level3ClimbRate:Te.avgAutoPoints-_e.avgAutoPoints).forEach(_e=>{c(_e.teamNumber,"tier4")}),ce(!0)}},[t,U,e,$,c,B]),E.useEffect(()=>{if(t&&$.length>0&&B){const Z=new Set(t.teams.map(_e=>_e.teamNumber)),Se=$.filter(_e=>!Z.has(_e.teamNumber));Se.length>0&&[...Se].sort((Te,Ae)=>Ae.avgTotalPoints!==Te.avgTotalPoints?Ae.avgTotalPoints-Te.avgTotalPoints:Ae.level3ClimbRate!==Te.level3ClimbRate?Ae.level3ClimbRate-Te.level3ClimbRate:Ae.avgAutoPoints-Te.avgAutoPoints).forEach(Te=>{c(Te.teamNumber,"tier4")})}},[$,t,B,c]),E.useEffect(()=>{cr&&wn&&hs(!0)},[cr,wn]);const es=Z=>{be(Z.active.id.toString())},An=Z=>{const{active:Se,over:_e}=Z;if(be(null),!_e||!t)return;const Te=parseInt(Se.id.toString().replace("team-","")),Ae=_e.id.toString();if(Ae.startsWith("team-")){const mt=parseInt(Ae.replace("team-",""));if(Te===mt)return;const Ft=t.teams.find(st=>st.teamNumber===Te),Ct=t.teams.find(st=>st.teamNumber===mt);if(!Ft||!Ct)return;if(Ft.tier===Ct.tier){const st=t.teams.filter(Dt=>Dt.tier===Ft.tier).sort((Dt,vn)=>Dt.rank-vn.rank),Un=st.findIndex(Dt=>Dt.teamNumber===Te),Ot=st.findIndex(Dt=>Dt.teamNumber===mt);if(Un===Ot)return;d(Te,Ft.tier,Ct.rank);return}d(Te,Ct.tier,Ct.rank);return}let Fe=null;if(Ae==="tier1-column"?Fe="tier1":Ae==="tier2-column"?Fe="tier2":Ae==="tier3-column"?Fe="tier3":Ae==="tier4-column"&&(Fe="tier4"),!Fe)return;const Tt=t.teams.find(mt=>mt.teamNumber===Te);if(Tt&&Tt.tier!==Fe){const mt=t.teams.filter(st=>st.tier===Fe),Ct=(mt.length>0?Math.max(...mt.map(st=>st.rank)):0)+1;d(Te,Fe,Ct)}},ts=(Z,Se)=>{if(!t)return;const _e=t.teams.filter(Fe=>Fe.tier===Se),Ae=(_e.length>0?Math.max(..._e.map(Fe=>Fe.rank)):0)+1;d(Z,Se,Ae)},Fr=()=>{const Z=r(),Se=new Blob([Z],{type:"application/json"}),_e=URL.createObjectURL(Se),Te=document.createElement("a");Te.href=_e,Te.download=`picklist-${U}-${new Date().toISOString()}.json`,Te.click()},$n=()=>{const Z=document.createElement("input");Z.type="file",Z.accept="application/json",Z.onchange=Se=>{const _e=Se.target.files?.[0];if(_e){const Te=new FileReader;Te.onload=Ae=>{const Fe=Ae.target?.result;i(Fe)},Te.readAsText(_e)}},Z.click()},Br=()=>{n(re,S,P,A),K(!1)},Gn=Z=>{const Se=Ge.find(_e=>_e!==Z);Se&&m(Z,Se),hs(!1),or(),it()};if(!t)return o.jsx("div",{children:"Loading..."});const zt=t.teams.filter(Z=>Z.tier==="tier1").sort((Z,Se)=>Z.rank-Se.rank),fn=t.teams.filter(Z=>Z.tier==="tier2").sort((Z,Se)=>Z.rank-Se.rank),Nt=t.teams.filter(Z=>Z.tier==="tier3").sort((Z,Se)=>Z.rank-Se.rank),Hr=t.teams.filter(Z=>Z.tier==="tier4").sort((Z,Se)=>Z.rank-Se.rank);return o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Pick List"}),o.jsxs("p",{className:"text-textSecondary text-sm md:text-base",children:[U,"  Last updated: ",new Date(t.config.lastUpdated).toLocaleString()]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(On,{to:"/alliance-selection",className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-success/20 text-success hover:bg-success/30 rounded-lg transition-colors text-sm md:text-base font-semibold",children:[o.jsx(xf,{size:18}),o.jsx("span",{className:"hidden sm:inline",children:"Alliance Selection"}),o.jsx("span",{className:"sm:hidden",children:"Alliance"})]}),o.jsxs("button",{onClick:it,className:`flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg transition-colors text-sm md:text-base ${wn?"bg-success text-background hover:bg-success/90":"bg-surface hover:bg-interactive"}`,children:[o.jsx(vg,{size:18}),o.jsx("span",{className:"hidden sm:inline",children:"Compare Mode"}),o.jsx("span",{className:"sm:hidden",children:"Compare"})]}),o.jsxs("button",{onClick:()=>K(!X),className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm md:text-base",children:[o.jsx(Vh,{size:18}),o.jsx("span",{className:"hidden sm:inline",children:"Settings"}),o.jsx("span",{className:"sm:hidden",children:"Config"})]}),o.jsxs("button",{onClick:Fr,className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm md:text-base",children:[o.jsx(YS,{size:18}),o.jsx("span",{children:"Export"})]}),o.jsxs("button",{onClick:$n,className:"flex items-center gap-2 px-3 md:px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors text-sm md:text-base",children:[o.jsx(JS,{size:18}),o.jsx("span",{children:"Import"})]})]})]}),X&&o.jsxs("div",{className:"bg-surface p-4 md:p-6 rounded-lg border border-border",children:[o.jsx("h2",{className:"text-lg md:text-xl font-bold mb-4",children:"Pick List Settings"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 1 Name"}),o.jsx("input",{type:"text",value:re,onChange:Z=>j(Z.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., Elite, God Tier"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 2 Name"}),o.jsx("input",{type:"text",value:S,onChange:Z=>C(Z.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., Definitely Getting Picked"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 3 Name"}),o.jsx("input",{type:"text",value:P,onChange:Z=>w(Z.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., Maybe Pick"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tier 4 Name"}),o.jsx("input",{type:"text",value:A,onChange:Z=>D(Z.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",placeholder:"e.g., All Teams"})]})]}),o.jsx("button",{onClick:Br,className:"px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:"Save Tier Names"}),o.jsxs("div",{className:"border-t border-border mt-6 pt-6",children:[o.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[o.jsx(Mh,{size:20,className:"text-danger"}),"Red Flag Auto-Detection"]}),o.jsx("p",{className:"text-sm text-textSecondary mb-4",children:"Automatically flag teams that exceed reliability thresholds. Flagged teams have a red indicator."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Died Rate (%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:le.diedRate,onChange:Z=>H(Se=>({...Se,diedRate:Number(Z.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),o.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if robot died ",">","= this %"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Mechanical Issues (%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:le.mechanicalIssuesRate,onChange:Z=>H(Se=>({...Se,mechanicalIssuesRate:Number(Z.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),o.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if mech issues ",">","= this %"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Tipped Rate (%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:le.tippedRate,onChange:Z=>H(Se=>({...Se,tippedRate:Number(Z.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),o.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if tipped ",">","= this %"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"No-Show Rate (%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:le.noShowRate,onChange:Z=>H(Se=>({...Se,noShowRate:Number(Z.target.value)})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"}),o.jsxs("p",{className:"text-xs text-textMuted mt-1",children:["Flag if no-showed ",">","= this %"]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("button",{onClick:()=>{x(le);const Z=y($);V(`Auto-flagged ${Z} team${Z!==1?"s":""} based on reliability thresholds`),setTimeout(()=>V(null),4e3)},className:"flex items-center gap-2 px-4 py-2 bg-danger text-white font-semibold rounded-lg hover:bg-danger/90 transition-colors",children:[o.jsx(Mh,{size:18}),"Run Auto-Flag"]}),o.jsxs("button",{onClick:()=>{v(),V("Cleared all flags"),setTimeout(()=>V(null),3e3)},className:"flex items-center gap-2 px-4 py-2 bg-textMuted text-background font-semibold rounded-lg hover:bg-textMuted/80 transition-colors",children:[o.jsx(Zi,{size:18}),"Clear All Flags"]}),o.jsx("button",{onClick:()=>H(Ng),className:"px-4 py-2 text-textSecondary hover:text-textPrimary transition-colors",children:"Reset to Defaults"})]}),pe&&o.jsx("div",{className:"mt-3 p-3 bg-danger/20 border border-danger rounded-lg text-danger text-sm",children:pe})]})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border space-y-4",children:[o.jsx("div",{className:"flex flex-wrap items-center gap-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(go,{size:20,className:"text-warning"}),o.jsx("span",{className:"font-semibold",children:"Pick List:"}),o.jsx("span",{className:"text-2xl font-bold text-success",children:As}),o.jsx("span",{className:"text-textSecondary",children:"teams"})]})}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[o.jsx(BR,{size:16,className:"text-textSecondary"}),o.jsx("span",{className:"text-sm text-textSecondary",children:"Highlight:"}),o.jsx("button",{onClick:()=>Y(!J),className:`p-1 rounded transition-colors ${J?"text-success":"text-textMuted hover:text-textPrimary"}`,title:"Edit filter settings",children:o.jsx(Rj,{size:14})})]}),ge.map(Z=>{const Se=k_[Z.icon]||nu,_e=Z.active?At(Z):null;return o.jsxs("button",{onClick:()=>xe(Z.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm transition-colors ${Z.active?"bg-success text-background":"bg-surfaceElevated hover:bg-interactive"}`,children:[o.jsx(Se,{size:14}),Z.label,_e!==null&&o.jsxs("span",{className:"ml-1 font-bold",children:["(",_e,")"]})]},Z.id)}),ge.some(Z=>Z.active)&&o.jsx("button",{onClick:()=>ke(Z=>Z.map(Se=>({...Se,active:!1}))),className:"text-xs text-textMuted hover:text-danger ml-2",children:"Clear all"})]}),ge.some(Z=>Z.active)&&$.length===0&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-warning/10 border border-warning/30 rounded-lg",children:[o.jsx(Bc,{size:16,className:"text-warning"}),o.jsx("span",{className:"text-sm text-warning",children:"No scouting data loaded. Filters require team statistics to work."})]}),J&&o.jsxs("div",{className:"bg-surfaceElevated rounded-lg border border-border p-4 space-y-3",children:[o.jsx("h3",{className:"text-sm font-bold text-textSecondary uppercase tracking-wider",children:"Filter Settings"}),ge.map(Z=>o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("select",{value:Z.icon,onChange:Se=>Le(Z.id,{icon:Se.target.value}),className:"w-20 px-2 py-1.5 bg-background border border-border rounded text-sm",children:Object.keys(k_).map(Se=>o.jsx("option",{value:Se,children:Se},Se))}),o.jsx("input",{type:"text",value:Z.label,onChange:Se=>Le(Z.id,{label:Se.target.value}),className:"w-28 px-2 py-1.5 bg-background border border-border rounded text-sm",placeholder:"Filter name"}),o.jsx("select",{value:Z.field,onChange:Se=>Le(Z.id,{field:Se.target.value}),className:"flex-1 min-w-[140px] px-2 py-1.5 bg-background border border-border rounded text-sm",children:i4.map(Se=>o.jsx("option",{value:Se.value,children:Se.label},Se.value))}),o.jsxs("select",{value:Z.operator,onChange:Se=>Le(Z.id,{operator:Se.target.value}),className:"w-16 px-2 py-1.5 bg-background border border-border rounded text-sm",children:[o.jsx("option",{value:">=",children:">="}),o.jsx("option",{value:"<=",children:"<="}),o.jsx("option",{value:">",children:">"}),o.jsx("option",{value:"<",children:"<"})]}),o.jsx("input",{type:"number",value:Z.threshold,onChange:Se=>Le(Z.id,{threshold:parseFloat(Se.target.value)||0}),className:"w-20 px-2 py-1.5 bg-background border border-border rounded text-sm"}),o.jsx("button",{onClick:()=>dn(Z.id),className:"p-1.5 text-textMuted hover:text-danger rounded transition-colors",title:"Remove filter",children:o.jsx(Zi,{size:14})})]},Z.id)),o.jsxs("button",{onClick:ut,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-success hover:bg-interactive rounded transition-colors",children:[o.jsx(al,{size:14}),"Add Filter"]})]})]}),wn&&o.jsx("div",{className:"bg-surfaceElevated p-4 rounded-lg border border-success",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(vg,{size:24,className:"text-success"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-success",children:"Compare Mode Active"}),o.jsx("p",{className:"text-sm text-textSecondary",children:Ge.length===0?"Click on any 2 teams to compare them":Ge.length===1?"1 team selected - click 1 more to compare":`Comparing Team ${Ge[0]} vs Team ${Ge[1]}`})]})]})}),(()=>{const Z=z();if(Z.length===0)return null;const Se=t?.teams.filter(_e=>_e.tier==="tier2"&&!_e.onWatchlist).sort((_e,Te)=>_e.rank-Te.rank)||[];return o.jsxs("div",{className:"bg-warning/10 border-2 border-warning rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-warning/20 cursor-pointer",onClick:()=>fe(!Q),children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(tu,{size:20,className:"text-warning"}),o.jsxs("h2",{className:"text-lg font-bold",children:["Final Morning Watchlist (",Z.length,")"]}),o.jsxs("span",{className:"text-sm text-textSecondary",children:["Rank these teams, then finalize into ",S]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:_e=>{_e.stopPropagation(),confirm("Clear all teams from watchlist?")&&k()},className:"p-2 text-textMuted hover:text-danger transition-colors",title:"Clear watchlist",children:o.jsx(Zi,{size:18})}),Q?o.jsx(gf,{size:20}):o.jsx(fl,{size:20})]})]}),Q&&o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:Z.map((_e,Te)=>{const Ae=$.find(Fe=>Fe.teamNumber===_e.teamNumber);return o.jsxs("div",{className:"bg-surface border border-border rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xl font-bold text-warning",children:["#",Te+1]}),o.jsx("span",{className:"text-lg font-bold",children:_e.teamNumber})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[Te>0&&o.jsx("button",{onClick:()=>L(_e.teamNumber,Te),className:"p-1 hover:bg-interactive rounded",title:"Move up",children:o.jsx(da,{size:16})}),Te<Z.length-1&&o.jsx("button",{onClick:()=>L(_e.teamNumber,Te+2),className:"p-1 hover:bg-interactive rounded",title:"Move down",children:o.jsx(eu,{size:16})}),o.jsx("button",{onClick:()=>T(_e.teamNumber),className:"p-1 hover:bg-danger/20 text-danger rounded",title:"Remove from watchlist",children:o.jsx(Zi,{size:16})})]})]}),Ae&&o.jsxs("div",{className:"text-xs text-textSecondary mb-2",children:[Ae.avgTotalPoints.toFixed(1)," pts  L3: ",Ae.level3ClimbRate.toFixed(0),"%"]}),o.jsx("textarea",{value:_e.watchlistNotes||"",onChange:Fe=>I(_e.teamNumber,Fe.target.value),placeholder:"Notes from final matches...",className:"w-full px-2 py-1 text-sm bg-background border border-border rounded resize-none",rows:2})]},_e.teamNumber)})}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-4 border-t border-warning/30",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Insert at position:"}),o.jsxs("select",{value:ye,onChange:_e=>Re(Number(_e.target.value)),className:"px-3 py-1.5 bg-background border border-border rounded-lg text-sm",children:[o.jsxs("option",{value:1,children:["Top of ",S]}),Se.map((_e,Te)=>o.jsxs("option",{value:Te+2,children:["After #",Te+1," (",_e.teamNumber,")"]},_e.teamNumber))]})]}),o.jsxs("button",{onClick:()=>{confirm(`This will move ${Z.length} teams into ${S} at position ${ye}. Continue?`)&&O(ye)},className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:[o.jsx(xh,{size:18}),"Finalize to ",S]}),o.jsxs("p",{className:"text-xs text-textSecondary",children:["Teams will be inserted in watchlist order (#",1," first)"]})]})]})]})})(),o.jsxs(AI,{sensors:zr,collisionDetection:Dk,onDragStart:es,onDragEnd:An,children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-3 md:gap-4",children:[o.jsx(ah,{id:"tier1-column",title:`${t.config.tier1Name} (${zt.length})`,teams:zt,tier:"tier1",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"All Teams"},onMoveTier:ts,isCompareMode:wn,selectedTeams:Ge,onToggleTeamSelection:bn,teamPassesFilters:hn,hasActiveFilters:Kt}),o.jsx(ah,{id:"tier2-column",title:`${t.config.tier2Name} (${fn.length})`,teams:fn,tier:"tier2",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"All Teams"},onMoveTier:ts,isCompareMode:wn,selectedTeams:Ge,onToggleTeamSelection:bn,teamPassesFilters:hn,hasActiveFilters:Kt}),o.jsx(ah,{id:"tier3-column",title:`${t.config.tier3Name} (${Nt.length})`,teams:Nt,tier:"tier3",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"All Teams"},onMoveTier:ts,isCompareMode:wn,selectedTeams:Ge,onToggleTeamSelection:bn,teamPassesFilters:hn,hasActiveFilters:Kt}),o.jsx(ah,{id:"tier4-column",title:`${t.config.tier4Name||"All Teams"} (${Hr.length})`,teams:Hr,tier:"tier4",tierNames:{tier1:t.config.tier1Name,tier2:t.config.tier2Name,tier3:t.config.tier3Name,tier4:t.config.tier4Name||"All Teams"},onMoveTier:ts,isCompareMode:wn,selectedTeams:Ge,onToggleTeamSelection:bn,teamPassesFilters:hn,hasActiveFilters:Kt})]}),o.jsx($I,{children:q?o.jsx("div",{className:"bg-surface border border-border rounded-lg p-3 opacity-90 shadow-lg",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ph,{size:16,className:"text-textMuted"}),o.jsxs("span",{className:"font-bold",children:["Team ",q.replace("team-","")]})]})}):null})]}),Zt&&Ge.length===2&&o.jsx(eN,{team1:$.find(Z=>Z.teamNumber===Ge[0]),team2:$.find(Z=>Z.teamNumber===Ge[1]),onPickTeam:Gn,onClose:()=>hs(!1)})]})}const oa=[{field:"avgTotalPoints",label:"Total Points",category:"overall"},{field:"avgAutoPoints",label:"Auto Points",category:"overall"},{field:"avgTeleopPoints",label:"Teleop Points",category:"overall"},{field:"avgEndgamePoints",label:"Endgame Points",category:"overall"},{field:"avgAutoFuelScored",label:"Auto FUEL Scored",category:"auto"},{field:"avgAutoFuelMissed",label:"Auto FUEL Missed",category:"auto"},{field:"autoAccuracy",label:"Auto Accuracy",category:"auto"},{field:"autoMobilityRate",label:"Auto Mobility Rate",category:"auto"},{field:"autoClimbRate",label:"Auto Climb Rate",category:"auto"},{field:"autoClimbSuccessRate",label:"Auto Climb Success Rate",category:"auto"},{field:"avgTeleopFuelScored",label:"Teleop FUEL Scored",category:"teleop"},{field:"avgTeleopFuelMissed",label:"Teleop FUEL Missed",category:"teleop"},{field:"teleopAccuracy",label:"Teleop Accuracy",category:"teleop"},{field:"avgCycleCount",label:"Cycle Count",category:"teleop"},{field:"avgActiveHubScores",label:"Active Hub Scores",category:"teleop"},{field:"avgInactiveHubScores",label:"Inactive Hub Scores",category:"teleop"},{field:"climbAttemptRate",label:"Climb Attempt Rate",category:"endgame"},{field:"level1ClimbRate",label:"Level 1 Climb Rate",category:"endgame"},{field:"level2ClimbRate",label:"Level 2 Climb Rate",category:"endgame"},{field:"level3ClimbRate",label:"Level 3 Climb Rate",category:"endgame"},{field:"avgClimbTime",label:"Climb Time",category:"endgame"},{field:"avgEndgameFuelScored",label:"Endgame FUEL Scored",category:"endgame"},{field:"defensePlayedRate",label:"Defense Played Rate",category:"defense"},{field:"avgDefenseEffectiveness",label:"Defense Effectiveness",category:"defense"},{field:"wasDefendedRate",label:"Was Defended Rate",category:"defense"},{field:"avgDefenseEvasion",label:"Defense Evasion",category:"defense"},{field:"avgDriverSkill",label:"Driver Skill",category:"performance"},{field:"avgIntakeSpeed",label:"Intake Speed",category:"performance"},{field:"avgShootingAccuracy",label:"Shooting Accuracy",category:"performance"},{field:"avgShootingSpeed",label:"Shooting Speed",category:"performance"},{field:"noShowRate",label:"No Show Rate",category:"reliability"},{field:"diedRate",label:"Died Rate",category:"reliability"},{field:"tippedRate",label:"Tipped Rate",category:"reliability"},{field:"mechanicalIssuesRate",label:"Mechanical Issues Rate",category:"reliability"},{field:"yellowCardRate",label:"Yellow Card Rate",category:"reliability"},{field:"redCardRate",label:"Red Card Rate",category:"reliability"}];function u4(){const t=ca(q=>q.config),e=ca(q=>q.toggleColumn),n=ca(q=>q.updateColumn),r=ca(q=>q.addColumn),i=ca(q=>q.deleteColumn),c=ca(q=>q.reorderColumns),d=ca(q=>q.resetToDefaults),m=E.useRef(null),p=E.useRef(null),[x,y]=E.useState(!1),v=q=>{m.current=q,y(!0)},T=q=>{p.current=q},I=()=>{if(m.current&&p.current&&m.current!==p.current){const q=t.columns.findIndex(B=>B.id===m.current),be=t.columns.findIndex(B=>B.id===p.current);q!==-1&&be!==-1&&c(q,be)}m.current=null,p.current=null,y(!1)},[L,O]=E.useState(null),[k,z]=E.useState({}),[U,$]=E.useState(!1),[X,K]=E.useState({baseField:"",aggregation:"avg",label:"",format:"number",decimals:1,category:"overall"}),re=q=>Tg.some(be=>be.id===q),j=()=>{if(!X.baseField||!X.label)return;const q=oa.find(H=>H.field===X.baseField),be=X.baseField.replace(/^avg/,"").replace(/Rate$/,""),B=`custom_${X.aggregation}_${be}_${Date.now()}`;let ce=X.baseField;X.aggregation==="max"?ce=X.baseField.replace(/^avg/,"max"):X.aggregation==="min"&&(ce=X.baseField.replace(/^avg/,"min"));const le={id:B,label:X.label,field:ce,aggregation:X.aggregation,format:X.format,decimals:X.decimals,enabled:!0,description:`Custom: ${X.aggregation} of ${q?.label||X.baseField}`,category:q?.category||X.category};r(le),$(!1),K({baseField:"",aggregation:"avg",label:"",format:"number",decimals:1,category:"overall"})},S=(q,be)=>{const B=oa.find(ce=>ce.field===q);if(B){const ce=be==="avg"?"Avg":be==="max"?"Max":be==="min"?"Min":"";K(le=>({...le,baseField:q,aggregation:be,label:`${ce} ${B.label}`.trim(),category:B.category}))}else K(ce=>({...ce,baseField:q,aggregation:be}))},C=q=>{O(q.id),z({label:q.label,aggregation:q.aggregation,format:q.format,decimals:q.decimals})},P=()=>{L&&k&&(n(L,k),O(null),z({}))},w=()=>{O(null),z({})},A=t.columns.filter(q=>q.enabled).length,D=q=>o.jsx("div",{draggable:L!==q.id,onDragStart:()=>v(q.id),onDragEnter:()=>T(q.id),onDragEnd:I,onDragOver:be=>be.preventDefault(),className:`p-4 border-b border-border/50 last:border-b-0 transition-all ${q.enabled?"bg-surface":"bg-background opacity-60"} ${x&&m.current===q.id?"opacity-50":""} ${L!==q.id?"cursor-grab active:cursor-grabbing":""}`,children:L===q.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Display Label"}),o.jsx("input",{type:"text",value:k.label||"",onChange:be=>z({...k,label:be.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Format"}),o.jsxs("select",{value:k.format||"number",onChange:be=>z({...k,format:be.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[o.jsx("option",{value:"number",children:"Number"}),o.jsx("option",{value:"percentage",children:"Percentage"}),o.jsx("option",{value:"time",children:"Time (seconds)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Decimal Places"}),o.jsx("input",{type:"number",min:"0",max:"3",value:k.decimals??1,onChange:be=>z({...k,decimals:parseInt(be.target.value)}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]})]}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:w,className:"px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors border border-border",children:"Cancel"}),o.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:[o.jsx(QS,{size:16}),"Save Changes"]})]})]}):o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-textMuted hover:text-textSecondary cursor-grab active:cursor-grabbing",children:o.jsx(Ph,{size:18})}),o.jsx("button",{onClick:()=>e(q.id),className:`p-2 rounded transition-colors ${q.enabled?"text-success hover:text-success/80":"text-textMuted hover:text-textPrimary"}`,title:q.enabled?"Hide column":"Show column",children:q.enabled?o.jsx(tu,{size:20}):o.jsx(OR,{size:20})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("h3",{className:"font-bold",children:q.label}),o.jsx("span",{className:"text-xs px-2 py-0.5 bg-warning/20 text-warning rounded",children:ZS[q.category||"overall"]}),o.jsx("span",{className:"text-xs px-2 py-0.5 bg-surfaceElevated rounded text-textSecondary",children:q.aggregation}),o.jsx("span",{className:"text-xs px-2 py-0.5 bg-surfaceElevated rounded text-textSecondary",children:q.format})]})}),o.jsx("button",{onClick:()=>C(q),className:"p-2 text-textMuted hover:text-textPrimary rounded transition-colors",title:"Edit column",children:o.jsx(Vh,{size:18})}),!re(q.id)&&o.jsx("button",{onClick:()=>i(q.id),className:"p-2 text-textMuted hover:text-danger rounded transition-colors",title:"Delete custom column",children:o.jsx(Zi,{size:18})})]})},q.id);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Metrics Configuration"}),o.jsx("p",{className:"text-textSecondary mt-2",children:"Customize which columns appear in the Teams view"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors",children:[o.jsx(al,{size:20}),"Add Column"]}),o.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors border border-border",children:[o.jsx(hx,{size:20}),"Reset to Defaults"]})]})]}),U&&o.jsxs("div",{className:"bg-surface p-6 rounded-lg border-2 border-success",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Add New Column"}),o.jsx("button",{onClick:()=>$(!1),className:"p-2 text-textMuted hover:text-textPrimary rounded transition-colors",children:o.jsx(ws,{size:20})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Data Field *"}),o.jsxs("select",{value:X.baseField,onChange:q=>S(q.target.value,X.aggregation),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[o.jsx("option",{value:"",children:"Select a field..."}),o.jsx("optgroup",{label:"Overall",children:oa.filter(q=>q.category==="overall").map(q=>o.jsx("option",{value:q.field,children:q.label},q.field))}),o.jsx("optgroup",{label:"Autonomous",children:oa.filter(q=>q.category==="auto").map(q=>o.jsx("option",{value:q.field,children:q.label},q.field))}),o.jsx("optgroup",{label:"Teleop",children:oa.filter(q=>q.category==="teleop").map(q=>o.jsx("option",{value:q.field,children:q.label},q.field))}),o.jsx("optgroup",{label:"Endgame",children:oa.filter(q=>q.category==="endgame").map(q=>o.jsx("option",{value:q.field,children:q.label},q.field))}),o.jsx("optgroup",{label:"Defense",children:oa.filter(q=>q.category==="defense").map(q=>o.jsx("option",{value:q.field,children:q.label},q.field))}),o.jsx("optgroup",{label:"Performance",children:oa.filter(q=>q.category==="performance").map(q=>o.jsx("option",{value:q.field,children:q.label},q.field))}),o.jsx("optgroup",{label:"Reliability",children:oa.filter(q=>q.category==="reliability").map(q=>o.jsx("option",{value:q.field,children:q.label},q.field))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Measurement Type *"}),o.jsxs("select",{value:X.aggregation,onChange:q=>S(X.baseField,q.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[o.jsx("option",{value:"avg",children:"Average"}),o.jsx("option",{value:"max",children:"Maximum"}),o.jsx("option",{value:"min",children:"Minimum"}),o.jsx("option",{value:"rate",children:"Rate (%)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Display Label *"}),o.jsx("input",{type:"text",value:X.label,onChange:q=>K({...X,label:q.target.value}),placeholder:"e.g., Max Points",className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Format"}),o.jsxs("select",{value:X.format,onChange:q=>K({...X,format:q.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg",children:[o.jsx("option",{value:"number",children:"Number"}),o.jsx("option",{value:"percentage",children:"Percentage"}),o.jsx("option",{value:"time",children:"Time (seconds)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Decimal Places"}),o.jsx("input",{type:"number",min:"0",max:"3",value:X.decimals,onChange:q=>K({...X,decimals:parseInt(q.target.value)}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 bg-surface hover:bg-interactive rounded-lg transition-colors border border-border",children:"Cancel"}),o.jsxs("button",{onClick:j,disabled:!X.baseField||!X.label,className:"flex items-center gap-2 px-4 py-2 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(al,{size:16}),"Add Column"]})]})]}),o.jsx("div",{className:"bg-surface p-6 rounded-lg border border-border",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Active Configuration"}),o.jsxs("p",{className:"text-textSecondary",children:[A," of ",t.columns.length," metrics enabled"]})]}),o.jsxs("div",{className:"text-sm text-textMuted",children:["Last updated: ",new Date(t.lastUpdated).toLocaleString()]})]})}),o.jsxs("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-bold",children:"All Metrics"}),o.jsx("p",{className:"text-sm text-textSecondary mt-1",children:"Drag to reorder. Order here = column order on Teams page."})]}),o.jsx("div",{children:t.columns.map(q=>D(q))})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h2",{className:"text-lg font-bold mb-4",children:"How It Works"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-sm text-textSecondary",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-textPrimary font-semibold mb-2",children:"Controls"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsxs("li",{children:[o.jsx(Ph,{size:14,className:"inline mr-1"})," Drag to reorder"]}),o.jsxs("li",{children:[o.jsx(tu,{size:14,className:"inline mr-1"})," Toggle visibility"]}),o.jsxs("li",{children:[o.jsx(Vh,{size:14,className:"inline mr-1"})," Edit settings"]})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textPrimary font-semibold mb-2",children:"Measurements"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"avg"})," - Mean across all matches"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"max"})," - Best single-match value"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"min"})," - Worst or fastest"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"rate"})," - Percentage of matches"]})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-textPrimary font-semibold mb-2",children:"Formats"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Number"})," - Decimal number"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Percentage"})," - With % symbol"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Time"})," - Seconds with 's'"]})]})]})]})]})]})}const d4=600*1e3;function h4(){const t=$e(A=>A.eventCode),e=$e(A=>A.setEventCode),n=$e(A=>A.loadMockData),r=$e(A=>A.tbaData),i=$e(A=>A.tbaLoading),c=$e(A=>A.tbaError),d=$e(A=>A.fetchTBAData),m=$e(A=>A.autoRefreshEnabled),p=$e(A=>A.setAutoRefresh),x=ht(A=>A.clearPickList),y=ht(A=>A.initializePickList),v=ht(A=>A.importFromTBARankings),[T,I]=E.useState(t),[L,O]=E.useState(!1),[k,z]=E.useState({type:null,message:""}),U=E.useRef(null);E.useEffect(()=>{if(m&&t)return r||d(),U.current=setInterval(()=>{d()},d4),()=>{U.current&&clearInterval(U.current)};U.current&&clearInterval(U.current)},[m,t,d,r]);const $=async()=>{if(!T){z({type:"error",message:"Please enter an event code"});return}z({type:null,message:""});const A=await d(T);A&&A.event?z({type:"success",message:`Found event: ${A.event.name}`}):A&&z({type:"success",message:`Found ${A.teams.length} teams and ${A.matches.length} matches`})},X=async()=>{if(!T||!r){z({type:"error",message:"Please check event first"});return}O(!0),z({type:null,message:""});try{x(),e(T),y(T);let A="";if(r.rankings&&r.rankings.rankings.length>0){v(r.rankings);const D=Math.min(12,r.rankings.rankings.length),q=Math.max(0,r.rankings.rankings.length-12);A=` ${D} teams imported to "Potatoes", ${q} to "Chicken Nuggets".`}await n(),z({type:"success",message:`Event ${T} initialized!${A}`})}catch(A){z({type:"error",message:`Failed to initialize: ${A instanceof Error?A.message:"Unknown error"}`})}finally{O(!1)}},K=()=>{if(confirm("Are you sure you want to clear the entire pick list? This cannot be undone.")){x(),y(t);let A="Pick list cleared and reinitialized";if(r?.rankings&&r.rankings.rankings.length>0){v(r.rankings);const D=Math.min(12,r.rankings.rankings.length),q=Math.max(0,r.rankings.rankings.length-12);A+=`. ${D} teams imported to tier 2, ${q} to tier 3 (by event rank).`}z({type:"success",message:A})}},re=()=>{d()},j=A=>A?new Date(A).toLocaleTimeString():"Never",S=r?.matches?.slice().sort((A,D)=>{const q={qm:0,ef:1,qf:2,sf:3,f:4};return q[A.comp_level]!==q[D.comp_level]?q[A.comp_level]-q[D.comp_level]:A.match_number-D.match_number})||[],C=S.filter(A=>A.comp_level==="qm"),P=S.filter(A=>A.comp_level!=="qm"),w=S.filter(A=>A.alliances.red.score>=0);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Event Setup"}),o.jsx("p",{className:"text-textSecondary mt-2",children:"Load event data from The Blue Alliance and manage your pick list"})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Vh,{size:24,className:"text-blueAlliance"}),o.jsx("h2",{className:"text-xl font-bold",children:"Current Event"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:re,disabled:i,className:"flex items-center gap-2 px-3 py-2 bg-surfaceElevated hover:bg-interactive rounded-lg transition-colors text-sm",title:"Refresh TBA Data",children:[o.jsx(hx,{size:16,className:i?"animate-spin":""}),"Refresh"]}),o.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-surfaceElevated rounded-lg cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:m,onChange:A=>p(A.target.checked),className:"w-4 h-4 rounded"}),o.jsx("span",{className:"text-sm",children:"Auto (10 min)"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Event Code"}),o.jsx("p",{className:"text-xl font-bold",children:t})]}),o.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Teams"}),o.jsx("p",{className:"text-xl font-bold",children:r?.teams?.length||0})]}),o.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Matches"}),o.jsx("p",{className:"text-xl font-bold",children:r?.matches?.length||0})]}),o.jsxs("div",{className:"bg-surfaceElevated p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Last Updated"}),o.jsxs("p",{className:"text-lg font-bold flex items-center gap-1",children:[o.jsx(kR,{size:14}),j(r?.lastUpdated||null)]})]})]}),r?.event&&o.jsxs("div",{className:"mt-4 p-4 bg-surfaceElevated rounded-lg",children:[o.jsx("p",{className:"font-bold text-lg",children:r.event.name}),o.jsxs("p",{className:"text-sm text-textSecondary",children:[r.event.city,", ",r.event.state_prov,"  ",r.event.start_date," to ",r.event.end_date]})]}),c&&o.jsxs("div",{className:"mt-4 p-3 bg-danger/10 border border-danger/30 rounded-lg text-danger text-sm flex items-center gap-2",children:[o.jsx(Dh,{size:16}),c]})]}),r?.rankings&&r.rankings.rankings.length>0&&o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(go,{size:24,className:"text-warning"}),o.jsx("h2",{className:"text-xl font-bold",children:"Rankings"}),o.jsxs("span",{className:"text-sm text-textSecondary",children:["(",r.rankings.rankings.length," teams)"]})]}),o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-border",children:[o.jsx("th",{className:"text-left py-2 px-2",children:"Rank"}),o.jsx("th",{className:"text-left py-2 px-2",children:"Team"}),o.jsx("th",{className:"text-center py-2 px-2",children:"RP"}),o.jsx("th",{className:"text-center py-2 px-2",children:"W-L-T"}),o.jsx("th",{className:"text-center py-2 px-2",children:"Played"})]})}),o.jsx("tbody",{children:r.rankings.rankings.slice(0,20).map(A=>{const D=r.teams.find(q=>q.key===A.team_key);return o.jsxs("tr",{className:"border-b border-border/50 hover:bg-surfaceElevated",children:[o.jsx("td",{className:"py-2 px-2 font-bold",children:A.rank}),o.jsxs("td",{className:"py-2 px-2",children:[o.jsx("span",{className:"font-semibold",children:Lt(A.team_key)}),D?.nickname&&o.jsx("span",{className:"text-textSecondary ml-2",children:D.nickname})]}),o.jsx("td",{className:"py-2 px-2 text-center font-semibold text-warning",children:A.extra_stats?.[0]??"-"}),o.jsxs("td",{className:"py-2 px-2 text-center",children:[A.record.wins,"-",A.record.losses,"-",A.record.ties]}),o.jsx("td",{className:"py-2 px-2 text-center",children:A.matches_played})]},A.team_key)})})]}),r.rankings.rankings.length>20&&o.jsxs("p",{className:"text-xs text-textMuted mt-2 text-center",children:["Showing top 20 of ",r.rankings.rankings.length," teams"]})]})]}),r?.alliances&&r.alliances.length>0&&o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(yf,{size:24,className:"text-success"}),o.jsx("h2",{className:"text-xl font-bold",children:"Alliance Selection"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:r.alliances.map((A,D)=>o.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[o.jsxs("p",{className:"font-bold text-sm mb-2",children:["Alliance ",D+1]}),o.jsx("div",{className:"space-y-1",children:A.picks.map((q,be)=>o.jsxs("div",{className:`text-sm ${be===0?"font-bold text-warning":""}`,children:[be===0?" ":"",Lt(q)]},q))}),A.status&&o.jsxs("p",{className:"text-xs text-textSecondary mt-2",children:[A.status.record.wins,"-",A.status.record.losses,"-",A.status.record.ties]})]},D))})]}),r?.matches&&r.matches.length>0&&o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Ih,{size:24,className:"text-blueAlliance"}),o.jsx("h2",{className:"text-xl font-bold",children:"Match Schedule"})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[o.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Qual Matches"}),o.jsx("p",{className:"text-xl font-bold",children:C.length})]}),o.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Playoff Matches"}),o.jsx("p",{className:"text-xl font-bold",children:P.length})]}),o.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Completed"}),o.jsx("p",{className:"text-xl font-bold",children:w.length})]}),o.jsxs("div",{className:"bg-surfaceElevated p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-textSecondary",children:"Remaining"}),o.jsx("p",{className:"text-xl font-bold",children:S.length-w.length})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm font-semibold text-textSecondary",children:"Recent/Upcoming Qual Matches"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-border",children:[o.jsx("th",{className:"text-left py-2 px-2",children:"Match"}),o.jsx("th",{className:"text-center py-2 px-2 text-redAlliance",children:"Red Alliance"}),o.jsx("th",{className:"text-center py-2 px-2",children:"Score"}),o.jsx("th",{className:"text-center py-2 px-2 text-blueAlliance",children:"Blue Alliance"})]})}),o.jsx("tbody",{children:C.slice(-10).map(A=>o.jsxs("tr",{className:"border-b border-border/50 hover:bg-surfaceElevated",children:[o.jsxs("td",{className:"py-2 px-2 font-bold",children:["Q",A.match_number]}),o.jsx("td",{className:"py-2 px-2 text-center text-redAlliance",children:A.alliances.red.team_keys.map(D=>Lt(D)).join(", ")}),o.jsx("td",{className:"py-2 px-2 text-center font-mono",children:A.alliances.red.score>=0?o.jsxs("span",{children:[o.jsx("span",{className:A.alliances.red.score>A.alliances.blue.score?"text-success font-bold":"",children:A.alliances.red.score})," - ",o.jsx("span",{className:A.alliances.blue.score>A.alliances.red.score?"text-success font-bold":"",children:A.alliances.blue.score})]}):o.jsx("span",{className:"text-textMuted",children:"--"})}),o.jsx("td",{className:"py-2 px-2 text-center text-blueAlliance",children:A.alliances.blue.team_keys.map(D=>Lt(D)).join(", ")})]},A.key))})]})})]})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"Load New Event"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-textSecondary mb-2",children:"Event Code"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:T,onChange:A=>I(A.target.value.toLowerCase()),placeholder:"e.g., 2025txcmp1",className:"flex-1 px-4 py-2 bg-background border border-border rounded-lg text-textPrimary focus:outline-none focus:ring-2 focus:ring-white"}),o.jsxs("button",{onClick:$,disabled:i,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-semibold transition-colors ${i?"bg-textMuted text-background cursor-not-allowed":"bg-blueAlliance text-white hover:bg-blueAlliance/90"}`,children:[i?o.jsx(h_,{size:20,className:"animate-spin"}):o.jsx(YS,{size:20}),"Check"]})]}),o.jsxs("p",{className:"text-xs text-textMuted mt-2",children:["Format: [year][region][event]. Find events on"," ",o.jsx("a",{href:"https://www.thebluealliance.com/events",target:"_blank",rel:"noopener noreferrer",className:"text-blueAlliance hover:underline",children:"TBA Events Page"})]})]}),r&&T!==t&&o.jsxs("div",{className:"p-4 bg-surfaceElevated rounded-lg border border-success/50",children:[o.jsxs("button",{onClick:X,disabled:L,className:`w-full flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold transition-colors ${L?"bg-textMuted text-background cursor-not-allowed":"bg-success text-background hover:bg-success/90"}`,children:[L?o.jsx(h_,{size:20,className:"animate-spin"}):o.jsx(jr,{size:20}),"Initialize Event & Reset Pick List"]}),o.jsx("p",{className:"text-xs text-textMuted mt-2 text-center",children:"This will clear your current pick list and import teams from TBA rankings"})]})]})]}),k.type&&o.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-3 ${k.type==="success"?"bg-success/10 border-success text-success":"bg-danger/10 border-danger text-danger"}`,children:[k.type==="success"?o.jsx(jr,{size:20}):o.jsx(Dh,{size:20}),o.jsx("p",{className:"flex-1",children:k.message})]}),o.jsxs("div",{className:"bg-danger/5 p-6 rounded-lg border border-danger",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Zi,{size:24,className:"text-danger"}),o.jsx("h2",{className:"text-xl font-bold text-danger",children:"Danger Zone"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:"Reset Pick List"}),o.jsx("p",{className:"text-sm text-textSecondary",children:"Clear all teams from your pick list"})]}),o.jsx("button",{onClick:K,className:"px-4 py-2 bg-danger text-white rounded-lg hover:bg-danger/90 transition-colors font-semibold",children:"Clear Pick List"})]})]})]})}const tg=148;function f4(){const t=$e(J=>J.tbaData),e=$e(J=>J.teamStatistics),n=t?.alliances??[],r=t?.matches??[],i=n.length>0,c=E.useMemo(()=>r.filter(J=>J.comp_level==="qm").sort((J,Y)=>J.match_number-Y.match_number),[r]),d=c.length>0,m=d?"quals":i?"playoffs":"custom",[p,x]=E.useState(m),[y,v]=E.useState(null),[T,I]=E.useState(null),[L,O]=E.useState(null),[k,z]=E.useState(!1),[U,$]=E.useState(["","",""]),[X,K]=E.useState(["","",""]),re=E.useMemo(()=>n.map(J=>J.picks.map(Lt)),[n]),j=E.useMemo(()=>L?c.find(J=>J.key===L)??null:null,[L,c]),S=E.useMemo(()=>p==="playoffs"&&y!==null?re[y]??[]:p==="quals"&&j?j.alliances.red.team_keys.map(Lt):U.map(J=>parseInt(J)).filter(J=>!isNaN(J)&&J>0),[p,y,re,j,U]),C=E.useMemo(()=>p==="playoffs"&&T!==null?re[T]??[]:p==="quals"&&j?j.alliances.blue.team_keys.map(Lt):X.map(J=>parseInt(J)).filter(J=>!isNaN(J)&&J>0),[p,T,re,j,X]),P=S.length>0,w=C.length>0,A=P&&w,D=j&&j.alliances.red.score>=0&&j.alliances.blue.score>=0,q=D?j.alliances.red.score:null,be=D?j.alliances.blue.score:null,B=E.useMemo(()=>A?yh(S,C,e):null,[A,S,C,e]),ce=E.useMemo(()=>{if(p!=="playoffs"||re.length===0)return null;const J=[];for(let Y=0;Y<re.length;Y++){const xe=[];for(let Le=0;Le<re.length;Le++)xe.push(yh(re[Y],re[Le],e));J.push(xe)}return J},[p,re,e]),le=E.useMemo(()=>k?c.filter(J=>J.alliances.red.team_keys.includes(`frc${tg}`)||J.alliances.blue.team_keys.includes(`frc${tg}`)):c,[c,k]),H=E.useMemo(()=>p!=="quals"?null:le.map(J=>{const Y=J.alliances.red.team_keys.map(Lt),xe=J.alliances.blue.team_keys.map(Lt),Le=yh(Y,xe,e),ut=J.alliances.red.score>=0&&J.alliances.blue.score>=0;return{match:J,result:Le,played:ut,actualRed:ut?J.alliances.red.score:null,actualBlue:ut?J.alliances.blue.score:null}}),[p,le,e]),pe=(J,Y,xe)=>{if(J==="red"){const Le=[...U];Le[Y]=xe,$(Le)}else{const Le=[...X];Le[Y]=xe,K(Le)}},V=J=>J==="high"?"text-success":J==="medium"?"text-warning":"text-danger",Q=J=>J==="high"?"bg-success/20 text-success":J==="medium"?"bg-warning/20 text-warning":"bg-danger/20 text-danger",fe=J=>n[J]?.name||`Alliance ${J+1}`,ye=J=>{const Y=re[J];return Y?Y.join(", "):""},Re=p==="playoffs"&&y!==null?fe(y):p==="quals"&&j?`Red (Q${j.match_number})`:"Red Alliance",ge=p==="playoffs"&&T!==null?fe(T):p==="quals"&&j?`Blue (Q${j.match_number})`:"Blue Alliance",ke=J=>`${(J*100).toFixed(0)}%`;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Uh,{size:28,className:"text-textSecondary"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Alliance Matchup Predictor"}),o.jsx("p",{className:"text-textSecondary text-sm",children:"Predict scores and ranking points for alliance matchups"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>x("quals"),className:`px-4 py-2 rounded font-medium transition-colors ${p==="quals"?"bg-interactive text-textPrimary":"bg-surface text-textSecondary hover:bg-surfaceElevated"}`,children:"Qualifying"}),o.jsx("button",{onClick:()=>x("playoffs"),className:`px-4 py-2 rounded font-medium transition-colors ${p==="playoffs"?"bg-interactive text-textPrimary":"bg-surface text-textSecondary hover:bg-surfaceElevated"}`,children:"Playoffs"}),o.jsx("button",{onClick:()=>x("custom"),className:`px-4 py-2 rounded font-medium transition-colors ${p==="custom"?"bg-interactive text-textPrimary":"bg-surface text-textSecondary hover:bg-surfaceElevated"}`,children:"Custom"})]}),p==="quals"&&o.jsxs("div",{className:"bg-surface border border-border rounded-lg p-4 space-y-4",children:[!d&&o.jsxs("div",{className:"flex items-center gap-2 text-warning text-sm",children:[o.jsx(Bc,{size:16}),o.jsx("span",{children:"No qualification match data from TBA. Load TBA data from the Event page."})]}),d&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("label",{className:"text-sm font-medium text-textSecondary",children:"Select Match"}),o.jsxs("button",{onClick:()=>z(!k),className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium transition-colors ${k?"bg-warning/20 text-warning":"bg-surfaceElevated text-textSecondary hover:bg-interactive"}`,children:[tg," Only"]})]}),o.jsxs("select",{value:L??"",onChange:J=>O(J.target.value||null),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary",children:[o.jsx("option",{value:"",children:"Select a qualification match..."}),le.map(J=>{const Y=J.alliances.red.team_keys.map(Lt).join(", "),xe=J.alliances.blue.team_keys.map(Lt).join(", "),Le=J.alliances.red.score>=0;return o.jsxs("option",{value:J.key,children:["Q",J.match_number,"  Red [",Y,"] vs Blue [",xe,"]",Le?` (${J.alliances.red.score}-${J.alliances.blue.score})`:""]},J.key)})]}),j&&o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-textSecondary",children:[o.jsxs("span",{className:"text-redAlliance",children:["Red: ",S.join(", ")]}),o.jsxs("span",{className:"text-blueAlliance",children:["Blue: ",C.join(", ")]}),D&&o.jsxs("span",{className:"text-textMuted",children:["Actual: ",q,"-",be]})]})]})]}),p==="playoffs"&&o.jsxs("div",{className:"bg-surface border border-border rounded-lg p-4 space-y-4",children:[!i&&o.jsxs("div",{className:"flex items-center gap-2 text-warning text-sm",children:[o.jsx(Bc,{size:16}),o.jsx("span",{children:"No alliance data from TBA. Use Custom mode or load TBA data from the Event page."})]}),i&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-redAlliance mb-1",children:"Red Alliance"}),o.jsxs("select",{value:y??"",onChange:J=>v(J.target.value===""?null:parseInt(J.target.value)),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary",children:[o.jsx("option",{value:"",children:"Select alliance..."}),n.map((J,Y)=>o.jsxs("option",{value:Y,children:[fe(Y),"  ",ye(Y)]},Y))]}),y!==null&&o.jsxs("p",{className:"text-xs text-textSecondary mt-1",children:["Teams: ",ye(y)]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blueAlliance mb-1",children:"Blue Alliance"}),o.jsxs("select",{value:T??"",onChange:J=>I(J.target.value===""?null:parseInt(J.target.value)),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary",children:[o.jsx("option",{value:"",children:"Select alliance..."}),n.map((J,Y)=>o.jsxs("option",{value:Y,children:[fe(Y),"  ",ye(Y)]},Y))]}),T!==null&&o.jsxs("p",{className:"text-xs text-textSecondary mt-1",children:["Teams: ",ye(T)]})]})]})]}),p==="custom"&&o.jsx("div",{className:"bg-surface border border-border rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-redAlliance mb-2",children:"Red Alliance"}),o.jsx("div",{className:"flex gap-2",children:U.map((J,Y)=>o.jsx("input",{type:"number",placeholder:`Team ${Y+1}`,value:J,onChange:xe=>pe("red",Y,xe.target.value),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary placeholder-textMuted"},Y))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blueAlliance mb-2",children:"Blue Alliance"}),o.jsx("div",{className:"flex gap-2",children:X.map((J,Y)=>o.jsx("input",{type:"number",placeholder:`Team ${Y+1}`,value:J,onChange:xe=>pe("blue",Y,xe.target.value),className:"w-full bg-surfaceElevated border border-border rounded px-3 py-2 text-textPrimary placeholder-textMuted"},Y))})]})]})}),e.length===0&&o.jsxs("div",{className:"flex items-center gap-2 text-warning text-sm bg-warning/10 border border-warning/30 rounded-lg px-4 py-3",children:[o.jsx(Bc,{size:16}),o.jsx("span",{children:"No scouting data loaded. Predictions require team statistics to work."})]}),B&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-surface border border-border rounded-lg p-6",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 md:gap-8 w-full justify-center",children:[o.jsxs("div",{className:"text-center flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-redAlliance mb-1",children:Re}),o.jsx("p",{className:"text-5xl md:text-6xl font-bold text-redAlliance",children:B.red.totalScore.toFixed(1)}),o.jsx("div",{className:"flex items-center justify-center gap-1 mt-1",children:o.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${Q(B.red.confidence)}`,children:[B.red.confidence," confidence"]})})]}),o.jsx("div",{className:"text-textMuted text-2xl font-bold",children:"vs"}),o.jsxs("div",{className:"text-center flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-blueAlliance mb-1",children:ge}),o.jsx("p",{className:"text-5xl md:text-6xl font-bold text-blueAlliance",children:B.blue.totalScore.toFixed(1)}),o.jsx("div",{className:"flex items-center justify-center gap-1 mt-1",children:o.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${Q(B.blue.confidence)}`,children:[B.blue.confidence," confidence"]})})]})]}),B.favoredAlliance!=="even"?o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${B.favoredAlliance==="red"?"bg-redAlliance/20 text-redAlliance":"bg-blueAlliance/20 text-blueAlliance"}`,children:[o.jsx(oR,{size:16}),o.jsxs("span",{className:"font-medium",children:[B.favoredAlliance==="red"?"Red":"Blue"," favored by ",B.scoreDiff.toFixed(1)," points"]})]}):o.jsx("div",{className:"px-4 py-2 rounded-lg bg-surfaceElevated text-textSecondary",children:"Even matchup (within 1 point)"}),D&&q!==null&&be!==null&&o.jsxs("div",{className:"w-full bg-surfaceElevated rounded-lg p-3 mt-2",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx(jr,{size:14,className:"text-success"}),o.jsx("span",{className:"text-xs font-medium text-textSecondary uppercase tracking-wider",children:"Actual Result"})]}),o.jsxs("div",{className:"flex items-center justify-center gap-6",children:[o.jsx("span",{className:"text-2xl font-bold text-redAlliance",children:q}),o.jsx("span",{className:"text-textMuted text-sm",children:"vs"}),o.jsx("span",{className:"text-2xl font-bold text-blueAlliance",children:be})]}),o.jsx("div",{className:"text-center mt-1",children:B.favoredAlliance==="red"&&q>be||B.favoredAlliance==="blue"&&be>q||B.favoredAlliance==="even"&&q===be?o.jsxs("span",{className:"text-xs text-success flex items-center justify-center gap-1",children:[o.jsx(jr,{size:12})," Prediction correct"]}):o.jsxs("span",{className:"text-xs text-danger flex items-center justify-center gap-1",children:[o.jsx(bg,{size:12})," Prediction incorrect"]})})]})]})}),(p==="quals"||p==="custom")&&o.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-surfaceElevated px-4 py-2 border-b border-border flex items-center gap-2",children:[o.jsx(go,{size:16,className:"text-warning"}),o.jsx("h3",{className:"font-medium text-textPrimary text-sm",children:"Ranking Point Predictions"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-border",children:[o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-redAlliance",children:"Red Alliance RP"}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Win Probability"}),o.jsx("span",{className:B.redRP.winProbability>=.5?"text-success font-medium":"text-textPrimary",children:ke(B.redRP.winProbability)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Expected Win RP"}),o.jsx("span",{className:"text-textPrimary",children:B.redRP.expectedWinRP.toFixed(2)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Climb Bonus Prob"}),o.jsx("span",{className:"text-textPrimary",children:ke(B.redRP.climbBonusProb)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Scoring Bonus Prob"}),o.jsx("span",{className:"text-textPrimary",children:ke(B.redRP.scoringBonusProb)})]}),o.jsxs("div",{className:"flex justify-between text-sm border-t border-border pt-1.5",children:[o.jsx("span",{className:"text-textPrimary font-medium",children:"Expected Total RP"}),o.jsx("span",{className:"text-warning font-bold",children:B.redRP.expectedTotalRP.toFixed(2)})]})]})]}),o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-blueAlliance",children:"Blue Alliance RP"}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Win Probability"}),o.jsx("span",{className:B.blueRP.winProbability>=.5?"text-success font-medium":"text-textPrimary",children:ke(B.blueRP.winProbability)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Expected Win RP"}),o.jsx("span",{className:"text-textPrimary",children:B.blueRP.expectedWinRP.toFixed(2)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Climb Bonus Prob"}),o.jsx("span",{className:"text-textPrimary",children:ke(B.blueRP.climbBonusProb)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-textSecondary",children:"Scoring Bonus Prob"}),o.jsx("span",{className:"text-textPrimary",children:ke(B.blueRP.scoringBonusProb)})]}),o.jsxs("div",{className:"flex justify-between text-sm border-t border-border pt-1.5",children:[o.jsx("span",{className:"text-textPrimary font-medium",children:"Expected Total RP"}),o.jsx("span",{className:"text-warning font-bold",children:B.blueRP.expectedTotalRP.toFixed(2)})]})]})]})]})]}),o.jsx("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-surfaceElevated",children:[o.jsx("th",{className:"px-4 py-3 text-left text-textSecondary font-medium",children:"Phase"}),o.jsx("th",{className:"px-4 py-3 text-right text-redAlliance font-medium",children:"Red"}),o.jsx("th",{className:"px-4 py-3 text-right text-blueAlliance font-medium",children:"Blue"}),o.jsx("th",{className:"px-4 py-3 text-right text-textSecondary font-medium",children:"Advantage"})]})}),o.jsxs("tbody",{children:[[{label:"Auto",red:B.red.autoScore,blue:B.blue.autoScore},{label:"Teleop",red:B.red.teleopScore,blue:B.blue.teleopScore},{label:"Endgame",red:B.red.endgameScore,blue:B.blue.endgameScore}].map(J=>{const Y=J.red-J.blue,xe=Math.abs(Y)<.5?"text-textMuted":Y>0?"text-redAlliance":"text-blueAlliance",Le=Math.abs(Y)<.5?"Even":`${Y>0?"Red":"Blue"} +${Math.abs(Y).toFixed(1)}`;return o.jsxs("tr",{className:"border-t border-border",children:[o.jsx("td",{className:"px-4 py-3 text-textPrimary",children:J.label}),o.jsx("td",{className:"px-4 py-3 text-right text-redAlliance",children:J.red.toFixed(1)}),o.jsx("td",{className:"px-4 py-3 text-right text-blueAlliance",children:J.blue.toFixed(1)}),o.jsx("td",{className:`px-4 py-3 text-right font-medium ${xe}`,children:Le})]},J.label)}),o.jsxs("tr",{className:"border-t-2 border-border bg-surfaceElevated",children:[o.jsx("td",{className:"px-4 py-3 font-bold text-textPrimary",children:"TOTAL"}),o.jsx("td",{className:"px-4 py-3 text-right font-bold text-redAlliance",children:B.red.totalScore.toFixed(1)}),o.jsx("td",{className:"px-4 py-3 text-right font-bold text-blueAlliance",children:B.blue.totalScore.toFixed(1)}),o.jsx("td",{className:`px-4 py-3 text-right font-bold ${B.favoredAlliance==="even"?"text-textMuted":B.favoredAlliance==="red"?"text-redAlliance":"text-blueAlliance"}`,children:B.favoredAlliance==="even"?"Even":`${B.favoredAlliance==="red"?"Red":"Blue"} +${B.scoreDiff.toFixed(1)}`})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[o.jsx("div",{className:"bg-redAlliance/10 px-4 py-2 border-b border-border",children:o.jsx("h3",{className:"font-medium text-redAlliance text-sm",children:"Red Alliance Breakdown"})}),o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-surfaceElevated",children:[o.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Team"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Auto"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Teleop"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"End"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Total"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Rel."})]})}),o.jsx("tbody",{children:[...B.red.teams].sort((J,Y)=>Y.totalPoints-J.totalPoints).map(J=>o.jsxs("tr",{className:"border-t border-border",children:[o.jsx("td",{className:"px-3 py-2 text-textPrimary font-medium",children:J.teamNumber}),o.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.autoPoints.toFixed(1)}),o.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.teleopPoints.toFixed(1)}),o.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.endgamePoints.toFixed(1)}),o.jsx("td",{className:"px-3 py-2 text-right text-textPrimary font-medium",children:J.totalPoints.toFixed(1)}),o.jsxs("td",{className:`px-3 py-2 text-right ${V(J.reliability>=.9?"high":J.reliability>=.75?"medium":"low")}`,children:[(J.reliability*100).toFixed(0),"%"]})]},J.teamNumber))})]})]}),o.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[o.jsx("div",{className:"bg-blueAlliance/10 px-4 py-2 border-b border-border",children:o.jsx("h3",{className:"font-medium text-blueAlliance text-sm",children:"Blue Alliance Breakdown"})}),o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-surfaceElevated",children:[o.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Team"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Auto"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Teleop"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"End"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Total"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Rel."})]})}),o.jsx("tbody",{children:[...B.blue.teams].sort((J,Y)=>Y.totalPoints-J.totalPoints).map(J=>o.jsxs("tr",{className:"border-t border-border",children:[o.jsx("td",{className:"px-3 py-2 text-textPrimary font-medium",children:J.teamNumber}),o.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.autoPoints.toFixed(1)}),o.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.teleopPoints.toFixed(1)}),o.jsx("td",{className:"px-3 py-2 text-right text-textSecondary",children:J.endgamePoints.toFixed(1)}),o.jsx("td",{className:"px-3 py-2 text-right text-textPrimary font-medium",children:J.totalPoints.toFixed(1)}),o.jsxs("td",{className:`px-3 py-2 text-right ${V(J.reliability>=.9?"high":J.reliability>=.75?"medium":"low")}`,children:[(J.reliability*100).toFixed(0),"%"]})]},J.teamNumber))})]})]})]})]}),p==="quals"&&H&&H.length>0&&o.jsxs("div",{className:"bg-surface border border-border rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-surfaceElevated px-4 py-2 border-b border-border flex items-center gap-2",children:[o.jsx(zh,{size:16,className:"text-textSecondary"}),o.jsx("h3",{className:"font-medium text-textPrimary text-sm",children:"All Qualification Match Predictions"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-surfaceElevated",children:[o.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Match"}),o.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Red Alliance"}),o.jsx("th",{className:"px-3 py-2 text-right text-redAlliance",children:"Pred."}),o.jsx("th",{className:"px-3 py-2 text-right text-blueAlliance",children:"Pred."}),o.jsx("th",{className:"px-3 py-2 text-left text-textSecondary",children:"Blue Alliance"}),o.jsx("th",{className:"px-3 py-2 text-center text-textSecondary",children:"Favored"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Red RP"}),o.jsx("th",{className:"px-3 py-2 text-right text-textSecondary",children:"Blue RP"}),H.some(J=>J.played)&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-3 py-2 text-right text-textMuted",children:"Actual"}),o.jsx("th",{className:"px-3 py-2 text-center text-textMuted",children:"Result"})]})]})}),o.jsx("tbody",{children:H.map(({match:J,result:Y,played:xe,actualRed:Le,actualBlue:ut})=>{const dn=J.alliances.red.team_keys.map(Lt),At=J.alliances.blue.team_keys.map(Lt),hn=J.key===L,Kt=xe&&(Y.favoredAlliance==="red"&&Le>ut||Y.favoredAlliance==="blue"&&ut>Le||Y.favoredAlliance==="even"&&Le===ut);return o.jsxs("tr",{onClick:()=>O(J.key),className:`border-t border-border cursor-pointer transition-colors ${hn?"bg-interactive":"hover:bg-surfaceElevated"}`,children:[o.jsxs("td",{className:"px-3 py-2 text-textPrimary font-medium",children:["Q",J.match_number]}),o.jsx("td",{className:"px-3 py-2 text-redAlliance",children:dn.join(", ")}),o.jsx("td",{className:"px-3 py-2 text-right text-redAlliance font-medium",children:Y.red.totalScore.toFixed(0)}),o.jsx("td",{className:"px-3 py-2 text-right text-blueAlliance font-medium",children:Y.blue.totalScore.toFixed(0)}),o.jsx("td",{className:"px-3 py-2 text-blueAlliance",children:At.join(", ")}),o.jsx("td",{className:`px-3 py-2 text-center font-medium ${Y.favoredAlliance==="even"?"text-textMuted":Y.favoredAlliance==="red"?"text-redAlliance":"text-blueAlliance"}`,children:Y.favoredAlliance==="even"?"=":`${Y.favoredAlliance==="red"?"R":"B"}+${Y.scoreDiff.toFixed(0)}`}),o.jsx("td",{className:"px-3 py-2 text-right text-warning",children:Y.redRP.expectedTotalRP.toFixed(1)}),o.jsx("td",{className:"px-3 py-2 text-right text-warning",children:Y.blueRP.expectedTotalRP.toFixed(1)}),H.some(As=>As.played)&&o.jsxs(o.Fragment,{children:[o.jsx("td",{className:"px-3 py-2 text-right text-textMuted",children:xe?`${Le}-${ut}`:""}),o.jsx("td",{className:"px-3 py-2 text-center",children:xe?Kt?o.jsx(jr,{size:14,className:"inline text-success"}):o.jsx(bg,{size:14,className:"inline text-danger"}):o.jsx("span",{className:"text-textMuted",children:""})})]})]},J.key)})})]})}),H.some(J=>J.played)&&(()=>{const J=H.filter(xe=>xe.played),Y=J.filter(xe=>xe.result.favoredAlliance==="red"&&xe.actualRed>xe.actualBlue||xe.result.favoredAlliance==="blue"&&xe.actualBlue>xe.actualRed||xe.result.favoredAlliance==="even"&&xe.actualRed===xe.actualBlue);return o.jsxs("div",{className:"px-4 py-2 border-t border-border bg-surfaceElevated flex items-center gap-4 text-xs",children:[o.jsx("span",{className:"text-textSecondary",children:"Prediction Accuracy:"}),o.jsxs("span",{className:"font-medium text-textPrimary",children:[Y.length,"/",J.length," correct (",J.length>0?(Y.length/J.length*100).toFixed(0):0,"%)"]})]})})()]}),ce&&ce.length>0&&o.jsxs("div",{className:"bg-surface border border-border rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-textPrimary mb-3",children:"Quick Matchups Grid"}),o.jsx("p",{className:"text-xs text-textSecondary mb-3",children:"Rows = Red, Columns = Blue. Click a cell to load that matchup."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1 text-textMuted"}),re.map((J,Y)=>o.jsxs("th",{className:"px-2 py-1 text-blueAlliance font-medium whitespace-nowrap",children:["A",Y+1]},Y))]})}),o.jsx("tbody",{children:ce.map((J,Y)=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-2 py-1 text-redAlliance font-medium whitespace-nowrap",children:["A",Y+1]}),J.map((xe,Le)=>{const ut=y===Y&&T===Le,dn=xe.favoredAlliance==="even"?"bg-surfaceElevated":xe.favoredAlliance==="red"?"bg-redAlliance/20":"bg-blueAlliance/20",At=xe.favoredAlliance==="even"?"text-textMuted":xe.favoredAlliance==="red"?"text-redAlliance":"text-blueAlliance";return o.jsx("td",{className:"px-1 py-1",children:o.jsx("button",{onClick:()=>{v(Y),I(Le)},className:`w-14 h-10 rounded text-center font-medium transition-all ${dn} ${At} hover:ring-1 hover:ring-textSecondary ${ut?"ring-2 ring-textPrimary":""}`,children:xe.favoredAlliance==="even"?"=":`${xe.favoredAlliance==="red"?"R":"B"}+${xe.scoreDiff.toFixed(0)}`})},Le)})]},Y))})]})})]}),!A&&o.jsxs("div",{className:"bg-surface border border-border rounded-lg p-8 text-center text-textSecondary",children:[o.jsx(Uh,{size:48,className:"mx-auto mb-3 opacity-30"}),o.jsx("p",{className:"text-lg font-medium",children:"Select a matchup to predict"}),o.jsx("p",{className:"text-sm mt-1",children:p==="quals"?"Choose a qualification match from the dropdown above":p==="playoffs"?"Choose a red and blue alliance from the dropdowns above":"Enter team numbers for both alliances above"})]})]})}const m4=()=>{};var I_={};const AN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},p4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const c=t[n++];e[r++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=t[n++],d=t[n++],m=t[n++],p=((i&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const c=t[n++],d=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(c&63)<<6|d&63)}}return e.join("")},CN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const c=t[i],d=i+1<t.length,m=d?t[i+1]:0,p=i+2<t.length,x=p?t[i+2]:0,y=c>>2,v=(c&3)<<4|m>>4;let T=(m&15)<<2|x>>6,I=x&63;p||(I=64,d||(T=64)),r.push(n[y],n[v],n[T],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):p4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const c=n[t.charAt(i++)],m=i<t.length?n[t.charAt(i)]:0;++i;const x=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,c==null||m==null||x==null||v==null)throw new g4;const T=c<<2|m>>4;if(r.push(T),x!==64){const I=m<<4&240|x>>2;if(r.push(I),v!==64){const L=x<<6&192|v;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class g4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x4=function(t){const e=AN(t);return CN.encodeByteArray(e,!0)},Kh=function(t){return x4(t).replace(/\./g,"")},RN=function(t){try{return CN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function y4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const b4=()=>y4().__FIREBASE_DEFAULTS__,v4=()=>{if(typeof process>"u"||typeof I_>"u")return;const t=I_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RN(t[1]);return e&&JSON.parse(e)},Tf=()=>{try{return m4()||b4()||v4()||_4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jN=t=>Tf()?.emulatorHosts?.[t],kN=t=>{const e=jN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},IN=()=>Tf()?.config,DN=t=>Tf()?.[`_${t}`];class S4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Si(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _x(t){return(await fetch(t,{credentials:"include"})).ok}function MN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Kh(JSON.stringify(n)),Kh(JSON.stringify(d)),""].join(".")}const Gc={};function N4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?t.emulator.push(e):t.prod.push(e);return t}function T4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let D_=!1;function Sx(t,e){if(typeof window>"u"||typeof document>"u"||!Si(window.location.host)||Gc[t]===e||Gc[t]||D_)return;Gc[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",c=N4().prod.length>0;function d(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function x(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{D_=!0,d()},T}function y(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=T4(r),I=n("text"),L=document.getElementById(I)||document.createElement("span"),O=n("learnmore"),k=document.getElementById(O)||document.createElement("a"),z=n("preprendIcon"),U=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const $=T.element;m($),y(k,O);const X=x();p(U,z),$.append(U,L,k,X),document.body.appendChild($)}c?(L.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function w4(){const t=Tf()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function R4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j4(){const t=qn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function k4(){return!w4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I4(){try{return typeof indexedDB=="object"}catch{return!1}}function D4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const M4="FirebaseError";class Ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=M4,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,c=this.errors[e],d=c?P4(c,r):"Error",m=`${this.serviceName}: ${d} (${i}).`;return new Ur(i,m,r)}}function P4(t,e){return t.replace(O4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const O4=/\{\$([^}]+)}/g;function L4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const c=t[i],d=e[i];if(M_(c)&&M_(d)){if(!il(c,d))return!1}else if(c!==d)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function M_(t){return t!==null&&typeof t=="object"}function Tu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function V4(t,e){const n=new U4(t,e);return n.subscribe.bind(n)}class U4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");z4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ng),i.error===void 0&&(i.error=ng),i.complete===void 0&&(i.complete=ng);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ng(){}function qt(t){return t&&t._delegate?t._delegate:t}class fi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ji="[DEFAULT]";class F4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new S4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H4(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:i});r.resolve(c)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const c=this.instances.get(r);return c&&e(c,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B4(t){return t===Ji?void 0:t}function H4(t){return t.instantiationMode==="EAGER"}class q4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const $4={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},G4=We.INFO,K4={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},Y4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=K4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nx{constructor(e){this.name=e,this._logLevel=G4,this._logHandler=Y4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const Q4=(t,e)=>e.some(n=>t instanceof n);let P_,O_;function X4(){return P_||(P_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W4(){return O_||(O_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PN=new WeakMap,Cg=new WeakMap,ON=new WeakMap,sg=new WeakMap,Tx=new WeakMap;function J4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",c),t.removeEventListener("error",d)},c=()=>{n(ii(t.result)),i()},d=()=>{r(t.error),i()};t.addEventListener("success",c),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&PN.set(n,t)}).catch(()=>{}),Tx.set(e,t),e}function Z4(t){if(Cg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",d),t.removeEventListener("abort",d)},c=()=>{n(),i()},d=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",c),t.addEventListener("error",d),t.addEventListener("abort",d)});Cg.set(t,e)}let Rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ON.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ii(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eD(t){Rg=t(Rg)}function tD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rg(this),e,...n);return ON.set(r,e.sort?e.sort():[e]),ii(r)}:W4().includes(t)?function(...e){return t.apply(rg(this),e),ii(PN.get(this))}:function(...e){return ii(t.apply(rg(this),e))}}function nD(t){return typeof t=="function"?tD(t):(t instanceof IDBTransaction&&Z4(t),Q4(t,X4())?new Proxy(t,Rg):t)}function ii(t){if(t instanceof IDBRequest)return J4(t);if(sg.has(t))return sg.get(t);const e=nD(t);return e!==t&&(sg.set(t,e),Tx.set(e,t)),e}const rg=t=>Tx.get(t);function sD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:c}={}){const d=indexedDB.open(t,e),m=ii(d);return r&&d.addEventListener("upgradeneeded",p=>{r(ii(d.result),p.oldVersion,p.newVersion,ii(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),i&&p.addEventListener("versionchange",x=>i(x.oldVersion,x.newVersion,x))}).catch(()=>{}),m}const rD=["get","getKey","getAll","getAllKeys","count"],aD=["put","add","delete","clear"],ag=new Map;function L_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ag.get(e))return ag.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rD.includes(n)))return;const c=async function(d,...m){const p=this.transaction(d,i?"readwrite":"readonly");let x=p.store;return r&&(x=x.index(m.shift())),(await Promise.all([x[n](...m),i&&p.done]))[0]};return ag.set(e,c),c}eD(t=>({...t,get:(e,n,r)=>L_(e,n)||t.get(e,n,r),has:(e,n)=>!!L_(e,n)||t.has(e,n)}));class iD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lD(t){return t.getComponent()?.type==="VERSION"}const jg="@firebase/app",V_="0.14.7";const ga=new Nx("@firebase/app"),oD="@firebase/app-compat",cD="@firebase/analytics-compat",uD="@firebase/analytics",dD="@firebase/app-check-compat",hD="@firebase/app-check",fD="@firebase/auth",mD="@firebase/auth-compat",pD="@firebase/database",gD="@firebase/data-connect",xD="@firebase/database-compat",yD="@firebase/functions",bD="@firebase/functions-compat",vD="@firebase/installations",_D="@firebase/installations-compat",SD="@firebase/messaging",ND="@firebase/messaging-compat",TD="@firebase/performance",ED="@firebase/performance-compat",wD="@firebase/remote-config",AD="@firebase/remote-config-compat",CD="@firebase/storage",RD="@firebase/storage-compat",jD="@firebase/firestore",kD="@firebase/ai",ID="@firebase/firestore-compat",DD="firebase",MD="12.8.0";const kg="[DEFAULT]",PD={[jg]:"fire-core",[oD]:"fire-core-compat",[uD]:"fire-analytics",[cD]:"fire-analytics-compat",[hD]:"fire-app-check",[dD]:"fire-app-check-compat",[fD]:"fire-auth",[mD]:"fire-auth-compat",[pD]:"fire-rtdb",[gD]:"fire-data-connect",[xD]:"fire-rtdb-compat",[yD]:"fire-fn",[bD]:"fire-fn-compat",[vD]:"fire-iid",[_D]:"fire-iid-compat",[SD]:"fire-fcm",[ND]:"fire-fcm-compat",[TD]:"fire-perf",[ED]:"fire-perf-compat",[wD]:"fire-rc",[AD]:"fire-rc-compat",[CD]:"fire-gcs",[RD]:"fire-gcs-compat",[jD]:"fire-fst",[ID]:"fire-fst-compat",[kD]:"fire-vertex","fire-js":"fire-js",[DD]:"fire-js-all"};const Yh=new Map,OD=new Map,Ig=new Map;function U_(t,e){try{t.container.addComponent(e)}catch(n){ga.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ll(t){const e=t.name;if(Ig.has(e))return ga.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,t);for(const n of Yh.values())U_(n,t);for(const n of OD.values())U_(n,t);return!0}function Ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fs(t){return t==null?!1:t.settings!==void 0}const LD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new Nu("app","Firebase",LD);class VD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}const ml=MD;function LN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:kg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(n||(n=IN()),!n)throw li.create("no-options");const c=Yh.get(i);if(c){if(il(n,c.options)&&il(r,c.config))return c;throw li.create("duplicate-app",{appName:i})}const d=new q4(i);for(const p of Ig.values())d.addComponent(p);const m=new VD(n,r,d);return Yh.set(i,m),m}function Ex(t=kg){const e=Yh.get(t);if(!e&&t===kg&&IN())return LN();if(!e)throw li.create("no-app",{appName:t});return e}function Ir(t,e,n){let r=PD[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const d=[`Unable to register library "${r}" with version "${e}":`];i&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ga.warn(d.join(" "));return}ll(new fi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const UD="firebase-heartbeat-database",zD=1,au="firebase-heartbeat-store";let ig=null;function VN(){return ig||(ig=sD(UD,zD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),ig}async function FD(t){try{const n=(await VN()).transaction(au),r=await n.objectStore(au).get(UN(t));return await n.done,r}catch(e){if(e instanceof Ur)ga.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e?.message});ga.warn(n.message)}}}async function z_(t,e){try{const r=(await VN()).transaction(au,"readwrite");await r.objectStore(au).put(e,UN(t)),await r.done}catch(n){if(n instanceof Ur)ga.warn(n.message);else{const r=li.create("idb-set",{originalErrorMessage:n?.message});ga.warn(r.message)}}}function UN(t){return`${t.name}!${t.options.appId}`}const BD=1024,HD=30;class qD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>HD){const i=KD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ga.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=F_(),{heartbeatsToSend:n,unsentEntries:r}=$D(this._heartbeatsCache.heartbeats),i=Kh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ga.warn(e),""}}}function F_(){return new Date().toISOString().substring(0,10)}function $D(t,e=BD){const n=[];let r=t.slice();for(const i of t){const c=n.find(d=>d.agent===i.agent);if(c){if(c.dates.push(i.date),B_(n)>e){c.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),B_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I4()?D4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function B_(t){return Kh(JSON.stringify({version:2,heartbeats:t})).length}function KD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function YD(t){ll(new fi("platform-logger",e=>new iD(e),"PRIVATE")),ll(new fi("heartbeat",e=>new qD(e),"PRIVATE")),Ir(jg,V_,t),Ir(jg,V_,"esm2020"),Ir("fire-js","")}YD("");function zN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QD=zN,FN=new Nu("auth","Firebase",zN());const Qh=new Nx("@firebase/auth");function XD(t,...e){Qh.logLevel<=We.WARN&&Qh.warn(`Auth (${ml}): ${t}`,...e)}function vh(t,...e){Qh.logLevel<=We.ERROR&&Qh.error(`Auth (${ml}): ${t}`,...e)}function xa(t,...e){throw wx(t,...e)}function Dr(t,...e){return wx(t,...e)}function BN(t,e,n){const r={...QD(),[e]:n};return new Nu("auth","Firebase",r).create(e,{appName:t.name})}function oi(t){return BN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FN.create(t,...e)}function Oe(t,e,...n){if(!t)throw wx(e,...n)}function ha(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vh(e),new Error(e)}function ya(t,e){t||ha(e)}function Dg(){return typeof self<"u"&&self.location?.href||""}function WD(){return H_()==="http:"||H_()==="https:"}function H_(){return typeof self<"u"&&self.location?.protocol||null}function JD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WD()||C4()||"connection"in navigator)?navigator.onLine:!0}function ZD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ya(n>e,"Short delay should be less than long delay!"),this.isMobile=E4()||R4()}get(){return JD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ax(t,e){ya(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class HN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const e3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const t3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],n3=new Eu(3e4,6e4);function wf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jo(t,e,n,r,i={}){return qN(t,i,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const m=Tu({key:t.config.apiKey,...d}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const x={method:e,headers:p,...c};return A4()||(x.referrerPolicy="no-referrer"),t.emulatorConfig&&Si(t.emulatorConfig.host)&&(x.credentials="include"),HN.fetch()(await GN(t,t.config.apiHost,n,m),x)})}async function qN(t,e,n){t._canInitEmulator=!1;const r={...e3,...e};try{const i=new s3(t),c=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw ih(t,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[p,x]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(t,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw ih(t,"email-already-in-use",d);if(p==="USER_DISABLED")throw ih(t,"user-disabled",d);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw BN(t,y,x);xa(t,y)}}catch(i){if(i instanceof Ur)throw i;xa(t,"network-request-failed",{message:String(i)})}}async function $N(t,e,n,r,i={}){const c=await jo(t,e,n,r,i);return"mfaPendingCredential"in c&&xa(t,"multi-factor-auth-required",{_serverResponse:c}),c}async function GN(t,e,n,r){const i=`${e}${n}?${r}`,c=t,d=c.config.emulator?Ax(t.config,i):`${t.config.apiScheme}://${i}`;return t3.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class s3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),n3.get())})}}function ih(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dr(t,e,r);return i.customData._tokenResponse=n,i}async function r3(t,e){return jo(t,"POST","/v1/accounts:delete",e)}async function Xh(t,e){return jo(t,"POST","/v1/accounts:lookup",e)}function Kc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a3(t,e=!1){const n=qt(t),r=await n.getIdToken(e),i=Cx(r);Oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,d=c?.sign_in_provider;return{claims:i,token:r,authTime:Kc(lg(i.auth_time)),issuedAtTime:Kc(lg(i.iat)),expirationTime:Kc(lg(i.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function lg(t){return Number(t)*1e3}function Cx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const i=RN(n);return i?JSON.parse(i):(vh("Failed to decode base64 JWT payload"),null)}catch(i){return vh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function q_(t){const e=Cx(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function iu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ur&&i3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function i3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class l3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Mg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wh(t){const e=t.auth,n=await t.getIdToken(),r=await iu(t,Xh(e,{idToken:n}));Oe(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const c=i.providerUserInfo?.length?KN(i.providerUserInfo):[],d=c3(t.providerData,c),m=t.isAnonymous,p=!(t.email&&i.passwordHash)&&!d?.length,x=m?p:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:x};Object.assign(t,y)}async function o3(t){const e=qt(t);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function u3(t,e){const n=await qN(t,{},async()=>{const r=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=t.config,d=await GN(t,i,"/v1/token",`key=${c}`),m=await t._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return t.emulatorConfig&&Si(t.emulatorConfig.host)&&(p.credentials="include"),HN.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function d3(t,e){return jo(t,"POST","/v2/accounts:revokeToken",wf(t,e))}class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=q_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:c}=await u3(e,n);this.updateTokensAndExpiration(r,i,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:c}=n,d=new uo;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),d.accessToken=i),c&&(Oe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return ha("not implemented")}}function Ja(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Js{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new l3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await iu(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return a3(this,e)}reload(){return o3(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fs(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await iu(this,r3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,x=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:v,emailVerified:T,isAnonymous:I,providerData:L,stsTokenManager:O}=n;Oe(v&&O,e,"internal-error");const k=uo.fromJSON(this.name,O);Oe(typeof v=="string",e,"internal-error"),Ja(r,e.name),Ja(i,e.name),Oe(typeof T=="boolean",e,"internal-error"),Oe(typeof I=="boolean",e,"internal-error"),Ja(c,e.name),Ja(d,e.name),Ja(m,e.name),Ja(p,e.name),Ja(x,e.name),Ja(y,e.name);const z=new Js({uid:v,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:I,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:k,createdAt:x,lastLoginAt:y});return L&&Array.isArray(L)&&(z.providerData=L.map(U=>({...U}))),p&&(z._redirectEventId=p),z}static async _fromIdTokenResponse(e,n,r=!1){const i=new uo;i.updateFromServerResponse(n);const c=new Js({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Oe(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?KN(i.providerUserInfo):[],d=!(i.email&&i.passwordHash)&&!c?.length,m=new uo;m.updateFromIdToken(r);const p=new Js({uid:i.localId,auth:e,stsTokenManager:m,isAnonymous:d}),x={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(p,x),p}}const $_=new Map;function fa(t){ya(t instanceof Function,"Expected a class definition");let e=$_.get(t);return e?(ya(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$_.set(t,e),e)}class YN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YN.type="NONE";const G_=YN;function _h(t,e,n){return`firebase:${t}:${e}:${n}`}class ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:c}=this.auth;this.fullUserKey=_h(this.userKey,i.apiKey,c),this.fullPersistenceKey=_h("persistence",i.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xh(this.auth,{idToken:e}).catch(()=>{});return n?Js._fromGetAccountInfoResponse(this.auth,n,e):null}return Js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ho(fa(G_),e,r);const i=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=i[0]||fa(G_);const d=_h(r,e.config.apiKey,e.name);let m=null;for(const x of n)try{const y=await x._get(d);if(y){let v;if(typeof y=="string"){const T=await Xh(e,{idToken:y}).catch(()=>{});if(!T)break;v=await Js._fromGetAccountInfoResponse(e,T,y)}else v=Js._fromJSON(e,y);x!==c&&(m=v),c=x;break}}catch{}const p=i.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new ho(c,e,r):(c=p[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new ho(c,e,r))}}function K_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eT(e))return"Blackberry";if(tT(e))return"Webos";if(XN(e))return"Safari";if((e.includes("chrome/")||WN(e))&&!e.includes("edge/"))return"Chrome";if(ZN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function QN(t=qn()){return/firefox\//i.test(t)}function XN(t=qn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WN(t=qn()){return/crios\//i.test(t)}function JN(t=qn()){return/iemobile/i.test(t)}function ZN(t=qn()){return/android/i.test(t)}function eT(t=qn()){return/blackberry/i.test(t)}function tT(t=qn()){return/webos/i.test(t)}function Rx(t=qn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h3(t=qn()){return Rx(t)&&!!window.navigator?.standalone}function f3(){return j4()&&document.documentMode===10}function nT(t=qn()){return Rx(t)||ZN(t)||tT(t)||eT(t)||/windows phone/i.test(t)||JN(t)}function sT(t,e=[]){let n;switch(t){case"Browser":n=K_(qn());break;case"Worker":n=`${K_(qn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ml}/${r}`}class m3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((d,m)=>{try{const p=e(c);d(p)}catch(p){m(p)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function p3(t,e={}){return jo(t,"GET","/v2/passwordPolicy",wf(t,e))}const g3=6;class x3{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??g3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class y3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y_(this),this.idTokenSubscription=new Y_(this),this.beforeStateQueue=new m3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xh(this,{idToken:e}),r=await Js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Fs(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fs(this.app))return Promise.reject(oi(this));const n=e?qt(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fs(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fs(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await p3(this),n=new x3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await d3(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fa(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[fa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,i);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Fs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&XD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Af(t){return qt(t)}class Y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=V4(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b3(t){jx=t}function v3(t){return jx.loadJS(t)}function _3(){return jx.gapiScript}function S3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function N3(t,e){const n=Ef(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),c=n.getOptions();if(il(c,e??{}))return i;xa(i,"already-initialized")}return n.initialize({options:e})}function T3(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fa);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function E3(t,e,n){const r=Af(t);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,c=rT(e),{host:d,port:m}=w3(e),p=m===null?"":`:${m}`,x={url:`${c}//${d}${p}/`},y=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(il(x,r.config.emulator)&&il(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Si(d)?(_x(`${c}//${d}${p}`),Sx("Auth",!0)):A3()}function rT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function w3(t){const e=rT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const c=i[1];return{host:c,port:Q_(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:Q_(d)}}}function Q_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function A3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class aT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ha("not implemented")}_getIdTokenResponse(e){return ha("not implemented")}_linkToIdToken(e,n){return ha("not implemented")}_getReauthenticationResolver(e){return ha("not implemented")}}async function fo(t,e){return $N(t,"POST","/v1/accounts:signInWithIdp",wf(t,e))}const C3="http://localhost";class ol extends aT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ol(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...c}=n;if(!r||!i)return null;const d=new ol(r,i);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:C3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tu(n)}return e}}class iT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wu extends iT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ei extends wu{constructor(){super("facebook.com")}static credential(e){return ol._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";class ti extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ol._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";class ni extends wu{constructor(){super("github.com")}static credential(e){return ol._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";class si extends wu{constructor(){super("twitter.com")}static credential(e,n){return ol._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return si.credential(n,r)}catch{return null}}}si.TWITTER_SIGN_IN_METHOD="twitter.com";si.PROVIDER_ID="twitter.com";async function R3(t,e){return $N(t,"POST","/v1/accounts:signUp",wf(t,e))}class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const c=await Js._fromIdTokenResponse(e,r,i),d=X_(r);return new mi({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=X_(r);return new mi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function X_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function j3(t){if(Fs(t.app))return Promise.reject(oi(t));const e=Af(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new mi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await R3(e,{returnSecureToken:!0}),r=await mi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class Jh extends Ur{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jh(e,n,r,i)}}function lT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(t,c,e,r):c})}async function k3(t,e,n=!1){const r=await iu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mi._forOperation(t,"link",r)}async function I3(t,e,n=!1){const{auth:r}=t;if(Fs(r.app))return Promise.reject(oi(r));const i="reauthenticate";try{const c=await iu(t,lT(r,i,e,t),n);Oe(c.idToken,r,"internal-error");const d=Cx(c.idToken);Oe(d,r,"internal-error");const{sub:m}=d;return Oe(t.uid===m,r,"user-mismatch"),mi._forOperation(t,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&xa(r,"user-mismatch"),c}}async function D3(t,e,n=!1){if(Fs(t.app))return Promise.reject(oi(t));const r="signIn",i=await lT(t,r,e),c=await mi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(c.user),c}function M3(t,e,n,r){return qt(t).onIdTokenChanged(e,n,r)}function P3(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function O3(t,e,n,r){return qt(t).onAuthStateChanged(e,n,r)}const Zh="__sak";class oT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const L3=1e3,V3=10;class cT extends oT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);f3()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,V3):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},L3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cT.type="LOCAL";const U3=cT;class uT extends oT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uT.type="SESSION";const dT=uT;function z3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Cf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:c}=n.data,d=this.handlersMap[i];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const m=Array.from(d).map(async x=>x(n.origin,c)),p=await z3(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cf.receivers=[];function kx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class F3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,d;return new Promise((m,p)=>{const x=kx("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);d={messageChannel:i,onMessage(v){const T=v;if(T.data.eventId===x)switch(T.data.status){case"ack":clearTimeout(y),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(T.data.response);break;default:clearTimeout(y),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),i.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[i.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Mr(){return window}function B3(t){Mr().location.href=t}function hT(){return typeof Mr().WorkerGlobalScope<"u"&&typeof Mr().importScripts=="function"}async function H3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q3(){return navigator?.serviceWorker?.controller||null}function $3(){return hT()?self:null}const fT="firebaseLocalStorageDb",G3=1,ef="firebaseLocalStorage",mT="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rf(t,e){return t.transaction([ef],e?"readwrite":"readonly").objectStore(ef)}function K3(){const t=indexedDB.deleteDatabase(fT);return new Au(t).toPromise()}function Pg(){const t=indexedDB.open(fT,G3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ef,{keyPath:mT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ef)?e(r):(r.close(),await K3(),e(await Pg()))})})}async function W_(t,e,n){const r=Rf(t,!0).put({[mT]:e,value:n});return new Au(r).toPromise()}async function Y3(t,e){const n=Rf(t,!1).get(e),r=await new Au(n).toPromise();return r===void 0?null:r.value}function J_(t,e){const n=Rf(t,!0).delete(e);return new Au(n).toPromise()}const Q3=800,X3=3;class pT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>X3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cf._getInstance($3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await H3(),!this.activeServiceWorker)return;this.sender=new F3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||q3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pg();return await W_(e,Zh,"1"),await J_(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>W_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Y3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=Rf(i,!1).getAll();return new Au(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pT.type="LOCAL";const W3=pT;new Eu(3e4,6e4);function J3(t,e){return e?fa(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Ix extends aT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z3(t){return D3(t.auth,new Ix(t),t.bypassAuthState)}function eM(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),I3(n,new Ix(t),t.bypassAuthState)}async function tM(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),k3(n,new Ix(t),t.bypassAuthState)}class gT{constructor(e,n,r,i,c=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z3;case"linkViaPopup":case"linkViaRedirect":return tM;case"reauthViaPopup":case"reauthViaRedirect":return eM;default:xa(this.auth,"internal-error")}}resolve(e){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nM=new Eu(2e3,1e4);class oo extends gT{constructor(e,n,r,i,c){super(e,n,i,c),this.provider=r,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){ya(this.filter.length===1,"Popup operations only handle one event");const e=kx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nM.get())};e()}}oo.currentPopupAction=null;const sM="pendingRedirect",Sh=new Map;class rM extends gT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const r=await aM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aM(t,e){const n=oM(e),r=lM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function iM(t,e){Sh.set(t._key(),e)}function lM(t){return fa(t._redirectPersistence)}function oM(t){return _h(sM,t.config.apiKey,t.name)}async function cM(t,e,n=!1){if(Fs(t.app))return Promise.reject(oi(t));const r=Af(t),i=J3(r,e),d=await new rM(r,i,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const uM=600*1e3;class dM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!xT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Dr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_(e))}saveEventToCache(e){this.cachedEventUids.add(Z_(e)),this.lastProcessedEventTime=Date.now()}}function Z_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xT({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function hM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xT(t);default:return!1}}async function fM(t,e={}){return jo(t,"GET","/v1/projects",e)}const mM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pM=/^https?/;async function gM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fM(t);for(const n of e)try{if(xM(n))return}catch{}xa(t,"unauthorized-domain")}function xM(t){const e=Dg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!pM.test(n))return!1;if(mM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const yM=new Eu(3e4,6e4);function e1(){const t=Mr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bM(t){return new Promise((e,n)=>{function r(){e1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e1(),n(Dr(t,"network-request-failed"))},timeout:yM.get()})}if(Mr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mr().gapi?.load)r();else{const i=S3("iframefcb");return Mr()[i]=()=>{gapi.load?r():n(Dr(t,"network-request-failed"))},v3(`${_3()}?onload=${i}`).catch(c=>n(c))}}).catch(e=>{throw Nh=null,e})}let Nh=null;function vM(t){return Nh=Nh||bM(t),Nh}const _M=new Eu(5e3,15e3),SM="__/auth/iframe",NM="emulator/auth/iframe",TM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wM(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ax(e,NM):`https://${t.config.authDomain}/${SM}`,r={apiKey:e.apiKey,appName:t.name,v:ml},i=EM.get(t.config.apiHost);i&&(r.eid=i);const c=t._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Tu(r).slice(1)}`}async function AM(t){const e=await vM(t),n=Mr().gapi;return Oe(n,t,"internal-error"),e.open({where:document.body,url:wM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TM,dontclear:!0},r=>new Promise(async(i,c)=>{await r.restyle({setHideOnLeave:!1});const d=Dr(t,"network-request-failed"),m=Mr().setTimeout(()=>{c(d)},_M.get());function p(){Mr().clearTimeout(m),i(r)}r.ping(p).then(p,()=>{c(d)})}))}const CM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RM=500,jM=600,kM="_blank",IM="http://localhost";class t1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DM(t,e,n,r=RM,i=jM){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...CM,width:r.toString(),height:i.toString(),top:c,left:d},x=qn().toLowerCase();n&&(m=WN(x)?kM:n),QN(x)&&(e=e||IM,p.scrollbars="yes");const y=Object.entries(p).reduce((T,[I,L])=>`${T}${I}=${L},`,"");if(h3(x)&&m!=="_self")return MM(e||"",m),new t1(null);const v=window.open(e||"",m,y);Oe(v,t,"popup-blocked");try{v.focus()}catch{}return new t1(v)}function MM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const PM="__/auth/handler",OM="emulator/auth/handler",LM=encodeURIComponent("fac");async function n1(t,e,n,r,i,c){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ml,eventId:i};if(e instanceof iT){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",L4(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))d[y]=v}if(e instanceof wu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(d.scopes=y.join(","))}t.tenantId&&(d.tid=t.tenantId);const m=d;for(const y of Object.keys(m))m[y]===void 0&&delete m[y];const p=await t._getAppCheckToken(),x=p?`#${LM}=${encodeURIComponent(p)}`:"";return`${VM(t)}?${Tu(m).slice(1)}${x}`}function VM({config:t}){return t.emulator?Ax(t,OM):`https://${t.authDomain}/${PM}`}const og="webStorageSupport";class UM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dT,this._completeRedirectFn=cM,this._overrideRedirectResult=iM}async _openPopup(e,n,r,i){ya(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await n1(e,n,r,Dg(),i);return DM(e,c,kx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const c=await n1(e,n,r,Dg(),i);return B3(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:c}=this.eventManagers[n];return i?Promise.resolve(i):(ya(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await AM(e),r=new dM(e);return n.register("authEvent",i=>(Oe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(og,{type:og},i=>{const c=i?.[0]?.[og];c!==void 0&&n(!!c),xa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nT()||XN()||Rx()}}const zM=UM;var s1="@firebase/auth",r1="1.12.0";class FM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HM(t){ll(new fi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Oe(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:d,authDomain:m,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sT(t)},x=new y3(r,i,c,p);return T3(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ll(new fi("auth-internal",e=>{const n=Af(e.getProvider("auth").getImmediate());return(r=>new FM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(s1,r1,BM(t)),Ir(s1,r1,"esm2020")}const qM=300,$M=DN("authIdTokenMaxAge")||qM;let a1=null;const GM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$M)return;const i=n?.token;a1!==i&&(a1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KM(t=Ex()){const e=Ef(t,"auth");if(e.isInitialized())return e.getImmediate();const n=N3(t,{popupRedirectResolver:zM,persistence:[W3,U3,dT]}),r=DN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=GM(c.toString());P3(n,d,()=>d(n.currentUser)),M3(n,m=>d(m))}}const i=jN("auth");return i&&E3(n,`http://${i}`),n}function YM(){return document.getElementsByTagName("head")?.[0]??document}b3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const c=Dr("internal-error");c.customData=i,n(c)},r.type="text/javascript",r.charset="UTF-8",YM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HM("Browser");var QM="firebase",XM="12.8.0";Ir(QM,XM,"app");var i1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ci,yT;(function(){var t;function e(j,S){function C(){}C.prototype=S.prototype,j.F=S.prototype,j.prototype=new C,j.prototype.constructor=j,j.D=function(P,w,A){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return S.prototype[w].apply(P,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,S,C){C||(C=0);const P=Array(16);if(typeof S=="string")for(var w=0;w<16;++w)P[w]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(w=0;w<16;++w)P[w]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=j.g[0],C=j.g[1],w=j.g[2];let A=j.g[3],D;D=S+(A^C&(w^A))+P[0]+3614090360&4294967295,S=C+(D<<7&4294967295|D>>>25),D=A+(w^S&(C^w))+P[1]+3905402710&4294967295,A=S+(D<<12&4294967295|D>>>20),D=w+(C^A&(S^C))+P[2]+606105819&4294967295,w=A+(D<<17&4294967295|D>>>15),D=C+(S^w&(A^S))+P[3]+3250441966&4294967295,C=w+(D<<22&4294967295|D>>>10),D=S+(A^C&(w^A))+P[4]+4118548399&4294967295,S=C+(D<<7&4294967295|D>>>25),D=A+(w^S&(C^w))+P[5]+1200080426&4294967295,A=S+(D<<12&4294967295|D>>>20),D=w+(C^A&(S^C))+P[6]+2821735955&4294967295,w=A+(D<<17&4294967295|D>>>15),D=C+(S^w&(A^S))+P[7]+4249261313&4294967295,C=w+(D<<22&4294967295|D>>>10),D=S+(A^C&(w^A))+P[8]+1770035416&4294967295,S=C+(D<<7&4294967295|D>>>25),D=A+(w^S&(C^w))+P[9]+2336552879&4294967295,A=S+(D<<12&4294967295|D>>>20),D=w+(C^A&(S^C))+P[10]+4294925233&4294967295,w=A+(D<<17&4294967295|D>>>15),D=C+(S^w&(A^S))+P[11]+2304563134&4294967295,C=w+(D<<22&4294967295|D>>>10),D=S+(A^C&(w^A))+P[12]+1804603682&4294967295,S=C+(D<<7&4294967295|D>>>25),D=A+(w^S&(C^w))+P[13]+4254626195&4294967295,A=S+(D<<12&4294967295|D>>>20),D=w+(C^A&(S^C))+P[14]+2792965006&4294967295,w=A+(D<<17&4294967295|D>>>15),D=C+(S^w&(A^S))+P[15]+1236535329&4294967295,C=w+(D<<22&4294967295|D>>>10),D=S+(w^A&(C^w))+P[1]+4129170786&4294967295,S=C+(D<<5&4294967295|D>>>27),D=A+(C^w&(S^C))+P[6]+3225465664&4294967295,A=S+(D<<9&4294967295|D>>>23),D=w+(S^C&(A^S))+P[11]+643717713&4294967295,w=A+(D<<14&4294967295|D>>>18),D=C+(A^S&(w^A))+P[0]+3921069994&4294967295,C=w+(D<<20&4294967295|D>>>12),D=S+(w^A&(C^w))+P[5]+3593408605&4294967295,S=C+(D<<5&4294967295|D>>>27),D=A+(C^w&(S^C))+P[10]+38016083&4294967295,A=S+(D<<9&4294967295|D>>>23),D=w+(S^C&(A^S))+P[15]+3634488961&4294967295,w=A+(D<<14&4294967295|D>>>18),D=C+(A^S&(w^A))+P[4]+3889429448&4294967295,C=w+(D<<20&4294967295|D>>>12),D=S+(w^A&(C^w))+P[9]+568446438&4294967295,S=C+(D<<5&4294967295|D>>>27),D=A+(C^w&(S^C))+P[14]+3275163606&4294967295,A=S+(D<<9&4294967295|D>>>23),D=w+(S^C&(A^S))+P[3]+4107603335&4294967295,w=A+(D<<14&4294967295|D>>>18),D=C+(A^S&(w^A))+P[8]+1163531501&4294967295,C=w+(D<<20&4294967295|D>>>12),D=S+(w^A&(C^w))+P[13]+2850285829&4294967295,S=C+(D<<5&4294967295|D>>>27),D=A+(C^w&(S^C))+P[2]+4243563512&4294967295,A=S+(D<<9&4294967295|D>>>23),D=w+(S^C&(A^S))+P[7]+1735328473&4294967295,w=A+(D<<14&4294967295|D>>>18),D=C+(A^S&(w^A))+P[12]+2368359562&4294967295,C=w+(D<<20&4294967295|D>>>12),D=S+(C^w^A)+P[5]+4294588738&4294967295,S=C+(D<<4&4294967295|D>>>28),D=A+(S^C^w)+P[8]+2272392833&4294967295,A=S+(D<<11&4294967295|D>>>21),D=w+(A^S^C)+P[11]+1839030562&4294967295,w=A+(D<<16&4294967295|D>>>16),D=C+(w^A^S)+P[14]+4259657740&4294967295,C=w+(D<<23&4294967295|D>>>9),D=S+(C^w^A)+P[1]+2763975236&4294967295,S=C+(D<<4&4294967295|D>>>28),D=A+(S^C^w)+P[4]+1272893353&4294967295,A=S+(D<<11&4294967295|D>>>21),D=w+(A^S^C)+P[7]+4139469664&4294967295,w=A+(D<<16&4294967295|D>>>16),D=C+(w^A^S)+P[10]+3200236656&4294967295,C=w+(D<<23&4294967295|D>>>9),D=S+(C^w^A)+P[13]+681279174&4294967295,S=C+(D<<4&4294967295|D>>>28),D=A+(S^C^w)+P[0]+3936430074&4294967295,A=S+(D<<11&4294967295|D>>>21),D=w+(A^S^C)+P[3]+3572445317&4294967295,w=A+(D<<16&4294967295|D>>>16),D=C+(w^A^S)+P[6]+76029189&4294967295,C=w+(D<<23&4294967295|D>>>9),D=S+(C^w^A)+P[9]+3654602809&4294967295,S=C+(D<<4&4294967295|D>>>28),D=A+(S^C^w)+P[12]+3873151461&4294967295,A=S+(D<<11&4294967295|D>>>21),D=w+(A^S^C)+P[15]+530742520&4294967295,w=A+(D<<16&4294967295|D>>>16),D=C+(w^A^S)+P[2]+3299628645&4294967295,C=w+(D<<23&4294967295|D>>>9),D=S+(w^(C|~A))+P[0]+4096336452&4294967295,S=C+(D<<6&4294967295|D>>>26),D=A+(C^(S|~w))+P[7]+1126891415&4294967295,A=S+(D<<10&4294967295|D>>>22),D=w+(S^(A|~C))+P[14]+2878612391&4294967295,w=A+(D<<15&4294967295|D>>>17),D=C+(A^(w|~S))+P[5]+4237533241&4294967295,C=w+(D<<21&4294967295|D>>>11),D=S+(w^(C|~A))+P[12]+1700485571&4294967295,S=C+(D<<6&4294967295|D>>>26),D=A+(C^(S|~w))+P[3]+2399980690&4294967295,A=S+(D<<10&4294967295|D>>>22),D=w+(S^(A|~C))+P[10]+4293915773&4294967295,w=A+(D<<15&4294967295|D>>>17),D=C+(A^(w|~S))+P[1]+2240044497&4294967295,C=w+(D<<21&4294967295|D>>>11),D=S+(w^(C|~A))+P[8]+1873313359&4294967295,S=C+(D<<6&4294967295|D>>>26),D=A+(C^(S|~w))+P[15]+4264355552&4294967295,A=S+(D<<10&4294967295|D>>>22),D=w+(S^(A|~C))+P[6]+2734768916&4294967295,w=A+(D<<15&4294967295|D>>>17),D=C+(A^(w|~S))+P[13]+1309151649&4294967295,C=w+(D<<21&4294967295|D>>>11),D=S+(w^(C|~A))+P[4]+4149444226&4294967295,S=C+(D<<6&4294967295|D>>>26),D=A+(C^(S|~w))+P[11]+3174756917&4294967295,A=S+(D<<10&4294967295|D>>>22),D=w+(S^(A|~C))+P[2]+718787259&4294967295,w=A+(D<<15&4294967295|D>>>17),D=C+(A^(w|~S))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(w+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+w&4294967295,j.g[3]=j.g[3]+A&4294967295}r.prototype.v=function(j,S){S===void 0&&(S=j.length);const C=S-this.blockSize,P=this.C;let w=this.h,A=0;for(;A<S;){if(w==0)for(;A<=C;)i(this,j,A),A+=this.blockSize;if(typeof j=="string"){for(;A<S;)if(P[w++]=j.charCodeAt(A++),w==this.blockSize){i(this,P),w=0;break}}else for(;A<S;)if(P[w++]=j[A++],w==this.blockSize){i(this,P),w=0;break}}this.h=w,this.o+=S},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;S=this.o*8;for(var C=j.length-8;C<j.length;++C)j[C]=S&255,S/=256;for(this.v(j),j=Array(16),S=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)j[S++]=this.g[C]>>>P&255;return j};function c(j,S){var C=m;return Object.prototype.hasOwnProperty.call(C,j)?C[j]:C[j]=S(j)}function d(j,S){this.h=S;const C=[];let P=!0;for(let w=j.length-1;w>=0;w--){const A=j[w]|0;P&&A==S||(C[w]=A,P=!1)}this.g=C}var m={};function p(j){return-128<=j&&j<128?c(j,function(S){return new d([S|0],S<0?-1:0)}):new d([j|0],j<0?-1:0)}function x(j){if(isNaN(j)||!isFinite(j))return v;if(j<0)return k(x(-j));const S=[];let C=1;for(let P=0;j>=C;P++)S[P]=j/C|0,C*=4294967296;return new d(S,0)}function y(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return k(y(j.substring(1),S));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=x(Math.pow(S,8));let P=v;for(let A=0;A<j.length;A+=8){var w=Math.min(8,j.length-A);const D=parseInt(j.substring(A,A+w),S);w<8?(w=x(Math.pow(S,w)),P=P.j(w).add(x(D))):(P=P.j(C),P=P.add(x(D)))}return P}var v=p(0),T=p(1),I=p(16777216);t=d.prototype,t.m=function(){if(O(this))return-k(this).m();let j=0,S=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);j+=(P>=0?P:4294967296+P)*S,S*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(L(this))return"0";if(O(this))return"-"+k(this).toString(j);const S=x(Math.pow(j,6));var C=this;let P="";for(;;){const w=X(C,S).g;C=z(C,w.j(S));let A=((C.g.length>0?C.g[0]:C.h)>>>0).toString(j);if(C=w,L(C))return A+P;for(;A.length<6;)A="0"+A;P=A+P}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function L(j){if(j.h!=0)return!1;for(let S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function O(j){return j.h==-1}t.l=function(j){return j=z(this,j),O(j)?-1:L(j)?0:1};function k(j){const S=j.g.length,C=[];for(let P=0;P<S;P++)C[P]=~j.g[P];return new d(C,~j.h).add(T)}t.abs=function(){return O(this)?k(this):this},t.add=function(j){const S=Math.max(this.g.length,j.g.length),C=[];let P=0;for(let w=0;w<=S;w++){let A=P+(this.i(w)&65535)+(j.i(w)&65535),D=(A>>>16)+(this.i(w)>>>16)+(j.i(w)>>>16);P=D>>>16,A&=65535,D&=65535,C[w]=D<<16|A}return new d(C,C[C.length-1]&-2147483648?-1:0)};function z(j,S){return j.add(k(S))}t.j=function(j){if(L(this)||L(j))return v;if(O(this))return O(j)?k(this).j(k(j)):k(k(this).j(j));if(O(j))return k(this.j(k(j)));if(this.l(I)<0&&j.l(I)<0)return x(this.m()*j.m());const S=this.g.length+j.g.length,C=[];for(var P=0;P<2*S;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let w=0;w<j.g.length;w++){const A=this.i(P)>>>16,D=this.i(P)&65535,q=j.i(w)>>>16,be=j.i(w)&65535;C[2*P+2*w]+=D*be,U(C,2*P+2*w),C[2*P+2*w+1]+=A*be,U(C,2*P+2*w+1),C[2*P+2*w+1]+=D*q,U(C,2*P+2*w+1),C[2*P+2*w+2]+=A*q,U(C,2*P+2*w+2)}for(j=0;j<S;j++)C[j]=C[2*j+1]<<16|C[2*j];for(j=S;j<2*S;j++)C[j]=0;return new d(C,0)};function U(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function $(j,S){this.g=j,this.h=S}function X(j,S){if(L(S))throw Error("division by zero");if(L(j))return new $(v,v);if(O(j))return S=X(k(j),S),new $(k(S.g),k(S.h));if(O(S))return S=X(j,k(S)),new $(k(S.g),S.h);if(j.g.length>30){if(O(j)||O(S))throw Error("slowDivide_ only works with positive integers.");for(var C=T,P=S;P.l(j)<=0;)C=K(C),P=K(P);var w=re(C,1),A=re(P,1);for(P=re(P,2),C=re(C,2);!L(P);){var D=A.add(P);D.l(j)<=0&&(w=w.add(C),A=D),P=re(P,1),C=re(C,1)}return S=z(j,w.j(S)),new $(w,S)}for(w=v;j.l(S)>=0;){for(C=Math.max(1,Math.floor(j.m()/S.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),A=x(C),D=A.j(S);O(D)||D.l(j)>0;)C-=P,A=x(C),D=A.j(S);L(A)&&(A=T),w=w.add(A),j=z(j,D)}return new $(w,j)}t.B=function(j){return X(this,j).h},t.and=function(j){const S=Math.max(this.g.length,j.g.length),C=[];for(let P=0;P<S;P++)C[P]=this.i(P)&j.i(P);return new d(C,this.h&j.h)},t.or=function(j){const S=Math.max(this.g.length,j.g.length),C=[];for(let P=0;P<S;P++)C[P]=this.i(P)|j.i(P);return new d(C,this.h|j.h)},t.xor=function(j){const S=Math.max(this.g.length,j.g.length),C=[];for(let P=0;P<S;P++)C[P]=this.i(P)^j.i(P);return new d(C,this.h^j.h)};function K(j){const S=j.g.length+1,C=[];for(let P=0;P<S;P++)C[P]=j.i(P)<<1|j.i(P-1)>>>31;return new d(C,j.h)}function re(j,S){const C=S>>5;S%=32;const P=j.g.length-C,w=[];for(let A=0;A<P;A++)w[A]=S>0?j.i(A+C)>>>S|j.i(A+C+1)<<32-S:j.i(A+C);return new d(w,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yT=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=y,ci=d}).apply(typeof i1<"u"?i1:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bT,Vc,vT,Th,Og,_T,ST,NT;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var b=0;b<h.length;++b){var N=h[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(h,b){if(b)e:{var N=r;h=h.split(".");for(var M=0;M<h.length-1;M++){var ee=h[M];if(!(ee in N))break e;N=N[ee]}h=h[h.length-1],M=N[h],b=b(M),b!=M&&b!=null&&e(N,h,{configurable:!0,writable:!0,value:b})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(b){var N=[],M;for(M in b)Object.prototype.hasOwnProperty.call(b,M)&&N.push([M,b[M]]);return N}});var c=c||{},d=this||self;function m(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function p(h,b,N){return h.call.apply(h.bind,arguments)}function x(h,b,N){return x=p,x.apply(null,arguments)}function y(h,b){var N=Array.prototype.slice.call(arguments,1);return function(){var M=N.slice();return M.push.apply(M,arguments),h.apply(this,M)}}function v(h,b){function N(){}N.prototype=b.prototype,h.Z=b.prototype,h.prototype=new N,h.prototype.constructor=h,h.Ob=function(M,ee,ae){for(var ve=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ve[Be-2]=arguments[Be];return b.prototype[ee].apply(M,ve)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const b=h.length;if(b>0){const N=Array(b);for(let M=0;M<b;M++)N[M]=h[M];return N}return[]}function L(h,b){for(let M=1;M<arguments.length;M++){const ee=arguments[M];var N=typeof ee;if(N=N!="object"?N:ee?Array.isArray(ee)?"array":N:"null",N=="array"||N=="object"&&typeof ee.length=="number"){N=h.length||0;const ae=ee.length||0;h.length=N+ae;for(let ve=0;ve<ae;ve++)h[N+ve]=ee[ve]}else h.push(ee)}}class O{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function k(h){d.setTimeout(()=>{throw h},0)}function z(){var h=j;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class U{constructor(){this.h=this.g=null}add(b,N){const M=$.get();M.set(b,N),this.h?this.h.next=M:this.g=M,this.h=M}}var $=new O(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let K,re=!1,j=new U,S=()=>{const h=Promise.resolve(void 0);K=()=>{h.then(C)}};function C(){for(var h;h=z();){try{h.h.call(h.g)}catch(N){k(N)}var b=$;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}re=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const N=()=>{};d.addEventListener("test",N,b),d.removeEventListener("test",N,b)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function q(h,b){w.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}v(q,w),q.prototype.init=function(h,b){const N=this.type=h.type,M=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(N=="mouseover"?b=h.fromElement:N=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),B=0;function ce(h,b,N,M,ee){this.listener=h,this.proxy=null,this.src=b,this.type=N,this.capture=!!M,this.ha=ee,this.key=++B,this.da=this.fa=!1}function le(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function H(h,b,N){for(const M in h)b.call(N,h[M],M,h)}function pe(h,b){for(const N in h)b.call(void 0,h[N],N,h)}function V(h){const b={};for(const N in h)b[N]=h[N];return b}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,b){let N,M;for(let ee=1;ee<arguments.length;ee++){M=arguments[ee];for(N in M)h[N]=M[N];for(let ae=0;ae<Q.length;ae++)N=Q[ae],Object.prototype.hasOwnProperty.call(M,N)&&(h[N]=M[N])}}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,b,N,M,ee){const ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);const ve=ge(h,b,M,ee);return ve>-1?(b=h[ve],N||(b.fa=!1)):(b=new ce(b,this.src,ae,!!M,ee),b.fa=N,h.push(b)),b};function Re(h,b){const N=b.type;if(N in h.g){var M=h.g[N],ee=Array.prototype.indexOf.call(M,b,void 0),ae;(ae=ee>=0)&&Array.prototype.splice.call(M,ee,1),ae&&(le(b),h.g[N].length==0&&(delete h.g[N],h.h--))}}function ge(h,b,N,M){for(let ee=0;ee<h.length;++ee){const ae=h[ee];if(!ae.da&&ae.listener==b&&ae.capture==!!N&&ae.ha==M)return ee}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),J={};function Y(h,b,N,M,ee){if(Array.isArray(b)){for(let ae=0;ae<b.length;ae++)Y(h,b[ae],N,M,ee);return null}return N=wn(N),h&&h[be]?h.J(b,N,m(M)?!!M.capture:!1,ee):xe(h,b,N,!1,M,ee)}function xe(h,b,N,M,ee,ae){if(!b)throw Error("Invalid event type");const ve=m(ee)?!!ee.capture:!!ee;let Be=Kt(h);if(Be||(h[ke]=Be=new ye(h)),N=Be.add(b,N,M,ve,ae),N.proxy)return N;if(M=Le(),N.proxy=M,M.src=h,M.listener=N,h.addEventListener)A||(ee=ve),ee===void 0&&(ee=!1),h.addEventListener(b.toString(),M,ee);else if(h.attachEvent)h.attachEvent(At(b.toString()),M);else if(h.addListener&&h.removeListener)h.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Le(){function h(N){return b.call(h.src,h.listener,N)}const b=hn;return h}function ut(h,b,N,M,ee){if(Array.isArray(b))for(var ae=0;ae<b.length;ae++)ut(h,b[ae],N,M,ee);else M=m(M)?!!M.capture:!!M,N=wn(N),h&&h[be]?(h=h.i,ae=String(b).toString(),ae in h.g&&(b=h.g[ae],N=ge(b,N,M,ee),N>-1&&(le(b[N]),Array.prototype.splice.call(b,N,1),b.length==0&&(delete h.g[ae],h.h--)))):h&&(h=Kt(h))&&(b=h.g[b.toString()],h=-1,b&&(h=ge(b,N,M,ee)),(N=h>-1?b[h]:null)&&dn(N))}function dn(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[be])Re(b.i,h);else{var N=h.type,M=h.proxy;b.removeEventListener?b.removeEventListener(N,M,h.capture):b.detachEvent?b.detachEvent(At(N),M):b.addListener&&b.removeListener&&b.removeListener(M),(N=Kt(b))?(Re(N,h),N.h==0&&(N.src=null,b[ke]=null)):le(h)}}}function At(h){return h in J?J[h]:J[h]="on"+h}function hn(h,b){if(h.da)h=!0;else{b=new q(b,this);const N=h.listener,M=h.ha||h.src;h.fa&&dn(h),h=N.call(M,b)}return h}function Kt(h){return h=h[ke],h instanceof ye?h:null}var As="__closure_events_fn_"+(Math.random()*1e9>>>0);function wn(h){return typeof h=="function"?h:(h[As]||(h[As]=function(b){return h.handleEvent(b)}),h[As])}function Ge(){P.call(this),this.i=new ye(this),this.M=this,this.G=null}v(Ge,P),Ge.prototype[be]=!0,Ge.prototype.removeEventListener=function(h,b,N,M){ut(this,h,b,N,M)};function it(h,b){var N,M=h.G;if(M)for(N=[];M;M=M.G)N.push(M);if(h=h.M,M=b.type||b,typeof b=="string")b=new w(b,h);else if(b instanceof w)b.target=b.target||h;else{var ee=b;b=new w(M,h),fe(b,ee)}ee=!0;let ae,ve;if(N)for(ve=N.length-1;ve>=0;ve--)ae=b.g=N[ve],ee=bn(ae,M,!0,b)&&ee;if(ae=b.g=h,ee=bn(ae,M,!0,b)&&ee,ee=bn(ae,M,!1,b)&&ee,N)for(ve=0;ve<N.length;ve++)ae=b.g=N[ve],ee=bn(ae,M,!1,b)&&ee}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const N=h.g[b];for(let M=0;M<N.length;M++)le(N[M]);delete h.g[b],h.h--}}this.G=null},Ge.prototype.J=function(h,b,N,M){return this.i.add(String(h),b,!1,N,M)},Ge.prototype.K=function(h,b,N,M){return this.i.add(String(h),b,!0,N,M)};function bn(h,b,N,M){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let ee=!0;for(let ae=0;ae<b.length;++ae){const ve=b[ae];if(ve&&!ve.da&&ve.capture==N){const Be=ve.listener,Yt=ve.ha||ve.src;ve.fa&&Re(h.i,ve),ee=Be.call(Yt,M)!==!1&&ee}}return ee&&!M.defaultPrevented}function or(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:d.setTimeout(h,b||0)}function cr(h){h.g=or(()=>{h.g=null,h.i&&(h.i=!1,cr(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class Zt extends P{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:cr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(h){P.call(this),this.h=h,this.g={}}v(hs,P);var zr=[];function es(h){H(h.g,function(b,N){this.g.hasOwnProperty(N)&&dn(b)},h),h.g={}}hs.prototype.N=function(){hs.Z.N.call(this),es(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=d.JSON.stringify,ts=d.JSON.parse,Fr=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function $n(){}function Br(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){w.call(this,"d")}v(zt,w);function fn(){w.call(this,"c")}v(fn,w);var Nt={},Hr=null;function Z(){return Hr=Hr||new Ge}Nt.Ia="serverreachability";function Se(h){w.call(this,Nt.Ia,h)}v(Se,w);function _e(h){const b=Z();it(b,new Se(b))}Nt.STAT_EVENT="statevent";function Te(h,b){w.call(this,Nt.STAT_EVENT,h),this.stat=b}v(Te,w);function Ae(h){const b=Z();it(b,new Te(b,h))}Nt.Ja="timingevent";function Fe(h,b){w.call(this,Nt.Ja,h),this.size=b}v(Fe,w);function Tt(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function mt(){this.g=!0}mt.prototype.ua=function(){this.g=!1};function Ft(h,b,N,M,ee,ae){h.info(function(){if(h.g)if(ae){var ve="",Be=ae.split("&");for(let lt=0;lt<Be.length;lt++){var Yt=Be[lt].split("=");if(Yt.length>1){const Mt=Yt[0];Yt=Yt[1];const ks=Mt.split("_");ve=ks.length>=2&&ks[1]=="type"?ve+(Mt+"="+Yt+"&"):ve+(Mt+"=redacted&")}}}else ve=null;else ve=ae;return"XMLHTTP REQ ("+M+") [attempt "+ee+"]: "+b+`
`+N+`
`+ve})}function Ct(h,b,N,M,ee,ae,ve){h.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+ee+"]: "+b+`
`+N+`
`+ae+" "+ve})}function st(h,b,N,M){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ot(h,N)+(M?" "+M:"")})}function Un(h,b){h.info(function(){return"TIMEOUT: "+b})}mt.prototype.info=function(){};function Ot(h,b){if(!h.g)return b;if(!b)return null;try{const ae=JSON.parse(b);if(ae){for(h=0;h<ae.length;h++)if(Array.isArray(ae[h])){var N=ae[h];if(!(N.length<2)){var M=N[1];if(Array.isArray(M)&&!(M.length<1)){var ee=M[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let ve=1;ve<M.length;ve++)M[ve]=""}}}}return An(ae)}catch{return b}}var Dt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kn;function fs(){}v(fs,$n),fs.prototype.g=function(){return new XMLHttpRequest},Kn=new fs;function Yn(h){return encodeURIComponent(String(h))}function ms(h){var b=1;h=h.split(":");const N=[];for(;b>0&&h.length;)N.push(h.shift()),b--;return h.length&&N.push(h.join(":")),N}function Cn(h,b,N,M){this.j=h,this.i=b,this.l=N,this.S=M||1,this.V=new hs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var en={},_n={};function ur(h,b,N){h.M=1,h.A=Ei(nn(b)),h.u=N,h.R=!0,yl(h,null)}function yl(h,b){h.F=Date.now(),dr(h),h.B=nn(h.A);var N=h.B,M=h.S;Array.isArray(M)||(M=[String(M)]),Sl(N.i,"t",M),h.C=0,N=h.j.L,h.h=new Qn,h.g=Qu(h.j,N?b:null,!h.u),h.P>0&&(h.O=new Zt(x(h.Y,h,h.g),h.P)),b=h.V,N=h.g,M=h.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(zr[0]=ee.toString()),ee=zr);for(let ae=0;ae<ee.length;ae++){const ve=Y(N,ee[ae],M||b.handleEvent,!1,b.h||b);if(!ve)break;b.g[ve.key]=ve}b=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),_e(),Ft(h.i,h.v,h.B,h.l,h.S,h.u)}Cn.prototype.ba=function(h){h=h.target;const b=this.O;b&&Gs(h)==3?b.j():this.Y(h)},Cn.prototype.Y=function(h){try{if(h==this.g)e:{const Be=Gs(this.g),Yt=this.g.ya(),lt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Rn(this.g)))){this.K||Be!=4||Yt==7||(Yt==8||lt<=0?_e(3):_e(2)),hr(this);var b=this.g.ca();this.X=b;var N=Gf(this);if(this.o=b==200,Ct(this.i,this.v,this.B,this.l,this.S,Be,b),this.o){if(this.U&&!this.L){t:{if(this.g){var M,ee=this.g;if((M=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(M)){var ae=M;break t}}ae=null}if(h=ae)st(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fr(this,h);else{this.o=!1,this.m=3,Ae(12),ps(this),Cs(this);break e}}if(this.R){h=!0;let Mt;for(;!this.K&&this.C<N.length;)if(Mt=Ou(this,N),Mt==_n){Be==4&&(this.m=4,Ae(14),h=!1),st(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==en){this.m=4,Ae(15),st(this.i,this.l,N,"[Invalid Chunk]"),h=!1;break}else st(this.i,this.l,Mt,null),fr(this,Mt);if(Pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||N.length!=0||this.h.h||(this.m=1,Ae(16),h=!1),this.o=this.o&&h,!h)st(this.i,this.l,N,"[Invalid Chunked Response]"),ps(this),Cs(this);else if(N.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Qo(ve),ve.P=!0,Ae(11))}}else st(this.i,this.l,N,null),fr(this,N);Be==4&&ps(this),this.o&&!this.K&&(Be==4?$u(this.j,this):(this.o=!1,dr(this)))}else $r(this.g),b==400&&N.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),ps(this),Cs(this)}}}catch{}};function Gf(h){if(!Pu(h))return h.g.la();const b=Rn(h.g);if(b==="")return"";let N="";const M=b.length,ee=Gs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ps(h),Cs(h),"";h.h.i=new d.TextDecoder}for(let ae=0;ae<M;ae++)h.h.h=!0,N+=h.h.i.decode(b[ae],{stream:!(ee&&ae==M-1)});return b.length=0,h.h.g+=N,h.C=0,h.h.g}function Pu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ou(h,b){var N=h.C,M=b.indexOf(`
`,N);return M==-1?_n:(N=Number(b.substring(N,M)),isNaN(N)?en:(M+=1,M+N>b.length?_n:(b=b.slice(M,M+N),h.C=M+N,b)))}Cn.prototype.cancel=function(){this.K=!0,ps(this)};function dr(h){h.T=Date.now()+h.H,bl(h,h.H)}function bl(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Tt(x(h.aa,h),b)}function hr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Cn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Un(this.i,this.B),this.M!=2&&(_e(),Ae(17)),ps(this),this.m=2,Cs(this)):bl(this,this.T-h)};function Cs(h){h.j.I==0||h.K||$u(h.j,h)}function ps(h){hr(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,es(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function fr(h,b){try{var N=h.j;if(N.I!=0&&(N.g==h||pr(N.h,h))){if(!h.L&&pr(N.h,h)&&N.I==3){try{var M=N.Ba.g.parse(b)}catch{M=null}if(Array.isArray(M)&&M.length==3){var ee=M;if(ee[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<h.F)Al(N),Ca(N);else break e;Ii(N),Ae(18)}}else N.xa=ee[1],0<N.xa-N.K&&ee[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Tt(x(N.Va,N),6e3));mr(N.h)<=1&&N.ta&&(N.ta=void 0)}else _r(N,11)}else if((h.L||N.g==h)&&Al(N),!D(b))for(ee=N.Ba.g.parse(b),b=0;b<ee.length;b++){let lt=ee[b];const Mt=lt[0];if(!(Mt<=N.K))if(N.K=Mt,lt=lt[1],N.I==2)if(lt[0]=="c"){N.M=lt[1],N.ba=lt[2];const ks=lt[3];ks!=null&&(N.ka=ks,N.j.info("VER="+N.ka));const Sr=lt[4];Sr!=null&&(N.za=Sr,N.j.info("SVER="+N.za));const Ks=lt[5];Ks!=null&&typeof Ks=="number"&&Ks>0&&(M=1.5*Ks,N.O=M,N.j.info("backChannelRequestTimeoutMs_="+M)),M=N;const Ys=h.g;if(Ys){const Di=Ys.g?Ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var ae=M.h;ae.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Lo(ae,ae.h),ae.h=null))}if(M.G){const Cl=Ys.g?Ys.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&(M.wa=Cl,pt(M.J,M.G,Cl))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-h.F,N.j.info("Handshake RTT: "+N.T+"ms")),M=N;var ve=h;if(M.na=Yu(M,M.L?M.ba:null,M.W),ve.L){Vo(M.h,ve);var Be=ve,Yt=M.O;Yt&&(Be.H=Yt),Be.D&&(hr(Be),dr(Be)),M.g=ve}else Hu(M);N.i.length>0&&vr(N)}else lt[0]!="stop"&&lt[0]!="close"||_r(N,7);else N.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?_r(N,7):Ko(N):lt[0]!="noop"&&N.l&&N.l.qa(lt),N.A=0)}}_e(4)}catch{}}var tn=class{constructor(h,b){this.g=h,this.map=b}};function Po(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function mr(h){return h.h?1:h.g?h.g.size:0}function pr(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function Lo(h,b){h.g?h.g.add(b):h.h=b}function Vo(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Po.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Uo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const N of h.g.values())b=b.concat(N.G);return b}return I(h.i)}var Lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vl(h,b){if(h){h=h.split("&");for(let N=0;N<h.length;N++){const M=h[N].indexOf("=");let ee,ae=null;M>=0?(ee=h[N].substring(0,M),ae=h[N].substring(M+1)):ee=h[N],b(ee,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function gs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof gs?(this.l=h.l,Sn(this,h.j),this.o=h.o,this.g=h.g,_a(this,h.u),this.h=h.h,zo(this,Fu(h.i)),this.m=h.m):h&&(b=String(h).match(Lu))?(this.l=!1,Sn(this,b[1]||"",!0),this.o=gr(b[2]||""),this.g=gr(b[3]||"",!0),_a(this,b[4]),this.h=gr(b[5]||"",!0),zo(this,b[6]||"",!0),this.m=gr(b[7]||"")):(this.l=!1,this.i=new Na(null,this.l))}gs.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(wi(b,_l,!0),":");var N=this.g;return(N||b=="file")&&(h.push("//"),(b=this.o)&&h.push(wi(b,_l,!0),"@"),h.push(Yn(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&h.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&h.push("/"),h.push(wi(N,N.charAt(0)=="/"?Fo:Vu,!0))),(N=this.i.toString())&&h.push("?",N),(N=this.m)&&h.push("#",wi(N,Uu)),h.join("")},gs.prototype.resolve=function(h){const b=nn(this);let N=!!h.j;N?Sn(b,h.j):N=!!h.o,N?b.o=h.o:N=!!h.g,N?b.g=h.g:N=h.u!=null;var M=h.h;if(N)_a(b,h.u);else if(N=!!h.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var ee=b.h.lastIndexOf("/");ee!=-1&&(M=b.h.slice(0,ee+1)+M)}if(ee=M,ee==".."||ee==".")M="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){M=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const ae=[];for(let ve=0;ve<ee.length;){const Be=ee[ve++];Be=="."?M&&ve==ee.length&&ae.push(""):Be==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),M&&ve==ee.length&&ae.push("")):(ae.push(Be),M=!0)}M=ae.join("/")}else M=ee}return N?b.h=M:N=h.i.toString()!=="",N?zo(b,Fu(h.i)):N=!!h.m,N&&(b.m=h.m),b};function nn(h){return new gs(h)}function Sn(h,b,N){h.j=N?gr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function _a(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function zo(h,b,N){b instanceof Na?(h.i=b,Nl(h.i,h.l)):(N||(b=wi(b,Sa)),h.i=new Na(b,h.l))}function pt(h,b,N){h.i.set(b,N)}function Ei(h){return pt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function gr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function wi(h,b,N){return typeof h=="string"?(h=encodeURI(h).replace(b,ns),N&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ns(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var _l=/[#\/\?@]/g,Vu=/[#\?:]/g,Fo=/[#\?]/g,Sa=/[#\?@]/g,Uu=/#/g;function Na(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function ss(h){h.g||(h.g=new Map,h.h=0,h.i&&vl(h.i,function(b,N){h.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}t=Na.prototype,t.add=function(h,b){ss(this),this.i=null,h=Ta(this,h);let N=this.g.get(h);return N||this.g.set(h,N=[]),N.push(b),this.h+=1,this};function zu(h,b){ss(h),b=Ta(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Bo(h,b){return ss(h),b=Ta(h,b),h.g.has(b)}t.forEach=function(h,b){ss(this),this.g.forEach(function(N,M){N.forEach(function(ee){h.call(b,ee,M,this)},this)},this)};function Ho(h,b){ss(h);let N=[];if(typeof b=="string")Bo(h,b)&&(N=N.concat(h.g.get(Ta(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)N=N.concat(h[b]);return N}t.set=function(h,b){return ss(this),this.i=null,h=Ta(this,h),Bo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},t.get=function(h,b){return h?(h=Ho(this,h),h.length>0?String(h[0]):b):b};function Sl(h,b,N){zu(h,b),N.length>0&&(h.i=null,h.g.set(Ta(h,b),I(N)),h.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let M=0;M<b.length;M++){var N=b[M];const ee=Yn(N);N=Ho(this,N);for(let ae=0;ae<N.length;ae++){let ve=ee;N[ae]!==""&&(ve+="="+Yn(N[ae])),h.push(ve)}}return this.i=h.join("&")};function Fu(h){const b=new Na;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function Ta(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function Nl(h,b){b&&!h.j&&(ss(h),h.i=null,h.g.forEach(function(N,M){const ee=M.toLowerCase();M!=ee&&(zu(this,M),Sl(this,ee,N))},h)),h.j=b}function qs(h,b){const N=new mt;if(d.Image){const M=new Image;M.onload=y(Rs,N,"TestLoadImage: loaded",!0,b,M),M.onerror=y(Rs,N,"TestLoadImage: error",!1,b,M),M.onabort=y(Rs,N,"TestLoadImage: abort",!1,b,M),M.ontimeout=y(Rs,N,"TestLoadImage: timeout",!1,b,M),d.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=h}else b(!1)}function qo(h,b){const N=new mt,M=new AbortController,ee=setTimeout(()=>{M.abort(),Rs(N,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:M.signal}).then(ae=>{clearTimeout(ee),ae.ok?Rs(N,"TestPingServer: ok",!0,b):Rs(N,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ee),Rs(N,"TestPingServer: error",!1,b)})}function Rs(h,b,N,M,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),M(N)}catch{}}function Ea(){this.g=new Fr}function xr(h){this.i=h.Sb||null,this.h=h.ab||!1}v(xr,$n),xr.prototype.g=function(){return new Ai(this.i,this.h)};function Ai(h,b){Ge.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ai,Ge),t=Ai.prototype,t.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,$s(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||d).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?wa(this):$s(this),this.readyState==3&&Tl(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,wa(this))},t.Na=function(h){this.g&&(this.response=h,wa(this))},t.ga=function(){this.g&&wa(this)};function wa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,$s(h)}t.setRequestHeader=function(h,b){this.A.append(h,b)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var N=b.next();!N.done;)N=N.value,h.push(N[0]+": "+N[1]),N=b.next();return h.join(`\r
`)};function $s(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function js(h){let b="";return H(h,function(N,M){b+=M,b+=":",b+=N,b+=`\r
`}),b}function Ci(h,b,N){e:{for(M in N){var M=!1;break e}M=!0}M||(N=js(N),typeof h=="string"?N!=null&&Yn(N):pt(h,b,N))}function yt(h){Ge.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(yt,Ge);var yr=/^https?$/i,$o=["POST","PUT"];t=yt.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,b,N,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kn.g(),this.g.onreadystatechange=T(x(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(ae){Ri(this,ae);return}if(h=N||"",N=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var ee in M)N.set(ee,M[ee]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ae of M.keys())N.set(ae,M.get(ae));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(N.keys()).find(ae=>ae.toLowerCase()=="content-type"),ee=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call($o,b,void 0)>=0)||M||ee||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,ve]of N)this.g.setRequestHeader(ae,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ae){Ri(this,ae)}};function Ri(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Go(h),qr(h)}function Go(h){h.A||(h.A=!0,it(h,"complete"),it(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,it(this,"complete"),it(this,"abort"),qr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qr(this,!0)),yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ji(this):this.Xa())},t.Xa=function(){ji(this)};function ji(h){if(h.h&&typeof c<"u"){if(h.v&&Gs(h)==4)setTimeout(h.Ca.bind(h),0);else if(it(h,"readystatechange"),Gs(h)==4){h.h=!1;try{const ae=h.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var N;if(!(N=b)){var M;if(M=ae===0){let ve=String(h.D).match(Lu)[1]||null;!ve&&d.self&&d.self.location&&(ve=d.self.location.protocol.slice(0,-1)),M=!yr.test(ve?ve.toLowerCase():"")}N=M}if(N)it(h,"complete"),it(h,"success");else{h.o=6;try{var ee=Gs(h)>2?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.ca()+"]",Go(h)}}finally{qr(h)}}}}function qr(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const N=h.g;h.g=null,b||it(h,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Gs(h){return h.g?h.g.readyState:0}t.ca=function(){try{return Gs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),ts(b)}};function Rn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $r(h){const b={};h=(h.g&&Gs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<h.length;M++){if(D(h[M]))continue;var N=ms(h[M]);const ee=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ae=b[ee]||[];b[ee]=ae,ae.push(N)}pe(b,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(h,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[h]||b}function Aa(h){this.za=0,this.i=[],this.j=new mt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=br("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=br("baseRetryDelayMs",5e3,h),this.Za=br("retryDelaySeedMs",1e4,h),this.Ta=br("forwardChannelMaxRetries",2,h),this.va=br("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Po(h&&h.concurrentRequestLimit),this.Ba=new Ea,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Aa.prototype,t.ka=8,t.I=1,t.connect=function(h,b,N,M){Ae(0),this.W=h,this.H=b||{},N&&M!==void 0&&(this.H.OSID=N,this.H.OAID=M),this.F=this.X,this.J=Yu(this,null,this.W),vr(this)};function Ko(h){if(El(h),h.I==3){var b=h.V++,N=nn(h.J);if(pt(N,"SID",h.M),pt(N,"RID",b),pt(N,"TYPE","terminate"),ki(h,N),b=new Cn(h,h.j,b),b.M=2,b.A=Ei(nn(N)),N=!1,d.navigator&&d.navigator.sendBeacon)try{N=d.navigator.sendBeacon(b.A.toString(),"")}catch{}!N&&d.Image&&(new Image().src=b.A,N=!0),N||(b.g=Qu(b.j,null),b.g.ea(b.A)),b.F=Date.now(),dr(b)}Ku(h)}function Ca(h){h.g&&(Qo(h),h.g.cancel(),h.g=null)}function El(h){Ca(h),h.v&&(d.clearTimeout(h.v),h.v=null),Al(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function vr(h){if(!Oo(h.h)&&!h.m){h.m=!0;var b=h.Ea;K||S(),re||(K(),re=!0),j.add(b,h),h.D=0}}function wl(h,b){return mr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Tt(x(h.Ea,h,b),Gu(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const ee=new Cn(this,this.j,h);let ae=this.o;if(this.U&&(ae?(ae=V(ae),fe(ae,this.U)):ae=this.U),this.u!==null||this.R||(ee.J=ae,ae=null),this.S)e:{for(var b=0,N=0;N<this.i.length;N++){t:{var M=this.i[N];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(b+=M,b>4096){b=N;break e}if(b===4096||N===this.i.length-1){b=N+1;break e}}b=1e3}else b=1e3;b=Bu(this,ee,b),N=nn(this.J),pt(N,"RID",h),pt(N,"CVER",22),this.G&&pt(N,"X-HTTP-Session-Id",this.G),ki(this,N),ae&&(this.R?b="headers="+Yn(js(ae))+"&"+b:this.u&&Ci(N,this.u,ae)),Lo(this.h,ee),this.Ra&&pt(N,"TYPE","init"),this.S?(pt(N,"$req",b),pt(N,"SID","null"),ee.U=!0,ur(ee,N,null)):ur(ee,N,b),this.I=2}}else this.I==3&&(h?Yo(this,h):this.i.length==0||Oo(this.h)||Yo(this))};function Yo(h,b){var N;b?N=b.l:N=h.V++;const M=nn(h.J);pt(M,"SID",h.M),pt(M,"RID",N),pt(M,"AID",h.K),ki(h,M),h.u&&h.o&&Ci(M,h.u,h.o),N=new Cn(h,h.j,N,h.D+1),h.u===null&&(N.J=h.o),b&&(h.i=b.G.concat(h.i)),b=Bu(h,N,1e3),N.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Lo(h.h,N),ur(N,M,b)}function ki(h,b){h.H&&H(h.H,function(N,M){pt(b,M,N)}),h.l&&H({},function(N,M){pt(b,M,N)})}function Bu(h,b,N){N=Math.min(h.i.length,N);const M=h.l?x(h.l.Ka,h.l,h):null;e:{var ee=h.i;let Be=-1;for(;;){const Yt=["count="+N];Be==-1?N>0?(Be=ee[0].g,Yt.push("ofs="+Be)):Be=0:Yt.push("ofs="+Be);let lt=!0;for(let Mt=0;Mt<N;Mt++){var ae=ee[Mt].g;const ks=ee[Mt].map;if(ae-=Be,ae<0)Be=Math.max(0,ee[Mt].g-100),lt=!1;else try{ae="req"+ae+"_"||"";try{var ve=ks instanceof Map?ks:Object.entries(ks);for(const[Sr,Ks]of ve){let Ys=Ks;m(Ks)&&(Ys=An(Ks)),Yt.push(ae+Sr+"="+encodeURIComponent(Ys))}}catch(Sr){throw Yt.push(ae+"type="+encodeURIComponent("_badmap")),Sr}}catch{M&&M(ks)}}if(lt){ve=Yt.join("&");break e}}ve=void 0}return h=h.i.splice(0,N),b.G=h,ve}function Hu(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;K||S(),re||(K(),re=!0),j.add(b,h),h.A=0}}function Ii(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Tt(x(h.Da,h),Gu(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Tt(x(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),Ca(this),qu(this))};function Qo(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function qu(h){h.g=new Cn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=nn(h.na);pt(b,"RID","rpc"),pt(b,"SID",h.M),pt(b,"AID",h.K),pt(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&pt(b,"TO",h.ia),pt(b,"TYPE","xmlhttp"),ki(h,b),h.u&&h.o&&Ci(b,h.u,h.o),h.O&&(h.g.H=h.O);var N=h.g;h=h.ba,N.M=1,N.A=Ei(nn(b)),N.u=null,N.R=!0,yl(N,h)}t.Va=function(){this.C!=null&&(this.C=null,Ca(this),Ii(this),Ae(19))};function Al(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function $u(h,b){var N=null;if(h.g==b){Al(h),Qo(h),h.g=null;var M=2}else if(pr(h.h,b))N=b.G,Vo(h.h,b),M=1;else return;if(h.I!=0){if(b.o)if(M==1){N=b.u?b.u.length:0,b=Date.now()-b.F;var ee=h.D;M=Z(),it(M,new Fe(M,N)),vr(h)}else Hu(h);else if(ee=b.m,ee==3||ee==0&&b.X>0||!(M==1&&wl(h,b)||M==2&&Ii(h)))switch(N&&N.length>0&&(b=h.h,b.i=b.i.concat(N)),ee){case 1:_r(h,5);break;case 4:_r(h,10);break;case 3:_r(h,6);break;default:_r(h,2)}}}function Gu(h,b){let N=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(N*=2),N*b}function _r(h,b){if(h.j.info("Error code "+b),b==2){var N=x(h.bb,h),M=h.Ua;const ee=!M;M=new gs(M||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Sn(M,"https"),Ei(M),ee?qs(M.toString(),N):qo(M.toString(),N)}else Ae(2);h.I=0,h.l&&h.l.pa(b),Ku(h),El(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Ku(h){if(h.I=0,h.ja=[],h.l){const b=Uo(h.h);(b.length!=0||h.i.length!=0)&&(L(h.ja,b),L(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Yu(h,b,N){var M=N instanceof gs?nn(N):new gs(N);if(M.g!="")b&&(M.g=b+"."+M.g),_a(M,M.u);else{var ee=d.location;M=ee.protocol,b=b?b+"."+ee.hostname:ee.hostname,ee=+ee.port;const ae=new gs(null);M&&Sn(ae,M),b&&(ae.g=b),ee&&_a(ae,ee),N&&(ae.h=N),M=ae}return N=h.G,b=h.wa,N&&b&&pt(M,N,b),pt(M,"VER",h.ka),ki(h,M),M}function Qu(h,b,N){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new yt(new xr({ab:N})):new yt(h.ma),b.Fa(h.L),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}t=Xu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ra(){}Ra.prototype.g=function(h,b){return new Xn(h,b)};function Xn(h,b){Ge.call(this),this.g=new Aa(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!D(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!D(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Gr(this)}v(Xn,Ge),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Ko(this.g)},Xn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var N={};N.__data__=h,h=N}else this.v&&(N={},N.__data__=An(h),h=N);b.i.push(new tn(b.Ya++,h)),b.I==3&&vr(b)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,Xn.Z.N.call(this)};function Wu(h){zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const N in b){h=N;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}v(Wu,zt);function Ju(){fn.call(this),this.status=1}v(Ju,fn);function Gr(h){this.g=h}v(Gr,Xu),Gr.prototype.ra=function(){it(this.g,"a")},Gr.prototype.qa=function(h){it(this.g,new Wu(h))},Gr.prototype.pa=function(h){it(this.g,new Ju)},Gr.prototype.oa=function(){it(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,NT=function(){return new Ra},ST=function(){return Z()},_T=Nt,Og={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,Th=Dt,vn.COMPLETE="complete",vT=vn,Br.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,Vc=Br,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,bT=yt}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");let ko="12.8.0";function WM(t){ko=t}const cl=new Nx("@firebase/firestore");function ro(){return cl.logLevel}function we(t,...e){if(cl.logLevel<=We.DEBUG){const n=e.map(Dx);cl.debug(`Firestore (${ko}): ${t}`,...n)}}function ba(t,...e){if(cl.logLevel<=We.ERROR){const n=e.map(Dx);cl.error(`Firestore (${ko}): ${t}`,...n)}}function xo(t,...e){if(cl.logLevel<=We.WARN){const n=e.map(Dx);cl.warn(`Firestore (${ko}): ${t}`,...n)}}function Dx(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,TT(t,r,n)}function TT(t,e,n){let r=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ba(r),new Error(r)}function ft(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||TT(e,i,r)}function ze(t,e){return t}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ET{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Bn.UNAUTHENTICATED)))}shutdown(){}}class ZM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eP{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let c=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ui,e.enqueueRetryable((()=>i(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},m=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ui)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new ET(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class tP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class nP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new tP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class l1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ft(this.o===void 0,3512);const r=c=>{c.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,we("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const i=c=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>i(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new l1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new l1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Mx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=rP(40);for(let c=0;c<i.length;++c)r.length<20&&i[c]<n&&(r+=e.charAt(i[c]%62))}return r}}function Je(t,e){return t<e?-1:t>e?1:0}function Lg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),c=e.charAt(r);if(i!==c)return cg(i)===cg(c)?Je(i,c):cg(i)?1:-1}return Je(t.length,e.length)}const aP=55296,iP=57343;function cg(t){const e=t.charCodeAt(0);return e>=aP&&e<=iP}function yo(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const o1="__name__";class Cr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const c=Cr.compareSegments(e.get(i),n.get(i));if(c!==0)return c}return Je(e.length,n.length)}static compareSegments(e,n){const r=Cr.isNumericId(e),i=Cr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Cr.extractNumericId(e).compare(Cr.extractNumericId(n)):Lg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ci.fromString(e.substring(4,e.length-2))}}class Rt extends Cr{construct(e,n,r){return new Rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Rt(n)}static emptyPath(){return new Rt([])}}const lP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Cr{construct(e,n,r){return new Ln(e,n,r)}static isValidIdentifier(e){return lP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o1}static keyField(){return new Ln([o1])}static fromServerFormat(e){const n=[];let r="",i=0;const c=()=>{if(r.length===0)throw new Ee(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;i<e.length;){const m=e[i];if(m==="\\"){if(i+1===e.length)throw new Ee(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ee(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else m==="`"?(d=!d,i++):m!=="."||d?(r+=m,i++):(c(),i++)}if(c(),d)throw new Ee(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(n)}static emptyPath(){return new Ln([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(Rt.fromString(e))}static fromName(e){return new De(Rt.fromString(e).popFirst(5))}static empty(){return new De(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Rt(e.slice()))}}function wT(t,e,n){if(!n)throw new Ee(he.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oP(t,e,n,r){if(e===!0&&r===!0)throw new Ee(he.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function c1(t){if(!De.isDocumentKey(t))throw new Ee(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function u1(t){if(De.isDocumentKey(t))throw new Ee(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function AT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function er(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jf(t);throw new Ee(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function un(t,e){const n={typeString:t};return e&&(n.value=e),n}function Cu(t,e){if(!AT(t))throw new Ee(he.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const d=t[r];if(i&&typeof d!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new Ee(he.INVALID_ARGUMENT,n);return!0}const d1=-62135596800,h1=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*h1);return new jt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<d1)throw new Ee(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h1}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-d1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:un("string",jt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new jt(0,0))}static max(){return new Ve(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lu=-1;function cP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new pi(i,De.empty(),e)}function uP(t){return new pi(t.readTime,t.key,lu)}class pi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pi(Ve.min(),De.empty(),lu)}static max(){return new pi(Ve.max(),De.empty(),lu)}}function dP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}const hP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Io(t){if(t.code!==he.FAILED_PRECONDITION||t.message!==hP)throw t;we("LocalStore","Unexpectedly lost primary lease")}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me(((r,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,i)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):me.reject(n)}static resolve(e){return new me(((n,r)=>{n(e)}))}static reject(e){return new me(((n,r)=>{r(e)}))}static waitFor(e){return new me(((n,r)=>{let i=0,c=0,d=!1;e.forEach((m=>{++i,m.next((()=>{++c,d&&c===i&&n()}),(p=>r(p)))})),d=!0,c===i&&n()}))}static or(e){let n=me.resolve(!1);for(const r of e)n=n.next((i=>i?me.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,c)=>{r.push(n.call(this,i,c))})),this.waitFor(r)}static mapArray(e,n){return new me(((r,i)=>{const c=e.length,d=new Array(c);let m=0;for(let p=0;p<c;p++){const x=p;n(e[x]).next((y=>{d[x]=y,++m,m===c&&r(d)}),(y=>i(y)))}}))}static doWhile(e,n){return new me(((r,i)=>{const c=()=>{e()===!0?n().next((()=>{c()}),i):r()};c()}))}}function mP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Do(t){return t.name==="IndexedDbTransactionError"}class kf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kf.ce=-1;const Px=-1;function If(t){return t==null}function tf(t){return t===0&&1/t==-1/0}function pP(t){return typeof t=="number"&&Number.isInteger(t)&&!tf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const CT="";function gP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=f1(e)),e=xP(t.get(n),e);return f1(e)}function xP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const c=t.charAt(i);switch(c){case"\0":n+="";break;case CT:n+="";break;default:n+=c}}return n}function f1(t){return t+CT+""}function m1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ni(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ut{constructor(e,n){this.comparator=e,this.root=n||Pn.EMPTY}insert(e,n){return new Ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,n,r,i,c){this.key=e,this.value=n,this.color=r??Pn.RED,this.left=i??Pn.EMPTY,this.right=c??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,c){return new Pn(e??this.key,n??this.value,r??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const c=r(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,n,r),null):c===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,i,c){return this}insert(e,n,r){return new Pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p1(this.data.getIterator())}getIteratorFrom(e){return new p1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,c=r.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class p1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ts{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new Ts([])}unionWith(e){let n=new yn(Ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ts(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class jT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new jT("Invalid base64 string: "+c):c}})(e);return new Vn(n)}static fromUint8Array(e){const n=(function(i){let c="";for(let d=0;d<i.length;++d)c+=String.fromCharCode(i[d]);return c})(e);return new Vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const yP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(ft(!!t,39018),typeof t=="string"){let e=0;const n=yP.exec(t);if(ft(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(t.seconds),nanos:Wt(t.nanos)}}function Wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xi(t){return typeof t=="string"?Vn.fromBase64String(t):Vn.fromUint8Array(t)}const kT="server_timestamp",IT="__type__",DT="__previous_value__",MT="__local_write_time__";function Ox(t){return(t?.mapValue?.fields||{})[IT]?.stringValue===kT}function Df(t){const e=t.mapValue.fields[DT];return Ox(e)?Df(e):e}function ou(t){const e=gi(t.mapValue.fields[MT].timestampValue);return new jt(e.seconds,e.nanos)}class bP{constructor(e,n,r,i,c,d,m,p,x,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=y,this.apiKey=v}}const nf="(default)";class cu{constructor(e,n){this.projectId=e,this.database=n||nf}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}function vP(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ee(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(t.options.projectId,e)}const PT="__type__",_P="__max__",ch={mapValue:{}},OT="__vector__",sf="value";function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ox(t)?4:NP(t)?9007199254740991:SP(t)?10:11:Pe(28295,{value:t})}function Vr(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ou(t).isEqual(ou(e));case 3:return(function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const d=gi(i.timestampValue),m=gi(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,c){return xi(i.bytesValue).isEqual(xi(c.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,c){return Wt(i.geoPointValue.latitude)===Wt(c.geoPointValue.latitude)&&Wt(i.geoPointValue.longitude)===Wt(c.geoPointValue.longitude)})(t,e);case 2:return(function(i,c){if("integerValue"in i&&"integerValue"in c)return Wt(i.integerValue)===Wt(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const d=Wt(i.doubleValue),m=Wt(c.doubleValue);return d===m?tf(d)===tf(m):isNaN(d)&&isNaN(m)}return!1})(t,e);case 9:return yo(t.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return(function(i,c){const d=i.mapValue.fields||{},m=c.mapValue.fields||{};if(m1(d)!==m1(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Vr(d[p],m[p])))return!1;return!0})(t,e);default:return Pe(52216,{left:t})}}function uu(t,e){return(t.values||[]).find((n=>Vr(n,e)))!==void 0}function bo(t,e){if(t===e)return 0;const n=yi(t),r=yi(e);if(n!==r)return Je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Wt(c.integerValue||c.doubleValue),p=Wt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(t,e);case 3:return g1(t.timestampValue,e.timestampValue);case 4:return g1(ou(t),ou(e));case 5:return Lg(t.stringValue,e.stringValue);case 6:return(function(c,d){const m=xi(c),p=xi(d);return m.compareTo(p)})(t.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),p=d.split("/");for(let x=0;x<m.length&&x<p.length;x++){const y=Je(m[x],p[x]);if(y!==0)return y}return Je(m.length,p.length)})(t.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Je(Wt(c.latitude),Wt(d.latitude));return m!==0?m:Je(Wt(c.longitude),Wt(d.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return x1(t.arrayValue,e.arrayValue);case 10:return(function(c,d){const m=c.fields||{},p=d.fields||{},x=m[sf]?.arrayValue,y=p[sf]?.arrayValue,v=Je(x?.values?.length||0,y?.values?.length||0);return v!==0?v:x1(x,y)})(t.mapValue,e.mapValue);case 11:return(function(c,d){if(c===ch.mapValue&&d===ch.mapValue)return 0;if(c===ch.mapValue)return 1;if(d===ch.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),x=d.fields||{},y=Object.keys(x);p.sort(),y.sort();for(let v=0;v<p.length&&v<y.length;++v){const T=Lg(p[v],y[v]);if(T!==0)return T;const I=bo(m[p[v]],x[y[v]]);if(I!==0)return I}return Je(p.length,y.length)})(t.mapValue,e.mapValue);default:throw Pe(23264,{he:n})}}function g1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=gi(t),r=gi(e),i=Je(n.seconds,r.seconds);return i!==0?i:Je(n.nanos,r.nanos)}function x1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const c=bo(n[i],r[i]);if(c)return c}return Je(n.length,r.length)}function vo(t){return Vg(t)}function Vg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return xi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return De.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const c of n.values||[])i?i=!1:r+=",",r+=Vg(c);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",c=!0;for(const d of r)c?c=!1:i+=",",i+=`${d}:${Vg(n.fields[d])}`;return i+"}"})(t.mapValue):Pe(61005,{value:t})}function Eh(t){switch(yi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Df(t);return e?16+Eh(e):16;case 5:return 2*t.stringValue.length;case 6:return xi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,c)=>i+Eh(c)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Ni(r.fields,((c,d)=>{i+=c.length+Eh(d)})),i})(t.mapValue);default:throw Pe(13486,{value:t})}}function y1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ug(t){return!!t&&"integerValue"in t}function Lx(t){return!!t&&"arrayValue"in t}function b1(t){return!!t&&"nullValue"in t}function v1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wh(t){return!!t&&"mapValue"in t}function SP(t){return(t?.mapValue?.fields||{})[PT]?.stringValue===OT}function Yc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ni(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Yc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yc(t.arrayValue.values[n]);return e}return{...t}}function NP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_P}class ds{constructor(e){this.value=e}static empty(){return new ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(n)}setAll(e){let n=Ln.emptyPath(),r={},i=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,r,i),r={},i=[],n=m.popLast()}d?r[m.lastSegment()]=Yc(d):i.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,i)}delete(e){const n=this.field(e.popLast());wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ni(n,((i,c)=>e[i]=c));for(const i of r)delete e[i]}clone(){return new ds(Yc(this.value))}}function LT(t){const e=[];return Ni(t.fields,((n,r)=>{const i=new Ln([n]);if(wh(r)){const c=LT(r.mapValue).fields;if(c.length===0)e.push(i);else for(const d of c)e.push(i.child(d))}else e.push(i)})),new Ts(e)}class Hn{constructor(e,n,r,i,c,d,m){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Hn(e,0,Ve.min(),Ve.min(),Ve.min(),ds.empty(),0)}static newFoundDocument(e,n,r,i){return new Hn(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new Hn(e,2,n,Ve.min(),Ve.min(),ds.empty(),0)}static newUnknownDocument(e,n){return new Hn(e,3,n,Ve.min(),Ve.min(),ds.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rf{constructor(e,n){this.position=e,this.inclusive=n}}function _1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const c=e[i],d=t.position[i];if(c.field.isKeyField()?r=De.comparator(De.fromName(d.referenceValue),n.key):r=bo(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function S1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vr(t.position[n],e.position[n]))return!1;return!0}class af{constructor(e,n="asc"){this.field=e,this.dir=n}}function TP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class VT{}class cn extends VT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wP(e,n,r):n==="array-contains"?new RP(e,r):n==="in"?new jP(e,r):n==="not-in"?new kP(e,r):n==="array-contains-any"?new IP(e,r):new cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AP(e,r):new CP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bo(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends VT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ir(e,n)}matches(e){return UT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UT(t){return t.op==="and"}function zT(t){return EP(t)&&UT(t)}function EP(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function zg(t){if(t instanceof cn)return t.field.canonicalString()+t.op.toString()+vo(t.value);if(zT(t))return t.filters.map((e=>zg(e))).join(",");{const e=t.filters.map((n=>zg(n))).join(",");return`${t.op}(${e})`}}function FT(t,e){return t instanceof cn?(function(r,i){return i instanceof cn&&r.op===i.op&&r.field.isEqual(i.field)&&Vr(r.value,i.value)})(t,e):t instanceof ir?(function(r,i){return i instanceof ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((c,d,m)=>c&&FT(d,i.filters[m])),!0):!1})(t,e):void Pe(19439)}function BT(t){return t instanceof cn?(function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`})(t):t instanceof ir?(function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"})(t):"Filter"}class wP extends cn{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class AP extends cn{constructor(e,n){super(e,"in",n),this.keys=HT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class CP extends cn{constructor(e,n){super(e,"not-in",n),this.keys=HT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function HT(t,e){return(e.arrayValue?.values||[]).map((n=>De.fromName(n.referenceValue)))}class RP extends cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lx(n)&&uu(n.arrayValue,this.value)}}class jP extends cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uu(this.value.arrayValue,n)}}class kP extends cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uu(this.value.arrayValue,n)}}class IP extends cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lx(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>uu(this.value.arrayValue,r)))}}class DP{constructor(e,n=null,r=[],i=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function N1(t,e=null,n=[],r=[],i=null,c=null,d=null){return new DP(t,e,n,r,i,c,d)}function Vx(t){const e=ze(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>zg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),If(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>vo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>vo(r))).join(",")),e.Te=n}return e.Te}function Ux(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S1(t.startAt,e.startAt)&&S1(t.endAt,e.endAt)}function Fg(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ru{constructor(e,n=null,r=[],i=[],c=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function MP(t,e,n,r,i,c,d,m){return new Ru(t,e,n,r,i,c,d,m)}function zx(t){return new Ru(t)}function T1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PP(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function qT(t){return t.collectionGroup!==null}function Qc(t){const e=ze(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new yn(Ln.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(m=m.add(x.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new af(c,r))})),n.has(Ln.keyField().canonicalString())||e.Ie.push(new af(Ln.keyField(),r))}return e.Ie}function Pr(t){const e=ze(t);return e.Ee||(e.Ee=OP(e,Qc(t))),e.Ee}function OP(t,e){if(t.limitType==="F")return N1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const c=i.dir==="desc"?"asc":"desc";return new af(i.field,c)}));const n=t.endAt?new rf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rf(t.startAt.position,t.startAt.inclusive):null;return N1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bg(t,e){const n=t.filters.concat([e]);return new Ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hg(t,e,n){return new Ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mf(t,e){return Ux(Pr(t),Pr(e))&&t.limitType===e.limitType}function $T(t){return`${Vx(Pr(t))}|lt:${t.limitType}`}function ao(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>BT(i))).join(", ")}]`),If(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>vo(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>vo(i))).join(",")),`Target(${r})`})(Pr(t))}; limitType=${t.limitType})`}function Pf(t,e){return e.isFoundDocument()&&(function(r,i){const c=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):De.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(t,e)&&(function(r,i){for(const c of Qc(r))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const c of r.filters)if(!c.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(d,m,p){const x=_1(d,m,p);return d.inclusive?x<=0:x<0})(r.startAt,Qc(r),i)||r.endAt&&!(function(d,m,p){const x=_1(d,m,p);return d.inclusive?x>=0:x>0})(r.endAt,Qc(r),i))})(t,e)}function LP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GT(t){return(e,n)=>{let r=!1;for(const i of Qc(t)){const c=VP(i,e,n);if(c!==0)return c;r=r||i.field.isKeyField()}return 0}}function VP(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):(function(c,d,m){const p=d.data.field(c),x=m.data.field(c);return p!==null&&x!==null?bo(p,x):Pe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:t.dir})}}class pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,c]of r)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,((n,r)=>{for(const[i,c]of r)e(i,c)}))}isEmpty(){return RT(this.inner)}size(){return this.innerSize}}const UP=new Ut(De.comparator);function va(){return UP}const KT=new Ut(De.comparator);function Uc(...t){let e=KT;for(const n of t)e=e.insert(n.key,n);return e}function YT(t){let e=KT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function el(){return Xc()}function QT(){return Xc()}function Xc(){return new pl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const zP=new Ut(De.comparator),FP=new yn(De.comparator);function Ze(...t){let e=FP;for(const n of t)e=e.add(n);return e}const BP=new yn(Je);function HP(){return BP}function Fx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tf(e)?"-0":e}}function XT(t){return{integerValue:""+t}}function qP(t,e){return pP(e)?XT(e):Fx(t,e)}class Of{constructor(){this._=void 0}}function $P(t,e,n){return t instanceof lf?(function(i,c){const d={fields:{[IT]:{stringValue:kT},[MT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Ox(c)&&(c=Df(c)),c&&(d.fields[DT]=c),{mapValue:d}})(n,e):t instanceof du?JT(t,e):t instanceof hu?ZT(t,e):(function(i,c){const d=WT(i,c),m=E1(d)+E1(i.Ae);return Ug(d)&&Ug(i.Ae)?XT(m):Fx(i.serializer,m)})(t,e)}function GP(t,e,n){return t instanceof du?JT(t,e):t instanceof hu?ZT(t,e):n}function WT(t,e){return t instanceof of?(function(r){return Ug(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class lf extends Of{}class du extends Of{constructor(e){super(),this.elements=e}}function JT(t,e){const n=eE(e);for(const r of t.elements)n.some((i=>Vr(i,r)))||n.push(r);return{arrayValue:{values:n}}}class hu extends Of{constructor(e){super(),this.elements=e}}function ZT(t,e){let n=eE(e);for(const r of t.elements)n=n.filter((i=>!Vr(i,r)));return{arrayValue:{values:n}}}class of extends Of{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function E1(t){return Wt(t.integerValue||t.doubleValue)}function eE(t){return Lx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KP(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof du&&i instanceof du||r instanceof hu&&i instanceof hu?yo(r.elements,i.elements,Vr):r instanceof of&&i instanceof of?Vr(r.Ae,i.Ae):r instanceof lf&&i instanceof lf})(t.transform,e.transform)}class YP{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lf{}function tE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bx(t.key,tr.none()):new ju(t.key,t.data,tr.none());{const n=t.data,r=ds.empty();let i=new yn(Ln.comparator);for(let c of e.fields)if(!i.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),i=i.add(c)}return new Ti(t.key,r,new Ts(i.toArray()),tr.none())}}function QP(t,e,n){t instanceof ju?(function(i,c,d){const m=i.value.clone(),p=A1(i.fieldTransforms,c,d.transformResults);m.setAll(p),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(t,e,n):t instanceof Ti?(function(i,c,d){if(!Ah(i.precondition,c))return void c.convertToUnknownDocument(d.version);const m=A1(i.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(nE(i)),p.setAll(m),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(t,e,n):(function(i,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Wc(t,e,n,r){return t instanceof ju?(function(c,d,m,p){if(!Ah(c.precondition,d))return m;const x=c.value.clone(),y=C1(c.fieldTransforms,p,d);return x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ti?(function(c,d,m,p){if(!Ah(c.precondition,d))return m;const x=C1(c.fieldTransforms,p,d),y=d.data;return y.setAll(nE(c)),y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(t,e,n,r):(function(c,d,m){return Ah(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(t,e,n)}function XP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),c=WT(r.transform,i||null);c!=null&&(n===null&&(n=ds.empty()),n.set(r.field,c))}return n||null}function w1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yo(r,i,((c,d)=>KP(c,d)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ju extends Lf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ti extends Lf{constructor(e,n,r,i,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function nE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function A1(t,e,n){const r=new Map;ft(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const c=t[i],d=c.transform,m=e.data.field(c.field);r.set(c.field,GP(d,m,n[i]))}return r}function C1(t,e,n){const r=new Map;for(const i of t){const c=i.transform,d=n.data.field(i.field);r.set(i.field,$P(c,d,e))}return r}class Bx extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WP extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&QP(c,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QT();return this.mutations.forEach((i=>{const c=e.get(i.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(i.key)?null:m;const p=tE(d,m);p!==null&&r.set(i.key,p),d.isValidDocument()||d.convertToNoDocument(Ve.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((n,r)=>w1(n,r)))&&yo(this.baseMutations,e.baseMutations,((n,r)=>w1(n,r)))}}class Hx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return zP})();const c=e.mutations;for(let d=0;d<c.length;d++)i=i.insert(c[d].key,r[d].version);return new Hx(e,n,r,i)}}class ZP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class eO{constructor(e,n){this.count=e,this.unchangedNames=n}}var on,tt;function tO(t){switch(t){case he.OK:return Pe(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function sE(t){if(t===void 0)return ba("GRPC error has no .code"),he.UNKNOWN;switch(t){case on.OK:return he.OK;case on.CANCELLED:return he.CANCELLED;case on.UNKNOWN:return he.UNKNOWN;case on.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case on.INTERNAL:return he.INTERNAL;case on.UNAVAILABLE:return he.UNAVAILABLE;case on.UNAUTHENTICATED:return he.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case on.NOT_FOUND:return he.NOT_FOUND;case on.ALREADY_EXISTS:return he.ALREADY_EXISTS;case on.PERMISSION_DENIED:return he.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case on.ABORTED:return he.ABORTED;case on.OUT_OF_RANGE:return he.OUT_OF_RANGE;case on.UNIMPLEMENTED:return he.UNIMPLEMENTED;case on.DATA_LOSS:return he.DATA_LOSS;default:return Pe(39323,{code:t})}}(tt=on||(on={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";function nO(){return new TextEncoder}const sO=new ci([4294967295,4294967295],0);function R1(t){const e=nO().encode(t),n=new yT;return n.update(e),new Uint8Array(n.digest())}function j1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ci([n,r],0),new ci([i,c],0)]}class qx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zc(`Invalid padding: ${n}`);if(r<0)throw new zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ci.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ci.fromNumber(r)));return i.compare(sO)===1&&(i=new ci([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=R1(e),[r,i]=j1(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,i,c);if(!this.we(d))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new qx(c,i,n);return r.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=R1(e),[r,i]=j1(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,i,c);this.be(d)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vf{constructor(e,n,r,i,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vf(Ve.min(),i,new Ut(Je),va(),Ze())}}class ku{constructor(e,n,r,i,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ku(r,n,Ze(),Ze(),Ze())}}class Ch{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class rE{constructor(e,n){this.targetId=e,this.Ce=n}}class aE{constructor(e,n,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class k1{constructor(){this.ve=0,this.Fe=I1(),this.Me=Vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),r=Ze();return this.Fe.forEach(((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:c})}})),new ku(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=I1()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class rO{constructor(e){this.Ge=e,this.ze=new Map,this.je=va(),this.He=uh(),this.Je=uh(),this.Ze=new Ut(Je)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const c=i.target;if(Fg(c))if(r===0){const d=new De(c.path);this.et(n,d,Hn.newNoDocument(d,Ve.min()))}else ft(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(n);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:c=0}=n;let d,m;try{d=xi(r).toUint8Array()}catch(p){if(p instanceof jT)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new qx(d,i,c)}catch(p){return xo(p instanceof zc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Fg(m.target)){const p=new De(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Hn.newNoDocument(p,e))}c.Be&&(n.set(d,c.ke()),c.Ke())}}));let r=Ze();this.Je.forEach(((c,d)=>{let m=!0;d.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const i=new Vf(e,n,this.Ze,this.je,r);return this.je=va(),this.He=uh(),this.Je=uh(),this.Ze=new Ut(Je),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new k1,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new yn(Je),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new yn(Je),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new k1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function uh(){return new Ut(De.comparator)}function I1(){return new Ut(De.comparator)}const aO={asc:"ASCENDING",desc:"DESCENDING"},iO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lO={and:"AND",or:"OR"};class oO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qg(t,e){return t.useProto3Json||If(e)?e:{value:e}}function cf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cO(t,e){return cf(t,e.toTimestamp())}function Or(t){return ft(!!t,49232),Ve.fromTimestamp((function(n){const r=gi(n);return new jt(r.seconds,r.nanos)})(t))}function $x(t,e){return $g(t,e).canonicalString()}function $g(t,e){const n=(function(i){return new Rt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function lE(t){const e=Rt.fromString(t);return ft(hE(e),10190,{key:e.toString()}),e}function Gg(t,e){return $x(t.databaseId,e.path)}function ug(t,e){const n=lE(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(cE(n))}function oE(t,e){return $x(t.databaseId,e)}function uO(t){const e=lE(t);return e.length===4?Rt.emptyPath():cE(e)}function Kg(t){return new Rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cE(t){return ft(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function D1(t,e,n){return{name:Gg(t,e),fields:n.value.mapValue.fields}}function dO(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Pe(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=(function(x,y){return x.useProto3Json?(ft(y===void 0||typeof y=="string",58123),Vn.fromBase64String(y||"")):(ft(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Vn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(x){const y=x.code===void 0?he.UNKNOWN:sE(x.code);return new Ee(y,x.message||"")})(d);n=new aE(r,i,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ug(t,r.document.name),c=Or(r.document.updateTime),d=r.document.createTime?Or(r.document.createTime):Ve.min(),m=new ds({mapValue:{fields:r.document.fields}}),p=Hn.newFoundDocument(i,c,d,m),x=r.targetIds||[],y=r.removedTargetIds||[];n=new Ch(x,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ug(t,r.document),c=r.readTime?Or(r.readTime):Ve.min(),d=Hn.newNoDocument(i,c),m=r.removedTargetIds||[];n=new Ch([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ug(t,r.document),c=r.removedTargetIds||[];n=new Ch([],c,i,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:c}=r,d=new eO(i,c),m=r.targetId;n=new rE(m,d)}}return n}function hO(t,e){let n;if(e instanceof ju)n={update:D1(t,e.key,e.value)};else if(e instanceof Bx)n={delete:Gg(t,e.key)};else if(e instanceof Ti)n={update:D1(t,e.key,e.data),updateMask:_O(e.fieldMask)};else{if(!(e instanceof WP))return Pe(16599,{dt:e.type});n={verify:Gg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const m=d.transform;if(m instanceof lf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof du)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof hu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof of)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Pe(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,c){return c.updateTime!==void 0?{updateTime:cO(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pe(27497)})(t,e.precondition)),n}function fO(t,e){return t&&t.length>0?(ft(e!==void 0,14353),t.map((n=>(function(i,c){let d=i.updateTime?Or(i.updateTime):Or(c);return d.isEqual(Ve.min())&&(d=Or(c)),new YP(d,i.transformResults||[])})(n,e)))):[]}function mO(t,e){return{documents:[oE(t,e.path)]}}function pO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oE(t,i);const c=(function(x){if(x.length!==0)return dE(ir.create(x,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((y=>(function(T){return{field:io(T.field),direction:yO(T.dir)}})(y)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=qg(t,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:i}}function gO(t){let e=uO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ft(r===1,65062);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let c=[];n.where&&(c=(function(v){const T=uE(v);return T instanceof ir&&zT(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(v){return v.map((T=>(function(L){return new af(lo(L.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(n.orderBy));let m=null;n.limit&&(m=(function(v){let T;return T=typeof v=="object"?v.value:v,If(T)?null:T})(n.limit));let p=null;n.startAt&&(p=(function(v){const T=!!v.before,I=v.values||[];return new rf(I,T)})(n.startAt));let x=null;return n.endAt&&(x=(function(v){const T=!v.before,I=v.values||[];return new rf(I,T)})(n.endAt)),MP(e,i,d,c,m,"F",p,x)}function xO(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lo(n.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=lo(n.unaryFilter.field);return cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=lo(n.unaryFilter.field);return cn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=lo(n.unaryFilter.field);return cn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return cn.create(lo(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ir.create(n.compositeFilter.filters.map((r=>uE(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(n.compositeFilter.op))})(t):Pe(30097,{filter:t})}function yO(t){return aO[t]}function bO(t){return iO[t]}function vO(t){return lO[t]}function io(t){return{fieldPath:t.canonicalString()}}function lo(t){return Ln.fromServerFormat(t.fieldPath)}function dE(t){return t instanceof cn?(function(n){if(n.op==="=="){if(v1(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NAN"}};if(b1(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v1(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NAN"}};if(b1(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(n.field),op:bO(n.op),value:n.value}}})(t):t instanceof ir?(function(n){const r=n.getFilters().map((i=>dE(i)));return r.length===1?r[0]:{compositeFilter:{op:vO(n.op),filters:r}}})(t):Pe(54877,{filter:t})}function _O(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function hE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function fE(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class ai{constructor(e,n,r,i,c=Ve.min(),d=Ve.min(),m=Vn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class SO{constructor(e){this.yt=e}}function NO(t){const e=gO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hg(e,e.limit,"L"):e}class TO{constructor(){this.Sn=new EO}addToCollectionParentIndex(e,n){return this.Sn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve(pi.min())}updateCollectionGroup(e,n,r){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class EO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yn(Rt.comparator),c=!i.has(r);return this.index[n]=i.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yn(Rt.comparator)).toArray()}}const M1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mE=41943040;class us{static withCacheSize(e){return new us(e,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(mE,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);class _o{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _o(0)}static ar(){return new _o(-1)}}const P1="LruGarbageCollector",wO=1048576;function O1([t,e],[n,r]){const i=Je(t,n);return i===0?Je(e,r):i}class AO{constructor(e){this.Pr=e,this.buffer=new yn(O1),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();O1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){we(P1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Do(n)?we(P1,"Ignoring IndexedDB error during garbage collection: ",n):await Io(n)}await this.Ar(3e5)}))}}class RO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return me.resolve(kf.ce);const r=new AO(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(M1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M1):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,c,d,m,p,x;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,d=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,m=Date.now(),this.removeTargets(e,r,n)))).next((v=>(c=v,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(x=Date.now(),ro()<=We.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-y}ms
	Determined least recently used ${i} in `+(m-d)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${v} documents in `+(x-p)+`ms
Total Duration: ${x-y}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:v}))))}}function jO(t,e){return new RO(t,e)}class kO{constructor(){this.changes=new pl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?me.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class DO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Wc(r.mutation,i,Ts.empty(),jt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ze()){const i=el();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((c=>{let d=Uc();return c.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=el();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ze())))}populateOverlays(e,n,r){const i=[];return r.forEach((c=>{n.has(c)||i.push(c)})),this.documentOverlayCache.getOverlays(e,i).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,r,i){let c=va();const d=Xc(),m=(function(){return Xc()})();return n.forEach(((p,x)=>{const y=r.get(x.key);i.has(x.key)&&(y===void 0||y.mutation instanceof Ti)?c=c.insert(x.key,x):y!==void 0?(d.set(x.key,y.mutation.getFieldMask()),Wc(y.mutation,x,y.mutation.getFieldMask(),jt.now())):d.set(x.key,Ts.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((x,y)=>d.set(x,y))),n.forEach(((x,y)=>m.set(x,new IO(y,d.get(x)??null)))),m)))}recalculateAndSaveOverlays(e,n){const r=Xc();let i=new Ut(((d,m)=>d-m)),c=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((p=>{const x=n.get(p);if(x===null)return;let y=r.get(p)||Ts.empty();y=m.applyToLocalView(x,y),r.set(p,y);const v=(i.get(m.batchId)||Ze()).add(p);i=i.insert(m.batchId,v)}))})).next((()=>{const d=[],m=i.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),x=p.key,y=p.value,v=QT();y.forEach((T=>{if(!c.has(T)){const I=tE(n.get(T),r.get(T));I!==null&&v.set(T,I),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,v))}return me.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return PP(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((c=>{const d=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-c.size):me.resolve(el());let m=lu,p=c;return d.next((x=>me.forEach(x,((y,v)=>(m<v.largestBatchId&&(m=v.largestBatchId),c.get(y)?me.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{p=p.insert(y,T)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,p,x,Ze()))).next((y=>({batchId:m,changes:YT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((r=>{let i=Uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const c=n.collectionGroup;let d=Uc();return this.indexManager.getCollectionParents(e,c).next((m=>me.forEach(m,(p=>{const x=(function(v,T){return new Ru(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,r,i).next((y=>{y.forEach(((v,T)=>{d=d.insert(v,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,i)))).next((d=>{c.forEach(((p,x)=>{const y=x.getKey();d.get(y)===null&&(d=d.insert(y,Hn.newInvalidDocument(y)))}));let m=Uc();return d.forEach(((p,x)=>{const y=c.get(p);y!==void 0&&Wc(y.mutation,x,Ts.empty(),jt.now()),Pf(n,x)&&(m=m.insert(p,x))})),m}))}}class MO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return me.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Or(i.createTime)}})(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:NO(i.bundledQuery),readTime:Or(i.readTime)}})(n)),me.resolve()}}class PO{constructor(){this.overlays=new Ut(De.comparator),this.Lr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const r=el();return me.forEach(n,(i=>this.getOverlay(e,i).next((c=>{c!==null&&r.set(i,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,c)=>{this.bt(e,n,c)})),me.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),me.resolve()}getOverlaysForCollection(e,n,r){const i=el(),c=n.length+1,d=new De(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,x=p.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===c&&p.largestBatchId>r&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let c=new Ut(((x,y)=>x-y));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>r){let y=c.get(x.largestBatchId);y===null&&(y=el(),c=c.insert(x.largestBatchId,y)),y.set(x.getKey(),x)}}const m=el(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,y)=>m.set(x,y))),!(m.size()>=i)););return me.resolve(m)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const d=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new ZP(n,r));let c=this.Lr.get(n);c===void 0&&(c=Ze(),this.Lr.set(n,c)),this.Lr.set(n,c.add(r.key))}}class OO{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}class Gx{constructor(){this.kr=new yn(Tn.Kr),this.qr=new yn(Tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Tn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Tn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new De(new Rt([])),r=new Tn(n,e),i=new Tn(n,e+1),c=[];return this.qr.forEachInRange([r,i],(d=>{this.Wr(d),c.push(d.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new De(new Rt([])),r=new Tn(n,e),i=new Tn(n,e+1);let c=Ze();return this.qr.forEachInRange([r,i],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Tn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return De.comparator(e.key,n.key)||Je(e.Hr,n.Hr)}static Ur(e,n){return Je(e.Hr,n.Hr)||De.comparator(e.key,n.key)}}class LO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new yn(Tn.Kr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new JP(c,n,r,i);this.mutationQueue.push(d);for(const m of i)this.Jr=this.Jr.add(new Tn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return me.resolve(d)}lookupMutationBatch(e,n){return me.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),c=i<0?0:i;return me.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Px:this.Yn-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tn(n,0),i=new Tn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,i],(d=>{const m=this.Zr(d.Hr);c.push(m)})),me.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yn(Je);return n.forEach((i=>{const c=new Tn(i,0),d=new Tn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,d],(m=>{r=r.add(m.Hr)}))})),me.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let c=r;De.isDocumentKey(c)||(c=c.child(""));const d=new Tn(new De(c),0);let m=new yn(Je);return this.Jr.forEachWhile((p=>{const x=p.key.path;return!!r.isPrefixOf(x)&&(x.length===i&&(m=m.add(p.Hr)),!0)}),d),me.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ft(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return me.forEach(n.mutations,(i=>{const c=new Tn(i.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Tn(n,0),i=this.Jr.firstAfterOrEqual(r);return me.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class VO{constructor(e){this.ti=e,this.docs=(function(){return new Ut(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),c=i?i.size:0,d=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return me.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(n))}getEntries(e,n){let r=va();return n.forEach((i=>{const c=this.docs.get(i);r=r.insert(i,c?c.document.mutableCopy():Hn.newInvalidDocument(i))})),me.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let c=va();const d=n.path,m=new De(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:x,value:{document:y}}=p.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||dP(uP(y),r)<=0||(i.has(y.key)||Pf(n,y))&&(c=c.insert(y.key,y.mutableCopy()))}return me.resolve(c)}getAllFromCollectionGroup(e,n,r,i){Pe(9500)}ni(e,n){return me.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new UO(this)}getSize(e){return me.resolve(this.size)}}class UO extends kO{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),me.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class zO{constructor(e){this.persistence=e,this.ri=new pl((n=>Vx(n)),Ux),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.ii=0,this.si=new Gx,this.targetCount=0,this.oi=_o._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),me.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new _o(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.lr(n),me.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,r){let i=0;const c=[];return this.ri.forEach(((d,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.ri.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)})),me.waitFor(c).next((()=>i))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return me.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),me.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,c=[];return i&&n.forEach((d=>{c.push(i.markPotentiallyOrphaned(e,d))})),me.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return me.resolve(r)}containsKey(e,n){return me.resolve(this.si.containsKey(n))}}class pE{constructor(e,n){this._i={},this.overlays={},this.ai=new kf(0),this.ui=!1,this.ui=!0,this.ci=new OO,this.referenceDelegate=e(this),this.li=new zO(this),this.indexManager=new TO,this.remoteDocumentCache=(function(i){return new VO(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new SO(n),this.Pi=new MO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new LO(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const i=new FO(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((c=>this.referenceDelegate.Ii(i).next((()=>c)))).toPromise().then((c=>(i.raiseOnCommittedEvent(),c)))}Ei(e,n){return me.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class FO extends fP{constructor(e){super(),this.currentSequenceNumber=e}}class Kx{constructor(e){this.persistence=e,this.Ri=new Gx,this.Ai=null}static Vi(e){return new Kx(e)}get di(){if(this.Ai)return this.Ai;throw Pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),me.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.di,(r=>{const i=De.fromPath(r);return this.mi(e,i).next((c=>{c||n.removeEntry(i,Ve.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class uf{constructor(e,n){this.persistence=e,this.fi=new pl((r=>gP(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=jO(this,n)}static Vi(e,n){return new uf(e,n)}Ti(){}Ii(e){return me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return me.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((c=>c?me.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ni(e,(d=>this.wr(e,d,n).next((m=>{m||(r++,c.removeEntry(d,Ve.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),me.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Eh(e.data.value)),n}wr(e,n,r){return me.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return me.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Yx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=Ze(),i=Ze();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new Yx(e,n.fromCache,r,i)}}class BO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class HO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return k4()?8:mP(qn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const c={result:null};return this.gs(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ps(e,n,i,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new BO;return this.ys(e,n,d).next((m=>{if(c.result=m,this.As)return this.ws(e,n,d,m.size)}))})).next((()=>c.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(ro()<=We.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),me.resolve()):(ro()<=We.DEBUG&&we("QueryEngine","Query:",ao(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(ro()<=We.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(n))):me.resolve())}gs(e,n){if(T1(n))return me.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Hg(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Ze(...c);return this.fs.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const x=this.bs(n,m);return this.Ss(n,x,d,p.readTime)?this.gs(e,Hg(n,null,"F")):this.Ds(e,x,n,p)}))))})))))}ps(e,n,r,i){return T1(n)||i.isEqual(Ve.min())?me.resolve(null):this.fs.getDocuments(e,r).next((c=>{const d=this.bs(n,c);return this.Ss(n,d,r,i)?me.resolve(null):(ro()<=We.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ao(n)),this.Ds(e,d,n,cP(i,lu)).next((m=>m)))}))}bs(e,n){let r=new yn(GT(e));return n.forEach(((i,c)=>{Pf(e,c)&&(r=r.add(c))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}ys(e,n,r){return ro()<=We.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",ao(n)),this.fs.getDocumentsMatchingQuery(e,n,pi.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const Qx="LocalStore",qO=3e8;class $O{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Ut(Je),this.Fs=new pl((c=>Vx(c)),Ux),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DO(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function GO(t,e,n,r){return new $O(t,e,n,r)}async function gE(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((c=>(i=c,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],m=[];let p=Ze();for(const x of i){d.push(x.batchId);for(const y of x.mutations)p=p.add(y.key)}for(const x of c){m.push(x.batchId);for(const y of x.mutations)p=p.add(y.key)}return n.localDocuments.getDocuments(r,p).next((x=>({Ns:x,removedBatchIds:d,addedBatchIds:m})))}))}))}function KO(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,x,y){const v=x.batch,T=v.keys();let I=me.resolve();return T.forEach((L=>{I=I.next((()=>y.getEntry(p,L))).next((O=>{const k=x.docVersions.get(L);ft(k!==null,48541),O.version.compareTo(k)<0&&(v.applyToRemoteDocument(O,x),O.isValidDocument()&&(O.setReadTime(x.commitVersion),y.addEntry(O)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(p,v)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Ze();for(let x=0;x<m.mutationResults.length;++x)m.mutationResults[x].transformResults.length>0&&(p=p.add(m.batch.mutations[x].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function xE(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function YO(t,e){const n=ze(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const m=[];e.targetChanges.forEach(((y,v)=>{const T=i.get(v);if(!T)return;m.push(n.li.removeMatchingKeys(c,y.removedDocuments,v).next((()=>n.li.addMatchingKeys(c,y.addedDocuments,v))));let I=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(Vn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,r)),i=i.insert(v,I),(function(O,k,z){return O.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=qO?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,I,y)&&m.push(n.li.updateTargetData(c,I))}));let p=va(),x=Ze();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,y))})),m.push(QO(c,d,e.documentUpdates).next((y=>{p=y.Bs,x=y.Ls}))),!r.isEqual(Ve.min())){const y=n.li.getLastRemoteSnapshotVersion(c).next((v=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));m.push(y)}return me.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,x))).next((()=>p))})).then((c=>(n.vs=i,c)))}function QO(t,e,n){let r=Ze(),i=Ze();return n.forEach((c=>r=r.add(c))),e.getEntries(t,r).next((c=>{let d=va();return n.forEach(((m,p)=>{const x=c.get(m);p.isFoundDocument()!==x.isFoundDocument()&&(i=i.add(m)),p.isNoDocument()&&p.version.isEqual(Ve.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):we(Qx,"Ignoring outdated watch update for ",m,". Current version:",x.version," Watch version:",p.version)})),{Bs:d,Ls:i}}))}function XO(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Px),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function WO(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((c=>c?(i=c,me.resolve(i)):n.li.allocateTargetId(r).next((d=>(i=new ai(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Yg(t,e,n){const r=ze(t),i=r.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Do(d))throw d;we(Qx,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function L1(t,e,n){const r=ze(t);let i=Ve.min(),c=Ze();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,x,y){const v=ze(p),T=v.Fs.get(y);return T!==void 0?me.resolve(v.vs.get(T)):v.li.getTargetData(x,y)})(r,d,Pr(e)).next((m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,m.targetId).next((p=>{c=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,n?i:Ve.min(),n?c:Ze()))).next((m=>(JO(r,LP(e),m),{documents:m,ks:c})))))}function JO(t,e,n){let r=t.Ms.get(e)||Ve.min();n.forEach(((i,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),t.Ms.set(e,r)}class V1{constructor(){this.activeTargetIds=HP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZO{constructor(){this.vo=new V1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new V1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class e6{Mo(e){}shutdown(){}}const U1="ConnectivityMonitor";class z1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){we(U1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){we(U1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let dh=null;function Qg(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}const dg="RestConnection",t6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class n6{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===nf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,c){const d=Qg(),m=this.Qo(e,n.toUriEncodedString());we(dg,`Sending RPC '${e}' ${d}:`,m,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,i,c);const{host:x}=new URL(m),y=Si(x);return this.zo(e,m,p,r,y).then((v=>(we(dg,`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw xo(dg,`RPC '${e}' ${d} failed with error: `,v,"url: ",m,"request:",r),v}))}jo(e,n,r,i,c,d){return this.Wo(e,n,r,i,c)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ko})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,c)=>e[c]=i)),r&&r.headers.forEach(((i,c)=>e[c]=i))}Qo(e,n){const r=t6[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class s6{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Fn="WebChannelConnection",Pc=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class mo extends n6{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!mo.c_){const e=ST();Pc(e,_T.STAT_EVENT,(n=>{n.stat===Og.PROXY?we(Fn,"STAT_EVENT: detected buffering proxy"):n.stat===Og.NOPROXY&&we(Fn,"STAT_EVENT: detected no buffering proxy")})),mo.c_=!0}}zo(e,n,r,i,c){const d=Qg();return new Promise(((m,p)=>{const x=new bT;x.setWithCredentials(!0),x.listenOnce(vT.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case Th.NO_ERROR:const v=x.getResponseJson();we(Fn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(v)),m(v);break;case Th.TIMEOUT:we(Fn,`RPC '${e}' ${d} timed out`),p(new Ee(he.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const T=x.getStatus();if(we(Fn,`RPC '${e}' ${d} failed with status:`,T,"response text:",x.getResponseText()),T>0){let I=x.getResponseJson();Array.isArray(I)&&(I=I[0]);const L=I?.error;if(L&&L.status&&L.message){const O=(function(z){const U=z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(U)>=0?U:he.UNKNOWN})(L.status);p(new Ee(O,L.message))}else p(new Ee(he.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new Ee(he.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{we(Fn,`RPC '${e}' ${d} completed.`)}}));const y=JSON.stringify(i);we(Fn,`RPC '${e}' ${d} sending request:`,i),x.send(n,"POST",y,r,15)}))}T_(e,n,r){const i=Qg(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const x=c.join("");we(Fn,`Creating RPC '${e}' stream ${i}: ${x}`,m);const y=d.createWebChannel(x,m);this.I_(y);let v=!1,T=!1;const I=new s6({Ho:L=>{T?we(Fn,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(v||(we(Fn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),we(Fn,`RPC '${e}' stream ${i} sending:`,L),y.send(L))},Jo:()=>y.close()});return Pc(y,Vc.EventType.OPEN,(()=>{T||(we(Fn,`RPC '${e}' stream ${i} transport opened.`),I.i_())})),Pc(y,Vc.EventType.CLOSE,(()=>{T||(T=!0,we(Fn,`RPC '${e}' stream ${i} transport closed`),I.o_(),this.E_(y))})),Pc(y,Vc.EventType.ERROR,(L=>{T||(T=!0,xo(Fn,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),I.o_(new Ee(he.UNAVAILABLE,"The operation could not be completed")))})),Pc(y,Vc.EventType.MESSAGE,(L=>{if(!T){const O=L.data[0];ft(!!O,16349);const k=O,z=k?.error||k[0]?.error;if(z){we(Fn,`RPC '${e}' stream ${i} received error:`,z);const U=z.status;let $=(function(re){const j=on[re];if(j!==void 0)return sE(j)})(U),X=z.message;$===void 0&&($=he.INTERNAL,X="Unknown error status: "+U+" with message "+z.message),T=!0,I.o_(new Ee($,X)),y.close()}else we(Fn,`RPC '${e}' stream ${i} received:`,O),I.__(O)}})),mo.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return NT()}}function r6(t){return new mo(t)}function hg(){return typeof document<"u"?document:null}function Uf(t){return new oO(t,!0)}mo.c_=!1;class yE{constructor(e,n,r=1e3,i=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const F1="PersistentStream";class bE{constructor(e,n,r,i,c,d,m,p){this.Ci=e,this.b_=r,this.S_=i,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(ba(n.toString()),ba("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ee(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(F1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(we(F1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class a6 extends bE{constructor(e,n,r,i,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=dO(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ve.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?Or(d.readTime):Ve.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Kg(this.serializer),n.addTarget=(function(c,d){let m;const p=d.target;if(m=Fg(p)?{documents:mO(c,p)}:{query:pO(c,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=iE(c,d.resumeToken);const x=qg(c,d.expectedCount);x!==null&&(m.expectedCount=x)}else if(d.snapshotVersion.compareTo(Ve.min())>0){m.readTime=cf(c,d.snapshotVersion.toTimestamp());const x=qg(c,d.expectedCount);x!==null&&(m.expectedCount=x)}return m})(this.serializer,e);const r=xO(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Kg(this.serializer),n.removeTarget=e,this.K_(n)}}class i6 extends bE{constructor(e,n,r,i,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,d),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=fO(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Kg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>hO(this.serializer,r)))};this.K_(n)}}class l6{}class o6 extends l6{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ee(he.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,$g(n,r),i,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(he.UNKNOWN,c.toString())}))}jo(e,n,r,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.jo(e,$g(n,r),i,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ee(he.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function c6(t,e,n,r){return new o6(t,e,n,r)}class u6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ba(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ul="RemoteStore";class d6{constructor(e,n,r,i,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{gl(this)&&(we(ul,"Restarting streams for network reachability change."),await(async function(p){const x=ze(p);x.Ea.add(4),await Iu(x),x.Va.set("Unknown"),x.Ea.delete(4),await zf(x)})(this))}))})),this.Va=new u6(r,i)}}async function zf(t){if(gl(t))for(const e of t.Ra)await e(!0)}async function Iu(t){for(const e of t.Ra)await e(!1)}function vE(t,e){const n=ze(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Zx(n)?Jx(n):Mo(n).O_()&&Wx(n,e))}function Xx(t,e){const n=ze(t),r=Mo(n);n.Ia.delete(e),r.O_()&&_E(n,e),n.Ia.size===0&&(r.O_()?r.L_():gl(n)&&n.Va.set("Unknown"))}function Wx(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).Z_(e)}function _E(t,e){t.da.$e(e),Mo(t).X_(e)}function Jx(t){t.da=new rO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.Va.ua()}function Zx(t){return gl(t)&&!Mo(t).x_()&&t.Ia.size>0}function gl(t){return ze(t).Ea.size===0}function SE(t){t.da=void 0}async function h6(t){t.Va.set("Online")}async function f6(t){t.Ia.forEach(((e,n)=>{Wx(t,e)}))}async function m6(t,e){SE(t),Zx(t)?(t.Va.ha(e),Jx(t)):t.Va.set("Unknown")}async function p6(t,e,n){if(t.Va.set("Online"),e instanceof aE&&e.state===2&&e.cause)try{await(async function(i,c){const d=c.cause;for(const m of c.targetIds)i.Ia.has(m)&&(await i.remoteSyncer.rejectListen(m,d),i.Ia.delete(m),i.da.removeTarget(m))})(t,e)}catch(r){we(ul,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await df(t,r)}else if(e instanceof Ch?t.da.Xe(e):e instanceof rE?t.da.st(e):t.da.tt(e),!n.isEqual(Ve.min()))try{const r=await xE(t.localStore);n.compareTo(r)>=0&&await(function(c,d){const m=c.da.Tt(d);return m.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const y=c.Ia.get(x);y&&c.Ia.set(x,y.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,x)=>{const y=c.Ia.get(p);if(!y)return;c.Ia.set(p,y.withResumeToken(Vn.EMPTY_BYTE_STRING,y.snapshotVersion)),_E(c,p);const v=new ai(y.target,p,x,y.sequenceNumber);Wx(c,v)})),c.remoteSyncer.applyRemoteEvent(m)})(t,n)}catch(r){we(ul,"Failed to raise snapshot:",r),await df(t,r)}}async function df(t,e,n){if(!Do(e))throw e;t.Ea.add(1),await Iu(t),t.Va.set("Offline"),n||(n=()=>xE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we(ul,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zf(t)}))}function NE(t,e){return e().catch((n=>df(t,n,e)))}async function Ff(t){const e=ze(t),n=bi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Px;for(;g6(e);)try{const i=await XO(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,x6(e,i)}catch(i){await df(e,i)}TE(e)&&EE(e)}function g6(t){return gl(t)&&t.Ta.length<10}function x6(t,e){t.Ta.push(e);const n=bi(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function TE(t){return gl(t)&&!bi(t).x_()&&t.Ta.length>0}function EE(t){bi(t).start()}async function y6(t){bi(t).ra()}async function b6(t){const e=bi(t);for(const n of t.Ta)e.ea(n.mutations)}async function v6(t,e,n){const r=t.Ta.shift(),i=Hx.from(r,e,n);await NE(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Ff(t)}async function _6(t,e){e&&bi(t).Y_&&await(async function(r,i){if((function(d){return tO(d)&&d!==he.ABORTED})(i.code)){const c=r.Ta.shift();bi(r).B_(),await NE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i))),await Ff(r)}})(t,e),TE(t)&&EE(t)}async function B1(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),we(ul,"RemoteStore received new credentials");const r=gl(n);n.Ea.add(3),await Iu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zf(n)}async function S6(t,e){const n=ze(t);e?(n.Ea.delete(2),await zf(n)):e||(n.Ea.add(2),await Iu(n),n.Va.set("Unknown"))}function Mo(t){return t.ma||(t.ma=(function(n,r,i){const c=ze(n);return c.sa(),new a6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(t.datastore,t.asyncQueue,{Zo:h6.bind(null,t),Yo:f6.bind(null,t),t_:m6.bind(null,t),J_:p6.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Zx(t)?Jx(t):t.Va.set("Unknown")):(await t.ma.stop(),SE(t))}))),t.ma}function bi(t){return t.fa||(t.fa=(function(n,r,i){const c=ze(n);return c.sa(),new i6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:y6.bind(null,t),t_:_6.bind(null,t),ta:b6.bind(null,t),na:v6.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Ff(t)):(await t.fa.stop(),t.Ta.length>0&&(we(ul,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class ey{constructor(e,n,r,i,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=c,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,c){const d=Date.now()+r,m=new ey(e,n,d,i,c);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ty(t,e){if(ba("AsyncQueue",`${e}: ${t}`),Do(t))return new Ee(he.UNAVAILABLE,`${e}: ${t}`);throw t}class po{static emptySet(e){return new po(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=Uc(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,c=r.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class H1{constructor(){this.ga=new Ut(De.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class So{constructor(e,n,r,i,c,d,m,p,x){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,n,r,i,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new So(e,n,po.emptySet(n),d,r,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class N6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class T6{constructor(){this.queries=q1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ze(n),c=i.queries;i.queries=q1(),c.forEach(((d,m)=>{for(const p of m.ba)p.onError(r)}))})(this,new Ee(he.ABORTED,"Firestore shutting down"))}}function q1(){return new pl((t=>$T(t)),Mf)}async function wE(t,e){const n=ze(t);let r=3;const i=e.query;let c=n.queries.get(i);c?!c.Sa()&&e.Da()&&(r=2):(c=new N6,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(i,!0);break;case 1:c.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(d){const m=ty(d,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(m)}n.queries.set(i,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&ny(n)}async function AE(t,e){const n=ze(t),r=e.query;let i=3;const c=n.queries.get(r);if(c){const d=c.ba.indexOf(e);d>=0&&(c.ba.splice(d,1),c.ba.length===0?i=e.Da()?0:1:!c.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function E6(t,e){const n=ze(t);let r=!1;for(const i of e){const c=i.query,d=n.queries.get(c);if(d){for(const m of d.ba)m.Fa(i)&&(r=!0);d.wa=i}}r&&ny(n)}function w6(t,e,n){const r=ze(t),i=r.queries.get(e);if(i)for(const c of i.ba)c.onError(n);r.queries.delete(e)}function ny(t){t.Ca.forEach((e=>{e.next()}))}var Xg,$1;($1=Xg||(Xg={})).Ma="default",$1.Cache="cache";class CE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new So(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xg.Cache}}class RE{constructor(e){this.key=e}}class jE{constructor(e){this.key=e}}class A6{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.eu=GT(e),this.tu=new po(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new H1,i=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=i,m=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,x=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,v)=>{const T=i.get(y),I=Pf(this.query,v)?v:null,L=!!T&&this.mutatedKeys.has(T.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let k=!1;T&&I?T.data.isEqual(I.data)?L!==O&&(r.track({type:3,doc:I}),k=!0):this.su(T,I)||(r.track({type:2,doc:I}),k=!0,(p&&this.eu(I,p)>0||x&&this.eu(I,x)<0)&&(m=!0)):!T&&I?(r.track({type:0,doc:I}),k=!0):T&&!I&&(r.track({type:1,doc:T}),k=!0,(p||x)&&(m=!0)),k&&(I?(d=d.add(I),c=O?c.add(y):c.delete(y)):(d=d.delete(y),c=c.delete(y)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const y=this.query.limitType==="F"?d.last():d.first();d=d.delete(y.key),c=c.delete(y.key),r.track({type:1,doc:y})}return{tu:d,iu:r,Ss:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((y,v)=>(function(I,L){const O=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:k})}};return O(I)-O(L)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(r),i=i??!1;const m=n&&!i?this._u():[],p=this.Ya.size===0&&this.current&&!i?1:0,x=p!==this.Xa;return this.Xa=p,d.length!==0||x?{snapshot:new So(this.query,e.tu,c,d,e.mutatedKeys,p===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new H1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new jE(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new RE(r))})),n}cu(e){this.Za=e.ks,this.Ya=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return So.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const sy="SyncEngine";class C6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R6{constructor(e){this.key=e,this.hu=!1}}class j6{constructor(e,n,r,i,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new pl((m=>$T(m)),Mf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ut(De.comparator),this.Au=new Map,this.Vu=new Gx,this.du={},this.mu=new Map,this.fu=_o.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k6(t,e,n=!0){const r=OE(t);let i;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await kE(r,e,n,!0),i}async function I6(t,e){const n=OE(t);await kE(n,e,!0,!1)}async function kE(t,e,n,r){const i=await WO(t.localStore,Pr(e)),c=i.targetId,d=t.sharedClientState.addLocalQueryTarget(c,n);let m;return r&&(m=await D6(t,e,c,d==="current",i.resumeToken)),t.isPrimaryClient&&n&&vE(t.remoteStore,i),m}async function D6(t,e,n,r,i){t.pu=(v,T,I)=>(async function(O,k,z,U){let $=k.view.ru(z);$.Ss&&($=await L1(O.localStore,k.query,!1).then((({documents:j})=>k.view.ru(j,$))));const X=U&&U.targetChanges.get(k.targetId),K=U&&U.targetMismatches.get(k.targetId)!=null,re=k.view.applyChanges($,O.isPrimaryClient,X,K);return K1(O,k.targetId,re.au),re.snapshot})(t,v,T,I);const c=await L1(t.localStore,e,!0),d=new A6(e,c.ks),m=d.ru(c.documents),p=ku.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),x=d.applyChanges(m,t.isPrimaryClient,p);K1(t,n,x.au);const y=new C6(e,n,d);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),x.snapshot}async function M6(t,e,n){const r=ze(t),i=r.Tu.get(e),c=r.Iu.get(i.targetId);if(c.length>1)return r.Iu.set(i.targetId,c.filter((d=>!Mf(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Yg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xx(r.remoteStore,i.targetId),Wg(r,i.targetId)})).catch(Io)):(Wg(r,i.targetId),await Yg(r.localStore,i.targetId,!0))}async function P6(t,e){const n=ze(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xx(n.remoteStore,r.targetId))}async function O6(t,e,n){const r=H6(t);try{const i=await(function(d,m){const p=ze(d),x=jt.now(),y=m.reduce(((I,L)=>I.add(L.key)),Ze());let v,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let L=va(),O=Ze();return p.xs.getEntries(I,y).next((k=>{L=k,L.forEach(((z,U)=>{U.isValidDocument()||(O=O.add(z))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,L))).next((k=>{v=k;const z=[];for(const U of m){const $=XP(U,v.get(U.key).overlayedDocument);$!=null&&z.push(new Ti(U.key,$,LT($.value.mapValue),tr.exists(!0)))}return p.mutationQueue.addMutationBatch(I,x,z,m)})).next((k=>{T=k;const z=k.applyToLocalDocumentSet(v,O);return p.documentOverlayCache.saveOverlays(I,k.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:YT(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(d,m,p){let x=d.du[d.currentUser.toKey()];x||(x=new Ut(Je)),x=x.insert(m,p),d.du[d.currentUser.toKey()]=x})(r,i.batchId,n),await Du(r,i.changes),await Ff(r.remoteStore)}catch(i){const c=ty(i,"Failed to persist write");n.reject(c)}}async function IE(t,e){const n=ze(t);try{const r=await YO(n.localStore,e);e.targetChanges.forEach(((i,c)=>{const d=n.Au.get(c);d&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?d.hu=!0:i.modifiedDocuments.size>0?ft(d.hu,14607):i.removedDocuments.size>0&&(ft(d.hu,42227),d.hu=!1))})),await Du(n,r,e)}catch(r){await Io(r)}}function G1(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&i.push(m.snapshot)})),(function(d,m){const p=ze(d);p.onlineState=m;let x=!1;p.queries.forEach(((y,v)=>{for(const T of v.ba)T.va(m)&&(x=!0)})),x&&ny(p)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function L6(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),c=i&&i.key;if(c){let d=new Ut(De.comparator);d=d.insert(c,Hn.newNoDocument(c,Ve.min()));const m=Ze().add(c),p=new Vf(Ve.min(),new Map,new Ut(Je),d,m);await IE(r,p),r.Ru=r.Ru.remove(c),r.Au.delete(e),ry(r)}else await Yg(r.localStore,e,!1).then((()=>Wg(r,e,n))).catch(Io)}async function V6(t,e){const n=ze(t),r=e.batch.batchId;try{const i=await KO(n.localStore,e);ME(n,r,null),DE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Du(n,i)}catch(i){await Io(i)}}async function U6(t,e,n){const r=ze(t);try{const i=await(function(d,m){const p=ze(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let y;return p.mutationQueue.lookupMutationBatch(x,m).next((v=>(ft(v!==null,37113),y=v.keys(),p.mutationQueue.removeMutationBatch(x,v)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,y,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,y))).next((()=>p.localDocuments.getDocuments(x,y)))}))})(r.localStore,e);ME(r,e,n),DE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Du(r,i)}catch(i){await Io(i)}}function DE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ME(t,e,n){const r=ze(t);let i=r.du[r.currentUser.toKey()];if(i){const c=i.get(e);c&&(n?c.reject(n):c.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Wg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||PE(t,r)}))}function PE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Xx(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),ry(t))}function K1(t,e,n){for(const r of n)r instanceof RE?(t.Vu.addReference(r.key,e),z6(t,r)):r instanceof jE?(we(sy,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||PE(t,r.key)):Pe(19791,{wu:r})}function z6(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(we(sy,"New document in limbo: "+n),t.Eu.add(r),ry(t))}function ry(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new De(Rt.fromString(e)),r=t.fu.next();t.Au.set(r,new R6(n)),t.Ru=t.Ru.insert(n,r),vE(t.remoteStore,new ai(Pr(zx(n.path)),r,"TargetPurposeLimboResolution",kf.ce))}}async function Du(t,e,n){const r=ze(t),i=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{d.push(r.pu(p,e,n).then((x=>{if((x||n)&&r.isPrimaryClient){const y=x?!x.fromCache:n?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,y?"current":"not-current")}if(x){i.push(x);const y=Yx.Es(p.targetId,x);c.push(y)}})))})),await Promise.all(d),r.Pu.J_(i),await(async function(p,x){const y=ze(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>me.forEach(x,(T=>me.forEach(T.Ts,(I=>y.persistence.referenceDelegate.addReference(v,T.targetId,I))).next((()=>me.forEach(T.Is,(I=>y.persistence.referenceDelegate.removeReference(v,T.targetId,I)))))))))}catch(v){if(!Do(v))throw v;we(Qx,"Failed to update sequence numbers: "+v)}for(const v of x){const T=v.targetId;if(!v.fromCache){const I=y.vs.get(T),L=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(L);y.vs=y.vs.insert(T,O)}}})(r.localStore,c))}async function F6(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){we(sy,"User change. New user:",e.toKey());const r=await gE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new Ee(he.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Du(n,r.Ns)}}function B6(t,e){const n=ze(t),r=n.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let i=Ze();const c=n.Iu.get(e);if(!c)return i;for(const d of c){const m=n.Tu.get(d);i=i.unionWith(m.view.nu)}return i}}function OE(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L6.bind(null,e),e.Pu.J_=E6.bind(null,e.eventManager),e.Pu.yu=w6.bind(null,e.eventManager),e}function H6(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U6.bind(null,e),e}class hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return GO(this.persistence,new HO,e.initialUser,this.serializer)}Cu(e){return new pE(Kx.Vi,this.serializer)}Du(e){return new ZO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hf.provider={build:()=>new hf};class q6 extends hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ft(this.persistence.referenceDelegate instanceof uf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new CO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new pE((r=>uf.Vi(r,n)),this.serializer)}}class Jg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F6.bind(null,this.syncEngine),await S6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new T6})()}createDatastore(e){const n=Uf(e.databaseInfo.databaseId),r=r6(e.databaseInfo);return c6(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,c,d,m){return new d6(r,i,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>G1(this.syncEngine,n,0)),(function(){return z1.v()?new z1:new e6})())}createSyncEngine(e,n){return(function(i,c,d,m,p,x,y){const v=new j6(i,c,d,m,p,x);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ze(n);we(ul,"RemoteStore shutting down."),r.Ea.add(5),await Iu(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jg.provider={build:()=>new Jg};class LE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ba("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const vi="FirestoreClient";class $6{constructor(e,n,r,i,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=Bn.UNAUTHENTICATED,this.clientId=Mx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{we(vi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(we(vi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ty(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function fg(t,e){t.asyncQueue.verifyOperationInProgress(),we(vi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await gE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Y1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await G6(t);we(vi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>B1(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>B1(e.remoteStore,i))),t._onlineComponents=e}async function G6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(vi,"Using user provided OfflineComponentProvider");try{await fg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await fg(t,new hf)}}else we(vi,"Using default OfflineComponentProvider"),await fg(t,new q6(void 0));return t._offlineComponents}async function VE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(vi,"Using user provided OnlineComponentProvider"),await Y1(t,t._uninitializedComponentsProvider._online)):(we(vi,"Using default OnlineComponentProvider"),await Y1(t,new Jg))),t._onlineComponents}function K6(t){return VE(t).then((e=>e.syncEngine))}async function Zg(t){const e=await VE(t),n=e.eventManager;return n.onListen=k6.bind(null,e.syncEngine),n.onUnlisten=M6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P6.bind(null,e.syncEngine),n}function Y6(t,e,n,r){const i=new LE(r),c=new CE(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>wE(await Zg(t),c))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>AE(await Zg(t),c)))}}function Q6(t,e,n={}){const r=new ui;return t.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,x){const y=new LE({next:T=>{y.Nu(),d.enqueueAndForget((()=>AE(c,v))),T.fromCache&&p.source==="server"?x.reject(new Ee(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(T)},error:T=>x.reject(T)}),v=new CE(m,y,{includeMetadataChanges:!0,Ka:!0});return wE(c,v)})(await Zg(t),t.asyncQueue,e,n,r))),r.promise}function X6(t,e){const n=new ui;return t.asyncQueue.enqueueAndForget((async()=>O6(await K6(t),e,n))),n.promise}function UE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const W6="ComponentProvider",Q1=new Map;function J6(t,e,n,r,i){return new bP(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,UE(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const zE="firestore.googleapis.com",X1=!0;class W1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zE,this.ssl=X1}else this.host=e.host,this.ssl=e.ssl??X1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wO)throw new Ee(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new JM;switch(r.type){case"firstParty":return new nP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Q1.get(n);r&&(we(W6,"Removing Datastore"),Q1.delete(n),r.terminate())})(this),Promise.resolve()}}function Z6(t,e,n,r={}){t=er(t,Bf);const i=Si(e),c=t._getSettings(),d={...c,emulatorOptions:t._getEmulatorOptions()},m=`${e}:${n}`;i&&(_x(`https://${m}`),Sx("Firestore",!0)),c.host!==zE&&c.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:i,emulatorOptions:r};if(!il(p,d)&&(t._setSettings(p),r.mockUserToken)){let x,y;if(typeof r.mockUserToken=="string")x=r.mockUserToken,y=Bn.MOCK_USER;else{x=MN(r.mockUserToken,t._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ee(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Bn(v)}t._authCredentials=new ZM(new ET(x,y))}}class xl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xl(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Cu(n,Jt._jsonSchema))return new Jt(e,r||null,new De(Rt.fromString(n.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:un("string",Jt._jsonSchemaVersion),referencePath:un("string")};class di extends xl{constructor(e,n,r){super(e,n,zx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new De(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function Rh(t,e,...n){if(t=qt(t),wT("collection","path",e),t instanceof Bf){const r=Rt.fromString(e,...n);return u1(r),new di(t,null,r)}{if(!(t instanceof Jt||t instanceof di))throw new Ee(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Rt.fromString(e,...n));return u1(r),new di(t.firestore,null,r)}}function tl(t,e,...n){if(t=qt(t),arguments.length===1&&(e=Mx.newId()),wT("doc","path",e),t instanceof Bf){const r=Rt.fromString(e,...n);return c1(r),new Jt(t,null,new De(r))}{if(!(t instanceof Jt||t instanceof di))throw new Ee(he.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Rt.fromString(e,...n));return c1(r),new Jt(t.firestore,t instanceof di?t.converter:null,new De(r))}}const J1="AsyncQueue";class Z1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yE(this,"async_queue_retry"),this._c=()=>{const r=hg();r&&we(J1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=hg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ui;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Do(e))throw e;we(J1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ba("INTERNAL UNHANDLED ERROR: ",eS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ey.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(i),i}uc(){this.nc&&Pe(47125,{Pc:eS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class dl extends Bf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Z1,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z1(e),this._firestoreClient=void 0,await e}}}function eL(t,e){const n=typeof t=="object"?t:Ex(),r=typeof t=="string"?t:nf,i=Ef(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const c=kN("firestore");c&&Z6(i,...c)}return i}function ay(t){if(t._terminated)throw new Ee(he.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tL(t),t._firestoreClient}function tL(t){const e=t._freezeSettings(),n=J6(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const c=i?._online.build();return{_offline:i?._offline.build(c),_online:c}})(t._componentsProvider))}class Bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bs(Vn.fromBase64String(e))}catch(n){throw new Ee(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bs(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,Bs._jsonSchema))return Bs.fromBase64String(e.bytes)}}Bs._jsonSchemaVersion="firestore/bytes/1.0",Bs._jsonSchema={type:un("string",Bs._jsonSchemaVersion),bytes:un("string")};class iy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ly{constructor(e){this._methodName=e}}class Lr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lr._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,Lr._jsonSchema))return new Lr(e.latitude,e.longitude)}}Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:un("string",Lr._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};class nr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==i[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new nr(e.vectorValues);throw new Ee(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nr._jsonSchemaVersion="firestore/vectorValue/1.0",nr._jsonSchema={type:un("string",nr._jsonSchemaVersion),vectorValues:un("object")};const nL=/^__.*__$/;class sL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class FE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{dataSource:t})}}class oy{constructor(e,n,r,i,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new oy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ff(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(BE(this.dataSource)&&nL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class rL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uf(e)}createContext(e,n,r,i=!1){return new oy({dataSource:e,methodName:n,targetDoc:r,path:Ln.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cy(t){const e=t._freezeSettings(),n=Uf(t._databaseId);return new rL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aL(t,e,n,r,i,c={}){const d=t.createContext(c.merge||c.mergeFields?2:0,e,n,i);uy("Data must be an object, but it was:",d,r);const m=HE(r,d);let p,x;if(c.merge)p=new Ts(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const y=[];for(const v of c.mergeFields){const T=No(e,v,n);if(!d.contains(T))throw new Ee(he.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);GE(y,T)||y.push(T)}p=new Ts(y),x=d.fieldTransforms.filter((v=>p.covers(v.field)))}else p=null,x=d.fieldTransforms;return new sL(new ds(m),p,x)}class Hf extends ly{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hf}}function iL(t,e,n,r){const i=t.createContext(1,e,n);uy("Data must be an object, but it was:",i,r);const c=[],d=ds.empty();Ni(r,((p,x)=>{const y=$E(e,p,n);x=qt(x);const v=i.childContextForFieldPath(y);if(x instanceof Hf)c.push(y);else{const T=Mu(x,v);T!=null&&(c.push(y),d.set(y,T))}}));const m=new Ts(c);return new FE(d,m,i.fieldTransforms)}function lL(t,e,n,r,i,c){const d=t.createContext(1,e,n),m=[No(e,r,n)],p=[i];if(c.length%2!=0)throw new Ee(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)m.push(No(e,c[T])),p.push(c[T+1]);const x=[],y=ds.empty();for(let T=m.length-1;T>=0;--T)if(!GE(x,m[T])){const I=m[T];let L=p[T];L=qt(L);const O=d.childContextForFieldPath(I);if(L instanceof Hf)x.push(I);else{const k=Mu(L,O);k!=null&&(x.push(I),y.set(I,k))}}const v=new Ts(x);return new FE(y,v,d.fieldTransforms)}function oL(t,e,n,r=!1){return Mu(n,t.createContext(r?4:3,e))}function Mu(t,e){if(qE(t=qt(t)))return uy("Unsupported field value:",e,t),HE(t,e);if(t instanceof ly)return(function(r,i){if(!BE(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(i);c&&i.fieldTransforms.push(c)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const c=[];let d=0;for(const m of r){let p=Mu(m,i.childContextForArray(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(t,e)}return(function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=jt.fromDate(r);return{timestampValue:cf(i.serializer,c)}}if(r instanceof jt){const c=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cf(i.serializer,c)}}if(r instanceof Lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bs)return{bytesValue:iE(i.serializer,r._byteString)};if(r instanceof Jt){const c=i.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw i.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:$x(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof nr)return(function(d,m){const p=d instanceof nr?d.toArray():d;return{mapValue:{fields:{[PT]:{stringValue:OT},[sf]:{arrayValue:{values:p.map((y=>{if(typeof y!="number")throw m.createError("VectorValues must only contain numeric values.");return Fx(m.serializer,y)}))}}}}}})(r,i);if(fE(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${jf(r)}`)})(t,e)}function HE(t,e){const n={};return RT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(t,((r,i)=>{const c=Mu(i,e.childContextForField(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function qE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Lr||t instanceof Bs||t instanceof Jt||t instanceof ly||t instanceof nr||fE(t))}function uy(t,e,n){if(!qE(n)||!AT(n)){const r=jf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function No(t,e,n){if((e=qt(e))instanceof iy)return e._internalPath;if(typeof e=="string")return $E(t,e);throw ff("Field path arguments must be of type string or ",t,!1,void 0,n)}const cL=new RegExp("[~\\*/\\[\\]]");function $E(t,e,n){if(e.search(cL)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iy(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ff(t,e,n,r,i){const c=r&&!r.isEmpty(),d=i!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${r}`),d&&(p+=` in document ${i}`),p+=")"),new Ee(he.INVALID_ARGUMENT,m+t+p)}function GE(t,e){return t.some((n=>n.isEqual(e)))}class uL{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ni(e,((i,c)=>{r[i]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[sf].arrayValue?.values?.map((r=>Wt(r.doubleValue)));return new nr(n)}convertGeoPoint(e){return new Lr(Wt(e.latitude),Wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const n=gi(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Rt.fromString(e);ft(hE(r),9688,{name:e});const i=new cu(r.get(1),r.get(3)),c=new De(r.popFirst(5));return i.isEqual(n)||ba(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class dy extends uL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}const tS="@firebase/firestore",nS="4.10.0";function sS(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const c of r)if(c in i&&typeof i[c]=="function")return!0;return!1})(t,["next","error","complete"])}class KE{constructor(e,n,r,i,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(No("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dL extends KE{data(){return super.data()}}function YE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class hL extends hy{}function ex(t,e,...n){let r=[];e instanceof hy&&r.push(e),r=r.concat(n),(function(c){const d=c.filter((p=>p instanceof fy)).length,m=c.filter((p=>p instanceof qf)).length;if(d>1||d>0&&m>0)throw new Ee(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class qf extends hL{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qf(e,n,r)}_apply(e){const n=this._parse(e);return QE(e._query,n),new xl(e.firestore,e.converter,Bg(e._query,n))}_parse(e){const n=cy(e.firestore);return(function(c,d,m,p,x,y,v){let T;if(x.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ee(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){aS(v,y);const L=[];for(const O of v)L.push(rS(p,c,O));T={arrayValue:{values:L}}}else T=rS(p,c,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||aS(v,y),T=oL(m,d,v,y==="in"||y==="not-in");return cn.create(x,y,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tx(t,e,n){const r=e,i=No("where",t);return qf._create(i,r,n)}class fy extends hy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fy(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,c){let d=i;const m=c.getFlattenedFilters();for(const p of m)QE(d,p),d=Bg(d,p)})(e._query,n),new xl(e.firestore,e.converter,Bg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rS(t,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new Ee(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qT(e)&&n.indexOf("/")!==-1)throw new Ee(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Rt.fromString(n));if(!De.isDocumentKey(r))throw new Ee(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return y1(t,new De(r))}if(n instanceof Jt)return y1(t,n._key);throw new Ee(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(n)}.`)}function aS(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QE(t,e){const n=(function(i,c){for(const d of i)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function fL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Fc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nl extends KE{constructor(e,n,r,i,c,d){super(e,n,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(No("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=nl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}nl._jsonSchemaVersion="firestore/documentSnapshot/1.0",nl._jsonSchema={type:un("string",nl._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class jh extends nl{data(e={}){return super.data(e)}}class sl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new jh(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,c){if(i._snapshot.oldDocs.isEmpty()){let d=0;return i._snapshot.docChanges.map((m=>{const p=new jh(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Fc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new jh(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Fc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);let x=-1,y=-1;return m.type!==0&&(x=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),y=d.indexOf(m.doc.key)),{type:mL(m.type),doc:p,oldIndex:x,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}sl._jsonSchemaVersion="firestore/querySnapshot/1.0",sl._jsonSchema={type:un("string",sl._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};function nx(t){t=er(t,xl);const e=er(t.firestore,dl),n=ay(e),r=new dy(e);return YE(t._query),Q6(n,t._query).then((i=>new sl(e,r,t,i)))}function sx(t,e,n){t=er(t,Jt);const r=er(t.firestore,dl),i=fL(t.converter,e),c=cy(r);return my(r,[aL(c,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,tr.none())])}function iS(t,e,n,...r){t=er(t,Jt);const i=er(t.firestore,dl),c=cy(i);let d;return d=typeof(e=qt(e))=="string"||e instanceof iy?lL(c,"updateDoc",t._key,e,n,r):iL(c,"updateDoc",t._key,e),my(i,[d.toMutation(t._key,tr.exists(!0))])}function pL(t){return my(er(t.firestore,dl),[new Bx(t._key,tr.none())])}function gL(t,...e){t=qt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||sS(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(sS(e[r])){const x=e[r];e[r]=x.next?.bind(x),e[r+1]=x.error?.bind(x),e[r+2]=x.complete?.bind(x)}let c,d,m;if(t instanceof Jt)d=er(t.firestore,dl),m=zx(t._key.path),c={next:x=>{e[r]&&e[r](xL(d,t,x))},error:e[r+1],complete:e[r+2]};else{const x=er(t,xl);d=er(x.firestore,dl),m=x._query;const y=new dy(d);c={next:v=>{e[r]&&e[r](new sl(d,y,x,v))},error:e[r+1],complete:e[r+2]},YE(t._query)}const p=ay(d);return Y6(p,m,i,c)}function my(t,e){const n=ay(t);return X6(n,e)}function xL(t,e,n){const r=n.docs.get(e._key),i=new dy(t);return new nl(t,i,e._key,r,new Fc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){WM(ml),ll(new fi("firestore",((r,{instanceIdentifier:i,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new dl(new eP(r.getProvider("auth-internal")),new sP(d,r.getProvider("app-check-internal")),vP(d,i),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Ir(tS,nS,e),Ir(tS,nS,"esm2020")})();const XE="firebasestorage.googleapis.com",WE="storageBucket",yL=120*1e3,bL=600*1e3;class Gt extends Ur{constructor(e,n,r=0){super(mg(e),`Firebase Storage: ${n} (${mg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $t;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($t||($t={}));function mg(t){return"storage/"+t}function py(){const t="An unknown error occurred, please check the error payload for server response.";return new Gt($t.UNKNOWN,t)}function vL(t){return new Gt($t.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _L(t){return new Gt($t.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gt($t.UNAUTHENTICATED,t)}function NL(){return new Gt($t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function TL(t){return new Gt($t.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EL(){return new Gt($t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wL(){return new Gt($t.CANCELED,"User canceled the upload/download.")}function AL(t){return new Gt($t.INVALID_URL,"Invalid URL '"+t+"'.")}function CL(t){return new Gt($t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function RL(){return new Gt($t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WE+"' property when initializing the app?")}function jL(){return new Gt($t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kL(){return new Gt($t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function IL(t){return new Gt($t.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rx(t){return new Gt($t.INVALID_ARGUMENT,t)}function JE(){return new Gt($t.APP_DELETED,"The Firebase app was deleted.")}function DL(t){return new Gt($t.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jc(t,e){return new Gt($t.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oc(t){throw new Gt($t.INTERNAL_ERROR,"Internal error: "+t)}class Es{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Es.makeFromUrl(e,n)}catch{return new Es(e,"")}if(r.path==="")return r;throw CL(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function c(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+i+d,"i"),p={bucket:1,path:3};function x(X){X.path_=decodeURIComponent(X.path)}const y="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${y}/b/${i}/o${T}`,"i"),L={bucket:1,path:3},O=n===XE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",z=new RegExp(`^https?://${O}/${i}/${k}`,"i"),$=[{regex:m,indices:p,postModify:c},{regex:I,indices:L,postModify:x},{regex:z,indices:{bucket:1,path:2},postModify:x}];for(let X=0;X<$.length;X++){const K=$[X],re=K.regex.exec(e);if(re){const j=re[K.indices.bucket];let S=re[K.indices.path];S||(S=""),r=new Es(j,S),K.postModify(r);break}}if(r==null)throw AL(e);return r}}class ML{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PL(t,e,n){let r=1,i=null,c=null,d=!1,m=0;function p(){return m===2}let x=!1;function y(...k){x||(x=!0,e.apply(null,k))}function v(k){i=setTimeout(()=>{i=null,t(I,p())},k)}function T(){c&&clearTimeout(c)}function I(k,...z){if(x){T();return}if(k){T(),y.call(null,k,...z);return}if(p()||d){T(),y.call(null,k,...z);return}r<64&&(r*=2);let $;m===1?(m=2,$=0):$=(r+Math.random())*1e3,v($)}let L=!1;function O(k){L||(L=!0,T(),!x&&(i!==null?(k||(m=2),clearTimeout(i),v(0)):k||(m=1)))}return v(0),c=setTimeout(()=>{d=!0,O(!0)},n),O}function OL(t){t(!1)}function LL(t){return t!==void 0}function VL(t){return typeof t=="object"&&!Array.isArray(t)}function gy(t){return typeof t=="string"||t instanceof String}function lS(t){return xy()&&t instanceof Blob}function xy(){return typeof Blob<"u"}function oS(t,e,n,r){if(r<e)throw rx(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw rx(`Invalid value for '${t}'. Expected ${n} or less.`)}function $f(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ZE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var rl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(rl||(rl={}));function UL(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,c=e.indexOf(t)!==-1;return n||i||c}class zL{constructor(e,n,r,i,c,d,m,p,x,y,v,T=!0,I=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=p,this.timeout_=x,this.progressCallback_=y,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,O)=>{this.resolve_=L,this.reject_=O,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const p=m.loaded,x=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,x)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===rl.NO_ERROR,p=c.getStatus();if(!m||UL(p,this.additionalRetryCodes_)&&this.retry){const y=c.getErrorCode()===rl.ABORT;r(!1,new hh(!1,null,y));return}const x=this.successCodes_.indexOf(p)!==-1;r(!0,new hh(x,c))})},n=(r,i)=>{const c=this.resolve_,d=this.reject_,m=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());LL(p)?c(p):c()}catch(p){d(p)}else if(m!==null){const p=py();p.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,p)):d(p)}else if(i.canceled){const p=this.appDelete_?JE():wL();d(p)}else{const p=EL();d(p)}};this.canceled_?n(!1,new hh(!1,null,!0)):this.backoffId_=PL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function FL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $L(t,e,n,r,i,c,d=!0,m=!1){const p=ZE(t.urlParams),x=t.url+p,y=Object.assign({},t.headers);return HL(y,e),FL(y,n),BL(y,c),qL(y,r),new zL(x,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,d,m)}function GL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KL(...t){const e=GL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(xy())return new Blob(t);throw new Gt($t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function YL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function QL(t){if(typeof atob>"u")throw IL("base-64");return atob(t)}const kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pg{constructor(e,n){this.data=e,this.contentType=n||null}}function XL(t,e){switch(t){case kr.RAW:return new pg(ew(e));case kr.BASE64:case kr.BASE64URL:return new pg(tw(t,e));case kr.DATA_URL:return new pg(JL(e),ZL(e))}throw py()}function ew(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=r,d=t.charCodeAt(++n);r=65536|(c&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function WL(t){let e;try{e=decodeURIComponent(t)}catch{throw Jc(kr.DATA_URL,"Malformed data URL.")}return ew(e)}function tw(t,e){switch(t){case kr.BASE64:{const i=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(i||c)throw Jc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case kr.BASE64URL:{const i=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(i||c)throw Jc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QL(e)}catch(i){throw i.message.includes("polyfill")?i:Jc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class nw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Jc(kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=e5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function JL(t){const e=new nw(t);return e.base64?tw(kr.BASE64,e.rest):WL(e.rest)}function ZL(t){return new nw(t).contentType}function e5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class ri{constructor(e,n){let r=0,i="";lS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(lS(this.data_)){const r=this.data_,i=YL(r,e,n);return i===null?null:new ri(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ri(r,!0)}}static getBlob(...e){if(xy()){const n=e.map(r=>r instanceof ri?r.data_:r);return new ri(KL.apply(null,n))}else{const n=e.map(d=>gy(d)?XL(kr.RAW,d).data:d.data_);let r=0;n.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let c=0;return n.forEach(d=>{for(let m=0;m<d.length;m++)i[c++]=d[m]}),new ri(i,!0)}}uploadData(){return this.data_}}function sw(t){let e;try{e=JSON.parse(t)}catch{return null}return VL(e)?e:null}function t5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function n5(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rw(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function s5(t,e){return e}class Jn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||s5}}let fh=null;function r5(t){return!gy(t)||t.length<2?t:rw(t)}function aw(){if(fh)return fh;const t=[];t.push(new Jn("bucket")),t.push(new Jn("generation")),t.push(new Jn("metageneration")),t.push(new Jn("name","fullPath",!0));function e(c,d){return r5(d)}const n=new Jn("name");n.xform=e,t.push(n);function r(c,d){return d!==void 0?Number(d):d}const i=new Jn("size");return i.xform=r,t.push(i),t.push(new Jn("timeCreated")),t.push(new Jn("updated")),t.push(new Jn("md5Hash",null,!0)),t.push(new Jn("cacheControl",null,!0)),t.push(new Jn("contentDisposition",null,!0)),t.push(new Jn("contentEncoding",null,!0)),t.push(new Jn("contentLanguage",null,!0)),t.push(new Jn("contentType",null,!0)),t.push(new Jn("metadata","customMetadata",!0)),fh=t,fh}function a5(t,e){function n(){const r=t.bucket,i=t.fullPath,c=new Es(r,i);return e._makeStorageReference(c)}Object.defineProperty(t,"ref",{get:n})}function i5(t,e,n){const r={};r.type="file";const i=n.length;for(let c=0;c<i;c++){const d=n[c];r[d.local]=d.xform(r,e[d.server])}return a5(r,t),r}function iw(t,e,n){const r=sw(e);return r===null?null:i5(t,r,n)}function l5(t,e,n,r){const i=sw(e);if(i===null||!gy(i.downloadTokens))return null;const c=i.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(x=>{const y=t.bucket,v=t.fullPath,T="/b/"+d(y)+"/o/"+d(v),I=$f(T,n,r),L=ZE({alt:"media",token:x});return I+L})[0]}function o5(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const c=e[i];c.writable&&(n[c.server]=t[c.local])}return JSON.stringify(n)}class yy{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function lw(t){if(!t)throw py()}function c5(t,e){function n(r,i){const c=iw(t,i,e);return lw(c!==null),c}return n}function u5(t,e){function n(r,i){const c=iw(t,i,e);return lw(c!==null),l5(c,i,t.host,t._protocol)}return n}function ow(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=NL():i=SL():n.getStatus()===402?i=_L(t.bucket):n.getStatus()===403?i=TL(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function cw(t){const e=ow(t);function n(r,i){let c=e(r,i);return r.getStatus()===404&&(c=vL(t.path)),c.serverResponse=i.serverResponse,c}return n}function d5(t,e,n){const r=e.fullServerUrl(),i=$f(r,t.host,t._protocol),c="GET",d=t.maxOperationRetryTime,m=new yy(i,c,u5(t,n),d);return m.errorHandler=cw(e),m}function h5(t,e){const n=e.fullServerUrl(),r=$f(n,t.host,t._protocol),i="DELETE",c=t.maxOperationRetryTime;function d(p,x){}const m=new yy(r,i,d,c);return m.successCodes=[200,204],m.errorHandler=cw(e),m}function f5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function m5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=f5(null,e)),r}function p5(t,e,n,r,i){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let $="";for(let X=0;X<2;X++)$=$+Math.random().toString().slice(2);return $}const p=m();d["Content-Type"]="multipart/related; boundary="+p;const x=m5(e,r,i),y=o5(x,n),v="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+x.contentType+`\r
\r
`,T=`\r
--`+p+"--",I=ri.getBlob(v,r,T);if(I===null)throw jL();const L={name:x.fullPath},O=$f(c,t.host,t._protocol),k="POST",z=t.maxUploadRetryTime,U=new yy(O,k,c5(t,n),z);return U.urlParams=L,U.headers=d,U.body=I.uploadData(),U.errorHandler=ow(e),U}class g5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,c){if(this.sent_)throw Oc("cannot .send() more than once");if(Si(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class x5 extends g5{initXhr(){this.xhr_.responseType="text"}}function by(){return new x5}class hl{constructor(e,n){this._service=e,n instanceof Es?this._location=n:this._location=Es.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hl(e,n)}get root(){const e=new Es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rw(this._location.path)}get storage(){return this._service}get parent(){const e=t5(this._location.path);if(e===null)return null;const n=new Es(this._location.bucket,e);return new hl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw DL(e)}}function y5(t,e,n){t._throwIfRoot("uploadBytes");const r=p5(t.storage,t._location,aw(),new ri(e,!0),n);return t.storage.makeRequestWithTokens(r,by).then(i=>({metadata:i,ref:t}))}function b5(t){t._throwIfRoot("getDownloadURL");const e=d5(t.storage,t._location,aw());return t.storage.makeRequestWithTokens(e,by).then(n=>{if(n===null)throw kL();return n})}function v5(t){t._throwIfRoot("deleteObject");const e=h5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,by)}function _5(t,e){const n=n5(t._location.path,e),r=new Es(t._location.bucket,n);return new hl(t.storage,r)}function S5(t){return/^[A-Za-z]+:\/\//.test(t)}function N5(t,e){return new hl(t,e)}function uw(t,e){if(t instanceof vy){const n=t;if(n._bucket==null)throw RL();const r=new hl(n,n._bucket);return e!=null?uw(r,e):r}else return e!==void 0?_5(t,e):t}function T5(t,e){if(e&&S5(e)){if(t instanceof vy)return N5(t,e);throw rx("To use ref(service, url), the first argument must be a Storage instance.")}else return uw(t,e)}function cS(t,e){const n=e?.[WE];return n==null?null:Es.makeFromBucketSpec(n,t)}function E5(t,e,n,r={}){t.host=`${e}:${n}`;const i=Si(e);i&&(_x(`https://${t.host}/b`),Sx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:c}=r;c&&(t._overrideAuthToken=typeof c=="string"?c:MN(c,t.app.options.projectId))}class vy{constructor(e,n,r,i,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=XE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yL,this._maxUploadRetryTime=bL,this._requests=new Set,i!=null?this._bucket=Es.makeFromBucketSpec(i,this._host):this._bucket=cS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Es.makeFromBucketSpec(this._url,e):this._bucket=cS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Fs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hl(this,e)}_makeRequest(e,n,r,i,c=!0){if(this._deleted)return new ML(JE());{const d=$L(e,this._appId,r,i,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const uS="@firebase/storage",dS="0.14.0";const dw="storage";function w5(t,e,n){return t=qt(t),y5(t,e,n)}function A5(t){return t=qt(t),b5(t)}function C5(t){return t=qt(t),v5(t)}function hS(t,e){return t=qt(t),T5(t,e)}function R5(t=Ex(),e){t=qt(t);const r=Ef(t,dw).getImmediate({identifier:e}),i=kN("storage");return i&&j5(r,...i),r}function j5(t,e,n,r={}){E5(t,e,n,r)}function k5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new vy(n,r,i,e,ml)}function I5(){ll(new fi(dw,k5,"PUBLIC").setMultipleInstances(!0)),Ir(uS,dS,""),Ir(uS,dS,"esm2020")}I5();const D5={apiKey:"AIzaSyAu2gp1zFL3_P-7rj9FaSgSxUWxvGGlykU",authDomain:"data-wrangler-2026.firebaseapp.com",projectId:"data-wrangler-2026",storageBucket:"data-wrangler-2026.firebasestorage.app",messagingSenderId:"584876627446",appId:"1:584876627446:web:33ffd3e73193549f3023d7",measurementId:"G-ZZ05LJ5K3S"},_y=LN(D5),Rr=eL(_y),fS=KM(_y),mS=R5(_y);function Sy(){const[t,e]=E.useState(null),[n,r]=E.useState(!0),[i,c]=E.useState(null);E.useEffect(()=>O3(fS,p=>{e(p),r(!1)}),[]);const d=E.useCallback(async()=>{try{return c(null),(await j3(fS)).user}catch(m){const p=m instanceof Error?m.message:"Failed to sign in";return c(p),null}},[]);return{user:t,loading:n,error:i,signIn:d}}function pS(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t[Math.floor(Math.random()*t.length)];return e}function M5(t,e){const n=t.filter(y=>y.tier==="tier1").sort((y,v)=>y.rank-v.rank),r=t.filter(y=>y.tier==="tier2").sort((y,v)=>y.rank-v.rank),i=t.filter(y=>y.tier==="tier3").sort((y,v)=>y.rank-v.rank),c=new Set(t.map(y=>y.teamNumber)),d=e.filter(y=>!c.has(y)).sort((y,v)=>y-v);let m=1;const p=[];for(const y of[...n,...r,...i])p.push({teamNumber:y.teamNumber,originalTier:y.tier,originalRank:y.rank,globalRank:m++,status:"available",pickedByAlliance:null,notes:y.notes,tags:y.tags,flagged:y.flagged});let x=1;for(const y of d)p.push({teamNumber:y,originalTier:"unranked",originalRank:x++,globalRank:m++,status:"available",pickedByAlliance:null,notes:"",tags:[],flagged:!1});return p}function P5(){return Array.from({length:8},(t,e)=>({number:e+1,captain:null,firstPick:null,secondPick:null,backupPick:null}))}function O5(t,e){return{sessionId:t,sessionCode:e.sessionCode,eventKey:e.eventKey,createdBy:e.createdBy,createdAt:e.createdAt?.toDate?.()?.toISOString?.()??new Date().toISOString(),participants:e.participants??{},editorUids:e.editorUids??[],teams:e.teams??[],alliances:e.alliances??[],status:e.status??"active",showTier3:e.showTier3??!1,messages:e.messages??[],lastUpdatedBy:e.lastUpdatedBy??""}}function hw(t){const[e,n]=E.useState(null),[r,i]=E.useState(!1),[c,d]=E.useState(null),m=E.useRef(null),p=!e||!t?null:e.participants[t]?.role??null,x=p==="admin"||p==="editor";E.useEffect(()=>()=>{m.current&&m.current()},[]);const y=E.useCallback(S=>{m.current&&m.current();const C=tl(Rr,"sessions",S),P=gL(C,w=>{w.exists()?n(O5(w.id,w.data())):(n(null),d("Session not found")),i(!1)},w=>{d(w.message),i(!1)});m.current=P},[]),v=E.useCallback(async S=>{if(!t)throw new Error("Must be signed in to create a session");i(!0),d(null);try{let C=pS(),P=0;for(;P<5;){const B=ex(Rh(Rr,"sessions"),tx("sessionCode","==",C));if((await nx(B)).empty)break;C=pS(),P++}const w=tl(Rh(Rr,"sessions")),A=M5(S.teams,S.allEventTeamNumbers),D=P5(),q={displayName:S.displayName,role:"admin",joinedAt:new Date().toISOString()};S.teamNumber&&(q.teamNumber=S.teamNumber);const be={sessionCode:C,eventKey:S.eventKey,createdBy:t,createdAt:jt.now(),status:"active",showTier3:!1,editorUids:[],participants:{[t]:q},teams:A,alliances:D,messages:[],lastUpdatedBy:t};return await sx(w,be),y(w.id),{sessionCode:C,sessionId:w.id}}catch(C){const P=C instanceof Error?C.message:"Failed to create session";throw d(P),i(!1),C}},[t,y]),T=E.useCallback(async(S,C,P)=>{if(!t)throw new Error("Must be signed in to join a session");i(!0),d(null);try{const w=ex(Rh(Rr,"sessions"),tx("sessionCode","==",S.toUpperCase())),A=await nx(w);if(A.empty)return d("Session not found. Check the code and try again."),i(!1),null;const D=A.docs[0],q=tl(Rr,"sessions",D.id),be={displayName:C,role:"viewer",joinedAt:new Date().toISOString()};return P&&(be.teamNumber=P),await iS(q,{[`participants.${t}`]:be,lastUpdatedBy:t}),y(D.id),{sessionId:D.id}}catch(w){const A=w instanceof Error?w.message:"Failed to join session";return d(A),i(!1),null}},[t,y]),I=E.useCallback(()=>{m.current&&(m.current(),m.current=null),n(null),d(null)},[]),L=E.useCallback(async S=>{if(!e||!t)return;const C=tl(Rr,"sessions",e.sessionId);await iS(C,{...S,lastUpdatedBy:t})},[e,t]),O=E.useCallback(async(S,C)=>{if(!e||!x)return;const P=e.teams.map(A=>A.teamNumber===S?{...A,status:"picked",pickedByAlliance:C}:A),w=e.alliances.map(A=>A.number!==C?A:A.captain?A.firstPick?A.secondPick?A.backupPick?A:{...A,backupPick:S}:{...A,secondPick:S}:{...A,firstPick:S}:{...A,captain:S});await L({teams:P,alliances:w})},[e,x,L]),k=E.useCallback(async S=>{if(!e||!x)return;const C=e.teams.map(P=>P.teamNumber===S?{...P,status:"declined"}:P);await L({teams:C})},[e,x,L]),z=E.useCallback(async S=>{if(!e||!x||!e.teams.find(A=>A.teamNumber===S))return;const P=e.teams.map(A=>A.teamNumber===S?{...A,status:"available",pickedByAlliance:null}:A),w=e.alliances.map(A=>A.captain===S?{...A,captain:null}:A.firstPick===S?{...A,firstPick:null}:A.secondPick===S?{...A,secondPick:null}:A.backupPick===S?{...A,backupPick:null}:A);await L({teams:P,alliances:w})},[e,x,L]),U=E.useCallback(async()=>{!e||!x||await L({showTier3:!0})},[e,x,L]),$=E.useCallback(async S=>{!e||p!=="admin"||await L({status:S})},[e,p,L]),X=E.useCallback(async S=>{if(!e||p!=="admin")return;const C=e.participants[S];!C||C.role==="admin"||await L({[`participants.${S}.role`]:"editor",editorUids:[...e.editorUids,S]})},[e,p,L]),K=E.useCallback(async S=>{if(!e||p!=="admin")return;const C=e.participants[S];!C||C.role==="admin"||await L({[`participants.${S}.role`]:"viewer",editorUids:e.editorUids.filter(P=>P!==S)})},[e,p,L]),re=E.useCallback(async S=>{if(!e||p!=="admin"||S===t)return;const C={...e.participants};delete C[S],await L({participants:C,editorUids:e.editorUids.filter(P=>P!==S)})},[e,p,t,L]),j=E.useCallback(async S=>{if(!e||!t)return;const C=e.participants[t];if(!C)return;const P={id:`${t}-${Date.now()}`,uid:t,displayName:C.displayName,teamNumber:C.teamNumber,text:S,timestamp:new Date().toISOString()},w=[...e.messages,P].slice(-100);await L({messages:w})},[e,t,L]);return{session:e,loading:r,error:c,myRole:p,isEditor:x,createSession:v,joinSession:T,leaveSession:I,markTeamPicked:O,markTeamDeclined:k,undoTeamStatus:z,revealTier3:U,setSessionStatus:$,promoteToEditor:X,demoteToViewer:K,removeParticipant:re,sendMessage:j,startListening:y}}function L5({onCreateSession:t,onJoinSession:e,loading:n,error:r}){const i=ht(le=>le.pickList),c=$e(le=>le.eventCode),d=$e(le=>le.teamStatistics),m=nt(le=>le.lastSessionCode),p=nt(le=>le.lastDisplayName),x=nt(le=>le.lastTeamNumber),y=nt(le=>le.activeSessionId),v=nt(le=>le.setLastDisplayName),T=nt(le=>le.setLastTeamNumber),[I,L]=E.useState(p),[O,k]=E.useState(x),[z,U]=E.useState(""),[$,X]=E.useState(p),[K,re]=E.useState(x),j=i?.teams.filter(le=>le.tier==="tier1").length??0,S=i?.teams.filter(le=>le.tier==="tier2").length??0,C=i?.teams.filter(le=>le.tier==="tier3").length??0,P=j+S+C,w=d.length,A=w-P,D=!!y,q=le=>{const H=parseInt(le.trim(),10);return H&&!isNaN(H)?H:void 0},be=async()=>{!I.trim()||!c||(v(I.trim()),O.trim()&&T(O.trim()),await t(c,I.trim(),q(O)))},B=async()=>{!z.trim()||!$.trim()||(v($.trim()),K.trim()&&T(K.trim()),await e(z.trim().toUpperCase(),$.trim(),q(K)))},ce=async()=>{!m||!$.trim()||(v($.trim()),K.trim()&&T(K.trim()),await e(m,$.trim(),q(K)))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Alliance Selection"}),o.jsx("p",{className:"text-textSecondary mt-1",children:"Create or join a real-time alliance selection session"})]}),r&&o.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg",children:r}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[o.jsx(al,{size:20}),"Create New Session"]}),D?o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"flex items-start gap-3 bg-warning/10 border border-warning/30 text-warning px-4 py-3 rounded-lg",children:[o.jsx(Dh,{size:20,className:"flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:"Session Already Active"}),o.jsx("p",{className:"text-sm text-textSecondary mt-1",children:'You already have an active session. Use the "Live Alliance Selection" banner at the top of any page to rejoin, or use the Rejoin button below.'})]})]})}):c?w===0?o.jsx("p",{className:"text-textSecondary",children:"No teams loaded. Go to the Event page to load event data first."}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-textSecondary mb-1",children:"Event"}),o.jsx("p",{className:"font-semibold",children:c})]}),o.jsxs("div",{className:"flex gap-4 flex-wrap",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-textSecondary",children:"Tier 1"}),o.jsx("p",{className:"text-lg font-bold text-success",children:j})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-textSecondary",children:"Tier 2"}),o.jsx("p",{className:"text-lg font-bold text-warning",children:S})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-textSecondary",children:"Tier 3"}),o.jsx("p",{className:"text-lg font-bold text-blueAlliance",children:C})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-textSecondary",children:"Unranked"}),o.jsx("p",{className:"text-lg font-bold text-textSecondary",children:A})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-textSecondary",children:"Total"}),o.jsx("p",{className:"text-lg font-bold",children:w})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Your Name *"}),o.jsx("input",{type:"text",value:I,onChange:le=>L(le.target.value),placeholder:"Enter your name",className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Team Number"}),o.jsx("input",{type:"text",value:O,onChange:le=>k(le.target.value.replace(/\D/g,"")),placeholder:"e.g. 148",maxLength:5,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono"})]})]}),o.jsxs("button",{onClick:be,disabled:n||!I.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-success text-background font-semibold rounded-lg hover:bg-success/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(Zs,{size:18,className:"animate-spin"}):o.jsx(al,{size:18}),"Create Session (",w," teams)"]})]}):o.jsx("p",{className:"text-textSecondary",children:"No event loaded. Go to the Event page to set up an event first."})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border",children:[o.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[o.jsx(Oh,{size:20}),"Join Session"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Session Code *"}),o.jsx("input",{type:"text",value:z,onChange:le=>U(le.target.value.toUpperCase()),placeholder:"e.g. A7K3M2",maxLength:6,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono text-lg tracking-widest uppercase"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Your Name *"}),o.jsx("input",{type:"text",value:$,onChange:le=>X(le.target.value),placeholder:"Enter your name",className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Team Number"}),o.jsx("input",{type:"text",value:K,onChange:le=>re(le.target.value.replace(/\D/g,"")),placeholder:"e.g. 148",maxLength:5,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono"})]})]}),o.jsxs("button",{onClick:B,disabled:n||!z.trim()||!$.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blueAlliance text-white font-semibold rounded-lg hover:bg-blueAlliance/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(Zs,{size:18,className:"animate-spin"}):o.jsx(Oh,{size:18}),"Join Session"]}),m&&o.jsxs("button",{onClick:ce,disabled:n||!$.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-surfaceElevated border border-border text-textPrimary font-semibold rounded-lg hover:bg-interactive transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(vj,{size:16}),"Rejoin: ",m]})]})]})]})]})}function V5({session:t,myRole:e,onLeave:n,onSetStatus:r,onShowParticipants:i,participantCount:c}){const[d,m]=E.useState(null),[p,x]=E.useState(!1),y=`${window.location.origin}/frc-2026-analytics/alliance-selection/join/${t.sessionCode}`,v=async()=>{await navigator.clipboard.writeText(t.sessionCode),m("code"),setTimeout(()=>m(null),2e3)},T=async()=>{await navigator.clipboard.writeText(y),m("link"),setTimeout(()=>m(null),2e3)},I=`https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(y)}`;return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-surface rounded-lg border border-border p-3 sm:p-4",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold uppercase tracking-wide ${t.status==="active"?"bg-success/20 text-success":"bg-textMuted/20 text-textMuted"}`,children:t.status==="active"?"Live":"Completed"}),o.jsxs("button",{onClick:v,className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors",title:"Copy session code",children:[o.jsx("span",{className:"font-mono font-bold tracking-widest",children:t.sessionCode}),d==="code"?o.jsx(xh,{size:14,className:"text-success"}):o.jsx(DR,{size:14,className:"text-textSecondary"})]}),o.jsxs("button",{onClick:T,className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",title:"Copy invite link",children:[d==="link"?o.jsx(xh,{size:14,className:"text-success"}):o.jsx(f_,{size:14}),o.jsx("span",{className:"hidden sm:inline",children:d==="link"?"Copied!":"Share Link"})]}),o.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",title:"Show QR code",children:[o.jsx(pj,{size:14}),o.jsx("span",{className:"hidden sm:inline",children:"QR"})]}),o.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",children:[o.jsx(yf,{size:14}),o.jsx("span",{children:c})]}),e&&o.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${e==="admin"?"bg-warning/20 text-warning":e==="editor"?"bg-blueAlliance/20 text-blueAlliance":"bg-textMuted/20 text-textMuted"}`,children:e}),o.jsx("div",{className:"flex-1"}),e==="admin"&&o.jsxs("button",{onClick:()=>r(t.status==="active"?"completed":"active"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-card rounded border border-border hover:bg-interactive transition-colors text-sm",children:[t.status==="active"?o.jsx(cj,{size:14}):o.jsx(Lh,{size:14}),o.jsx("span",{className:"hidden sm:inline",children:t.status==="active"?"End":"Resume"})]}),o.jsxs("button",{onClick:n,className:"flex items-center gap-1.5 px-3 py-1.5 bg-danger/10 border border-danger/30 text-danger rounded hover:bg-danger/20 transition-colors text-sm",children:[o.jsx(ZR,{size:14}),o.jsx("span",{className:"hidden sm:inline",children:"Leave"})]})]})}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:()=>x(!1),children:o.jsxs("div",{className:"bg-surface rounded-lg border border-border p-6 max-w-sm w-full text-center",onClick:L=>L.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-bold text-lg",children:"Scan to Join"}),o.jsx("button",{onClick:()=>x(!1),className:"p-1 hover:bg-interactive rounded transition-colors",children:o.jsx(ws,{size:18})})]}),o.jsx("div",{className:"bg-white rounded-lg p-4 inline-block mb-4",children:o.jsx("img",{src:I,alt:"QR Code",width:250,height:250})}),o.jsx("p",{className:"text-sm text-textSecondary mb-1",children:"Session Code"}),o.jsx("p",{className:"font-mono font-bold text-2xl tracking-widest mb-3",children:t.sessionCode}),o.jsxs("button",{onClick:T,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blueAlliance text-white rounded-lg hover:bg-blueAlliance/90 transition-colors text-sm font-semibold",children:[d==="link"?o.jsx(xh,{size:14}):o.jsx(f_,{size:14}),d==="link"?"Link Copied!":"Copy Invite Link"]})]})})]})}function U5({value:t,onChange:e,selectedCount:n,onClearCompare:r}){return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(fx,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-textMuted"}),o.jsx("input",{type:"text",value:t,onChange:i=>e(i.target.value),placeholder:"Search team # or name...",className:"w-full bg-card border border-border rounded-lg pl-9 pr-3 py-2 text-sm text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"}),t&&o.jsx("button",{onClick:()=>e(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-textMuted hover:text-textPrimary",children:o.jsx(ws,{size:14})})]}),n>0&&o.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-2 bg-blueAlliance/20 border border-blueAlliance/30 text-blueAlliance rounded-lg text-sm font-semibold hover:bg-blueAlliance/30 transition-colors",children:[o.jsx(d_,{size:14}),n,"/2",o.jsx(ws,{size:12})]}),n===0&&o.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 bg-card border border-border rounded-lg text-sm text-textMuted",children:[o.jsx(d_,{size:14}),"Compare"]})]})}function z5({alliances:t,onSelect:e,onClose:n}){const r=E.useRef(null);E.useEffect(()=>{const c=m=>{r.current&&!r.current.contains(m.target)&&n()},d=m=>{m.key==="Escape"&&n()};return document.addEventListener("mousedown",c),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",d)}},[n]);const i=c=>{let d=0;return c.captain&&d++,c.firstPick&&d++,c.secondPick&&d++,c.backupPick&&d++,d};return o.jsxs("div",{ref:r,className:"absolute right-0 top-full mt-1 z-30 bg-surfaceElevated border border-border rounded-lg shadow-xl p-2 min-w-[200px]",children:[o.jsx("p",{className:"text-xs text-textMuted px-2 py-1 mb-1",children:"Pick for alliance:"}),o.jsx("div",{className:"grid grid-cols-2 gap-1",children:t.map(c=>{const d=i(c),m=d>=4;return o.jsxs("button",{onClick:()=>{m||(e(c.number),n())},disabled:m,className:`px-3 py-2 rounded text-sm font-semibold transition-colors text-left ${m?"bg-card text-textMuted cursor-not-allowed":"bg-card hover:bg-interactive text-textPrimary"}`,children:[o.jsxs("div",{children:["A",c.number]}),o.jsxs("div",{className:"text-xs text-textSecondary",children:[d,"/4 filled"]})]},c.number)})})]})}function F5({team:t,teamStats:e,isEditor:n,isSelectedForCompare:r,alliances:i,onMarkPicked:c,onMarkDeclined:d,onUndoStatus:m,onToggleCompare:p}){const[x,y]=E.useState(!1),v=t.status!=="available",T=t.status==="picked",I=t.status==="declined",L=t.originalTier==="tier1"?"T1":t.originalTier==="tier2"?"T2":t.originalTier==="tier3"?"T3":"",O=t.originalTier==="tier1"?"bg-success/20 text-success":t.originalTier==="tier2"?"bg-warning/20 text-warning":t.originalTier==="tier3"?"bg-blueAlliance/20 text-blueAlliance":"bg-surfaceElevated text-textMuted";return o.jsxs("div",{className:`relative flex items-center gap-2 sm:gap-3 px-3 py-2.5 rounded-lg border transition-all cursor-pointer ${r?"border-blueAlliance bg-blueAlliance/10":T?"border-success/30 bg-success/5 opacity-40":I?"border-danger/30 bg-danger/5 opacity-30":"border-border bg-card hover:bg-interactive"}`,onClick:()=>{v||p(t.teamNumber)},children:[o.jsxs("div",{className:`flex-shrink-0 w-8 text-center text-sm font-bold ${v?"text-textMuted line-through":"text-textSecondary"}`,children:["#",t.globalRank]}),o.jsx("span",{className:`flex-shrink-0 px-1.5 py-0.5 rounded text-[10px] font-bold ${O}`,children:L}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`font-bold ${I?"line-through text-textMuted":""}`,children:t.teamNumber}),e?.teamName&&o.jsx("span",{className:"text-sm text-textSecondary truncate",children:e.teamName}),t.flagged&&o.jsx(Mh,{size:12,className:"text-danger flex-shrink-0"})]}),e&&!v&&o.jsxs("div",{className:"flex gap-3 text-xs text-textSecondary mt-0.5",children:[o.jsxs("span",{children:[e.avgTotalPoints.toFixed(1)," pts"]}),o.jsxs("span",{children:["L3: ",e.level3ClimbRate.toFixed(0),"%"]}),o.jsxs("span",{children:["Auto: ",e.avgAutoPoints.toFixed(1)]})]}),T&&t.pickedByAlliance&&o.jsxs("div",{className:"text-xs text-success mt-0.5",children:["Picked by Alliance ",t.pickedByAlliance]}),I&&o.jsx("div",{className:"text-xs text-danger mt-0.5",children:"Declined"})]}),n&&o.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",onClick:k=>k.stopPropagation(),children:v?o.jsx("button",{onClick:()=>m(t.teamNumber),className:"p-1.5 rounded bg-surfaceElevated hover:bg-interactive text-textSecondary hover:text-textPrimary transition-colors",title:"Undo",children:o.jsx(Gj,{size:14})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>y(!x),className:"flex items-center gap-1 px-2 py-1 rounded bg-success/20 text-success hover:bg-success/30 text-xs font-semibold transition-colors",children:["Pick",o.jsx(fl,{size:12})]}),x&&o.jsx(z5,{alliances:i,onSelect:k=>c(t.teamNumber,k),onClose:()=>y(!1)})]}),o.jsx("button",{onClick:()=>d(t.teamNumber),className:"p-1.5 rounded bg-danger/10 text-danger hover:bg-danger/20 transition-colors",title:"Mark as declined",children:o.jsx(gh,{size:14})})]})})]})}function B5({messages:t,onSend:e,myUid:n}){const[r,i]=E.useState(""),[c,d]=E.useState(!1),m=E.useRef(null),p=E.useRef(t.length);E.useEffect(()=>{t.length>p.current&&m.current&&(m.current.scrollTop=m.current.scrollHeight),p.current=t.length},[t.length]);const x=async()=>{const T=r.trim();T&&(i(""),await e(T))},y=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),x())},v=T=>new Date(T).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return o.jsxs("div",{className:"bg-surface rounded-lg border border-border overflow-hidden",children:[o.jsxs("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-between px-3 py-2 bg-surfaceElevated hover:bg-interactive transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sj,{size:14}),o.jsx("span",{className:"text-sm font-bold",children:"Chat"}),t.length>0&&o.jsxs("span",{className:"text-xs text-textMuted",children:["(",t.length,")"]})]}),c?o.jsx(gf,{size:14}):o.jsx(fl,{size:14})]}),!c&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{ref:m,className:"h-48 overflow-y-auto px-3 py-2 space-y-1.5",style:{WebkitOverflowScrolling:"touch"},children:[t.length===0&&o.jsx("p",{className:"text-textMuted text-xs text-center py-4",children:"No messages yet"}),t.map(T=>{const I=T.uid===n;return o.jsxs("div",{className:`flex flex-col ${I?"items-end":"items-start"}`,children:[o.jsxs("div",{className:`max-w-[85%] rounded-lg px-2.5 py-1.5 ${I?"bg-blueAlliance/20":"bg-card"}`,children:[!I&&o.jsxs("div",{className:"text-[10px] font-semibold text-textSecondary mb-0.5",children:[T.displayName,T.teamNumber&&o.jsxs("span",{className:"text-textMuted ml-1",children:["#",T.teamNumber]})]}),o.jsx("p",{className:"text-sm break-words",children:T.text})]}),o.jsx("span",{className:"text-[10px] text-textMuted mt-0.5 px-1",children:v(T.timestamp)})]},T.id)})]}),o.jsxs("div",{className:"border-t border-border px-2 py-2 flex gap-2",children:[o.jsx("input",{type:"text",value:r,onChange:T=>i(T.target.value),onKeyDown:y,placeholder:"Type a message...",className:"flex-1 bg-card border border-border rounded px-2.5 py-1.5 text-sm text-textPrimary placeholder-textMuted focus:outline-none focus:border-success"}),o.jsx("button",{onClick:x,disabled:!r.trim(),className:"p-1.5 rounded bg-blueAlliance text-white hover:bg-blueAlliance/80 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:o.jsx(Tj,{size:14})})]})]})]})}function gS({alliance:t,isHighlighted:e,onHighlight:n}){const r=[{label:"Capt",value:t.captain},{label:"Pick 1",value:t.firstPick},{label:"Pick 2",value:t.secondPick},{label:"Backup",value:t.backupPick}],i=r.filter(c=>c.value!==null).length;return o.jsxs("button",{onClick:n,className:`w-full text-left p-2.5 rounded-lg border transition-colors ${e?"border-success bg-success/10":"border-border bg-card hover:bg-interactive"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[o.jsxs("span",{className:"text-sm font-bold",children:["Alliance ",t.number]}),o.jsxs("span",{className:"text-[10px] text-textMuted",children:[i,"/4"]})]}),o.jsx("div",{className:"space-y-0.5",children:r.map(c=>o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("span",{className:"text-textMuted w-10 flex-shrink-0",children:c.label}),c.value?o.jsx("span",{className:"font-semibold text-textPrimary",children:c.value}):o.jsx("span",{className:"text-textMuted",children:"---"})]},c.label))})]})}function H5({alliances:t,highlightedAlliance:e,onHighlightAlliance:n}){return o.jsxs("div",{className:"bg-surface rounded-lg border border-border p-3 sm:p-4",children:[o.jsx("h3",{className:"text-sm font-bold text-textSecondary mb-3 uppercase tracking-wide",children:"Alliances"}),o.jsx("div",{className:"hidden sm:grid grid-cols-2 gap-2",children:t.map(r=>o.jsx(gS,{alliance:r,isHighlighted:e===r.number,onHighlight:()=>n(e===r.number?null:r.number)},r.number))}),o.jsx("div",{className:"sm:hidden flex gap-2 overflow-x-auto pb-2 -mx-1 px-1",style:{WebkitOverflowScrolling:"touch"},children:t.map(r=>o.jsx("div",{className:"flex-shrink-0 w-[140px]",children:o.jsx(gS,{alliance:r,isHighlighted:e===r.number,onHighlight:()=>n(e===r.number?null:r.number)})},r.number))})]})}function q5({participants:t,myUid:e,isAdmin:n,onPromote:r,onDemote:i,onRemove:c,onClose:d}){const m=Object.entries(t).sort(([,x],[,y])=>{const v={admin:0,editor:1,viewer:2};return v[x.role]-v[y.role]}),p=x=>{switch(x){case"admin":return o.jsx(XS,{size:14,className:"text-warning"});case"editor":return o.jsx(dj,{size:14,className:"text-blueAlliance"});case"viewer":return o.jsx(tu,{size:14,className:"text-textMuted"})}};return o.jsxs("div",{className:"bg-surface rounded-lg border border-border p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"font-bold",children:["Participants (",m.length,")"]}),o.jsx("button",{onClick:d,className:"p-1 hover:bg-interactive rounded transition-colors",children:o.jsx(ws,{size:16})})]}),o.jsx("div",{className:"space-y-2",children:m.map(([x,y])=>{const v=x===e,T=n&&!v&&y.role!=="admin";return o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded bg-card",children:[p(y.role),o.jsxs("span",{className:"flex-1 text-sm font-semibold",children:[y.displayName,y.teamNumber&&o.jsxs("span",{className:"text-textSecondary font-normal ml-1",children:["#",y.teamNumber]}),v&&o.jsx("span",{className:"text-textMuted font-normal ml-1",children:"(you)"})]}),o.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${y.role==="admin"?"bg-warning/20 text-warning":y.role==="editor"?"bg-blueAlliance/20 text-blueAlliance":"bg-textMuted/20 text-textMuted"}`,children:y.role}),T&&o.jsxs("div",{className:"flex items-center gap-1",children:[y.role==="viewer"?o.jsx("button",{onClick:()=>r(x),className:"p-1 rounded hover:bg-interactive text-textSecondary hover:text-success transition-colors",title:"Promote to editor",children:o.jsx(gf,{size:14})}):o.jsx("button",{onClick:()=>i(x),className:"p-1 rounded hover:bg-interactive text-textSecondary hover:text-warning transition-colors",title:"Demote to viewer",children:o.jsx(fl,{size:14})}),o.jsx("button",{onClick:()=>c(x),className:"p-1 rounded hover:bg-interactive text-textSecondary hover:text-danger transition-colors",title:"Remove",children:o.jsx(Qj,{size:14})})]})]},x)})})]})}function fw({session:t,userId:e,myRole:n,isEditor:r,onMarkPicked:i,onMarkDeclined:c,onUndoStatus:d,onRevealTier3:m,onSetStatus:p,onLeave:x,onPromote:y,onDemote:v,onRemoveParticipant:T,onSendMessage:I}){const L=$e(H=>H.teamStatistics),O=nt(H=>H.searchQuery),k=nt(H=>H.setSearchQuery),z=nt(H=>H.selectedTeamsForCompare),U=nt(H=>H.toggleTeamForCompare),$=nt(H=>H.clearCompareSelection),X=nt(H=>H.showComparisonModal),K=nt(H=>H.setShowComparisonModal),re=nt(H=>H.highlightedAlliance),j=nt(H=>H.setHighlightedAlliance),S=nt(H=>H.showParticipants),C=nt(H=>H.setShowParticipants),P=E.useMemo(()=>{let H=[...t.teams];if(t.showTier3||(H=H.filter(pe=>pe.originalTier!=="tier3")),re){const pe=t.alliances.find(V=>V.number===re);if(pe){const V=[pe.captain,pe.firstPick,pe.secondPick,pe.backupPick].filter(Boolean);H=H.map(Q=>({...Q,_isAllianceMember:V.includes(Q.teamNumber)}))}}if(O){const pe=O.toLowerCase();H=H.filter(V=>{const Q=L.find(fe=>fe.teamNumber===V.teamNumber);return V.teamNumber.toString().includes(pe)||Q?.teamName?.toLowerCase().includes(pe)})}return H.sort((pe,V)=>{const Q=pe.status!=="available"?1:0,fe=V.status!=="available"?1:0;return Q!==fe?Q-fe:pe.globalRank-V.globalRank}),H},[t.teams,t.showTier3,O,L,re,t.alliances]),w=t.teams.filter(H=>H.status==="available"&&(t.showTier3||H.originalTier!=="tier3")).length,A=t.teams.filter(H=>H.status==="picked").length,D=t.teams.filter(H=>H.originalTier==="tier3").length,q=t.teams.filter(H=>H.originalTier==="unranked").length,be=L.find(H=>H.teamNumber===z[0]),B=L.find(H=>H.teamNumber===z[1]),ce=X&&be&&B,le=Object.keys(t.participants).length;return o.jsxs("div",{className:"space-y-3",children:[o.jsx(V5,{session:t,myRole:n,onLeave:x,onSetStatus:p,onShowParticipants:()=>C(!S),participantCount:le}),o.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsx(U5,{value:O,onChange:k,selectedCount:z.length,onClearCompare:$}),o.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[o.jsxs("span",{className:"text-textSecondary",children:[o.jsx("span",{className:"font-bold text-textPrimary",children:w})," available"]}),o.jsxs("span",{className:"text-textSecondary",children:[o.jsx("span",{className:"font-bold text-success",children:A})," picked"]}),q>0&&o.jsxs("span",{className:"text-textSecondary",children:[o.jsx("span",{className:"font-bold text-textMuted",children:q})," unranked"]}),z.length>0&&o.jsxs("span",{className:"text-blueAlliance text-xs",children:["Click teams to compare (",z.length,"/2)"]})]}),o.jsxs("div",{className:"space-y-1.5",children:[P.map(H=>o.jsx(F5,{team:H,teamStats:L.find(pe=>pe.teamNumber===H.teamNumber),isEditor:r,isSelectedForCompare:z.includes(H.teamNumber),alliances:t.alliances,onMarkPicked:i,onMarkDeclined:c,onUndoStatus:d,onToggleCompare:U},H.teamNumber)),P.length===0&&o.jsx("div",{className:"text-center py-8 text-textMuted",children:O?"No teams match your search.":"No teams in this session."})]}),!t.showTier3&&D>0&&r&&o.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-surfaceElevated border border-border rounded-lg text-textSecondary hover:bg-interactive hover:text-textPrimary transition-colors",children:[o.jsx(fl,{size:16}),"Reveal Tier 3 Backups (",D," teams)"]}),!t.showTier3&&D>0&&!r&&o.jsxs("div",{className:"text-center py-3 text-textMuted text-sm",children:[D," backup teams hidden (editor can reveal)"]})]}),o.jsxs("div",{className:"lg:w-80 xl:w-96 space-y-3",children:[o.jsx(B5,{messages:t.messages,onSend:I,myUid:e}),o.jsx(H5,{alliances:t.alliances,highlightedAlliance:re,onHighlightAlliance:j})]})]}),S&&o.jsx(q5,{participants:t.participants,myUid:e,isAdmin:n==="admin",onPromote:y,onDemote:v,onRemove:T,onClose:()=>C(!1)}),ce&&o.jsx(eN,{team1:be,team2:B,onPickTeam:()=>$(),onClose:()=>{K(!1),$()}})]})}function xS(){const{sessionCode:t}=lx(),e=pu(),{user:n,loading:r,signIn:i}=Sy(),c=ht(ge=>ge.pickList),d=$e(ge=>ge.teamStatistics),m=nt(ge=>ge.setLastSessionCode),p=nt(ge=>ge.setLastDisplayName),x=nt(ge=>ge.setLastTeamNumber),y=nt(ge=>ge.lastDisplayName),v=nt(ge=>ge.lastTeamNumber),T=nt(ge=>ge.activeSessionId),I=nt(ge=>ge.setActiveSessionId),[L,O]=E.useState(!1),[k,z]=E.useState(y),[U,$]=E.useState(v),{session:X,loading:K,error:re,myRole:j,isEditor:S,createSession:C,joinSession:P,leaveSession:w,markTeamPicked:A,markTeamDeclined:D,undoTeamStatus:q,revealTier3:be,setSessionStatus:B,promoteToEditor:ce,demoteToViewer:le,removeParticipant:H,sendMessage:pe,startListening:V}=hw(n?.uid??null);E.useEffect(()=>{!n&&!r&&i()},[n,r,i]),E.useEffect(()=>{!t||!n||X||K||(T?V(T):O(!0))},[t,n,X,K,T,V]);const Q=E.useCallback(async(ge,ke,J)=>{if(n||await i(),!c)return;const Y=d.map(Le=>Le.teamNumber),xe=await C({eventKey:ge,teams:c.teams,allEventTeamNumbers:Y,displayName:ke,teamNumber:J});m(xe.sessionCode),I(xe.sessionId),e(`/alliance-selection/${xe.sessionCode}`)},[n,i,c,d,C,m,I,e]),fe=E.useCallback(async(ge,ke,J)=>{n||await i();const Y=await P(ge,ke,J);Y&&(m(ge),I(Y.sessionId),e(`/alliance-selection/${ge}`))},[n,i,P,m,I,e]),ye=E.useCallback(async()=>{if(!t||!k.trim())return;p(k.trim());const ge=U.trim()?parseInt(U.trim(),10):void 0;U.trim()&&x(U.trim()),O(!1),await fe(t,k.trim(),ge&&!isNaN(ge)?ge:void 0)},[t,k,U,p,x,fe]),Re=E.useCallback(()=>{w(),I(null),e("/alliance-selection")},[w,I,e]);return r?o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsx(Zs,{size:32,className:"animate-spin text-textSecondary"})}):t?L?o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border w-full max-w-md",children:[o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Join Session"}),o.jsxs("p",{className:"text-textSecondary text-sm mb-4",children:["Session ",o.jsx("span",{className:"font-mono font-bold text-textPrimary",children:t})]}),re&&o.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-3 py-2 rounded-lg text-sm mb-4",children:re}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Your Name *"}),o.jsx("input",{type:"text",value:k,onChange:ge=>z(ge.target.value),placeholder:"Enter your name",className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Team Number"}),o.jsx("input",{type:"text",value:U,onChange:ge=>$(ge.target.value.replace(/\D/g,"")),placeholder:"e.g. 148",maxLength:5,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono"})]}),o.jsxs("button",{onClick:ye,disabled:K||!k.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blueAlliance text-white font-semibold rounded-lg hover:bg-blueAlliance/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[K?o.jsx(Zs,{size:18,className:"animate-spin"}):o.jsx(Oh,{size:18}),"Join Session"]})]})]})}):K||!X?o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-3",children:[o.jsx(Zs,{size:32,className:"animate-spin text-textSecondary"}),o.jsxs("p",{className:"text-textSecondary",children:["Connecting to session ",t,"..."]}),re&&o.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg mt-4",children:re})]}):o.jsx(fw,{session:X,userId:n?.uid??"",myRole:j,isEditor:S,onMarkPicked:A,onMarkDeclined:D,onUndoStatus:q,onRevealTier3:be,onSetStatus:B,onLeave:Re,onPromote:ce,onDemote:le,onRemoveParticipant:H,onSendMessage:pe}):o.jsx(L5,{onCreateSession:Q,onJoinSession:fe,loading:K,error:re})}function $5(){const{sessionCode:t}=lx(),{user:e,loading:n,signIn:r}=Sy(),i=$e(Q=>Q.eventCode),c=nt(Q=>Q.lastDisplayName),d=nt(Q=>Q.lastTeamNumber),m=nt(Q=>Q.setLastDisplayName),p=nt(Q=>Q.setLastTeamNumber),x=nt(Q=>Q.activeSessionId),y=nt(Q=>Q.setActiveSessionId),v=nt(Q=>Q.setLastSessionCode),[T,I]=E.useState(c),[L,O]=E.useState(d),[k,z]=E.useState(!1),{session:U,loading:$,error:X,myRole:K,isEditor:re,joinSession:j,leaveSession:S,markTeamPicked:C,markTeamDeclined:P,undoTeamStatus:w,revealTier3:A,setSessionStatus:D,promoteToEditor:q,demoteToViewer:be,removeParticipant:B,sendMessage:ce,startListening:le}=hw(e?.uid??null);E.useEffect(()=>{!e&&!n&&r()},[e,n,r]),E.useEffect(()=>{!t||!e||U||$||(x?le(x):z(!0))},[t,e,U,$,x,le]);const H=E.useCallback(async()=>{if(!t||!T.trim()||!e)return;m(T.trim());const Q=L.trim()?parseInt(L.trim(),10):void 0;L.trim()&&p(L.trim()),z(!1);const fe=await j(t,T.trim(),Q&&!isNaN(Q)?Q:void 0);fe&&(v(t),y(fe.sessionId))},[t,T,L,e,j,m,p,v,y]),pe=E.useCallback(()=>{S(),y(null),z(!0)},[S,y]),V=o.jsx("header",{className:"bg-surface border-b border-border sticky top-0 z-50",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xf,{size:24,className:"text-blueAlliance"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold",children:"Alliance Selection"}),o.jsxs("p",{className:"text-textSecondary text-xs",children:["Team 148  ",i]})]})]})})});return n?o.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[V,o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsx(Zs,{size:32,className:"animate-spin text-textSecondary"})})]}):k?o.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[V,o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border w-full max-w-md mx-4",children:[o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Join Session"}),o.jsxs("p",{className:"text-textSecondary text-sm mb-4",children:["Session ",o.jsx("span",{className:"font-mono font-bold text-textPrimary",children:t})]}),X&&o.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-3 py-2 rounded-lg text-sm mb-4",children:X}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Your Name *"}),o.jsx("input",{type:"text",value:T,onChange:Q=>I(Q.target.value),placeholder:"Enter your name",className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Team Number"}),o.jsx("input",{type:"text",value:L,onChange:Q=>O(Q.target.value.replace(/\D/g,"")),placeholder:"e.g. 148",maxLength:5,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success font-mono"})]}),o.jsxs("button",{onClick:H,disabled:$||!T.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blueAlliance text-white font-semibold rounded-lg hover:bg-blueAlliance/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[$?o.jsx(Zs,{size:18,className:"animate-spin"}):o.jsx(Oh,{size:18}),"Join Session"]})]})]})})]}):$||!U?o.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[V,o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-3",children:[o.jsx(Zs,{size:32,className:"animate-spin text-textSecondary"}),o.jsxs("p",{className:"text-textSecondary",children:["Connecting to session ",t,"..."]}),X&&o.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg mt-4",children:X})]})]}):o.jsxs("div",{className:"min-h-screen bg-background text-textPrimary",children:[V,o.jsx("main",{className:"max-w-7xl mx-auto px-4 py-4 md:py-8",children:o.jsx(fw,{session:U,userId:e?.uid??"",myRole:K,isEditor:re,onMarkPicked:C,onMarkDeclined:P,onUndoStatus:w,onRevealTier3:A,onSetStatus:D,onLeave:pe,onPromote:q,onDemote:be,onRemoveParticipant:B,onSendMessage:ce})})]})}const G5=xu()(yu((t,e)=>({entries:[],loading:!1,error:null,lastScoutName:"",setLastScoutName:n=>t({lastScoutName:n}),addEntry:async n=>{t({loading:!0,error:null});try{const r=`${n.eventCode}-${n.teamNumber}`,i={...n,id:r,timestamp:new Date().toISOString()},c=tl(Rr,"pitScouting",r);return await sx(c,i),t(d=>({entries:[...d.entries.filter(m=>m.id!==r),i],loading:!1})),r}catch(r){const i=r instanceof Error?r.message:"Failed to save pit scout entry";throw t({error:i,loading:!1}),r}},updateEntry:async(n,r)=>{t({loading:!0,error:null});try{const i=e().entries.find(m=>m.id===n);if(!i)throw new Error("Entry not found");const c={...i,...r},d=tl(Rr,"pitScouting",n);await sx(d,c),t(m=>({entries:m.entries.map(p=>p.id===n?c:p),loading:!1}))}catch(i){const c=i instanceof Error?i.message:"Failed to update entry";throw t({error:c,loading:!1}),i}},deleteEntry:async n=>{t({loading:!0,error:null});try{const r=e().entries.find(c=>c.id===n);r?.photoPath&&await e().deletePhoto(r.photoPath);const i=tl(Rr,"pitScouting",n);await pL(i),t(c=>({entries:c.entries.filter(d=>d.id!==n),loading:!1}))}catch(r){const i=r instanceof Error?r.message:"Failed to delete entry";throw t({error:i,loading:!1}),r}},uploadPhoto:async(n,r,i)=>{const c=`pitPhotos/${r}/${n}_${Date.now()}.${i.name.split(".").pop()}`,d=hS(mS,c);return await w5(d,i),{url:await A5(d),path:c}},deletePhoto:async n=>{try{const r=hS(mS,n);await C5(r)}catch(r){console.warn("Failed to delete photo:",r)}},loadEntriesFromFirestore:async n=>{t({loading:!0,error:null});try{const r=ex(Rh(Rr,"pitScouting"),tx("eventCode","==",n)),c=(await nx(r)).docs.map(d=>d.data());t({entries:c,loading:!1})}catch(r){const i=r instanceof Error?r.message:"Failed to load entries";throw t({error:i,loading:!1}),r}},getEntryByTeam:n=>e().entries.find(r=>r.teamNumber===n)}),{name:"pit-scout-storage",partialize:t=>({entries:t.entries,lastScoutName:t.lastScoutName})})),K5=(t,e)=>({eventCode:t,teamNumber:0,teamName:"",scoutName:e,photoUrl:null,photoPath:null,driveType:"swerve",fuelIntakeGround:!1,fuelIntakeChute:!0,fuelIntakeOutpost:!1,fuelCapacity:1,fuelCycleTime:0,canScoreActiveHub:!0,canScoreInactiveHub:!1,canCrossBumps:!0,climbLevel:"none",climbTime:0,canAssistClimb:!1,autoMobility:!0,autoFuelCapability:0,autoClimbLevel1:!1,autoNotes:"",coachName:"",batteryCount:4,vibeCheck:"good",specialFeatures:"",concerns:"",notes:""});function Y5(){const t=$e(H=>H.eventCode),e=$e(H=>H.teamStatistics),{entries:n,error:r,lastScoutName:i,setLastScoutName:c,addEntry:d,uploadPhoto:m,loadEntriesFromFirestore:p}=G5(),{user:x,loading:y,signIn:v}=Sy();E.useEffect(()=>{!x&&!y&&v()},[x,y,v]);const[T,I]=E.useState(i),[L,O]=E.useState(!!i),[k,z]=E.useState(null),[U,$]=E.useState(null),[X,K]=E.useState(null),[re,j]=E.useState(null),[S,C]=E.useState(!1),[P,w]=E.useState(!1),A=E.useRef(null),D=E.useRef(null);E.useEffect(()=>{t&&x&&p(t).catch(console.error)},[t,x,p]),E.useEffect(()=>{if(k&&T){const H=n.find(pe=>pe.teamNumber===k);if(H){const{id:pe,timestamp:V,...Q}=H;$(Q),j(H.photoUrl)}else{const pe=e.find(V=>V.teamNumber===k);$({...K5(t,T),teamNumber:k,teamName:pe?.teamName||""}),j(null)}K(null)}},[k,T,t,n,e]);const q=H=>{const pe=H.target.files?.[0];if(pe){K(pe);const V=new FileReader;V.onload=()=>j(V.result),V.readAsDataURL(pe)}},be=async()=>{if(!(!U||!k)){C(!0);try{let H=U.photoUrl,pe=U.photoPath;if(X){const V=await m(k,t,X);H=V.url,pe=V.path}await d({...U,photoUrl:H,photoPath:pe,scoutName:T}),c(T),w(!0),setTimeout(()=>w(!1),2e3)}catch(H){console.error("Failed to save:",H)}finally{C(!1)}}},B=(H,pe)=>{U&&$({...U,[H]:pe})},ce=e.filter(H=>!n.some(pe=>pe.teamNumber===H.teamNumber)),le=e.filter(H=>n.some(pe=>pe.teamNumber===H.teamNumber));if(y)return o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsx(Zs,{size:32,className:"animate-spin text-textSecondary"})});if(!L){const H=()=>{T.trim()&&(O(!0),c(T.trim()))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Pit Scouting"}),o.jsxs("p",{className:"text-textSecondary mt-1",children:["REBUILT 2026  ",t]})]}),o.jsxs("div",{className:"bg-surface p-6 rounded-lg border border-border max-w-md",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"Enter Your Name"}),o.jsx("input",{type:"text",value:T,onChange:pe=>I(pe.target.value),onKeyDown:pe=>pe.key==="Enter"&&H(),placeholder:"Scout name",className:"w-full bg-card border border-border rounded-lg px-4 py-3 text-textPrimary placeholder-textMuted focus:outline-none focus:border-success text-lg",autoFocus:!0}),o.jsx("p",{className:"text-textSecondary text-sm mt-2",children:"Your name will be saved with each pit scout entry."}),o.jsx("button",{onClick:H,disabled:!T.trim(),className:"mt-4 w-full px-4 py-3 bg-success text-background font-bold rounded-lg hover:bg-success/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continue"})]})]})}return k?U?o.jsxs("div",{className:"space-y-4 pb-24",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>z(null),className:"p-2 rounded-lg bg-surfaceElevated hover:bg-interactive transition-colors",children:o.jsx(yR,{size:24})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Team ",k]}),o.jsx("p",{className:"text-textSecondary text-sm",children:U.teamName||"Unknown Team"})]})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"Robot Photo"}),re?o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:re,alt:"Robot",className:"w-full max-h-64 object-contain rounded-lg bg-card"}),o.jsx("button",{onClick:()=>{K(null),j(null),B("photoUrl",null),B("photoPath",null)},className:"absolute top-2 right-2 p-2 bg-danger/90 text-white rounded-lg hover:bg-danger transition-colors",children:o.jsx(Zi,{size:16})})]}):o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>D.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 bg-card border-2 border-dashed border-border rounded-lg hover:border-success hover:bg-success/5 transition-colors",children:[o.jsx(fR,{size:24}),o.jsx("span",{children:"Take Photo"})]}),o.jsxs("button",{onClick:()=>A.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 bg-card border-2 border-dashed border-border rounded-lg hover:border-success hover:bg-success/5 transition-colors",children:[o.jsx(JS,{size:24}),o.jsx("span",{children:"Upload"})]})]}),o.jsx("input",{ref:D,type:"file",accept:"image/*",capture:"environment",onChange:q,className:"hidden"}),o.jsx("input",{ref:A,type:"file",accept:"image/*",onChange:q,className:"hidden"})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"Drive Type *"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:["swerve","tank","mecanum","other"].map(H=>o.jsx("button",{onClick:()=>B("driveType",H),className:`px-4 py-3 rounded-lg border font-semibold capitalize transition-colors ${U.driveType===H?"bg-success/20 border-success text-success":"bg-card border-border hover:border-success"}`,children:H},H))})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"FUEL Intake"}),o.jsx("div",{className:"space-y-2",children:[{key:"fuelIntakeGround",label:"Ground Pickup"},{key:"fuelIntakeChute",label:"From CHUTE (Human Player)"},{key:"fuelIntakeOutpost",label:"From OUTPOST"}].map(({key:H,label:pe})=>o.jsxs("button",{onClick:()=>B(H,!U[H]),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-colors ${U[H]?"bg-success/20 border-success":"bg-card border-border hover:border-textSecondary"}`,children:[o.jsx("span",{children:pe}),o.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${U[H]?"border-success bg-success":"border-textMuted"}`,children:U[H]&&o.jsx(jr,{size:14,className:"text-background"})})]},H))}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Capacity (# FUEL)"}),o.jsx("input",{type:"number",value:U.fuelCapacity,onChange:H=>B("fuelCapacity",parseInt(H.target.value)||0),min:0,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Cycle Time (sec)"}),o.jsx("input",{type:"number",value:U.fuelCycleTime,onChange:H=>B("fuelCycleTime",parseInt(H.target.value)||0),min:0,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]})]})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"Scoring & Obstacles"}),o.jsx("div",{className:"space-y-2",children:[{key:"canScoreActiveHub",label:"Can Score in Active HUB"},{key:"canCrossBumps",label:"Can Cross BUMPS"}].map(({key:H,label:pe})=>o.jsxs("button",{onClick:()=>B(H,!U[H]),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-colors ${U[H]?"bg-success/20 border-success":"bg-card border-border hover:border-textSecondary"}`,children:[o.jsx("span",{children:pe}),o.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${U[H]?"border-success bg-success":"border-textMuted"}`,children:U[H]&&o.jsx(jr,{size:14,className:"text-background"})})]},H))})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"TOWER Climb *"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[{value:"level3",label:"Level 3",points:"30pts"},{value:"level2",label:"Level 2",points:"20pts"},{value:"level1",label:"Level 1",points:"10pts"},{value:"none",label:"None",points:""}].map(({value:H,label:pe,points:V})=>o.jsxs("button",{onClick:()=>B("climbLevel",H),className:`px-4 py-3 rounded-lg border transition-colors ${U.climbLevel===H?"bg-success/20 border-success text-success":"bg-card border-border hover:border-success"}`,children:[o.jsx("div",{className:"font-semibold",children:pe}),o.jsx("div",{className:"text-xs text-textSecondary",children:V})]},H))}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Climb Time (sec)"}),o.jsx("input",{type:"number",value:U.climbTime,onChange:H=>B("climbTime",parseInt(H.target.value)||0),min:0,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]}),o.jsx("button",{onClick:()=>B("canAssistClimb",!U.canAssistClimb),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg border transition-colors ${U.canAssistClimb?"bg-success/20 border-success":"bg-card border-border hover:border-success"}`,children:o.jsx("span",{className:"text-sm",children:"Can Assist Climb"})})]})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"Auto Capabilities"}),o.jsx("div",{className:"space-y-2",children:[{key:"autoMobility",label:"Can Leave Starting Zone"},{key:"autoClimbLevel1",label:"Can Reach LEVEL 1 in Auto"}].map(({key:H,label:pe})=>o.jsxs("button",{onClick:()=>B(H,!U[H]),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-colors ${U[H]?"bg-success/20 border-success":"bg-card border-border hover:border-textSecondary"}`,children:[o.jsx("span",{children:pe}),o.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${U[H]?"border-success bg-success":"border-textMuted"}`,children:U[H]&&o.jsx(jr,{size:14,className:"text-background"})})]},H))}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Auto FUEL Scored (typical)"}),o.jsx("input",{type:"number",value:U.autoFuelCapability,onChange:H=>B("autoFuelCapability",parseInt(H.target.value)||0),min:0,max:50,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary"})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Auto Notes"}),o.jsx("textarea",{value:U.autoNotes,onChange:H=>B("autoNotes",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Starting positions, paths, etc."})]})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"General Info"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Coach Name *"}),o.jsx("input",{type:"text",value:U.coachName,onChange:H=>B("coachName",H.target.value),className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary",placeholder:"Enter coach name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Number of Batteries"}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:[1,2,3,4,5,6,7].map(H=>o.jsxs("button",{onClick:()=>B("batteryCount",H),className:`w-10 h-10 rounded-lg border font-bold transition-colors ${U.batteryCount===H?"bg-success/20 border-success text-success":"bg-card border-border hover:border-success"}`,children:[H,H===7?"+":""]},H))})]})]})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"Vibe Check *"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"good",label:"",color:"success"},{value:"bad",label:"",color:"danger"}].map(({value:H,label:pe,color:V})=>o.jsx("button",{onClick:()=>B("vibeCheck",H),className:`px-6 py-4 rounded-lg border text-3xl font-bold transition-colors ${U.vibeCheck===H?V==="success"?"bg-success/20 border-success text-success":"bg-danger/20 border-danger text-danger":"bg-card border-border hover:border-textSecondary"}`,children:pe},H))})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsx("h2",{className:"font-bold mb-3",children:"Additional Notes"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Special Features"}),o.jsx("textarea",{value:U.specialFeatures,onChange:H=>B("specialFeatures",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Unique capabilities, mechanisms..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Concerns"}),o.jsx("textarea",{value:U.concerns,onChange:H=>B("concerns",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Issues observed, reliability concerns..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-textSecondary block mb-1",children:"Other Notes"}),o.jsx("textarea",{value:U.notes,onChange:H=>B("notes",H.target.value),rows:2,className:"w-full bg-card border border-border rounded-lg px-3 py-2 text-textPrimary resize-none",placeholder:"Anything else..."})]})]})]}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background border-t border-border",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx("button",{onClick:be,disabled:S||!U.coachName.trim(),className:`w-full flex items-center justify-center gap-2 px-6 py-4 font-bold text-lg rounded-lg transition-colors ${P?"bg-success text-background":"bg-success text-background hover:bg-success/90 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:S?o.jsx(Zs,{size:24,className:"animate-spin"}):P?o.jsxs(o.Fragment,{children:[o.jsx(jr,{size:24}),"Saved!"]}):o.jsxs(o.Fragment,{children:[o.jsx(QS,{size:24}),"Save Entry"]})})})})]}):o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsx(Zs,{size:32,className:"animate-spin text-textSecondary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Pit Scouting"}),o.jsxs("p",{className:"text-textSecondary mt-1",children:["Scout: ",o.jsx("span",{className:"text-textPrimary font-semibold",children:T}),o.jsx("button",{onClick:()=>O(!1),className:"text-blueAlliance ml-2 text-sm",children:"(change)"})]})]}),r&&o.jsx("div",{className:"bg-danger/10 border border-danger/30 text-danger px-4 py-3 rounded-lg",children:r}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-textSecondary",children:"Progress"}),o.jsxs("span",{className:"font-bold",children:[n.length," / ",e.length]})]}),o.jsx("div",{className:"w-full bg-card rounded-full h-2",children:o.jsx("div",{className:"bg-success h-2 rounded-full transition-all",style:{width:`${n.length/e.length*100}%`}})})]}),o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsxs("h2",{className:"text-lg font-bold mb-3",children:["Unscouted Teams (",ce.length,")"]}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:ce.map(H=>o.jsx("button",{onClick:()=>z(H.teamNumber),className:"px-3 py-2 bg-card border border-border rounded-lg hover:bg-interactive hover:border-success transition-colors text-center",children:o.jsx("span",{className:"font-bold",children:H.teamNumber})},H.teamNumber))}),ce.length===0&&o.jsx("p",{className:"text-textSecondary text-center py-4",children:"All teams scouted!"})]}),le.length>0&&o.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[o.jsxs("h2",{className:"text-lg font-bold mb-3",children:["Scouted Teams (",le.length,")"]}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:le.map(H=>o.jsx("button",{onClick:()=>z(H.teamNumber),className:"px-3 py-2 bg-success/10 border border-success/30 rounded-lg hover:bg-success/20 transition-colors text-center",children:o.jsx("span",{className:"font-bold text-success",children:H.teamNumber})},H.teamNumber))})]})]})}function Q5(){const t=$e(e=>e.loadMockData);return E.useEffect(()=>{t().catch(e=>{console.error("Failed to load mock data:",e)})},[t]),o.jsx(NC,{basename:"/frc-2026-analytics",children:o.jsxs(ZA,{children:[o.jsx(cs,{path:"/alliance-selection/join/:sessionCode",element:o.jsx($5,{})}),o.jsxs(cs,{element:o.jsx(sk,{}),children:[o.jsx(cs,{path:"/",element:o.jsx(ok,{})}),o.jsx(cs,{path:"/teams",element:o.jsx(rk,{})}),o.jsx(cs,{path:"/teams/:teamNumber",element:o.jsx(uk,{})}),o.jsx(cs,{path:"/compare",element:o.jsx(ik,{})}),o.jsx(cs,{path:"/picklist",element:o.jsx(c4,{})}),o.jsx(cs,{path:"/predict",element:o.jsx(f4,{})}),o.jsx(cs,{path:"/alliance-selection",element:o.jsx(xS,{})}),o.jsx(cs,{path:"/alliance-selection/:sessionCode",element:o.jsx(xS,{})}),o.jsx(cs,{path:"/pit-scouting",element:o.jsx(Y5,{})}),o.jsx(cs,{path:"/event",element:o.jsx(h4,{})}),o.jsx(cs,{path:"/metrics",element:o.jsx(u4,{})})]})]})})}Z2.createRoot(document.getElementById("root")).render(o.jsx(E.StrictMode,{children:o.jsx(Q5,{})}));
